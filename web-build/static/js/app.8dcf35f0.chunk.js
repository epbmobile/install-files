(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{321:function(e,t,r){e.exports=r.p+"static/media/logo-small-light.2b420db1.png"},352:function(e,t,r){e.exports=r.p+"static/media/paynow.c9b5960d.png"},362:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return wn}));var n=r(31),a=r.n(n),l=r(8),o=r.n(l),s=r(9),i=r.n(s),c=r(12),d=r.n(c),u=r(13),f=r.n(u),h=r(5),y=r.n(h),b=r(2),p=r(363),m=r(10),g=r(1),j=r(17),x=r(498),v=r(497),T=r(149),O=r(6),S=r.n(O),I=r(43),C=r(94),F=r(15),P=r.n(F),R=r(20),w=r.n(R),k=r(22),E=r.n(k),B=r(7),D=r.n(B),U=r(485),A=r(486),V=r(487),M=r(4),z=r(48),N=r(18),L=r(65),K=r(364),G=r(41),H=r(23),Y=r.n(H),W=r(24),q=r.n(W),J=r(3),Q=r(0),X=["style","children"];function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t,r,n=e.style,a=e.children,l=q()(e,X),o=n;return Array.isArray(n)&&(o={},n.forEach((function(e){o=Y()(o,e)}))),Object(Q.jsx)(J.default,Z(Z({style:Z(Z({},o),{},{fontSize:(null==(t=o)?void 0:t.fontSize)||14,fontFamily:(null==(r=o)?void 0:r.fontFamily)||"varela-round"})},l),{},{children:a}))}function ee(e,t,r,n,a,l,o){fetch(e+"api/debug/",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({msg1:t,msg2:r,msg3:n,msg4:a,msg5:l,msg6:o})})}var te={vacant:"#30BEAE",reserved:"#FFB86F",occupied:"#2A79A8",paid:"#E84855",unavailable:"#424549",adhoc:"#7a4988",deposit:"#d65c91",grey1:"#23272A",grey2:"#2C2F33",grey3:"#36393E",grey4:"#424549",grey5:"#99aab5",grey7:"#E3E5E8",grey8:"#EBEDEF",grey9:"#F2F3F5",size:"web"===j.default.OS?5:4,black8:"#000000aa",white8:"#ffffffcc"},re=r(321),ne=r.n(re),ae=r(11),le=r.n(ae);function oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var se=function(e){d()(r,e);var t=oe(r);function r(e){return o()(this,r),t.call(this,e)}return i()(r,[{key:"render",value:function(){var e=this;return console.log("in overlayproceduremessage",this.props),Object(Q.jsx)(g.default,{style:ie.overlay,children:Object(Q.jsxs)(g.default,{style:ie.overlayContent,children:[Object(Q.jsxs)(g.default,{style:ie.overlayHeader,children:[Object(Q.jsx)(J.default,{style:ie.overlayTitleText,children:"WARNING"}),Object(Q.jsx)(J.default,{style:[ie.overlaySubtitleText,{color:te.paid}],children:"Procedure Message"}),Object(Q.jsx)(J.default,{style:ie.overlayText,children:this.props.text.toUpperCase()})]}),Object(Q.jsx)(M.default,{style:ie.overlayOption,onPress:function(){return e.props.handleUpdateFromProcedureMessage("")},children:Object(Q.jsx)(J.default,{style:ie.overlayOptionText,children:"OK"})})]})})}}]),r}(b.Component),ie=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:3,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var de=function(e){d()(r,e);var t=ce(r);function r(e){return o()(this,r),t.call(this,e)}return i()(r,[{key:"render",value:function(){var e=this;return console.log("in overlaylanguage",this.props),Object(Q.jsx)(g.default,{style:ue.overlay,children:Object(Q.jsxs)(g.default,{style:ue.overlayContent,children:[Object(Q.jsxs)(g.default,{style:ue.overlayHeader,children:[Object(Q.jsx)(J.default,{style:ue.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:ue.overlaySubtitleText,children:"Language \u8bed\u8a00 \u30e9\u30f3\u30b2\u30fc\u30b8"})]}),Object(Q.jsxs)(g.default,{style:ue.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:ue.button,onPress:function(){return e.props.handleUpdateFromLanguage("en")},children:[Object(Q.jsx)(J.default,{style:{marginTop:5,color:"white",fontFamily:"varela-round",fontSize:24},children:"Aa"}),Object(Q.jsx)(J.default,{style:[ue.buttonText],children:"ENGLISH"})]}),Object(Q.jsxs)(M.default,{style:ue.button,onPress:function(){return e.props.handleUpdateFromLanguage("zhs")},children:[Object(Q.jsx)(J.default,{style:{color:"white",fontFamily:"varela-round",fontSize:24},children:"\u7b80\u4f53"}),Object(Q.jsx)(J.default,{style:[ue.buttonText],children:"\u7b80\u4f53\u4e2d\u6587"})]})]}),Object(Q.jsxs)(g.default,{style:ue.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:ue.button,onPress:function(){return e.props.handleUpdateFromLanguage("zht")},children:[Object(Q.jsx)(J.default,{style:{color:"white",fontFamily:"varela-round",fontSize:24},children:"\u7e41\u9ad4"}),Object(Q.jsx)(J.default,{style:ue.buttonText,children:"\u7e41\u9ad4\u4e2d\u6587"})]}),Object(Q.jsxs)(M.default,{style:ue.button,onPress:function(){return e.props.handleUpdateFromLanguage("ja")},children:[Object(Q.jsx)(J.default,{style:{color:"white",fontFamily:"varela-round",fontSize:24},children:"\u65e5\u672c\u8a9e"}),Object(Q.jsx)(J.default,{style:ue.buttonText,children:"\u65e5\u672c\u8a9e"})]})]}),Object(Q.jsx)(M.default,{style:[ue.overlayOption,{backgroundColor:te.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromLanguage("")},children:Object(Q.jsx)(J.default,{style:ue.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),ue=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var be=function(e){d()(r,e);var t=ye(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={beacon:"http://203.208.248.200:8080/epb-beacon-web/beacon/Epbmas/register",savedEntries:[],preference:null,language:"-",serviceEntry:"",accessCode:"",password:"",userId:"",epbId:"",ipPort:"",home:null,dev:!1},n.handleUpdateFromLanguage=n.handleUpdateFromLanguage.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=a()((function*(){var e=this,t=this.props.navigation;this.sub=t.addListener("focus",this.didFocus.bind(this));var r=yield I.default.getItem("serviceEntry"),n=yield I.default.getItem("language"),a=yield I.default.getItem("preference");a?a=JSON.parse(a):(a={tcolsize:"web"===j.default.OS?5:4,mcolsize:"web"===j.default.OS?3:2,mquick:"Y"},I.default.setItem("preference",JSON.stringify(a))),console.log("mounting service",r);var l=yield I.default.getItem("savedEntries");l=l?JSON.parse(l):[],this.setState({preference:a,serviceEntry:r,language:n||"en",savedEntries:l,mode:r?"LOGIN":"BEACON"}),this.state.dev&&this.setState({accessCode:"qwe"},(function(){return e.doSubmitAccessCode()}))}));return function(){return e.apply(this,arguments)}}()},{key:"didFocus",value:function(){var e=a()((function*(){var e,t=this.props.route,r=yield I.default.getItem("preference");r&&this.setState({preference:JSON.parse(r)}),null!=(e=t.params)&&e.sync&&le()(t.params.sync).diff(le()(),"seconds")>-1?this.doSubmitAccessCode():this.state.dev||this.setState({accessCode:""})}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.sub()}},{key:"handleUpdateFromLanguage",value:function(e){this.setState({overlayLanguageVisible:!1}),e&&(S.a.options.currentLocale=e,I.default.setItem("language",e),this.setState({language:e}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"doPressMode",value:function(){var e=this.state.mode;"LOGIN"===e?this.setState({mode:"BEACON"}):"BEACON"===e?this.setState({mode:"URL"}):this.setState({mode:"BEACON"})}},{key:"doPressDownload",value:function(){var e=this;L.default.alert("Download latest bistro app?","",[{text:"Cancel"},{text:"Ok",onPress:function(){return e.doDownload()}}])}},{key:"doDownload",value:function(){"ios"===j.default.OS&&K.openURL("itms-apps://itunes.apple.com/app/id6443468946")}},{key:"doSubmitSavedEntry",value:function(e){var t=this;e.epbId?this.setState({epbId:e.epbId},(function(){return t.doSubmitEpbId()})):this.doSubmitIpPort(e.restServiceUrl)}},{key:"doSubmitEpbId",value:function(){var e=this,t=this.state,r=t.epbId,n=t.beacon;if("fnb"===r){var a={restServiceUrl:"https://www.epbrowser.com:8090/fnb-ws/",name:"Studio",epbId:"fnb"};return this.doAddSaveEntry(a),this.setState({serviceEntry:a.restServiceUrl,mode:"LOGIN"}),I.default.setItem("serviceEntry",a.restServiceUrl)}var l=n,o=new URLSearchParams;o.append("epbId",r),o.append("deviceId","X"),l+="?"+o,this.setState({epbId:""}),fetch(l,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(t){return console.log("response",t),e.doAddSaveEntry(t),e.setState({serviceEntry:t.restServiceUrl,mode:"LOGIN"}),I.default.setItem("serviceEntry",t.restServiceUrl)})).catch((function(t){console.log("error",t),e.setState({overlayProcedureMessageVisible:"INVALID EPB ID"})}))}},{key:"doSubmitIpPort",value:function(e){var t,r=this.state.ipPort;t=e||"http://"+r+"/",this.doAddSaveEntry({restServiceUrl:t}),I.default.setItem("serviceEntry",t),this.setState({serviceEntry:t,mode:"LOGIN"})}},{key:"doSubmitPassword",value:function(){var e=this.state,t=e.serviceEntry+"api/login-shop",r={userId:e.userId,password:e.password};this.doLogIn(t,r)}},{key:"doSubmitAccessCode",value:function(){var e=this.state,t=e.serviceEntry+"api/login-shop",r={accessCode:e.accessCode};this.doLogIn(t,r)}},{key:"doLogIn",value:function(){var e=a()((function*(e,t){var r=this,n=this.props.navigation,a=this.state.serviceEntry;fetch(e,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(console.log("post login",e),e.message)throw r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}),e;return r.setState({home:e}),Promise.all([I.default.setItem("home",JSON.stringify(e)),e])})).then((function(e){var t=E()(e,2),r=(t[0],t[1]),n=[],l=a+"api/sections",o=new URLSearchParams;o.append("shopId",r.shopId);var s={url:l+="?"+o,nameString:"sections"};return n.push(s),l=a+"api/tablemas",(o=new URLSearchParams).append("shopId",r.shopId),s={url:l+="?"+o,nameString:"tablemas"},n.push(s),l=a+"api/foldergrps",(o=new URLSearchParams).append("orgId",r.orgId),o.append("shopId",r.shopId),s={url:l+="?"+o,nameString:"foldergrps"},n.push(s),l=a+"api/folders",(o=new URLSearchParams).append("shopId",r.shopId),o.append("orgId",r.orgId),s={url:l+="?"+o,nameString:"folders"},n.push(s),l=a+"api/menus",(o=new URLSearchParams).append("orgId",r.orgId),o.append("shopId",r.shopId),s={url:l+="?"+o,nameString:"menus"},n.push(s),l=a+"api/mods",(o=new URLSearchParams).append("orgId",r.orgId),s={url:l+="?"+o,nameString:"mods"},n.push(s),l=a+"api/mod-bundles",(o=new URLSearchParams).append("orgId",r.orgId),s={url:l+="?"+o,nameString:"modBundles"},n.push(s),l=a+"api/combo-items",(o=new URLSearchParams).append("orgId",r.orgId),s={url:l+="?"+o,nameString:"comboItems"},n.push(s),l=a+"api/combo-groups",(o=new URLSearchParams).append("orgId",r.orgId),s={url:l+="?"+o,nameString:"comboGroups"},n.push(s),l=a+"api/payment-methods",(o=new URLSearchParams).append("shopId",r.shopId),s={url:l+="?"+o,nameString:"paymentMethods"},n.push(s),s={url:l=a+"api/vip-sources",nameString:"vipSources"},n.push(s),l=a+"api/discounts",(o=new URLSearchParams).append("shopId",r.shopId),o.append("orgId",r.orgId),s={url:l+="?"+o,nameString:"discounts"},n.push(s),s={url:l=a+"api/returns",nameString:"returns"},n.push(s),l=a+"api/settings",(o=new URLSearchParams).append("appCode","RESTMENU"),o.append("orgId",r.orgId),s={url:l+="?"+o,nameString:"settings"},n.push(s),l=a+"api/privileges",(o=new URLSearchParams).append("userId",r.userId),o.append("locId",r.locId),s={url:l+="?"+o,nameString:"privileges"},n.push(s),l=a+"api/cashier-printers",(o=new URLSearchParams).append("shopId",r.shopId),s={url:l+="?"+o,nameString:"cashierPrinters"},n.push(s),l=a+"api/kottype",(o=new URLSearchParams).append("shopId",r.shopId),s={url:l+="?"+o,nameString:"kottypes"},n.push(s),l=a+"api/kitchenmsgs",(o=new URLSearchParams).append("orgId",r.orgId),o.append("shopId",r.shopId),s={url:l+="?"+o,nameString:"kitchenmsgs"},n.push(s),Promise.all(w()(n.map((function(e){return fetch(e.url).then((function(e){return e.json()})).then((function(t){return console.log("fetching",e.nameString,t),P()({},e.nameString,t)}))}))))})).then((function(e){var t=e.reduce((function(e,t){return he(he({},e),{},P()({},Object.keys(t)[0],Object.values(t)[0]))}),{});console.log("masters",t),n.navigate("Main",{masters:t,home:r.state.home,serviceEntry:r.state.serviceEntry,preference:r.state.preference})})).catch((function(e){console.log("error",e),r.setState({accessCode:""})}))}));return function(t,r){return e.apply(this,arguments)}}()},{key:"doAddSaveEntry",value:function(){var e=a()((function*(e){var t=this.state.savedEntries;t.length<3&&!t.some((function(t){return t.restServiceUrl===e.restServiceUrl}))&&(t.push(e),this.setState({savedEntries:t}),yield I.default.setItem("savedEntries",JSON.stringify(t)))}));return function(t){return e.apply(this,arguments)}}()},{key:"doRemoveSavedEntry",value:function(e){var t=this.state.savedEntries;t=t.filter((function(t){return t.restServiceUrl!==e.restServiceUrl})),this.setState({savedEntries:t}),I.default.setItem("savedEntries",JSON.stringify(t))}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.navigation,a=(r.route,this.state),l=a.savedEntries,o=a.serviceEntry,s=a.language,i=a.mode,c=a.epbId,d=a.ipPort,u=(a.userId,a.password,a.accessCode),f=a.overlayProcedureMessageVisible,h=a.overlayLanguageVisible;return Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row"},children:[h&&Object(Q.jsx)(de,{handleUpdateFromLanguage:this.handleUpdateFromLanguage}),f&&Object(Q.jsx)(se,{text:f,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsxs)(g.default,{style:{flex:1,backgroundColor:"white"},children:[Object(Q.jsxs)(g.default,{style:{flex:2},children:[Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsxs)(g.default,{children:[Object(Q.jsx)(M.default,{style:{margin:20,height:36,width:36,borderRadius:18,justifyContent:"center",alignItems:"center",backgroundColor:te.paid},onPress:function(){return t.doPressMode()},children:"URL"===i?Object(Q.jsx)(U.default,{name:"wifi",size:24,color:te.grey1,style:{height:24,width:24}}):Object(Q.jsx)(A.default,{name:"ios-globe",size:24,color:te.grey1,style:{height:24,width:24,marginTop:-2}})}),Object(Q.jsx)(M.default,{style:{marginHorizontal:20,height:36,width:36,borderRadius:18,justifyContent:"center",alignItems:"center",backgroundColor:te.reserved},onPress:function(){return n.navigate("Preference")},children:Object(Q.jsx)(V.default,{name:"miscellaneous-services",size:24,color:te.grey1})}),"ios"===j.default.OS&&Object(Q.jsx)(M.default,{style:{margin:20,height:36,width:36,borderRadius:18,justifyContent:"center",alignItems:"center",backgroundColor:te.occupied},onPress:function(){return t.doPressDownload()},children:Object(Q.jsx)(U.default,{name:"clouddownload",size:24,color:te.grey1})})]}),Object(Q.jsx)(g.default,{style:{margin:20},children:l.map((function(e,r){return Object(Q.jsxs)(g.default,{style:{marginBottom:20,minHeight:40},children:[Object(Q.jsxs)(M.default,{style:{alignItems:"flex-end"},onPress:function(){return t.doSubmitSavedEntry(e)},children:[Object(Q.jsx)(_,{style:{color:e.restServiceUrl===o?te.paid:"black"},children:e.name||"Entry"}),Object(Q.jsx)(_,{style:{color:e.restServiceUrl===o?te.occupied:"black",fontSize:10},children:e.restServiceUrl})]}),Object(Q.jsx)(M.default,{style:{alignItems:"flex-end",marginTop:5},onPress:function(){return t.doRemoveSavedEntry(e)},children:Object(Q.jsx)(_,{style:{fontSize:10,color:te.grey7,textTransform:"uppercase"},children:S.a.get("remove")})})]},r)}))})]}),Object(Q.jsxs)(g.default,{style:{margin:20,alignItems:"flex-end",justifyContent:"flex-end"},children:[Object(Q.jsx)(_,{style:{fontSize:10,marginBottom:5},numberOfLines:1,children:o}),Object(Q.jsx)(_,{style:{fontSize:18},children:"AN EXTENSION OF THE EPB SYSTEM"}),Object(Q.jsxs)(_,{style:{fontSize:18},children:["VERSION ",null==(e=G.default.manifest.version)?void 0:e.split(".")[0]]})]})]}),Object(Q.jsx)(z.default,{style:{flex:1,width:"100%"},source:ne.a,resizeMode:"contain"})]}),Object(Q.jsxs)(g.default,{style:{flex:1,backgroundColor:te.grey1,justifyContent:"center",alignItems:"center"},children:[Object(Q.jsxs)(M.default,{style:{position:"absolute",right:20,top:20,minHeight:40,alignItems:"flex-end"},onPress:function(){return t.setState({overlayLanguageVisible:!0})},children:[Object(Q.jsx)(_,{style:{color:"white",textTransform:"uppercase"},children:"ja"===s?"\u65e5\u672c\u8a9e":"zhs"===s?"\u7b80\u4f53\u4e2d\u6587":"zht"===s?"\u7e41\u9ad4\u4e2d\u6587":"EN"}),Object(Q.jsx)(_,{style:{color:"white",fontSize:10},children:"LANGUAGE \u8bed\u8a00 \u30e9\u30f3\u30b2\u30fc\u30b8"})]}),"LOGIN"===i?Object(Q.jsx)(N.default,{style:pe.textInput,placeholder:S.a.get("accesscode"),placeholderTextColor:"white",placeholderStyle:{textTransform:"uppercase"},onChangeText:function(e){return t.setState({accessCode:e})},value:u,secureTextEntry:!0,autoComplete:"off",autoCorrect:!1,onSubmitEditing:function(){return t.doSubmitAccessCode()}}):"BEACON"===i?Object(Q.jsx)(N.default,{style:pe.textInput,placeholder:"EPB ID",placeholderTextColor:"white",secureTextEntry:!1,autoComplete:"off",autoCorrect:!1,onChangeText:function(e){return t.setState({epbId:e})},value:c,onSubmitEditing:function(){return t.doSubmitEpbId()}}):Object(Q.jsx)(N.default,{style:pe.textInput,placeholder:"IP:PORT",placeholderTextColor:"white",secureTextEntry:!1,autoComplete:"off",autoCorrect:!1,onChangeText:function(e){return t.setState({ipPort:e})},value:d,onSubmitEditing:function(){return t.doSubmitIpPort()}})]})]})}}]),r}(b.Component),pe=m.default.create({textInput:{color:"white",height:60,borderRadius:30,width:"90%",alignItems:"center",justifyContent:"center",marginBottom:200,textAlign:"center",fontFamily:"varela-round",fontSize:24}}),me=r(26),ge=r(495),je=r(496),xe=r(488),ve=r(490),Te=r(35),Oe=r.n(Te),Se=r(489),Ie=r(19);function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Fe=function(e){d()(r,e);var t=Ce(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,preference:e.preference,settings:e.masters.settings,sections:e.masters.sections||[],tablemas:e.masters.tablemas,tables:[],floorWidth:null,selectedSection:null,focused:null},n}return i()(r,[{key:"componentDidMount",value:function(){return Oe.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.a.awrap(this.doRefresh(!0));case 2:case"end":return e.stop()}}),null,this,null,Promise)}},{key:"componentDidUpdate",value:function(e){e.refresh&&e.refresh!==this.props.refresh&&(console.log("componentDidUpdate",e.refresh,this.props.refresh),this.setState({focused:null}),this.doRefresh())}},{key:"doRefresh",value:function(e){var t,r,n;return Oe.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=this.state,r=t.sections,n=t.selectedSection,!e){a.next=11;break}if(!(r.length>0)){a.next=7;break}return a.next=5,Oe.a.awrap(this.doPressFloor());case 5:a.next=9;break;case 7:return a.next=9,Oe.a.awrap(this.doPressSection({sectionId:"SYS"}));case 9:a.next=22;break;case 11:if("FLOOR"!==(null==n?void 0:n.sectionId)){a.next=16;break}return a.next=14,Oe.a.awrap(this.doPressFloor());case 14:a.next=22;break;case 16:if(!n){a.next=21;break}return a.next=19,Oe.a.awrap(this.doPressSection(n));case 19:a.next=22;break;case 21:this.doRefresh(!0);case 22:case"end":return a.stop()}}),null,this,null,Promise)}},{key:"doPressFloor",value:function(){var e,t,r,n,a,l=this;return Oe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:e=this.state,t=e.serviceEntry,r=e.home,e.selectedTable,n=t+"api/tables",(a=new URLSearchParams).append("shopId",r.shopId),a.append("tableFlg","Y"),n+="?"+a,fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){l.setState({tables:e,selectedSection:{sectionId:"FLOOR"}})}));case 7:case"end":return o.stop()}}),null,this,null,Promise)}},{key:"doPressSection",value:function(e){var t,r,n,a,l,o=this;return Oe.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:t=this.state,r=t.serviceEntry,n=t.home,t.selectedTable,a=r+"api/tables",(l=new URLSearchParams).append("shopId",n.shopId),"OCCUPIED"===(null==e?void 0:e.sectionId)?(l.append("statusFlg","C"),l.append("tableFlg","Y")):"RESERVED"===(null==e?void 0:e.sectionId)?l.append("statusFlg","B"):"SYS"===(null==e?void 0:e.sectionId)?(l.append("sectionId",e.sectionId),l.append("statusFlg","C")):l.append("sectionId",e.sectionId),a+="?"+l,fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){o.setState({tables:t,selectedSection:{sectionId:e.sectionId}})}));case 7:case"end":return s.stop()}}),null,this,null,Promise)}},{key:"doPressTable",value:function(e){var t=this.state,r=t.focused,n=t.selectedSection;if((null==r?void 0:r.tableId)===e.tableId)return this.setState({focused:null}),void this.doPressFocusedTable(e);"SYS"!==e.sectionId&&(this.doPressSection(n),this.setState({focused:e})),this.props.handlePressTable(e)}},{key:"doPressFloorTable",value:function(e){var t=this.state,r=t.tables,n=t.focused;if((null==n?void 0:n.tableId)===e.tableId)return this.setState({focused:null}),void this.doPressFocusedTable(r.find((function(t){return t.tableId===e.tableId})));this.doPressFloor(),this.setState({focused:e}),this.props.handlePressTable(r.find((function(t){return t.tableId===e.tableId})))}},{key:"doPressFocusedTable",value:function(e){"A"===e.statusFlg?this.props.handleActionTable(e,"OPEN"):"C"===e.statusFlg&&this.props.handleActionTable(e,"EDIT")}},{key:"doTranslateTableColor",value:function(e){return e?e.adhocItem?te.adhoc:"SYS"===e.sectionId?"D"===e.statusFlg?te.paid:"A"===e.transType?te.grey5:te.deposit:"A"===e.statusFlg?te.vacant:"B"===e.statusFlg?te.reserved:"C"===e.statusFlg?te.occupied:"D"===e.statusFlg?te.paid:"E"===e.statusFlg?te.unavailable:void 0:te.grey9}},{key:"doTranslateFloorTableColor",value:function(e){var t=this.state.tables;return this.doTranslateTableColor(t.find((function(t){return t.tableId===e.tableId})))}},{key:"doLayout",value:function(e){this.setState({floorWidth:e.nativeEvent.layout.width/16})}},{key:"render",value:function(){var e=this,t=this.state,r=t.preference,n=t.sections,a=(t.settings,t.tables),l=t.selectedSection;return Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",backgroundColor:te.grey1,padding:5},children:[Object(Q.jsx)(g.default,{style:{flex:1,margin:5,backgroundColor:te.grey2,borderRadius:5},children:"FLOOR"===(null==l?void 0:l.sectionId)?this.renderFloor():Object(Q.jsx)(Ie.default,{style:{flex:1,padding:3},showsVerticalScrollIndicator:!1,numColumns:r.tcolsize,horizontal:!1,data:"SYS"===(null==l?void 0:l.sectionId)?[{recKey:-999}].concat(w()(a)):a,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(t){var r=t.item,n=t.index;return e.renderTable(r,n)},initialNumToRender:25})}),Object(Q.jsxs)(g.default,{style:{margin:5,width:120},children:[Object(Q.jsxs)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:80,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressFloor()},children:[Object(Q.jsx)(xe.default,{name:"mapbox",size:30,color:"white",style:{height:28}}),Object(Q.jsx)(J.default,{style:{marginTop:10,fontFamily:"varela-round",color:"white",fontSize:10,textTransform:"uppercase"},children:S.a.get("floorplan")})]}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:te.paid,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection({sectionId:"SYS"})},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:S.a.get("takeaway")})}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:te.reserved,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection({sectionId:"RESERVED"})},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:S.a.get("B")})}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:te.occupied,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection({sectionId:"OCCUPIED"})},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:S.a.get("C")})}),n&&Object(Q.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:n.map((function(t,r){return Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:(null==l?void 0:l.sectionId)===t.sectionId?"white":te.grey1,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection(t)},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:(null==l?void 0:l.sectionId)===t.sectionId?"black":"white"},children:t.name})},r)}))})]})]})}},{key:"renderTable",value:function(e,t){var r=this,n=this.state,a=n.selectedSection,l=n.preference,o=n.focused;return"SYS"===(null==a?void 0:a.sectionId)&&0===t?Object(Q.jsx)(M.default,{style:{flex:1/l.tcolsize,aspectRatio:1},onPress:function(){return r.props.handleActionTable(null,"CREATE")},children:Object(Q.jsx)(g.default,{style:{flex:1,margin:3,backgroundColor:te.grey4,justifyContent:"center",alignItems:"center"},children:Object(Q.jsx)(U.default,{name:"pluscircleo",size:36,color:te.grey1})})}):Object(Q.jsxs)(M.default,{style:{flex:1/l.tcolsize,aspectRatio:1},disabled:!e.tableId,onPress:function(){return r.doPressTable(e)},children:[Object(Q.jsxs)(g.default,{style:{flex:1,margin:3,backgroundColor:this.doTranslateTableColor(e),justifyContent:"center",alignItems:"center"},children:[e.seatTime&&Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",position:"absolute",top:5,left:5,color:"black",fontSize:4*te.size},children:le()(e.seatTime).format("HH:mm")}),"SYS"!==e.sectionId&&e.pax>0&&Object(Q.jsxs)(J.default,{style:{fontFamily:"varela-round",position:"absolute",top:5,right:5,color:"white",fontSize:4*te.size},children:[e.pax," ",Object(Q.jsx)(Se.default,{color:"white",name:"users",size:4*te.size})]}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"rgba(0,0,0,0.8)",fontSize:22,letterSpacing:1},children:e.tableId}),e.vipName&&Object(Q.jsx)(J.default,{style:[Pe.tableLowerBand],children:e.vipName}),e.grandTotal>0&&Object(Q.jsxs)(J.default,{style:{fontFamily:"varela-round",position:"absolute",bottom:5,right:5,color:"black",fontSize:4*te.size},children:["$",e.grandTotal]})]}),(null==o?void 0:o.tableId)===e.tableId&&Object(Q.jsxs)(g.default,{style:{position:"absolute",top:3,left:3,right:3,bottom:3,backgroundColor:"white",alignItems:"center",justifyContent:"center"},children:[("A"===e.statusFlg||"C"===e.statusFlg)&&Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"black",fontSize:10,textTransform:"uppercase"},children:S.a.get("press")}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"rgba(0,0,0,0.8)",fontSize:22,letterSpacing:1},children:e.tableId}),"A"===e.statusFlg?Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"black",fontSize:10,textTransform:"uppercase"},children:S.a.get("open")}):"C"===e.statusFlg?Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"black",fontSize:10,textTransform:"uppercase"},children:S.a.get("edit")}):null]})]})}},{key:"renderFloor",value:function(){var e=this,t=this.state,r=(t.home,t.tablemas),n=t.tables,a=t.floorWidth,l=t.focused;return Object(Q.jsxs)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[Object(Q.jsxs)(g.default,{style:{flex:1,aspectRatio:1,backgroundColor:te.grey1,overflow:"hidden",borderRadius:5},children:[Object(Q.jsx)(g.default,{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(Q.jsxs)(g.default,{style:{flex:1,justifyContent:"space-between"},children:[Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{height:6,backgroundColor:te.grey2}})]})}),Object(Q.jsx)(g.default,{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}}),Object(Q.jsx)(g.default,{style:{width:6,backgroundColor:te.grey2}})]})}),Object(Q.jsx)(g.default,{style:{flex:1,margin:3},onLayout:function(t){return e.doLayout(t)},children:a&&r.map((function(t){return Object(Q.jsx)(g.default,{style:{position:"absolute",left:t.xaxis*a,top:Number(t.yaxis*a),width:t.width*a,height:Number(t.height*a)},children:"B"===t.shape?Object(Q.jsx)(M.default,{style:{flex:1,alignItems:"center",justifyContent:"center",borderRadius:"C"===t.shape?a*t.height:0},onPress:function(){return e.doPressFloorTable(t)},children:Object(Q.jsx)(g.default,{style:{height:Math.sqrt(.5)*(t.width*a-6),width:Math.sqrt(.5)*(t.width*a-6),backgroundColor:(null==l?void 0:l.tableId)===t.tableId?"white":e.doTranslateFloorTableColor(t),transform:[{rotateZ:"45deg"}],justifyContent:"center",alignItems:"center"},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.black8,fontSize:20,transform:[{rotateZ:"-45deg"}]},children:t.tableId})})}):Object(Q.jsx)(M.default,{style:{flex:1,margin:3,backgroundColor:(null==l?void 0:l.tableId)===t.tableId?"white":e.doTranslateFloorTableColor(t),alignItems:"center",justifyContent:"center",borderRadius:"C"===t.shape?a*t.height:0},onPress:function(){return e.doPressFloorTable(t)},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.black8,fontSize:20},children:t.tableId})})},t.recKey)}))})]}),Object(Q.jsx)(g.default,{style:{margin:3,marginTop:-3,flexWrap:"wrap",flexDirection:"row"},children:a&&n.filter((function(e){return!r.some((function(t){return t.tableId===e.tableId}))})).map((function(t,r){return Object(Q.jsx)(g.default,{style:{width:4*a,aspectRatio:4},children:Object(Q.jsx)(M.default,{style:{flex:1,margin:3,backgroundColor:(null==l?void 0:l.tableId)===t.tableId?"white":e.doTranslateFloorTableColor(t),justifyContent:"center",alignItems:"center"},onPress:function(){return e.doPressFloorTable(t)},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.black8,fontSize:20},children:t.tableId})})},r)}))})]})}}]),r}(b.Component),Pe=m.default.create({textInput:{color:"white",height:60,borderRadius:30,width:"90%",alignItems:"center",justifyContent:"center",marginBottom:120,textAlign:"center",fontFamily:"varela-round",fontSize:24},onetwo:{position:"absolute",top:"0",left:"0",height:"12.5%",width:"12.5%"},tableLowerBand:{fontFamily:"varela-round",width:"100%",paddingVertical:5,backgroundColor:te.black8,justifyContent:"center",alignItems:"center",color:"white",fontSize:12,textAlign:"center",textTransform:"uppercase"}}),Re=r(28);function we(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var ke=function(e){d()(r,e);var t=we(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,preference:e.preference,imageEntry:e.serviceEntry.split(":8085/")[0]+":5000/img/",foldergrps:e.foldergrps,folders:e.folders,uniqueFolders:w()(new Map(e.folders.map((function(e){return[e.folderId,e]}))).values()),menus:e.menus,uniqueMenus:w()(new Map(e.menus.map((function(e){return[e.menuId,e]}))).values()),modBundles:e.modBundles,displayMode:"",displays:[],limiteds:[],searchText:""},n}return i()(r,[{key:"componentDidMount",value:function(){console.log("mount mainmenu");var e=this.state,t=e.foldergrps,r=e.folders,n=e.menus;this.doGet();var a="",l=[];if(1===r.filter((function(e){return e.foldergrpId===t[0].foldergrpId})).length){var o=r.find((function(e){return e.foldergrpId===t[0].foldergrpId}));a="MENU",l=n.filter((function(e){return e.folderId===o.folderId&&e.foldergrpId===o.foldergrpId}))}else a="FOLDER",l=r.filter((function(e){return e.foldergrpId===t[0].foldergrpId}));this.setState({selectedFoldergrp:t[0],displays:l,displayMode:a})}},{key:"doGet",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=(t.home,r+"api/restmenu-serve"),a=new URLSearchParams;fetch(n+="?"+a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({limiteds:t})}))}},{key:"doPressFoldergrp",value:function(e){var t=this.state,r=t.folders,n=t.menus,a="",l=[];if(this.doGet(),1===r.filter((function(t){return t.foldergrpId===e.foldergrpId})).length){var o=r.find((function(t){return t.foldergrpId===e.foldergrpId}));a="MENU",l=n.filter((function(e){return e.folderId===o.folderId&&e.foldergrpId===o.foldergrpId}))}else a="FOLDER",l=r.filter((function(t){return t.foldergrpId===e.foldergrpId}));this.setState({selectedFoldergrp:e,displays:l,displayMode:a,searchText:""})}},{key:"doPressFolder",value:function(e){var t=this.state.menus;this.setState({displayMode:"MENU",displays:t.filter((function(t){return t.folderId===e.folderId&&t.foldergrpId===e.foldergrpId}))})}},{key:"doPressMenu",value:function(e,t){this.props.handlePressMenu(e,t)}},{key:"doSearchText",value:function(e){var t=this.state,r=t.menus,n=t.foldergrps;if(this.setState({searchText:e}),!e)return this.setState({displayMode:"MENU",displays:"",selectedFoldergrp:""}),void this.doPressFoldergrp(n[0]);var a=e.toUpperCase(),l=r.filter((function(e){return e.menuName.toUpperCase().includes(a)||e.menuId.toUpperCase().includes(a)}));this.setState({displayMode:"MENU",displays:l,selectedFoldergrp:""})}},{key:"render",value:function(){var e,t,r,n=this,a=this.state,l=a.preference,o=a.displayMode,s=a.displays,i=a.foldergrps,c=(a.folders,a.uniqueFolders),d=a.uniqueMenus,u=(a.menus,a.modBundles),f=a.searchText,h=a.selectedFoldergrp;return Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",backgroundColor:te.grey1,padding:5},children:[Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsx)(g.default,{style:{marginHorizontal:10,marginTop:-5,height:20,flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},children:Object(Q.jsxs)(_,{style:{fontSize:10,color:te.white8},children:[Object(Q.jsx)(_,{style:{fontSize:10,color:te.paid},children:d.length})," MENU ",Object(Q.jsx)(_,{style:{fontSize:10,color:te.reserved},children:c.length})," FOLDER ",Object(Q.jsx)(_,{style:{fontSize:10,color:te.reserved},children:i.length})," FOLDERGRP ",Object(Q.jsx)(_,{style:{fontSize:10,color:te.vacant},children:u.length})," MODIFIER"]})}),Object(Q.jsxs)(g.default,{style:Ee.searchBox,children:[Object(Q.jsx)(N.default,{style:Ee.searchBoxInputValue,placeholder:(null==(e=S.a.get("enter"))?void 0:e.toUpperCase())+" "+(null==(t=S.a.get("search"))?void 0:t.toUpperCase())+" "+(null==(r=S.a.get("text"))?void 0:r.toUpperCase()),placeholderTextColor:"rgba(255,255,255,0.2)",value:f,onChangeText:function(e){return n.doSearchText(e)}}),Object(Q.jsx)(M.default,{style:Ee.searchBoxButton,onPress:function(){n.doSearchText(""),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsx)(g.default,{style:{flex:1,margin:5,backgroundColor:te.grey2,borderRadius:5},children:"MENU"===o?Object(Q.jsx)(Ie.default,{style:{flex:1,padding:2.5},showsVerticalScrollIndicator:!1,numColumns:l.mcolsize,horizontal:!1,data:s,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(e){var t=e.item;return n.renderMenu(t)}},"MENU"+(null==h?void 0:h.foldergrpId)):Object(Q.jsx)(Ie.default,{style:{flex:1,padding:2.5},showsVerticalScrollIndicator:!1,numColumns:l.mcolsize,horizontal:!1,data:s,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(e){var t=e.item;return n.renderFolder(t)}},"FOLDER"+(null==h?void 0:h.foldergrpId))})]}),Object(Q.jsxs)(g.default,{style:{margin:5,width:120},children:[Object(Q.jsx)(g.default,{style:{height:90},children:Object(Q.jsxs)(me.default,{horizontal:!0,pagingEnabled:!0,showsHorizontalScrollIndicator:!1,children:["web"!==j.default.OS&&Object(Q.jsxs)(M.default,{style:{alignItems:"center",justifyContent:"center",height:90,width:120},onPress:function(){return n.props.handlePressScan(!0)},children:[Object(Q.jsx)(xe.default,{name:"camera-iris",size:30,color:"white",style:{height:28}}),Object(Q.jsx)(_,{style:{marginTop:10,fontFamily:"varela-round",color:"white",fontSize:10,textTransform:"uppercase"},children:S.a.get("scan")})]}),Object(Q.jsxs)(M.default,{style:{alignItems:"center",justifyContent:"center",height:90,width:120},onPress:function(){return n.props.handlePressScan()},children:[Object(Q.jsx)(xe.default,{name:"movie-filter",size:28,color:"white",style:{height:28}}),Object(Q.jsx)(_,{style:{marginTop:10,fontFamily:"varela-round",color:"white",fontSize:10,textTransform:"uppercase"},children:S.a.get("barcode")})]})]})}),Object(Q.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:i.map((function(e,t){return Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:e.foldergrpId===(null==h?void 0:h.foldergrpId)?"white":te.grey1,borderRadius:5,marginVertical:5},onPress:function(){return n.doPressFoldergrp(e)},children:Object(Q.jsx)(_,{style:{textAlign:"center",color:e.foldergrpId===(null==h?void 0:h.foldergrpId)?"black":"white"},children:e.name})},t)}))})]})]})}},{key:"renderFolder",value:function(e){var t=this,r=this.state,n=r.preference,a=r.menus;return Object(Q.jsx)(g.default,{style:{flex:1/n.mcolsize},children:Object(Q.jsxs)(M.default,{style:{margin:2.5,height:90,backgroundColor:"black",alignItems:"center",justifyContent:"center"},onPress:function(){return t.doPressFolder(e)},children:[Object(Q.jsx)(_,{style:{color:te.paid,fontSize:12},children:e.folderId}),Object(Q.jsx)(_,{style:{color:"white",paddingHorizontal:10,textAlign:"center",fontSize:16},children:e.name}),Object(Q.jsx)(_,{style:{color:te.vacant},children:a.filter((function(t){return t.folderId===e.folderId&&t.foldergrpId===e.foldergrpId})).length})]})})}},{key:"renderMenu",value:function(e){var t,r,n,a=this,l=this.state,o=l.preference,s=l.limiteds,i=(l.imageEntry,l.serviceEntry,l.searchText),c=l.foldergrps,d=l.folders,u=s.find((function(t){return t.recKey===e.recKey}));return Object(Q.jsx)(g.default,{style:{flex:1/o.mcolsize},children:Object(Q.jsxs)(g.default,{style:[{margin:2.5,flexDirection:"row",height:90,backgroundColor:te.grey4},"B"===e.statusFlg&&{opacity:.2}],children:["Y"===o.mquick&&Object(Q.jsx)(M.default,{style:{width:50,backgroundColor:te.grey3,justifyContent:"center",alignItems:"center"},disabled:"B"===e.statusFlg,onPress:function(){return a.doPressMenu(e,!0)},children:Object(Q.jsx)(U.default,{name:"check",size:18,color:te.grey1})}),Object(Q.jsx)(M.default,{style:{flex:1},disabled:"B"===e.statusFlg,onPress:function(){return a.doPressMenu(e)},children:Object(Q.jsxs)(g.default,{style:{flex:1,padding:10},children:[Object(Q.jsxs)(g.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsx)(_,{style:{color:"white",fontSize:12}}),Object(Q.jsxs)(_,{style:[{color:te.reserved,fontSize:12},0===Number(e.listPrice)&&{color:"white"}],children:["$",null==(t=e.listPrice)?void 0:t.toFixed(2)]})]}),Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsx)(_,{style:{color:"white"},numberOfLines:2,children:e.menuName})}),Object(Q.jsxs)(g.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsx)(_,{style:{color:te.vacant,fontSize:12,textTransform:"uppercase"},children:u?Number(u.serveLimit-u.serveCount)+" "+S.a.get("left"):" "}),Object(Q.jsx)(_,{style:{color:te.paid,fontSize:12},children:e.menuId})]})]})}),i.length>0&&Object(Q.jsxs)(_,{style:{position:"absolute",top:0,left:0,paddingHorizontal:5,backgroundColor:"black",color:"white",fontSize:10},numberOfLines:1,children:[null==(r=c.find((function(t){return t.foldergrpId===e.foldergrpId})))?void 0:r.name," > ",null==(n=d.find((function(t){return t.folderId===e.folderId})))?void 0:n.name]})]})})}}]),r}(b.Component),Ee=m.default.create({searchBox:{margin:10,marginBottom:5,height:50,borderRadius:100,backgroundColor:"black",flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50,borderRadius:100},searchBoxButton:{position:"absolute",right:0,top:0,height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50}});function Be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var De=function(e){d()(r,e);var t=Be(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={timer:5},n.countdown=function(){},n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=5;this.countdown=setInterval((function(){t-=1,e.setState({timer:t}),0===t&&(clearInterval(e.countdown),e.props.handleUpdateFromAutoLogout(t))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.countdown)}},{key:"render",value:function(){var e=this,t=this.state.timer;return console.log("in overlayautologout",this.props),Object(Q.jsx)(g.default,{style:Ue.overlay,children:Object(Q.jsxs)(g.default,{style:Ue.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Ue.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Ue.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Ue.overlaySubtitleText,children:"Auto Logout"}),Object(Q.jsx)(J.default,{style:Ue.overlayText,children:t})]}),Object(Q.jsx)(M.default,{style:[Ue.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromAutoLogout("")},children:Object(Q.jsx)(J.default,{style:Ue.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),Ue=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ve=function(e){d()(r,e);var t=Ae(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,homeDelivery:"Y"===e.selectedTable.homeDelivery?"Y":"N",vipName:e.selectedTable.vipName||"",vipPhone:e.selectedTable.vipPhone||"",dlyDate:e.selectedTable.dlyDate?le()(e.selectedTable.dlyDate).format("YYYY-MM-DD"):"",dpostalcode:e.selectedTable.dpostalcode||"",daddress1:e.selectedTable.daddress1||"",daddress2:e.selectedTable.daddress2||""},n}return i()(r,[{key:"doPressDelivery",value:function(e){this.setState({homeDelivery:e})}},{key:"doChangePostal",value:function(e){var t=this;if(this.setState({dpostalcode:e}),6===e.length){var r=this.state.serviceEntry+"api/epbsggeo",n=new URLSearchParams;n.append("postal",e),fetch(r+="?"+n,{method:"GET"}).then((function(e){if(e.ok)return e.json()})).then((function(e){null!=e&&e.address&&t.setState({daddress1:e.address||""})}))}}},{key:"doSubmit",value:function(){var e=this.state,t=e.vipName,r=e.vipPhone,n=e.homeDelivery,a=e.dlyDate,l=e.dpostalcode,o=e.daddress1,s=e.daddress2;this.props.handleUpdateFromDeposit("G",t,r,n,a,l,o,s)}},{key:"render",value:function(){var e=this,t=this.state,r=t.vipName,n=t.vipPhone,a=t.homeDelivery,l=t.dlyDate,o=t.dpostalcode,s=t.daddress1,i=t.daddress2;return console.log("in overlayDeposit",this.props),Object(Q.jsx)(g.default,{style:Me.overlay,children:Object(Q.jsxs)(g.default,{style:Me.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Me.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Me.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Me.overlaySubtitleText,children:"Deposit Info"}),Object(Q.jsxs)(g.default,{style:{flexDirection:"row",marginTop:20},children:[Object(Q.jsx)(g.default,{style:{flex:1,alignItems:"flex-end"},children:Object(Q.jsx)(M.default,{style:[Me.tabContainer,{backgroundColor:"Y"===a?te.grey1:"white"}],onPress:function(){return e.doPressDelivery("N")},children:Object(Q.jsx)(J.default,{style:{color:"Y"===a?"white":"black",fontFamily:"varela-round"},children:"Self Collect"})})}),Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsx)(M.default,{style:[Me.tabContainer,{backgroundColor:"N"===a?te.grey1:"white"}],onPress:function(){return e.doPressDelivery("Y")},children:Object(Q.jsx)(J.default,{style:{color:"N"===a?"white":"black",fontFamily:"varela-round"},children:"Delivery"})})})]})]}),Object(Q.jsx)(g.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:Object(Q.jsxs)(g.default,{style:Me.vipInputsContainer,children:[Object(Q.jsxs)(g.default,{style:Me.vipInputsRow,children:[Object(Q.jsx)(N.default,{style:Me.vipInput,placeholder:"NAME",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({vipName:t})},value:r}),Object(Q.jsx)(N.default,{style:Me.vipInput,placeholder:"PHONE",placeholderTextColor:"rgba(255,255,255,0.2)",keyboardType:"numeric",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({vipPhone:t})},value:n})]}),"Y"===a?Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)(g.default,{style:Me.vipInputsRow,children:[Object(Q.jsx)(N.default,{style:Me.vipInput,placeholder:"POSTAL",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.doChangePostal(t)},value:o}),Object(Q.jsx)(N.default,{style:Me.vipInput,placeholder:"DLY DATE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onFocus:function(){return""===l&&e.setState({dlyDate:le()().format("YYYY-MM-DD")})},onChangeText:function(t){return e.setState({dlyDate:t})},value:l})]}),Object(Q.jsx)(g.default,{style:Me.vipInputsRow,children:Object(Q.jsx)(N.default,{style:[Me.vipInput,{flex:1}],placeholder:"ADDR 1",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({daddress1:t})},value:s})}),Object(Q.jsx)(g.default,{style:Me.vipInputsRow,children:Object(Q.jsx)(N.default,{style:[Me.vipInput,{flex:1}],placeholder:"ADDR 2",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({daddress2:t})},value:i})})]}):Object(Q.jsx)(g.default,{style:[Me.vipInputsRow,{justifyContent:"flex-end"}],children:Object(Q.jsx)(N.default,{style:Me.vipInput,placeholder:"DLY DATE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onFocus:function(){return""===l&&e.setState({dlyDate:le()().format("YYYY-MM-DD")})},onChangeText:function(t){return e.setState({dlyDate:t})},value:l})})]})}),Object(Q.jsx)(M.default,{style:[Me.overlayOption,{backgroundColor:te.grey4}],onPress:function(){return e.doSubmit()},children:Object(Q.jsx)(J.default,{style:Me.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[Me.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromDeposit("")},children:Object(Q.jsx)(J.default,{style:Me.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),Me=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{height:"90%",width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},vipInputsContainer:{marginBottom:20,marginHorizontal:5,width:400,alignItems:"center"},vipInputsRow:{height:50,width:400,flexDirection:"row"},vipInput:{backgroundColor:te.grey1,borderRadius:5,color:"white",fontFamily:"varela-round",fontSize:16,margin:5,paddingHorizontal:10,width:190},tabContainer:{backgroundColor:te.grey1,width:120,alignItems:"center",justifyContent:"center",borderRadius:20,height:40,marginHorizontal:5},tabText:{fontSize:10,fontFamily:"varela-round",color:"white"},tabFocusText:{fontSize:16,fontFamily:"varela-round",color:"white"}});function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ne=function(e){d()(r,e);var t=ze(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlayText:""},n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){this.scanTextInput.focus()}},{key:"handleSubmit",value:function(e){var t=this;this.setState({overlayText:""},(function(){return t.scanTextInput.focus()})),this.props.handleUpdateFromScanBarcode(e)}},{key:"render",value:function(){var e=this,t=this.state.overlayText;return console.log("in overlayscanbarcode"),Object(Q.jsx)(g.default,{style:Le.overlay,children:Object(Q.jsxs)(g.default,{style:Le.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Le.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Le.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Le.overlaySubtitleText,children:"Scan Barcode"})]}),Object(Q.jsx)(g.default,{style:Le.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:Le.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:Le.overlaySearchBoxInput,ref:function(t){e.scanTextInput=t},autoFocus:!0,placeholder:"ENTER BARCODE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},onSubmitEditing:function(){return e.handleSubmit(t)},value:t}),Object(Q.jsx)(M.default,{style:Le.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),e.scanTextInput.focus()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(M.default,{style:Le.overlayOption,onPress:function(){return e.handleSubmit(t)},children:Object(Q.jsx)(J.default,{style:Le.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[Le.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromScanBarcode("")},children:Object(Q.jsx)(J.default,{style:Le.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),Le=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center",marginBottom:30},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ge=function(e){d()(r,e);var t=Ke(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlayText:""},n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){this.scanTextInput.focus()}},{key:"handleSubmit",value:function(e){var t=this;this.setState({overlayText:""},(function(){return t.scanTextInput.focus()})),this.props.handleUpdateFromRequestAccess(e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.home,n=t.requestedPrivilege,a=this.state.overlayText;return console.log("in overlayrequestaccess"),Object(Q.jsx)(g.default,{style:He.overlay,children:Object(Q.jsxs)(g.default,{style:He.overlayContent,children:[Object(Q.jsxs)(g.default,{style:He.overlayHeader,children:[Object(Q.jsx)(J.default,{style:He.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:He.overlaySubtitleText,children:"Request Access"}),Object(Q.jsxs)(J.default,{style:He.overlayText,children:["Grant temporary ",n," privilege to ",r.userId,"?"]})]}),Object(Q.jsx)(g.default,{style:He.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:He.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:He.overlaySearchBoxInput,ref:function(t){e.scanTextInput=t},secureTextEntry:!0,autoFocus:!0,placeholder:"ENTER ACCESS CODE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},onSubmitEditing:function(){return e.handleSubmit(a)},value:a}),Object(Q.jsx)(M.default,{style:He.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),e.scanTextInput.focus()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(M.default,{style:He.overlayOption,onPress:function(){return e.handleSubmit(a)},children:Object(Q.jsx)(J.default,{style:He.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[He.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromRequestAccess("")},children:Object(Q.jsx)(J.default,{style:He.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),He=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:2,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center",marginBottom:30},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var We=function(e){d()(r,e);var t=Ye(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,settings:e.settings,privileges:e.privileges,discounts:e.discounts,selectedTableItem:e.selectedTableItem,availableDiscounts:e.discounts,overlaySearchText:"",overlayText:"",discountSelected:!1,selectedDiscount:"",validatePass:!0,requestedPrivilege:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleValidate=n.handleValidate.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.settings,o=r.requestedPrivilege;if(e){var s=a+"api/super-user",i={locId:n.locId,accessCode:e,priId:o};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access "+o,n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleValidate(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleValidate",value:function(e){var t=this.state,r=t.home,n=t.privileges,a=t.overlayText,l=t.selectedDiscount,o=t.selectedTableItem;a?"Y"===r.adminFlg||n.some((function(e){return"CHANGEPRICE"===e.priId}))||0===o.listPrice||e?this.props.handleUpdateFromChangePrice(a,l||"-",e):this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"CHANGEPRICE"}):this.setState({validatePass:!1})}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.discounts,n=(t.availableDiscounts,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",this.state.availableDiscounts),n=r,e?(n=n.filter((function(e){return e.discId.toUpperCase().includes(a)||e.discName.toUpperCase().includes(a)})),this.setState({availableDiscounts:n})):this.setState({availableDiscounts:n})}},{key:"render",value:function(){var e=this,t=this.state,r=t.home,n=t.overlaySearchText,a=t.overlayText,l=t.discountSelected,o=t.availableDiscounts,s=(t.discounts,t.selectedDiscount),i=t.validatePass,c=t.overlayProcedureMessageVisible,d=t.overlayRequestAccessVisible,u=t.requestedPrivilege;return console.log("in overlaychangeprice, state",this.state),Object(Q.jsxs)(g.default,{style:qe.overlay,children:[c&&Object(Q.jsx)(se,{text:c,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),d&&Object(Q.jsx)(Ge,{home:r,requestedPrivilege:u,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),Object(Q.jsxs)(g.default,{style:qe.overlayContent,children:[Object(Q.jsxs)(g.default,{style:qe.overlayHeader,children:[Object(Q.jsx)(J.default,{style:qe.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:qe.overlaySubtitleText,children:"Change Price"})]}),Object(Q.jsx)(g.default,{style:qe.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:qe.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:[qe.overlaySearchBoxInput,i?null:{color:te.paid}],placeholder:"ENTER PRICE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t,validatePass:!0})},value:a}),Object(Q.jsx)(M.default,{style:qe.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(g.default,{style:{paddingBottom:10}}),l?Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsx)(g.default,{style:qe.searchBoxWrapper,children:Object(Q.jsx)(M.default,{style:qe.overlaySearchBox,onPress:function(){return e.setState({overlaySearchText:"",selectedDiscount:"",discountSelected:!1})},children:Object(Q.jsx)(J.default,{style:qe.selectText,children:s.discId})})}),Object(Q.jsx)(g.default,{style:{paddingBottom:5}})]}):Object(Q.jsxs)(g.default,{style:qe.selectWrapper,children:[Object(Q.jsx)(g.default,{style:qe.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:[qe.overlaySearchBox,{marginHorizontal:0}],children:[Object(Q.jsx)(N.default,{style:qe.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),Object(Q.jsx)(M.default,{style:qe.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(g.default,{style:qe.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:qe.searchBoxInfoText,children:[o.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[qe.overlayGrid,r.dummy?qe.hidden:null],onPress:function(){return e.setState({discountSelected:!0,selectedDiscount:r,validatePass:!0})},children:[Object(Q.jsxs)(g.default,{style:qe.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:qe.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:qe.overlayGridFirstLeftText,children:r.discId})}),Object(Q.jsx)(g.default,{style:qe.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:qe.overlayGridFirstRightText})})]}),Object(Q.jsx)(g.default,{style:qe.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:qe.overlayGridSecondText,children:r.discName})}),Object(Q.jsxs)(g.default,{style:qe.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:qe.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:qe.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:qe.overlayGridThirdRightText})})]})]})}})]}),Object(Q.jsx)(M.default,{style:qe.overlayOption,onPress:function(){return e.handleValidate()},children:Object(Q.jsx)(J.default,{style:qe.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[qe.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromChangePrice("","")},children:Object(Q.jsx)(J.default,{style:qe.overlayOptionText,children:S.a.get("cancel")})})]})]})}}]),r}(b.Component),qe=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1,alignItems:"center",justifyContent:"center"},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},selectText:{fontFamily:"varela-round",color:"white",fontSize:16},selectWrapper:{flex:1,backgroundColor:te.grey1,borderRadius:5,marginHorizontal:5,marginBottom:5},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Qe=function(e){d()(r,e);var t=Je(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,settings:e.settings,discounts:e.discounts,privileges:e.privileges,availableDiscounts:e.discounts,overlaySearchText:"",selectedDiscount:"",remarks:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.discounts,n=(t.availableDiscounts,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",this.state.availableDiscounts),n=r,e?(n=n.filter((function(e){return e.discId.toUpperCase().includes(a)||e.discName.toUpperCase().includes(a)})),this.setState({availableDiscounts:n})):this.setState({availableDiscounts:n})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.settings,o=r.selectedDiscount;if(e){var s=a+"api/super-user",i={locId:n.locId,accessCode:e,priId:"LINEDISC"};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access LINEDISC",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSubmit(o,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleSubmit",value:function(e,t){var r=this.state,n=r.home,a=r.privileges,l=r.remarks,o=e;o.remarks=l,"Y"===n.adminFlg||a.some((function(e){return"LINEDISC"===e.priId}))||t?this.props.handleUpdateFromLineDiscount(o,t):this.setState({overlayRequestAccessVisible:!0,selectedDiscount:e})}},{key:"render",value:function(){var e=this,t=this.state,r=t.home,n=t.overlaySearchText,a=t.availableDiscounts,l=t.remarks,o=t.overlayRequestAccessVisible,s=t.overlayProcedureMessageVisible;return console.log("in overlaylinediscount, state",this.state),Object(Q.jsxs)(g.default,{style:Xe.overlay,children:[s&&Object(Q.jsx)(se,{text:s,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),o&&Object(Q.jsx)(Ge,{home:r,requestedPrivilege:"LINEDISC",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),Object(Q.jsxs)(g.default,{style:Xe.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Xe.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Xe.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Xe.overlaySubtitleText,children:"Line Discount"})]}),Object(Q.jsx)(g.default,{style:[Xe.searchBoxWrapper,{marginBottom:10}],children:Object(Q.jsx)(g.default,{style:Xe.overlaySearchBox,children:Object(Q.jsx)(N.default,{style:Xe.overlaySearchBoxInput,placeholder:"ENTER REMARKS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({remarks:t})},value:l})})}),Object(Q.jsxs)(g.default,{style:Xe.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:Xe.overlayBackButton,onPress:function(){return e.props.handleUpdateFromLineDiscount("")},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:Xe.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:Xe.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),Object(Q.jsx)(M.default,{style:Xe.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:Xe.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:Xe.searchBoxInfoText,children:[a.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[Xe.overlayGrid,r.dummy?Xe.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[Object(Q.jsxs)(g.default,{style:Xe.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:Xe.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:Xe.overlayGridFirstLeftText,children:r.discId})}),Object(Q.jsx)(g.default,{style:Xe.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:Xe.overlayGridFirstRightText})})]}),Object(Q.jsx)(g.default,{style:Xe.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:Xe.overlayGridSecondText,children:r.discName})}),Object(Q.jsxs)(g.default,{style:Xe.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:Xe.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:Xe.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:Xe.overlayGridThirdRightText})})]})]})}})]})]})}}]),r}(b.Component),Xe=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5}});function $e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ze=function(e){d()(r,e);var t=$e(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,settings:e.settings,privileges:e.privileges,discounts:e.discounts,availableDiscounts:e.discounts,overlaySearchText:"",selectedDiscount:"",remarks:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.discounts,n=(t.availableDiscounts,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",this.state.availableDiscounts),n=r,e?(n=n.filter((function(e){return e.discId.toUpperCase().includes(a)||e.discName.toUpperCase().includes(a)})),this.setState({availableDiscounts:n})):this.setState({availableDiscounts:n})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.settings,o=r.selectedDiscount;if(e){var s=a+"api/super-user",i={locId:n.locId,accessCode:e,priId:"HEADERDISC"};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access HEADERDISC",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSubmit(o,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleSubmit",value:function(e,t){var r=this.state,n=r.home,a=r.privileges,l=r.remarks,o=e;o.remarks=l,"Y"===n.adminFlg||a.some((function(e){return"HEADERDISC"===e.priId}))||t?this.props.handleUpdateFromHeaderDiscount(o,t):this.setState({overlayRequestAccessVisible:!0,selectedDiscount:e})}},{key:"render",value:function(){var e=this,t=this.state,r=t.home,n=t.overlaySearchText,a=t.availableDiscounts,l=t.remarks,o=t.overlayRequestAccessVisible,s=t.overlayProcedureMessageVisible;return console.log("in overlayheaderdiscount, state",this.state),Object(Q.jsxs)(g.default,{style:_e.overlay,children:[s&&Object(Q.jsx)(se,{text:s,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),o&&Object(Q.jsx)(Ge,{home:r,requestedPrivilege:"HEADERDISC",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),Object(Q.jsxs)(g.default,{style:_e.overlayContent,children:[Object(Q.jsxs)(g.default,{style:_e.overlayHeader,children:[Object(Q.jsx)(J.default,{style:_e.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:_e.overlaySubtitleText,children:"Header Discount"})]}),Object(Q.jsx)(g.default,{style:[_e.searchBoxWrapper,{marginBottom:10}],children:Object(Q.jsx)(g.default,{style:_e.overlaySearchBox,children:Object(Q.jsx)(N.default,{style:_e.overlaySearchBoxInput,placeholder:"ENTER REMARKS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({remarks:t})},value:l})})}),Object(Q.jsxs)(g.default,{style:_e.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:_e.overlayBackButton,onPress:function(){return e.props.handleUpdateFromHeaderDiscount("")},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:_e.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:_e.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),Object(Q.jsx)(M.default,{style:_e.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:_e.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:_e.searchBoxInfoText,children:[a.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[_e.overlayGrid,r.dummy?_e.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[Object(Q.jsxs)(g.default,{style:_e.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:_e.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:_e.overlayGridFirstLeftText,children:r.discId})}),Object(Q.jsx)(g.default,{style:_e.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:_e.overlayGridFirstRightText})})]}),Object(Q.jsx)(g.default,{style:_e.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:_e.overlayGridSecondText,children:r.discName})}),Object(Q.jsxs)(g.default,{style:_e.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:_e.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:_e.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:_e.overlayGridThirdRightText})})]})]})}})]})]})}}]),r}(b.Component),_e=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5}}),et=r(119),tt=r.n(et);function rt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var nt=function(e){d()(r,e);var t=rt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,overlaySearchText:"",tables:"",availableTables:"",mergeTables:[]},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n.handleSelectTable=n.handleSelectTable.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=r+"api/tables",l=new URLSearchParams;l.append("shopId",n.shopId),l.append("statusFlg","A"),fetch(a+="?"+l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({tables:t.filter((function(e){return"SYS"!==e.sectionId})),availableTables:t.filter((function(e){return"SYS"!==e.sectionId}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",this.state.availableTables),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(a)||e.sectionId.toUpperCase().includes(a)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"handleSelectTable",value:function(e){var t=this.state.mergeTables,r=t;t.some((function(t){return t.tableId===e.tableId}))?r=r.filter((function(t){return t.tableId!==e.tableId})):r.push(e),this.setState({mergeTables:r})}},{key:"handlePressSelection",value:function(e){var t=this.state.mergeTables;t.filter((function(t){return t.tableId!==e.tableId})),tt()("mergeTablesUpdate"),this.setState({mergeTables:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.selectedTable,n=t.overlaySearchText,a=t.availableTables,l=(t.tables,t.mergeTables);return console.log("in overlaymergetable, state",this.state),Object(Q.jsx)(g.default,{style:at.overlay,children:Object(Q.jsxs)(g.default,{style:at.overlayContent,children:[Object(Q.jsxs)(g.default,{style:at.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:at.overlayTitleText,children:["TABLE ",r.tableId]}),Object(Q.jsx)(J.default,{style:at.overlaySubtitleText,children:"Merge Table"})]}),Object(Q.jsx)(g.default,{style:at.selectionContainer,children:l.map((function(t){return Object(Q.jsx)(M.default,{style:[at.modalAvailableMod],onPress:function(){return e.handleSelectTable(t)},children:Object(Q.jsx)(J.default,{style:[at.modalAvailableModText],children:t.tableId})},t.recKey)}))}),Object(Q.jsxs)(g.default,{style:at.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:at.overlayBackButton,onPress:function(){return e.props.handleUpdateFromMergeTable([])},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:at.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:at.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),Object(Q.jsx)(M.default,{style:at.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:at.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:at.searchBoxInfoText,children:[a.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:at.overlayGrid,onPress:function(){return e.handleSelectTable(r)},children:[Object(Q.jsxs)(g.default,{style:at.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:at.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:at.overlayGridFirstLeftText,children:r.sectionId})}),Object(Q.jsx)(g.default,{style:at.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:at.overlayGridFirstRightText,children:"VACANT"})})]}),Object(Q.jsx)(g.default,{style:at.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:at.overlayGridSecondText,children:r.tableId})}),Object(Q.jsxs)(g.default,{style:at.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:at.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:at.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:at.overlayGridThirdRightText})})]})]})}}),Object(Q.jsx)(M.default,{style:[at.overlayOption,{backgroundColor:te.vacant}],onPress:function(){return e.props.handleUpdateFromMergeTable(l)},children:Object(Q.jsx)(J.default,{style:at.overlayOptionText,children:S.a.get("submit")})})]})})}}]),r}(b.Component),at=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},selectionContainer:{height:35,paddingBottom:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},modalAvailableMod:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",borderRadius:16,height:30,backgroundColor:te.grey1,marginRight:5,marginBottom:5},modalAvailableModText:{fontFamily:"varela-round",color:te.grey5,fontSize:20}});function lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var ot=function(e){d()(r,e);var t=lt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,tableItems:e.tableItems,overlaySearchText:"",availableTableItems:e.tableItems.filter((function(e){return!e.refRecKey})),selectedTableItems:[]},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n.handleSelectTableItem=n.handleSelectTableItem.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleOverlaySearchText",value:function(e){var t=this.state.tableItems,r=[];this.setState({overlaySearchText:e});var n=e.toUpperCase();console.log("caseText",n),console.log("available",this.state.availableTableItems),r=t.filter((function(e){return!e.refRecKey})),e?(r=r.filter((function(e){return e.menuId.toUpperCase().includes(n)||e.menuName.toUpperCase().includes(n)})),this.setState({availableTableItems:r})):this.setState({availableTableItems:r})}},{key:"handleSelectTableItem",value:function(e){var t=this.state.selectedTableItems;t.some((function(t){return t.recKey===e.recKey}))?t=t.filter((function(t){return t.recKey!==e.recKey})):t.push(e),this.setState({selectedTableItems:t})}},{key:"handlePressSelection",value:function(e){var t=this.state.selectedTableItems;t.filter((function(t){return t.recKey!==e.recKey})),tt()("selectedTableItemsUpdate"),this.setState({selectedTableItems:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.selectedTable,n=t.overlaySearchText,a=t.availableTableItems,l=t.selectedTableItems;return console.log("in overlaysplittable, state",this.state),Object(Q.jsx)(g.default,{style:st.overlay,children:Object(Q.jsxs)(g.default,{style:st.overlayContent,children:[Object(Q.jsxs)(g.default,{style:st.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:st.overlayTitleText,children:["TABLE ",r.tableId]}),Object(Q.jsx)(J.default,{style:st.overlaySubtitleText,children:"Split Table"})]}),Object(Q.jsx)(g.default,{style:st.selectionContainer,children:l.map((function(t){return Object(Q.jsx)(M.default,{style:[st.modalAvailableMod],onPress:function(){return e.handleSelectTableItem(t)},children:Object(Q.jsx)(J.default,{style:[st.modalAvailableModText],children:t.lineNo})},t.recKey)}))}),Object(Q.jsxs)(g.default,{style:st.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:st.overlayBackButton,onPress:function(){return e.props.handleUpdateFromSplitTable("")},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:st.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:st.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),Object(Q.jsx)(M.default,{style:st.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:st.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:st.searchBoxInfoText,children:[a.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:st.overlayGrid,onPress:function(){return e.handleSelectTableItem(r)},children:[Object(Q.jsxs)(g.default,{style:st.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:st.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:st.overlayGridFirstLeftText,children:r.menuId})}),Object(Q.jsx)(g.default,{style:st.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:st.overlayGridFirstRightText,children:r.lineNo})})]}),Object(Q.jsx)(g.default,{style:st.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:st.overlayGridSecondText,children:r.menuName})}),Object(Q.jsxs)(g.default,{style:st.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:st.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:st.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:st.overlayGridThirdRightText})})]})]})}}),Object(Q.jsx)(M.default,{style:st.overlayOption,onPress:function(){return e.props.handleUpdateFromSplitTable(l)},children:Object(Q.jsx)(J.default,{style:st.overlayOptionText,children:S.a.get("submit")})})]})})}}]),r}(b.Component),st=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},selectionContainer:{height:35,paddingBottom:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},modalAvailableMod:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",borderRadius:16,height:30,backgroundColor:te.grey1,marginRight:5,marginBottom:5},modalAvailableModText:{fontFamily:"varela-round",color:te.grey5,fontSize:20}});function it(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var ct=function(e){d()(r,e);var t=it(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,overlaySearchText:"",tables:"",availableTables:""},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=r+"api/tables",l=new URLSearchParams;l.append("shopId",n.shopId),l.append("statusFlg","A"),fetch(a+="?"+l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({tables:t.filter((function(e){return"SYS"!==e.sectionId})),availableTables:t.filter((function(e){return"SYS"!==e.sectionId}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",this.state.availableTables),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(a)||e.sectionId.toUpperCase().includes(a)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"render",value:function(){var e=this,t=this.state,r=t.overlaySearchText,n=t.availableTables,a=(t.tables,t.selectedTable);return console.log("in overlaychangetable, state",this.state),Object(Q.jsx)(g.default,{style:dt.overlay,children:Object(Q.jsxs)(g.default,{style:dt.overlayContent,children:[Object(Q.jsxs)(g.default,{style:dt.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:dt.overlayTitleText,children:["TABLE ",a.tableId]}),Object(Q.jsx)(J.default,{style:dt.overlaySubtitleText,children:"Change Table"})]}),Object(Q.jsxs)(g.default,{style:dt.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:dt.overlayBackButton,onPress:function(){return e.props.handleUpdateFromChangeTable("")},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:dt.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:dt.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:r}),Object(Q.jsx)(M.default,{style:dt.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:dt.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:dt.searchBoxInfoText,children:[n.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[dt.overlayGrid,r.dummy?dt.hidden:null],onPress:function(){return e.props.handleUpdateFromChangeTable(r)},children:[Object(Q.jsxs)(g.default,{style:dt.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:dt.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:dt.overlayGridFirstLeftText,children:r.sectionId})}),Object(Q.jsx)(g.default,{style:dt.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:dt.overlayGridFirstRightText,children:"VACANT"})})]}),Object(Q.jsx)(g.default,{style:dt.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:dt.overlayGridSecondText,children:r.tableId})}),Object(Q.jsxs)(g.default,{style:dt.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:dt.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:dt.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:dt.overlayGridThirdRightText})})]})]})}})]})})}}]),r}(b.Component),dt=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5}});function ut(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var ft=function(e){d()(r,e);var t=ut(r);function r(e){return o()(this,r),t.call(this,e)}return i()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.selectedTable,n=t.selectedTableItem;t.tableItems;return console.log("in overlayreviseitem",this.props),Object(Q.jsx)(g.default,{style:ht.overlay,children:Object(Q.jsxs)(g.default,{style:ht.overlayContent,children:[Object(Q.jsxs)(g.default,{style:ht.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:ht.overlayTitleText,children:[S.a.get("table")," ",r.tableId]}),Object(Q.jsx)(J.default,{style:ht.overlaySubtitleText,children:S.a.get("reviseitem")}),Object(Q.jsx)(J.default,{style:ht.overlayText,children:n.menuName.toUpperCase()})]}),Object(Q.jsxs)(g.default,{style:ht.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:ht.button,onPress:function(){return e.props.handleUpdateFromReviseItem("voidItem")},children:[Object(Q.jsx)(U.default,{name:"close",color:"white",size:32}),Object(Q.jsx)(J.default,{style:ht.buttonText,children:S.a.get("remove")})]}),Object(Q.jsxs)(M.default,{style:ht.button,onPress:function(){return e.props.handleUpdateFromReviseItem("duplicateItem")},children:[Object(Q.jsx)(U.default,{name:"copy1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:ht.buttonText,children:S.a.get("duplicate")})]}),Object(Q.jsxs)(M.default,{style:[ht.button,"Y"===n.confirmFlg&&{opacity:.2}],disabled:"Y"===n.confirmFlg,onPress:function(){return e.props.handleUpdateFromReviseItem("lineBreak")},children:[Object(Q.jsx)(U.default,{name:"minus",color:"white",size:32}),Object(Q.jsx)(J.default,{style:ht.buttonText,children:S.a.get("linebreak")})]}),Object(Q.jsxs)(M.default,{style:ht.button,onPress:function(){return e.props.handleUpdateFromReviseItem("editItem")},children:[Object(Q.jsx)(U.default,{name:"edit",color:"white",size:32}),Object(Q.jsx)(J.default,{style:ht.buttonText,children:S.a.get("edit")})]})]}),Object(Q.jsxs)(g.default,{style:ht.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:[ht.button,!("S"===n.menuType||"X"===n.menuType)&&{opacity:.2}],disabled:!("S"===n.menuType||"X"===n.menuType),onPress:function(){return e.props.handleUpdateFromReviseItem("revertItem")},children:[Object(Q.jsx)(U.default,{name:"man",color:"white",size:32}),Object(Q.jsx)(J.default,{style:ht.buttonText,children:S.a.get("revert")})]}),Object(Q.jsxs)(M.default,{style:[ht.button,"N"===n.discFlg&&0!==n.listPrice&&{opacity:.2}],disabled:"N"===n.discFlg&&0!==n.listPrice,onPress:function(){return e.props.handleUpdateFromReviseItem("changePrice")},children:[Object(Q.jsx)(U.default,{name:"exception1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:ht.buttonText,children:S.a.get("changeprice")})]}),Object(Q.jsxs)(M.default,{style:[ht.button,"N"===n.discFlg&&{opacity:.2}],disabled:"N"===n.discFlg,onPress:function(){return e.props.handleUpdateFromReviseItem("lineDiscount")},children:[Object(Q.jsx)(U.default,{name:"exception1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:ht.buttonText,children:S.a.get("linedisc")})]})]}),Object(Q.jsx)(M.default,{style:[ht.overlayOption,{backgroundColor:te.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromReviseItem("")},children:Object(Q.jsx)(J.default,{style:ht.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),ht=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{margin:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var bt=function(e){d()(r,e);var t=yt(r);function r(e){return o()(this,r),t.call(this,e)}return i()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.selectedTable;t.tableItems;return console.log("in overlayadditionalfunctions",this.props),Object(Q.jsx)(g.default,{style:pt.overlay,children:Object(Q.jsxs)(g.default,{style:pt.overlayContent,children:[Object(Q.jsxs)(g.default,{style:pt.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:pt.overlayTitleText,children:[S.a.get("table")," ",r.tableId]}),Object(Q.jsxs)(J.default,{style:pt.overlaySubtitleText,children:[S.a.get("table")," ",S.a.get("action")]})]}),Object(Q.jsxs)(g.default,{style:pt.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:[pt.button,(!r||"SYS"===r.sectionId||"A"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"SYS"===r.sectionId||"A"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("openTable")},children:[Object(Q.jsx)(U.default,{name:"appstore-o",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("open")})]}),Object(Q.jsxs)(M.default,{style:[pt.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("editTable")},children:[Object(Q.jsx)(U.default,{name:"edit",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("edit")})]}),Object(Q.jsxs)(M.default,{style:[pt.button,(!r||"SYS"===r.sectionId||"A"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"SYS"===r.sectionId||"A"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("reserveTable")},children:[Object(Q.jsx)(U.default,{name:"calendar",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("reserve")})]}),"SYS"!==(null==r?void 0:r.sectionId)&&"A"===(null==r?void 0:r.statusFlg)?Object(Q.jsxs)(M.default,{style:[pt.button,(!r||"A"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"A"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("disableTable")},children:[Object(Q.jsx)(xe.default,{name:"cancel",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("disable")})]}):Object(Q.jsxs)(M.default,{style:[pt.button,(!r||"A"===r.statusFlg)&&{opacity:.2}],disabled:!r||"A"===r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("resetTable")},children:[Object(Q.jsx)(U.default,{name:"reload1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("reset")})]})]}),Object(Q.jsxs)(g.default,{style:pt.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:[pt.button,(!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId))&&{opacity:.2}],disabled:!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("mergeTable")},children:[Object(Q.jsx)(U.default,{name:"menufold",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("mergetable")})]}),Object(Q.jsxs)(M.default,{style:[pt.button,(!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId))&&{opacity:.2}],disabled:!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("splitTable")},children:[Object(Q.jsx)(U.default,{name:"menuunfold",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("splittable")})]}),Object(Q.jsxs)(M.default,{style:[pt.button,(!r||"C"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"C"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("changeTable")},children:[Object(Q.jsx)(U.default,{name:"swap",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("changetable")})]})]}),Object(Q.jsxs)(g.default,{style:pt.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:[pt.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("viewResequence")},children:[Object(Q.jsx)(U.default,{name:"bars",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("resequence")})]}),Object(Q.jsxs)(M.default,{style:[pt.button,(!r||"C"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"C"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("viewTransfer")},children:[Object(Q.jsx)(U.default,{name:"export",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("transferitems")})]}),Object(Q.jsxs)(M.default,{style:[pt.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("headerDiscount")},children:[Object(Q.jsx)(U.default,{name:"exception1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("headerdisc")})]}),Object(Q.jsxs)(M.default,{style:[pt.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("printBill")},children:[Object(Q.jsx)(U.default,{name:"book",color:"white",size:32}),Object(Q.jsx)(J.default,{style:pt.buttonText,children:S.a.get("printbill")})]})]}),Object(Q.jsx)(M.default,{style:[pt.overlayOption,{backgroundColor:te.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromTableActions("")},children:Object(Q.jsx)(J.default,{style:pt.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),pt=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var gt=function(e){d()(r,e);var t=mt(r);function r(e){return o()(this,r),t.call(this,e)}return i()(r,[{key:"render",value:function(){var e=this;return console.log("in overlayadditionalfunctions",this.props),Object(Q.jsx)(g.default,{style:jt.overlay,children:Object(Q.jsxs)(g.default,{style:jt.overlayContent,children:[Object(Q.jsxs)(g.default,{style:jt.overlayHeader,children:[Object(Q.jsx)(J.default,{style:jt.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:jt.overlaySubtitleText,children:S.a.get("additionalfunctions")})]}),Object(Q.jsxs)(g.default,{style:jt.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewReprint")},children:[Object(Q.jsx)(U.default,{name:"printer",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("reprint")})]}),Object(Q.jsxs)(M.default,{style:[jt.button],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewVoid")},children:[Object(Q.jsx)(U.default,{name:"exception1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("voidreceipts")})]}),Object(Q.jsxs)(M.default,{style:[jt.button],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewCollect")},children:[Object(Q.jsx)(U.default,{name:"gift",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("collection")})]}),Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("openDrawer")},children:[Object(Q.jsx)(U.default,{name:"laptop",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("opendrawer")})]})]}),Object(Q.jsxs)(g.default,{style:jt.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:[jt.button,{backgroundColor:te.grey2}],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("logOut")},children:[Object(Q.jsx)(U.default,{name:"doubleleft",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("logout")})]}),Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewTrace")},children:[Object(Q.jsx)(U.default,{name:"eyeo",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("trace")})]}),Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewPrinters")},children:[Object(Q.jsx)(U.default,{name:"fork",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("testprint")})]}),Object(Q.jsxs)(M.default,{style:[jt.button,{backgroundColor:te.grey2}],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("syncMasters")},children:[Object(Q.jsx)(U.default,{name:"retweet",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("syncmasters")})]})]}),Object(Q.jsxs)(g.default,{style:jt.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewActivate")},children:[Object(Q.jsx)(U.default,{name:"bulb1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("activate")})]}),Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewLimit")},children:[Object(Q.jsx)(U.default,{name:"staro",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("limited")})]}),Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewDayclose")},children:[Object(Q.jsx)(U.default,{name:"isv",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("dayend")})]}),Object(Q.jsxs)(M.default,{style:jt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewReports")},children:[Object(Q.jsx)(U.default,{name:"solution1",color:"white",size:32}),Object(Q.jsx)(J.default,{style:jt.buttonText,children:S.a.get("reports")})]})]}),Object(Q.jsx)(M.default,{style:[jt.overlayOption,{backgroundColor:te.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("")},children:Object(Q.jsx)(J.default,{style:jt.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),jt=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function xt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var vt=function(e){d()(r,e);var t=xt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlaySearchText:"",printers:e.cashierPrinters,availablePrinters:e.cashierPrinters},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.printers,n=(t.availablePrinters,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",this.state.availablePrinters),n=r,e?(n=n.filter((function(e){return e.iomodelId.toUpperCase().includes(a)||e.name.toUpperCase().includes(a)})),this.setState({availablePrinters:n})):this.setState({availablePrinters:n})}},{key:"render",value:function(){var e=this,t=this.props.printPurpose,r=this.state,n=r.overlaySearchText,a=r.availablePrinters;r.printers;return console.log("in overlaychooseprinter, state",this.state),Object(Q.jsx)(g.default,{style:Tt.overlay,children:Object(Q.jsxs)(g.default,{style:Tt.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Tt.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Tt.overlayTitleText,children:t}),Object(Q.jsxs)(J.default,{style:Tt.overlaySubtitleText,children:[S.a.get("choose")," ",S.a.get("printer")]})]}),Object(Q.jsxs)(g.default,{style:Tt.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:Tt.overlayBackButton,onPress:function(){return e.props.handleUpdateFromChoosePrinter("")},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:Tt.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:Tt.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),Object(Q.jsx)(M.default,{style:Tt.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:Tt.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:Tt.searchBoxInfoText,children:[a.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],data:a,keyExtractor:function(e,t){return t},renderItem:function(r){var n=r.item;return Object(Q.jsxs)(M.default,{style:[Tt.overlayGrid,n.dummy?Tt.hidden:null],onPress:function(){return e.props.handleUpdateFromChoosePrinter(n,t)},children:[Object(Q.jsxs)(g.default,{style:Tt.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:Tt.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:Tt.overlayGridFirstLeftText,children:n.iomodelId})}),Object(Q.jsx)(g.default,{style:Tt.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:Tt.overlayGridFirstRightText})})]}),Object(Q.jsx)(g.default,{style:Tt.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:Tt.overlayGridSecondText,children:n.name})}),Object(Q.jsxs)(g.default,{style:Tt.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:Tt.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:Tt.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:Tt.overlayGridThirdRightText})})]})]})}})]})})}}]),r}(b.Component),Tt=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5}});function Ot(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var St=function(e){d()(r,e);var t=Ot(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={input:e.input},n}return i()(r,[{key:"render",value:function(){var e=this,t=this.state.input;return console.log("in overlayalert",this.props),Object(Q.jsx)(g.default,{style:It.overlay,children:Object(Q.jsxs)(g.default,{style:It.overlayContent,children:[Object(Q.jsxs)(g.default,{style:It.overlayHeader,children:[Object(Q.jsx)(J.default,{style:It.overlayTitleText,children:null==t?void 0:t.title}),Object(Q.jsx)(J.default,{style:It.overlaySubtitleText,children:null==t?void 0:t.subtitle}),Object(Q.jsx)(J.default,{style:It.overlayText,children:null==t?void 0:t.text})]}),(null==t?void 0:t.ok)&&Object(Q.jsx)(M.default,{style:It.overlayOption,onPress:function(){return e.props.handleUpdateFromAlert("")},children:Object(Q.jsx)(J.default,{style:It.overlayOptionText,children:"OK"})}),null!=t&&t.options?null==t?void 0:t.options.map((function(t){return Object(Q.jsx)(M.default,{style:It.overlayOption,onPress:function(){return e.props.handleUpdateFromAlert(t.handleText)},children:Object(Q.jsx)(J.default,{style:It.overlayOptionText,children:t.text})},t.handleText)})):null,(null==t?void 0:t.cancel)&&Object(Q.jsx)(M.default,{style:[It.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromAlert("")},children:Object(Q.jsx)(J.default,{style:It.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),It=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{margin:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ft=Object(ve.default)(),Pt=function(e){d()(r,e);var t=Ct(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,home:e.route.params.home,preference:e.route.params.preference,masters:e.route.params.masters,settings:e.route.params.masters.settings,selectedTable:null,selectedTableItem:null,tableItems:[],printPurpose:"",requestedPrivilege:"",screen:"TABLE",refresh:null},n.handlePressTable=n.handlePressTable.bind(D()(n)),n.handleActionTable=n.handleActionTable.bind(D()(n)),n.handlePressMenu=n.handlePressMenu.bind(D()(n)),n.handlePressScan=n.handlePressScan.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n.handleUpdateFromAutoLogout=n.handleUpdateFromAutoLogout.bind(D()(n)),n.handleUpdateFromDeposit=n.handleUpdateFromDeposit.bind(D()(n)),n.handleUpdateFromScanBarcode=n.handleUpdateFromScanBarcode.bind(D()(n)),n.handleUpdateFromReviseItem=n.handleUpdateFromReviseItem.bind(D()(n)),n.handleUpdateFromTableActions=n.handleUpdateFromTableActions.bind(D()(n)),n.handleUpdateFromAdditionalFunctions=n.handleUpdateFromAdditionalFunctions.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleUpdateFromHeaderDiscount=n.handleUpdateFromHeaderDiscount.bind(D()(n)),n.handleUpdateFromLineDiscount=n.handleUpdateFromLineDiscount.bind(D()(n)),n.handleUpdateFromChangePrice=n.handleUpdateFromChangePrice.bind(D()(n)),n.handleUpdateFromMergeTable=n.handleUpdateFromMergeTable.bind(D()(n)),n.handleUpdateFromSplitTable=n.handleUpdateFromSplitTable.bind(D()(n)),n.handleUpdateFromChangeTable=n.handleUpdateFromChangeTable.bind(D()(n)),n.handleUpdateFromVoid=n.handleUpdateFromVoid.bind(D()(n)),n.handleUpdateFromTable=n.handleUpdateFromTable.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this.props.navigation;this.sub=e.addListener("focus",this.didFocus.bind(this)),this.doChooseDefaultPrinter()}},{key:"didFocus",value:function(){var e=this.state.selectedTable;e&&this.handlePressTable(e),this.setState({refresh:le()().format("HH:mm:ss")})}},{key:"componentWillUnmount",value:function(){this.sub()}},{key:"doChooseDefaultPrinter",value:function(){var e=this.state,t=e.home,r=e.masters;if("web"===j.default.OS&&r.cashierPrinters.length>1)this.setState({overlayChoosePrinterVisible:!0,printPurpose:"DEFAULT PRINTER"});else if(1===r.cashierPrinters.length){var n,a=t;a.defaultPrinter=null==(n=r.cashierPrinters)?void 0:n[0],this.setState({home:a})}}},{key:"handlePressTable",value:function(){var e=a()((function*(e){var t=this;if(null!=e&&e.recKey){this.props.navigation;var r=this.state.serviceEntry+"api/tables/"+e.recKey;return fetch(r,{method:"GET"}).then((function(e){return e.json()})).then((function(e){if("SYS"===e.opentable.sectionId&&("A"===e.opentable.statusFlg||"D"===e.opentable.statusFlg))return t.doClearTable(),void t.doToggleScreen("MENU");"SYS"===e.opentable.sectionId&&t.doToggleScreen("TABLE"),t.setState({selectedTable:e.opentable,tableItems:e.opentableItems})}))}}));return function(t){return e.apply(this,arguments)}}()},{key:"handleActionTable",value:function(e,t){var r=this.props.navigation,n=this.state,a=n.serviceEntry,l=n.home,o=n.masters,s=n.selectedTable;"CREATE"===t?this.doCreateTable():"OPEN"===t?r.navigate("Table",{home:l,serviceEntry:a,masters:o,selectedTable:s,mode:"NEW",handleUpdateFromTable:this.handleUpdateFromTable}):"EDIT"===t&&r.navigate("Table",{home:l,serviceEntry:a,masters:o,selectedTable:s,mode:"EDIT"})}},{key:"handlePressMenu",value:function(e,t){var r=this,n=this.props.navigation,a=this.state,l=a.home,o=a.preference,s=a.serviceEntry,i=a.settings,c=a.masters,d=a.selectedTable;if(console.log(e),"O"!==e.menuType)if(d)if(c.modBundles.some((function(e){return"Y"===e.modmas.mustFlg&&"Y"===e.modmas.globalFlg}))||c.mods.some((function(t){var r;return t.menuId===e.menuId&&"Y"===(null==(r=c.modBundles.find((function(e){return e.modmas.modId===t.modId})))?void 0:r.modmas.mustFlg)})))n.navigate("Menu",{home:l,serviceEntry:s,masters:c,selectedTable:d,selectedMenu:e});else if(t){var u=s+"api/tables/"+d.recKey+"/insert-item",f={userId:l.userId,opentableRecKey:d.recKey,restmenuRecKey:e.recKey,restmenuMod:"N"===e.serviceFlg||"SYS"===d.sectionId?"*"+S.a.get("takeaway")+"  ":"",orderQty:"1",orderType:"N"===e.serviceFlg||"SYS"===d.sectionId?"B":"A"};fetch(u,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(t){"Y"===i.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(s,"Insert Item",l.userName,t.message,d.tableId,e.menuName,"1"),console.log("post insert-item successful",t),t.message?r.setState({overlayProcedureMessageVisible:t.message.toUpperCase(),loading:!1}):r.handlePressTable(d)}))}else n.navigate("Menu",{home:l,serviceEntry:s,masters:c,selectedTable:d,selectedMenu:e});else n.navigate("Menu",{home:l,serviceEntry:s,masters:c,selectedTable:d,selectedMenu:e});else n.navigate("Combo",{home:l,serviceEntry:s,preference:o,masters:c,selectedTable:d,selectedMenu:e})}},{key:"handlePressScan",value:function(e){var t=this.props.navigation,r=this.state,n=r.home,a=r.serviceEntry,l=r.masters,o=r.selectedTable;o&&(e?"web"!==j.default.OS&&t.navigate("Scan",{home:n,serviceEntry:a,masters:l,selectedTable:o}):this.setState({overlayScanBarcodeVisible:!0}))}},{key:"doClearTable",value:function(){this.setState({selectedTable:null,tableItems:[]}),this.doToggleScreen("TABLE")}},{key:"doCreateTable",value:function(e){var t=this,r=this.props.navigation,n=this.state,a=n.serviceEntry,l=n.home,o=n.settings,s=a+"api/insert-opentable",i={userId:l.userId,orderType:"B"};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(n){var s;"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Create Table",l.userName,n.message,null==(s=n.opentable)?void 0:s.tableId),n.message?t.setState({overlayProcedureMessageVisible:n.message.toUpperCase()}):(r.navigate("MainMenu"),t.setState({screen:"MENU",selectedTable:n.opentable,tableItems:n.opentableItems,refresh:le()().format("HH:mm:ss")},(function(){e&&t.handlePressMenu(e,!0)})))}))}},{key:"doTranslateTableColor",value:function(e){return e?e.adhocItem?te.adhoc:"SYS"===e.sectionId?"D"===e.statusFlg?te.paid:"A"===e.transType?te.grey5:te.deposit:"A"===e.statusFlg?te.vacant:"B"===e.statusFlg?te.reserved:"C"===e.statusFlg?te.occupied:"D"===e.statusFlg?te.paid:"E"===e.statusFlg?te.unavailable:void 0:te.grey9}},{key:"doTranslateTableStatus",value:function(e){return"SYS"!==e.sectionId?S.a.get(""+e.statusFlg).d("Unknown"):"A"===e.transType?S.a.get("sales"):"G"===e.transType?"Y"===e.homeDelivery?S.a.get("deposit")+"DLY":S.a.get("deposit"):void 0}},{key:"doTranslateTableItemColor",value:function(e){return"Y"===e.fireFlg?te.reserved:"Y"===e.confirmFlg?te.occupied:te.vacant}},{key:"doToggleScreen",value:function(e){var t=this.props.navigation;"MENU"===e?(this.setState({screen:"TABLE",refresh:le()().format("HH:mm:ss")}),t.navigate("MainTable")):(this.setState({screen:"MENU"}),t.navigate("MainMenu"))}},{key:"doPressItem",value:function(e){this.setState({selectedTableItem:e,overlayReviseItemVisible:!0})}},{key:"doStartDayclose",value:function(e){var t=this,r=this.props.navigation,n=this.state,a=n.serviceEntry,l=n.home,o=n.masters,s=n.settings;if("Y"===l.adminFlg||o.privileges.some((function(e){return"DAYCLOSE"===e.priId}))||e){var i=a+"api/start-dayclose",c={userId:l.userId,orgId:l.orgId,shopId:l.shopId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post start-dayclose successful",e),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Start Dayclose",l.userName,e.message),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.navigate("Dayclose",{home:l,serviceEntry:a,masters:o,dayclosePayments:e})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"DAYCLOSE"})}},{key:"doPressTransType",value:function(){var e=this.state.selectedTable,t=[];t.push({text:S.a.get("sales"),handleText:"doTransTypeSales"}),t.push({text:S.a.get("deposit"),handleText:"doTransTypeDeposit"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Transaction Type",text:"Select transaction type for "+e.tableId,ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"doStartPayment",value:function(e,t){var r=this,n=this.props.navigation,a=this.state,l=a.serviceEntry,o=a.home,s=a.masters,i=a.settings,c=a.selectedTable,d=a.tableItems;if(c)if("SYS"===c.sectionId||"C"===c.statusFlg)if(d&&0!==d.length)if(c.refTableId)this.setState({overlayProcedureMessageVisible:"TABLE ALREADY MERGED "+c.refTableId});else if("Y"===o.adminFlg||s.privileges.some((function(e){return"PAYMENT"===e.priId}))||t){var u=l+"api/tables/"+c.recKey+"/start-payment",f={userId:o.userId,opentableRecKey:c.recKey,iomodelId:o.defaultPrinter&&o.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(u,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){console.log("post start-payment successful",e),"Y"===i.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Start Payment",o.userName,e.message,c.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({selectedTable:e.opentable,pospays:e.opentablePospays},(function(){return n.navigate("Pos",{home:o,serviceEntry:l,masters:s,selectedTable:e.opentable,pospays:e.opentablePospays})}))}))}else this.setState({requestedPrivilege:"PAYMENT",overlayRequestAccessVisible:!0});else this.setState({overlayProcedureMessageVisible:"NO TABLE ITEMS"});else this.setState({overlayProcedureMessageVisible:"CHECK TABLE STATUS"});else this.setState({overlayProcedureMessageVisible:"MISSING TABLE"})}},{key:"doChangeTableStatus",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.selectedTable,o=(r.masters,r.settings),s=a+"api/tables/"+l.recKey+"/change-table-status",i={userId:n.userId,locId:n.locId,tableStatus:e,pax:"",vipId:"",vipName:"",phone:"",reservationTime:"",sourceId:""};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(r){console.log("post change-table-status successful",r),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Change Table Status",n.userName,r.message,l.tableId,"",e),r.message?t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):(t.setState({refresh:le()().format("HH:mm:ss")}),t.handlePressTable(l))}))}},{key:"doRevertTableItem",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=(t.masters,t.settings),l=t.selectedTableItem,o=t.selectedTable;this.setState({overlayReviseItemVisible:!1});var s=r+"api/tables/"+o.recKey+"/revert-adhoc",i={userId:n.userId,opentableRecKey:o.recKey,opentableItemRecKey:l.recKey};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(t){console.log("post revert-adhoc successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Revert Adhoc",n.userName,t.message,o.tableId,l.menuName),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):(e.setState({selectedTableItem:"",refresh:le()().format("HH:mm:ss")}),e.handlePressTable(o))}))}},{key:"doDuplicateTableItem",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=(t.masters,t.settings),l=t.selectedTableItem,o=t.selectedTable;this.setState({overlayReviseItemVisible:!1});var s=r+"api/tables/"+o.recKey+"/duplicate-item",i={userId:n.userId,opentableRecKey:o.recKey,opentableItemRecKey:l.recKey};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(t){console.log("post duplicate-item successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Duplicate Item",n.userName,t.message,o.tableId,l.menuName),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):(e.setState({selectedTableItem:""}),e.handlePressTable(o))}))}},{key:"doUpdateLineBreak",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=(t.masters,t.settings),l=t.selectedTable,o=t.selectedTableItem;this.setState({overlayReviseItemVisible:!1});var s="Y";"Y"===o.lineBreak&&(s="N");var i=r+"api/tables/"+l.recKey+"/update-line-break",c={userId:n.userId,opentableRecKey:l.recKey,opentableItemRecKey:o.recKey,lineBreak:s};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){console.log("post update-line-break successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Line Break",n.userName,t.message,l.tableId,o.menuName),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.handlePressTable(t.opentable)}))}},{key:"doPrintBill",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.masters,o=r.settings,s=r.selectedTable;if(s&&("C"===(null==s?void 0:s.statusFlg)||"SYS"===(null==s?void 0:s.sectionId)))if(l.cashierPrinters.length>1&&!e&&!n.defaultPrinter)this.setState({printPurpose:"PRINT BILL",overlayChoosePrinterVisible:!0});else{var i=a+"api/tables/"+s.recKey+"/print-bill",c={userId:n.userId,opentableRecKey:s.recKey,iomodelId:n.defaultPrinter&&n.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post print-bill successful",e),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Print Bill",n.userName,e.message,s.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.handlePressTable(s)}))}}},{key:"doOpenDrawer",value:function(e,t){var r=this,n=this.state,a=n.home,l=n.serviceEntry,o=n.masters,s=n.settings;if(o.cashierPrinters.length>1&&!e&&!a.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0,printPurpose:"OPEN DRAWER"});else if("Y"===a.adminFlg||o.privileges.some((function(e){return"OPENDRAWER"===e.priId}))||t){var i=l+"api/open-cashdrawer",c={userId:a.userId,shopId:a.shopId,iomodelId:a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post open-cashdrawer successful",e),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Open Cashdrawer",a.userName,e.message),e.message&&r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"OPENDRAWER"})}},{key:"doTransTypeSales",value:function(){var e=this.state.selectedTable;this.handleUpdateFromDeposit("A",e.vipName,e.vipPhone,e.homeDelivery,e.dlyDate?le()(e.dlyDate).format("YYYY-MM-DD"):"",e.dpostalcode,e.daddress1,e.daddress2)}},{key:"doTransTypeDeposit",value:function(){this.setState({overlayDepositVisible:!0})}},{key:"doPressSend",value:function(){var e=this.state,t=(e.serviceEntry,e.home,e.masters,e.selectedTable);if(t&&"Y"===t.sendFlg){var r=[];r.push({text:"Yes",handleText:"doSendOrder"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Send Order",text:"Send order for Table "+t.tableId+" ?",ok:!1,cancel:!0,options:r},overlayAlertVisible:!0})}else console.log("no selectedTable or sendFlg is N")}},{key:"doSendOrder",value:function(e){var t,r=this,n=this.state,a=n.serviceEntry,l=n.home,o=n.selectedTable,s=n.masters,i=n.settings,c=!1;"SYS"!==o.sectionId&&(c="Y"===(null==(t=s.sections.find((function(e){return e.sectionId===o.sectionId})))?void 0:t.printOrderFlg));if(s.cashierPrinters.length>1&&!e&&!l.defaultPrinter&&c)this.setState({printPurpose:"SEND ORDER",overlayChoosePrinterVisible:!0});else{var d=a+"api/tables/"+o.recKey+"/send-order",u={userId:l.userId,opentableRecKey:o.recKey,iomodelId:c&&(l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId)};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){console.log("post send-order successful",e),"Y"===i.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Send Order",l.userName,e.message,o.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({selectedTable:e.opentable,tableItems:e.opentableItems})}))}}},{key:"doEditTableItem",value:function(e){var t=this.props.navigation,r=this.state,n=r.home,a=r.serviceEntry,l=r.masters,o=r.preference,s=r.selectedTable,i=r.selectedTableItem;this.setState({overlayReviseItemVisible:!1}),"Y"!==i.confirmFlg||"Y"===n.adminFlg||l.privileges.some((function(e){return"EDITITEM"===e.priId}))||e?"O"===(null==i?void 0:i.menuType)?t.navigate("Combo",{home:n,serviceEntry:a,masters:l,preference:o,selectedTable:s,selectedMenu:l.menus.find((function(e){return e.menuId===i.menuId})),selectedTableItem:i}):t.navigate("Menu",{home:n,serviceEntry:a,masters:l,selectedTable:s,selectedMenu:l.menus.find((function(e){return e.menuId===i.menuId})),selectedTableItem:i}):this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"EDITITEM"})}},{key:"doDeleteTableItem",value:function(e){var t=this,r=this.state,n=r.serviceEntry,a=r.home,l=r.selectedTableItem,o=r.selectedTable,s=r.masters,i=r.settings;r.privileges;if("Y"!==l.confirmFlg||"Y"===a.adminFlg||s.privileges.some((function(e){return"VOIDITEM"===e.priId}))||e){var c=n+"api/tables/"+o.recKey+"/delete-item",d={userId:a.userId,orgId:a.orgId,locId:a.locId,opentableRecKey:o.recKey,opentableItemRecKey:l.recKey,superUserId:e};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post delete-item successful",e),"Y"===i.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Delete Item",a.userName,e.message,o.tableId,l.menuName),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.handlePressTable(e.opentable)}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"VOIDITEM"})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state,n=(r.selectedTable,r.home);if(e){if(this.setState({printPurpose:"",selectedPrinter:e,overlayChoosePrinterVisible:!1}),"SEND ORDER"===t)this.doSendOrder(e);else if("PRINT BILL"===t)this.doPrintBill(e);else if("START PAYMENT"===t)this.doStartPayment(e);else if("OPEN DRAWER"===t)this.doOpenDrawer(e);else if("DEFAULT PRINTER"===t){var a=n;a.defaultPrinter=e,this.setState({home:a})}}else this.setState({printPurpose:"",selectedPrinter:"",overlayChoosePrinterVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=(r.masters,r.settings),o=r.requestedPrivilege,s=r.selectedPrinter,i=r.selectedTable,c=r.selectedTableItem;if(e){var d=a+"api/super-user",u={locId:n.locId,accessCode:e,priId:o};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access "+o,n.userName,e.message,null==i?void 0:i.tableId,null==c?void 0:c.menuName,e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),"OPENDRAWER"===o?t.doOpenDrawer(s,e.userId):"PAYMENT"===o?t.doStartPayment(s,e.userId):"DAYCLOSE"===o?t.doStartDayclose(e.userId):"VOIDITEM"===o?t.doDeleteTableItem(e.userId):"EDITITEM"===o&&t.doEditTableItem(e.userId))}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromAdditionalFunctions",value:function(e){var t=this.props.navigation,r=this.state,n=r.serviceEntry,a=r.home,l=r.masters,o=r.selectedTable;r.tableItems;this.setState({overlayAdditionalFunctionsVisible:!1}),e&&("viewReprint"===e?t.navigate("Reprint",{home:a,serviceEntry:n,masters:l}):"viewVoid"===e?t.navigate("Void",{home:a,serviceEntry:n,masters:l,handleUpdateFromVoid:this.handleUpdateFromVoid}):"viewCollect"===e?t.navigate("Collect",{home:a,serviceEntry:n,masters:l}):"viewDayclose"===e?this.doStartDayclose():"viewReports"===e?t.navigate("Report",{home:a,serviceEntry:n,masters:l}):"openDrawer"===e?this.doOpenDrawer():"viewPrinters"===e?t.navigate("Printer",{home:a,serviceEntry:n}):"viewActivate"===e?t.navigate("Activate",{home:a,serviceEntry:n,masters:l}):"logOut"===e?t.goBack():"syncMasters"===e?t.navigate("Login",{sync:new Date}):"viewTrace"===e?t.navigate("Trace",{home:a,serviceEntry:n,selectedTable:o}):"viewLimit"===e&&t.navigate("Limit",{home:a,serviceEntry:n,masters:l}))}},{key:"handleUpdateFromTableActions",value:function(){var e=a()((function*(e){var t=this.props.navigation,r=this.state,n=r.serviceEntry,a=r.home,l=r.masters,o=r.selectedTable,s=r.tableItems;this.setState({overlayTableActionsVisible:!1}),e&&("viewResequence"===e?t.navigate("Resequence",{home:a,serviceEntry:n,masters:l,tableItems:s,selectedTable:o}):"viewTransfer"===e?t.navigate("Transfer",{home:a,serviceEntry:n,masters:l,tableItems:s,selectedTable:o}):"headerDiscount"===e?this.setState({overlayHeaderDiscountVisible:!0}):"printBill"===e?this.doPrintBill():"openTable"===e?(yield this.handlePressTable(o),t.navigate("Table",{home:a,serviceEntry:n,masters:l,selectedTable:o,mode:"NEW",handleUpdateFromTable:this.handleUpdateFromTable})):"editTable"===e?t.navigate("Table",{home:a,serviceEntry:n,masters:l,selectedTable:o,mode:"EDIT"}):"resetTable"===e?this.doChangeTableStatus("A"):"reserveTable"===e?this.doChangeTableStatus("B"):"disableTable"===e?this.doChangeTableStatus("E"):"mergeTable"===e?this.setState({overlayMergeTableVisible:!0}):"splitTable"===e?this.setState({overlaySplitTableVisible:!0}):"changeTable"===e&&this.setState({overlayChangeTableVisible:!0}))}));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpdateFromReviseItem",value:function(e){this.props.navigation;var t=this.state,r=(t.serviceEntry,t.home,t.settings,t.masters,t.selectedTable,t.selectedTableItem);if(e)if("voidItem"===e){var n=[];n.push({text:"Yes",handleText:"doDeleteTableItem"}),this.setState({overlayReviseItemVisible:!1,overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Remove Item",text:"Remove "+r.menuName+" ?",ok:!1,cancel:!0,options:n},overlayAlertVisible:!0})}else"editItem"===e?this.doEditTableItem():"revertItem"===e?this.doRevertTableItem():"changePrice"===e?this.setState({overlayChangePriceVisible:!0,overlayReviseItemVisible:!1}):"lineDiscount"===e?this.setState({overlayLineDiscountVisible:!0,overlayReviseItemVisible:!1}):"lineBreak"===e?this.doUpdateLineBreak():"duplicateItem"===e&&this.doDuplicateTableItem();else this.setState({overlayReviseItemVisible:!1})}},{key:"handleUpdateFromLineDiscount",value:function(e,t){var r=this;if(this.setState({overlayLineDiscountVisible:!1}),e){var n=this.state,a=n.serviceEntry,l=n.home,o=(n.masters,n.settings),s=n.selectedTable,i=n.selectedTableItem,c=a+"api/tables/"+s.recKey+"/line-discount",d={userId:l.userId,discId:e.discId,disc:e.discNum,opentableRecKey:s.recKey,opentableItemRecKey:i.recKey,superUserId:t,remarks:e.remarks};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(t){console.log("post line-discount successful",t),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Line Discount",l.userName,t.message,s.tableId,i.menuName,e.discId),t.message?r.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):r.handlePressTable(s)}))}}},{key:"handleUpdateFromHeaderDiscount",value:function(e,t){var r=this;if(this.setState({overlayHeaderDiscountVisible:!1}),e){var n=this.state,a=n.serviceEntry,l=n.home,o=(n.masters,n.settings),s=n.selectedTable,i=a+"api/tables/"+s.recKey+"/header-discount",c={userId:l.userId,discId:e.discId,disc:e.discNum,opentableRecKey:s.recKey,superUserId:t,remarks:e.remarks};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){console.log("post header-discount successful",t),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Header Discount",l.userName,t.message,s.tableId,"",e.discId),t.message?r.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):r.handlePressTable(s)}))}}},{key:"handleUpdateFromChangePrice",value:function(e,t,r){var n=this;if(this.setState({overlayChangePriceVisible:!1}),e||t){var a=this.state,l=a.serviceEntry,o=a.home,s=(a.masters,a.settings),i=a.selectedTable,c=a.selectedTableItem,d=l+"api/tables/"+i.recKey+"/change-price",u={userId:o.userId,price:e,discId:t.discId,opentableRecKey:i.recKey,opentableItemRecKey:c.recKey,superUserId:r};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(t){console.log("post change-price successful",t),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Change Price",o.userName,t.message,i.tableId,c.menuName,e),t.message?n.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):n.handlePressTable(i)}))}}},{key:"handleUpdateFromMergeTable",value:function(e){var t=this;if(this.setState({overlayMergeTableVisible:!1}),0!==e.length){var r=this.state,n=r.serviceEntry,a=r.home,l=(r.masters,r.settings),o=r.selectedTable,s=n+"api/tables/"+o.recKey+"/merge-table",i=e.map((function(e){return{mergedTableId:e.tableId}})),c={userId:a.userId,locId:a.locId,opentableRecKey:o.recKey,itemPayloads:i};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(r){console.log("post merge-table successful",r),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Merge Table",a.userName,r.message,o.tableId,"",e.map((function(e){return e.tableId})).join(",")),r.message?t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):(t.setState({refresh:le()().format("HH:mm:ss")}),t.handlePressTable(o))}))}}},{key:"handleUpdateFromSplitTable",value:function(e){var t=this;if(this.setState({overlaySplitTableVisible:!1}),e){var r=this.state,n=r.serviceEntry,a=r.home,l=(r.masters,r.settings),o=r.selectedTable,s=n+"api/tables/"+o.recKey+"/split-table",i=e.map((function(e){return{opentableItemRecKey:e.recKey,opentableRecKey:o.recKey}})),c={userId:a.userId,itemPayloads:i};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post split-table successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Split Table",a.userName,e.message,o.tableId,"",null==(r=e.opentable)?void 0:r.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({refresh:le()().format("HH:mm:ss")}),t.handlePressTable(e.opentable||o))}))}}},{key:"handleUpdateFromChangeTable",value:function(e){var t=this;if(this.setState({overlayChangeTableVisible:!1}),e){var r=this.state,n=r.serviceEntry,a=r.home,l=(r.masters,r.settings),o=r.selectedTable,s=n+"api/tables/"+o.recKey+"/change-table",i={userId:a.userId,tableIdTo:e.tableId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(r){console.log("post change-table successful",r),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Change Table",a.userName,r.message,o.tableId,"",e.tableId),r.message?t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):(t.setState({refresh:le()().format("HH:mm:ss")}),t.handlePressTable(e))}))}}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.state;t.selectedTable,t.selectedTableItem;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&("doSendOrder"===e?this.doSendOrder():"doDeleteTableItem"===e?this.doDeleteTableItem():"doTransTypeSales"===e?this.doTransTypeSales():"doTransTypeDeposit"===e&&this.doTransTypeDeposit())}},{key:"handleUpdateFromAutoLogout",value:function(e){}},{key:"handleUpdateFromDeposit",value:function(e,t,r,n,a,l,o,s){var i=this;if(this.setState({overlayDepositVisible:!1}),e){var c=this.state,d=c.home,u=c.serviceEntry,f=(c.masters,c.settings),h=c.selectedTable,y=u+"api/tables/"+h.recKey+"/update-table-info",b={userId:d.userId,locId:d.locId,transType:e,vipName:t,phone:r,deliveryFlg:n,dlyDate:a,postalCode:l,addr1:o,addr2:s,addr3:"",addr4:""};fetch(y,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(b)}).then((function(e){return e.json()})).then((function(t){console.log("post deposit successful",t),"Y"===f.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(u,"Update Transaction Type",d.userName,t.message,h.tableId,"",e+","+n),t.message?i.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):i.handlePressTable(h)}))}}},{key:"handleUpdateFromScanBarcode",value:function(e){var t=this;if(e){var r=this.state,n=r.serviceEntry,a=r.home,l=r.settings,o=r.selectedTable,s=n+"api/tables/"+o.recKey+"/scan-barcode",i={userId:a.userId,orgId:a.orgId,locId:a.locId,shopId:a.shopId,vipId:a.vipId,barcode:e,opentableRecKey:o.recKey};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(r){console.log("post scan-barcode successful",r),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Scan Barcode",a.userName,r.message,o.tableId,"",e),r.message?t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):t.handlePressTable(o)}))}else this.setState({overlayScanBarcodeVisible:!1})}},{key:"handleUpdateFromVoid",value:function(e){this.setState({selectedTable:e.opentable,tableItems:e.opentableItems})}},{key:"handleUpdateFromTable",value:function(){this.doToggleScreen("TABLE")}},{key:"render",value:function(){var e,t,r=this,n=this.props,a=(n.route,n.navigation),l=this.state,o=l.serviceEntry,s=l.home,i=l.preference,c=l.masters,d=l.screen,u=l.refresh,f=l.selectedTable,h=l.selectedTableItem,y=l.tableItems,b=l.printPurpose,p=l.requestedPrivilege,m=l.overlayAutoLogoutVisible,j=l.overlayAlertVisible,x=l.overlayAlertInputValue,v=l.overlayReviseItemVisible,T=l.overlayTableActionsVisible,O=l.overlayAdditionalFunctionsVisible,I=l.overlayRequestAccessVisible,C=l.overlayHeaderDiscountVisible,F=l.overlayLineDiscountVisible,P=l.overlayChangePriceVisible,R=l.overlayChangeTableVisible,w=l.overlayMergeTableVisible,k=l.overlaySplitTableVisible,E=l.overlayDepositVisible,B=l.overlayScanBarcodeVisible,D=l.overlayProcedureMessageVisible,U=l.overlayChoosePrinterVisible;return Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row"},children:[m&&Object(Q.jsx)(De,{handleUpdateFromAutoLogout:this.handleUpdateFromAutoLogout}),E&&Object(Q.jsx)(Ve,{serviceEntry:o,selectedTable:f,handleUpdateFromDeposit:this.handleUpdateFromDeposit}),j&&Object(Q.jsx)(St,{input:x,handleUpdateFromAlert:this.handleUpdateFromAlert}),D&&Object(Q.jsx)(se,{text:D,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),B&&Object(Q.jsx)(Ne,{handleUpdateFromScanBarcode:this.handleUpdateFromScanBarcode}),v&&Object(Q.jsx)(ft,{home:s,privileges:c.privileges,selectedTable:f,selectedTableItem:h,tableItems:y,handleUpdateFromReviseItem:this.handleUpdateFromReviseItem}),T&&Object(Q.jsx)(bt,{selectedTable:f,tableItems:y,handleUpdateFromTableActions:this.handleUpdateFromTableActions}),O&&Object(Q.jsx)(gt,{selectedTable:f,tableItems:y,handleUpdateFromAdditionalFunctions:this.handleUpdateFromAdditionalFunctions}),I&&Object(Q.jsx)(Ge,{home:s,requestedPrivilege:p,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),U&&Object(Q.jsx)(vt,{printPurpose:b,cashierPrinters:c.cashierPrinters,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),P&&Object(Q.jsx)(We,{home:s,serviceEntry:o,settings:c.settings,privileges:c.privileges,discounts:c.discounts,selectedTableItem:h,handleUpdateFromChangePrice:this.handleUpdateFromChangePrice}),F&&Object(Q.jsx)(Qe,{home:s,serviceEntry:o,settings:c.settings,privileges:c.privileges,discounts:c.discounts,handleUpdateFromLineDiscount:this.handleUpdateFromLineDiscount}),C&&Object(Q.jsx)(Ze,{home:s,serviceEntry:o,settings:c.settings,privileges:c.privileges,discounts:c.discounts,handleUpdateFromHeaderDiscount:this.handleUpdateFromHeaderDiscount}),w&&Object(Q.jsx)(nt,{serviceEntry:o,home:s,selectedTable:f,handleUpdateFromMergeTable:this.handleUpdateFromMergeTable}),k&&Object(Q.jsx)(ot,{selectedTable:f,tableItems:y,handleUpdateFromSplitTable:this.handleUpdateFromSplitTable}),R&&Object(Q.jsx)(ct,{serviceEntry:o,home:s,selectedTable:f,handleUpdateFromChangeTable:this.handleUpdateFromChangeTable}),Object(Q.jsx)(g.default,{style:{width:10,backgroundColor:te.grey8},children:Object(Q.jsx)(g.default,{style:{marginTop:30,height:100,backgroundColor:this.doTranslateTableColor(f)}})}),Object(Q.jsxs)(g.default,{style:{flex:1,backgroundColor:"white"},children:[Object(Q.jsxs)(g.default,{style:{marginHorizontal:10,height:20,flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},children:[Object(Q.jsx)(J.default,{style:Rt.footerText,children:s.userName}),Object(Q.jsx)(J.default,{style:Rt.footerText,children:s.locName})]}),Object(Q.jsxs)(g.default,{style:{margin:7,marginLeft:0,flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsx)(g.default,{style:{margin:3,flex:1,flexDirection:"row"},children:f&&Object(Q.jsxs)(M.default,{style:{marginLeft:0,aspectRatio:1,backgroundColor:this.doTranslateTableColor(f),justifyContent:"center",alignItems:"center"},onPress:function(){return r.setState({overlayTableActionsVisible:!0})},children:[Object(Q.jsx)(J.default,{style:Rt.tableUpperBand,numberOfLines:1,children:f.vipName||""}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.black8,fontSize:24,letterSpacing:1},numberOfLines:1,children:f.tableId}),Object(Q.jsx)(J.default,{style:Rt.tableLowerBand,numberOfLines:1,children:this.doTranslateTableStatus(f)})]})}),f&&"SYS"===f.sectionId?Object(Q.jsxs)(g.default,{style:{flexDirection:"row"},children:[f.adhocItem>0&&Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Adhoc",{home:s,serviceEntry:o,masters:c,selectedTable:f})},children:[Object(Q.jsx)(V.default,{name:"extension",size:28,color:te.adhoc,style:{height:28,width:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("adhoc")}),Object(Q.jsx)(J.default,{style:{position:"absolute",fontFamily:"varela-round",top:10,right:10},children:f.adhocItem})]}),Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},disabled:"Y"!==f.sendFlg,onPress:function(){return r.doPressSend()},children:[Object(Q.jsx)(ge.default,{name:"send",size:24,color:"Y"!==f.sendFlg?te.grey5:te.occupied,style:{height:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("send")})]}),Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Fire",{home:s,serviceEntry:o,masters:c,selectedTable:f,tableItems:y})},children:[Object(Q.jsx)(je.default,{name:"fire",size:24,color:te.reserved,style:{height:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("fire")})]})]}):f&&"A"===f.statusFlg?Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Table",{home:s,serviceEntry:o,masters:c,selectedTable:f,mode:"NEW",handleUpdateFromTable:r.handleUpdateFromTable})},children:[Object(Q.jsx)(xe.default,{name:"checkbox-blank",size:26,color:te.occupied,style:{height:28,width:26}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("open")})]}):f&&"D"===f.statusFlg?Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return r.handleUpdateFromTableActions("resetTable")},children:[Object(Q.jsx)(xe.default,{name:"checkbox-blank",size:26,color:te.vacant,style:{height:28,width:26}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("reset")})]}):f?Object(Q.jsxs)(g.default,{style:{flexDirection:"row"},children:[f.adhocItem>0&&Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Adhoc",{home:s,serviceEntry:o,masters:c,selectedTable:f})},children:[Object(Q.jsx)(V.default,{name:"extension",size:28,color:te.adhoc,style:{height:28,width:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("adhoc")}),Object(Q.jsx)(J.default,{style:{position:"absolute",fontFamily:"varela-round",top:10,right:10},children:f.adhocItem})]}),Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},disabled:"Y"!==f.sendFlg,onPress:function(){return r.doPressSend()},children:[Object(Q.jsx)(ge.default,{name:"send",size:24,color:"Y"!==f.sendFlg?te.grey5:te.occupied,style:{height:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("send")})]}),Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Fire",{home:s,serviceEntry:o,masters:c,selectedTable:f,tableItems:y})},children:[Object(Q.jsx)(je.default,{name:"fire",size:24,color:te.reserved,style:{height:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("fire")})]})]}):null,Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return r.setState({overlayAdditionalFunctionsVisible:!0})},children:[Object(Q.jsx)(xe.default,{name:"clover",size:28,color:te.paid,style:{height:28,width:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("func")})]})]}),Object(Q.jsxs)(g.default,{style:{flexDirection:"row",marginVertical:3,borderLeftWidth:5,borderLeftColor:"white"},children:[Object(Q.jsx)(g.default,{style:{width:50,height:20,alignItems:"center",justifyContent:"center",borderRightColor:te.paid},children:Object(Q.jsx)(J.default,{style:[Rt.footerText,{fontSize:12}],children:S.a.get("qty")})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:[Rt.footerText,{fontSize:12}],children:S.a.get("desc")})}),Object(Q.jsx)(g.default,{style:{paddingRight:10,alignItems:"flex-end",justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:[Rt.footerText,{fontSize:12}],children:S.a.get("total")})})]}),Object(Q.jsx)(me.default,{style:{flex:1},ref:function(e){return r.scrollViewRef=e},onContentSizeChange:function(){return r.scrollViewRef.scrollToEnd()},showsVerticalScrollIndicator:!1,children:y.filter((function(e){return!e.refRecKey})).map((function(e){var t;return Object(Q.jsxs)(g.default,{children:["Y"===e.lineBreak&&Object(Q.jsxs)(g.default,{style:{alignItems:"center",flexDirection:"row",height:20},children:[Object(Q.jsx)(g.default,{style:{flex:1,height:1,width:20,backgroundColor:te.grey5,marginHorizontal:20}}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.grey5,fontSize:12},children:"LINE BREAK"}),Object(Q.jsx)(g.default,{style:{flex:1,height:1,width:20,backgroundColor:te.grey5,marginHorizontal:20}})]}),Object(Q.jsxs)(M.default,{style:{flexDirection:"row",marginVertical:3,borderLeftWidth:5,borderLeftColor:r.doTranslateTableItemColor(e)},onPress:function(){return r.doPressItem(e)},children:[Object(Q.jsx)(g.default,{style:{paddingVertical:10,width:50,alignItems:"center",borderRightColor:te.paid},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:16},children:e.orderQty})}),Object(Q.jsxs)(g.default,{style:{paddingVertical:10,flex:1},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:16},children:e.menuName}),e.menuMod&&Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:16,color:te.paid},children:e.menuMod}),y.filter((function(t){return t.refRecKey===e.recKey})).map((function(e){return Object(Q.jsxs)(g.default,{style:{marginTop:5},children:[Object(Q.jsxs)(J.default,{style:{fontFamily:"varela-round",fontSize:14,marginLeft:10},children:["- ",e.menuName]}),e.menuMod&&Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:14,color:te.paid},children:e.menuMod})]},e.recKey.toString())}))]}),Object(Q.jsx)(g.default,{style:{paddingVertical:10,paddingHorizontal:10,alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:16},children:null==(t=e.lineTotal)?void 0:t.toFixed(2)})})]})]},e.recKey.toString())}))}),Object(Q.jsxs)(g.default,{style:{margin:10,marginBottom:0,flexDirection:"row",justifyContent:"flex-end",alignItems:"baseline"},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:10}}),Object(Q.jsxs)(J.default,{style:{fontFamily:"varela-round",fontSize:28},children:["$",(null==f||null==(e=f.grandTotal)?void 0:e.toFixed(2))||"0.00"]})]}),Object(Q.jsxs)(g.default,{style:{margin:7,flexDirection:"row"},children:[Object(Q.jsxs)(M.default,{style:{margin:3,height:100,flex:1,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return r.doToggleScreen(d)},children:["TABLE"===d?Object(Q.jsx)(A.default,{name:"md-book",size:26,color:te.reserved,style:{height:28,width:26}}):Object(Q.jsx)(xe.default,{name:"apps-box",size:28,color:te.vacant,style:{height:28,width:28}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:"TABLE"===d?S.a.get("menu"):S.a.get("table")})]}),Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Trace",{home:s,serviceEntry:o,selectedTable:f})},children:[Object(Q.jsx)(xe.default,{name:"navigation",size:28,color:te.adhoc,style:{height:28,width:28,transform:[{rotateZ:"180deg"}]}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("trace")})]}),Object(Q.jsxs)(M.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return r.doPrintBill()},children:[Object(Q.jsx)(xe.default,{name:"book",size:26,color:te.occupied,style:{height:28,width:26}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("bill")})]}),Object(Q.jsxs)(M.default,{style:{margin:3,height:100,flex:1,borderRadius:5,backgroundColor:te.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return r.doStartPayment()},children:[Object(Q.jsx)(A.default,{name:"print-sharp",size:27,color:te.paid,style:{height:28,marginLeft:1}}),Object(Q.jsx)(J.default,{style:Rt.buttonText,children:S.a.get("payment")})]})]}),Object(Q.jsxs)(g.default,{style:{marginHorizontal:10,height:20,flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsx)(J.default,{style:Rt.footerText,children:le()().format("HH:mm")}),Object(Q.jsxs)(J.default,{style:Rt.footerText,children:["EPB BISTRO ",null==(t=G.default.manifest.version)?void 0:t.split(".")[0]]})]})]}),Object(Q.jsx)(g.default,{style:{flex:2,backgroundColor:te.grey9},children:Object(Q.jsxs)(Ft.Navigator,{screenOptions:{headerShown:!1,animation:"none",gestureEnabled:!1,tabBarStyle:{display:"none"}},children:[Object(Q.jsx)(Ft.Screen,{name:"MainTable",children:function(){return Object(Q.jsx)(Fe,{refresh:u,home:s,serviceEntry:o,preference:i,masters:c,handlePressTable:r.handlePressTable,handleActionTable:r.handleActionTable})}}),Object(Q.jsx)(Ft.Screen,{name:"MainMenu",children:function(){return Object(Q.jsx)(ke,{home:s,serviceEntry:o,preference:i,foldergrps:c.foldergrps,folders:c.folders,menus:c.menus,modBundles:c.modBundles,handlePressMenu:r.handlePressMenu,handlePressScan:r.handlePressScan})}})]})})]})}}]),r}(b.Component),Rt=m.default.create({footerText:{fontFamily:"varela-round",fontSize:10,textTransform:"uppercase"},tableUpperBand:{position:"absolute",top:10,left:0,fontFamily:"varela-round",width:"100%",paddingVertical:5,justifyContent:"center",alignItems:"center",color:"black",fontSize:12,textAlign:"center",textTransform:"uppercase"},tableLowerBand:{position:"absolute",bottom:0,left:0,fontFamily:"varela-round",width:"100%",paddingVertical:5,backgroundColor:te.black8,justifyContent:"center",alignItems:"center",color:"white",fontSize:12,textAlign:"center",textTransform:"uppercase"},buttonText:{marginTop:10,fontFamily:"varela-round",fontSize:10,color:te.grey5,textTransform:"uppercase"}});function wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var kt=function(e){d()(r,e);var t=wt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={preference:null,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:""},n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e;return Oe.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.a.awrap(I.default.getItem("preference"));case 2:e=t.sent,console.log("here",e),e&&(e=JSON.parse(e),this.setState({preference:e}));case 5:case"end":return t.stop()}}),null,this,null,Promise)}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"doReset"===e&&this.doReset()}},{key:"doPressReset",value:function(){var e=[];e.push({text:S.a.get("yes"),handleText:"doReset"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:S.a.get("reset")+" "+S.a.get("preference"),text:"Reset all to factory preset?",ok:!1,cancel:!0,options:e},overlayAlertVisible:!0})}},{key:"doReset",value:function(){var e={tcolsize:"web"===j.default.OS?5:4,mcolsize:"web"===j.default.OS?3:2,mquick:"Y"};this.setState({preference:e}),I.default.setItem("preference",JSON.stringify(e))}},{key:"doTcolsize",value:function(){var e=this.state.preference;e.tcolsize<8?e.tcolsize=e.tcolsize+1:e.tcolsize=3,this.setState({preference:e}),I.default.setItem("preference",JSON.stringify(e))}},{key:"doMcolsize",value:function(){var e=this.state.preference;e.mcolsize<6?e.mcolsize=e.mcolsize+1:e.mcolsize=1,this.setState({preference:e}),I.default.setItem("preference",JSON.stringify(e))}},{key:"doMquick",value:function(){var e=this.state.preference;"Y"===e.mquick?e.mquick="N":e.mquick="Y",this.setState({preference:e}),I.default.setItem("preference",JSON.stringify(e))}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=(r.loading,r.preference),a=r.overlayProcedureMessageVisible,l=r.overlayAlertVisible,o=r.overlayAlertInputValue;return console.log("render preference"),Object(Q.jsxs)(g.default,{style:Et.container,children:[l&&Object(Q.jsx)(St,{input:o,handleUpdateFromAlert:this.handleUpdateFromAlert}),a&&Object(Q.jsx)(se,{text:a,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsxs)(g.default,{style:Et.leftContainer,children:[Object(Q.jsx)(g.default,{style:Et.navigateContainer,children:Object(Q.jsxs)(g.default,{style:Et.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:Et.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Et.buttonText,children:S.a.get("back")})]}),Object(Q.jsx)(g.default,{style:Et.selectionContainer})]})}),Object(Q.jsx)(g.default,{style:Et.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Et.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:Et.gap}),Object(Q.jsxs)(g.default,{style:Et.gridContainer,children:[Object(Q.jsx)(g.default,{style:Et.gap}),Object(Q.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:Object(Q.jsxs)(M.default,{style:Et.grid,onPress:function(){return e.doTcolsize()},children:[Object(Q.jsxs)(g.default,{style:Et.gridFirst,children:[Object(Q.jsx)(J.default,{style:Et.gridFirstLeftText,children:"TCOLSIZE"}),Object(Q.jsx)(J.default,{style:[Et.gridFirstRightText],children:"3-8"})]}),Object(Q.jsxs)(g.default,{style:Et.gridSecond,children:[Object(Q.jsx)(J.default,{style:Et.gridSecondText,children:"Number of Columns for Table"}),Object(Q.jsx)(J.default,{style:[Et.gridSecondText,{color:te.reserved}],children:null==n?void 0:n.tcolsize})]}),Object(Q.jsxs)(g.default,{style:Et.gridThird,children:[Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.paid}]}),"web"===j.default.OS&&5===(null==n?void 0:n.tcolsize)||"web"!==j.default.OS&&4===(null==n?void 0:n.tcolsize)?Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.vacant}],children:S.a.get("default")}):Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.paid}],children:S.a.get("preference")})]})]})})]}),Object(Q.jsx)(g.default,{style:Et.gap})]})})]}),Object(Q.jsxs)(g.default,{style:Et.rightContainer,children:[Object(Q.jsx)(g.default,{style:Et.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Et.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsx)(g.default,{style:Et.gap}),Object(Q.jsxs)(g.default,{style:Et.gridContainer,children:[Object(Q.jsx)(g.default,{style:Et.gap}),Object(Q.jsxs)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[Object(Q.jsxs)(M.default,{style:Et.grid,onPress:function(){return e.doMcolsize()},children:[Object(Q.jsxs)(g.default,{style:Et.gridFirst,children:[Object(Q.jsx)(J.default,{style:Et.gridFirstLeftText,children:"MCOLSIZE"}),Object(Q.jsx)(J.default,{style:[Et.gridFirstRightText],children:"1-6"})]}),Object(Q.jsxs)(g.default,{style:Et.gridSecond,children:[Object(Q.jsx)(J.default,{style:Et.gridSecondText,children:"Number of Columns for Menu"}),Object(Q.jsx)(J.default,{style:[Et.gridSecondText,{color:te.reserved}],children:null==n?void 0:n.mcolsize})]}),Object(Q.jsxs)(g.default,{style:Et.gridThird,children:[Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.paid}]}),"web"===j.default.OS&&3===(null==n?void 0:n.mcolsize)||"web"!==j.default.OS&&2===(null==n?void 0:n.mcolsize)?Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.vacant}],children:S.a.get("default")}):Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.paid}],children:S.a.get("preference")})]})]}),Object(Q.jsxs)(M.default,{style:Et.grid,onPress:function(){return e.doMquick()},children:[Object(Q.jsxs)(g.default,{style:Et.gridFirst,children:[Object(Q.jsx)(J.default,{style:Et.gridFirstLeftText,children:"MQUICK"}),Object(Q.jsx)(J.default,{style:[Et.gridFirstRightText],children:"Y/N"})]}),Object(Q.jsxs)(g.default,{style:Et.gridSecond,children:[Object(Q.jsx)(J.default,{style:Et.gridSecondText,children:"Quick Select for Menu"}),Object(Q.jsx)(J.default,{style:[Et.gridSecondText,{color:te.reserved}],children:null==n?void 0:n.mquick})]}),Object(Q.jsxs)(g.default,{style:Et.gridThird,children:[Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.paid}]}),"Y"===(null==n?void 0:n.mquick)?Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.vacant}],children:S.a.get("default")}):Object(Q.jsx)(J.default,{style:[Et.gridThirdRightText,{color:te.paid}],children:S.a.get("preference")})]})]})]})]}),Object(Q.jsx)(g.default,{style:Et.gap})]})}),Object(Q.jsx)(g.default,{style:Et.navigateContainer,children:Object(Q.jsx)(g.default,{style:Et.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:Et.button,onPress:function(){return e.doPressReset()},children:[Object(Q.jsx)(U.default,{name:"warning",color:"white",size:36}),Object(Q.jsxs)(J.default,{style:Et.buttonText,children:[S.a.get("reset")," ",S.a.get("all")]})]})})})]})]})}}]),r}(b.Component),Et=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row",justifyContent:"space-between"},gridSecond:{marginVertical:5,flexDirection:"row",justifyContent:"space-between"},gridThird:{flexDirection:"row",justifyContent:"space-between"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round",textTransform:"uppercase"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}}),Bt=r(25);function Dt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ut=function(e){d()(r,e);var t=Dt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={receipts:e.receipts.map((function(t){return{docId:t.docId,percentage:(100/e.receipts.length).toFixed(0).toString()}}))},n.handleFillPercentagesEvenly=n.handleFillPercentagesEvenly.bind(D()(n)),n.handleSetPercentageForReceipt=n.handleSetPercentageForReceipt.bind(D()(n)),n.handleSetFullPercentageForReceipt=n.handleSetFullPercentageForReceipt.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"handleFillPercentagesEvenly",value:function(){var e=this,t=this.state.receipts,r=(100/t.length).toFixed(0).toString();t.forEach((function(t){return e.handleSetPercentageForReceipt(r,t.docId)}))}},{key:"handleSetFullPercentageForReceipt",value:function(e){var t=this;this.state.receipts.forEach((function(r){r.docId===e.docId?t.handleSetPercentageForReceipt("100",r.docId):t.handleSetPercentageForReceipt("0",r.docId)}))}},{key:"handleSetPercentageForReceipt",value:function(e,t){var r=this.state.receipts,n=r,a=r.findIndex((function(e){return e.docId===t}));Number(e)?n[a].percentage=Number(e).toFixed(0).toString():n[a].percentage="0",this.setState({receipts:n},(function(){return console.log("receiptsUpdate2",r)}))}},{key:"handleSubmit",value:function(){var e=this.state.receipts,t=e.reduce((function(e,t){return e+Number(t.percentage)}),0);console.log("agg",t),e.some((function(t){return e[0].percentage!==t.percentage}))&&100!==t?console.log("validation failed"):this.props.handleUpdateFromSplitItems(e)}},{key:"render",value:function(){var e=this,t=this.props.selectedTableItems,r=this.state.receipts;return console.log("in overlaysplititems"),Object(Q.jsx)(g.default,{style:At.overlay,children:Object(Q.jsxs)(g.default,{style:At.overlayContent,children:[Object(Q.jsxs)(g.default,{style:At.overlayHeader,children:[Object(Q.jsx)(J.default,{style:At.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:At.overlaySubtitleText,children:"Split Item(s)"}),Object(Q.jsxs)(J.default,{style:At.overlayText,children:["You are splitting ",t.length," item(s) for ",r.length," receipts"]})]}),Object(Q.jsx)(me.default,{style:At.overlayScroll,children:r.map((function(t){return Object(Q.jsxs)(g.default,{style:At.inputRow,children:[Object(Q.jsxs)(M.default,{style:At.inputRowLeft,onPress:function(){return e.handleSetFullPercentageForReceipt(t)},children:[Object(Q.jsx)(J.default,{style:At.inputRowTitleText,children:"RECEIPT"}),Object(Q.jsx)(J.default,{style:At.inputRowSubtitleText,children:t.docId})]}),Object(Q.jsxs)(g.default,{style:At.inputRowRight,children:[Object(Q.jsx)(N.default,{style:At.textInput,keyboardType:"numeric",selectTextOnFocus:!0,value:r.find((function(e){return e.docId===t.docId})).percentage,onChangeText:function(r){return e.handleSetPercentageForReceipt(r,t.docId)}}),Object(Q.jsx)(J.default,{style:At.percentageText,children:"%"})]})]},t.docId)}))}),Object(Q.jsx)(M.default,{style:[At.overlayOption,{marginTop:20}],onPress:function(){return e.handleFillPercentagesEvenly()},children:Object(Q.jsx)(J.default,{style:At.overlayOptionText,children:"Fill evenly"})}),Object(Q.jsx)(M.default,{style:At.overlayOption,onPress:function(){return e.handleSubmit()},children:Object(Q.jsx)(J.default,{style:At.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[At.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromSplitItems("")},children:Object(Q.jsx)(J.default,{style:At.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),At=(Bt.default.get("window").height,m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayNumber:{fontFamily:"varela-round",color:"white",fontSize:32},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},overlayScroll:{height:280},inputRow:{height:60,marginVertical:5,marginHorizontal:40,flexDirection:"row"},inputRowLeft:{flex:1,justifyContent:"center"},inputRowRight:{flex:1,borderRadius:5,flexDirection:"row",backgroundColor:te.grey1,alignItems:"center",justifyContent:"flex-end"},inputRowTitleText:{fontFamily:"varela-round",fontSize:12,color:te.paid},inputRowSubtitleText:{fontFamily:"varela-round",fontSize:20,color:"white"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"right"},percentageText:{fontFamily:"varela-round",fontSize:20,color:"white",opacity:.6,paddingHorizontal:10}}));function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Nt=function(e){d()(r,e);var t=zt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={receipts:n.props.availableReceipts.map((function(e){return{docId:e.docId,recKey:e.recKey,receiptItems:[]}})),selectedTableItems:[],overlaySplitItemsVisible:!1,overlayChoosePrinterVisible:!1},n.handleSelectTableItem=n.handleSelectTableItem.bind(D()(n)),n.handleSplitSelectedTableItems=n.handleSplitSelectedTableItems.bind(D()(n)),n.handleUndoAll=n.handleUndoAll.bind(D()(n)),n.handleSelectAllUnsplitTableItems=n.handleSelectAllUnsplitTableItems.bind(D()(n)),n.handleDeselectAllUnsplitTableItems=n.handleDeselectAllUnsplitTableItems.bind(D()(n)),n.handleUpdateFromSplitItems=n.handleUpdateFromSplitItems.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleSelectTableItem",value:function(e){console.log("menu selected",e);var t=this.state,r=t.selectedTableItems,n=t.receipts,a=this.props.tableItems;if(!n[0].receiptItems.some((function(t){return t.recKey===e.recKey}))){var l=r;if(r.some((function(t){return t.recKey===e.recKey})))l=l.filter((function(t){return t.recKey!==e.recKey&&t.refRecKey!==e.recKey}));else{l.push(e);var o=[];o=a.filter((function(t){return t.refRecKey===e.recKey})),console.log("comboItems",o),o.forEach((function(e){return l.push(e)}))}this.setState({selectedTableItems:l})}}},{key:"handleSelectAllUnsplitTableItems",value:function(){var e=this.props.tableItems,t=this.state,r=t.selectedTableItems,n=t.receipts,a=r;e.forEach((function(e){n[0].receiptItems.some((function(t){return t.recKey===e.recKey}))||r.some((function(t){return t.recKey===e.recKey}))||a.push(e)})),this.setState({selectedTableItems:a})}},{key:"handleDeselectAllUnsplitTableItems",value:function(){this.setState({selectedTableItems:[]})}},{key:"handleSplitSelectedTableItems",value:function(){0!==this.state.selectedTableItems.length&&this.setState({overlaySplitItemsVisible:!0})}},{key:"handleUndoAll",value:function(){this.setState({receipts:this.props.availableReceipts.map((function(e){return{docId:e.docId,recKey:e.recKey,receiptItems:[]}}))})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handleSubmit(e)}},{key:"handleUpdateFromSplitItems",value:function(e){if(console.log("distribution",e),e){var t=this.state,r=t.receipts,n=t.selectedTableItems,a=r;a.forEach((function(t){n.forEach((function(r){t.receiptItems.push(Mt(Mt({},r),{},{percentage:e.find((function(e){return e.docId===t.docId})).percentage}))}))})),this.setState({overlaySplitItemsVisible:!1,selectedTableItems:[],receipts:a})}else this.setState({overlaySplitItemsVisible:!1,selectedTableItems:[]})}},{key:"handleSubmit",value:function(e){var t=this.props,r=t.cashierPrinters,n=t.home,a=this.state.receipts;r.length>1&&!e&&!n.defaultPrinter?this.setState({overlayChoosePrinterVisible:!0}):this.props.handleUpdateFromSplit(a,n.defaultPrinter||e)}},{key:"render",value:function(){var e=this,t=this.props,r=(t.serviceEntry,t.home,t.selectedTable),n=(t.availableReceipts,t.tableItems),a=t.cashierPrinters,l=this.state,o=l.receipts,s=l.selectedTableItems,i=l.overlaySplitItemsVisible,c=l.overlayChoosePrinterVisible;return console.log("in split"),Object(Q.jsxs)(g.default,{style:Kt.container,children:[i&&Object(Q.jsx)(Ut,{receipts:o,selectedTableItems:s,handleUpdateFromSplitItems:this.handleUpdateFromSplitItems}),c&&Object(Q.jsx)(vt,{printPurpose:"SPLIT BY ITEM",cashierPrinters:a,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),Object(Q.jsx)(g.default,{style:Kt.leftContainer,children:Object(Q.jsxs)(g.default,{style:Kt.wrapper,children:[Object(Q.jsxs)(g.default,{style:Kt.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Kt.overlayTitleText,children:"TABLE"}),Object(Q.jsx)(J.default,{style:Kt.overlaySubtitleText,children:r.tableId}),Object(Q.jsxs)(J.default,{style:Kt.overlayTitleText,children:[n.length," ITEMS"]})]}),Object(Q.jsxs)(g.default,{style:Kt.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:Kt.button,onPress:function(){return e.handleUndoAll()},children:[Object(Q.jsx)(J.default,{style:Kt.buttonText,children:"Undo"}),Object(Q.jsx)(J.default,{style:Kt.buttonText,children:"All"})]}),Object(Q.jsxs)(M.default,{style:Kt.button,onPress:function(){return e.handleDeselectAllUnsplitTableItems()},children:[Object(Q.jsx)(J.default,{style:Kt.buttonText,children:"Deselect"}),Object(Q.jsx)(J.default,{style:Kt.buttonText,children:"All"})]}),Object(Q.jsxs)(M.default,{style:Kt.button,onPress:function(){return e.handleSelectAllUnsplitTableItems()},children:[Object(Q.jsx)(J.default,{style:Kt.buttonText,children:"Select"}),Object(Q.jsx)(J.default,{style:Kt.buttonText,children:"All"})]})]}),Object(Q.jsxs)(me.default,{style:[Kt.itemsContainer],children:[Object(Q.jsx)(g.default,{style:{paddingTop:5}}),n.map((function(t){return Object(Q.jsxs)(M.default,{disabled:!(!o[0].receiptItems.some((function(e){return e.recKey===t.recKey}))&&!t.refRecKey),style:[Kt.tableItemContainer,s.some((function(e){return e.recKey===t.recKey}))&&{backgroundColor:te.occupied},(o[0].receiptItems.some((function(e){return e.recKey===t.recKey}))||t.refRecKey)&&{opacity:.2}],onPress:function(){return e.handleSelectTableItem(t)},children:[Object(Q.jsx)(g.default,{style:Kt.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Kt.tableItemText,children:t.orderQty})}),Object(Q.jsxs)(g.default,{style:Kt.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:Kt.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?Object(Q.jsx)(J.default,{style:Kt.tableItemModText,children:t.menuMod}):null]}),Object(Q.jsx)(g.default,{style:Kt.tableItemThirdContainer,children:Object(Q.jsx)(J.default,{style:Kt.tableItemText})})]},t.recKey)}))]}),Object(Q.jsx)(M.default,{style:[Kt.actionButton,0!==s.length?{backgroundColor:te.occupied}:{opacity:.2}],disabled:0===s.length,onPress:function(){return e.handleSplitSelectedTableItems()},children:Object(Q.jsx)(J.default,{style:Kt.buttonText,children:"Split Selected"})}),o[0].receiptItems.length===n.length?Object(Q.jsx)(M.default,{style:Kt.actionButton,onPress:function(){return e.handleSubmit()},children:Object(Q.jsx)(J.default,{style:[Kt.buttonText,{color:te.reserved}],children:"Confirm Split"})}):Object(Q.jsx)(M.default,{style:Kt.actionButton,onPress:function(){return e.props.handleUpdateFromSplit("")},children:Object(Q.jsx)(J.default,{style:[Kt.buttonText,{color:te.paid}],children:"Quit"})})]})}),Object(Q.jsx)(g.default,{style:Kt.rightContainer,children:Object(Q.jsx)(me.default,{style:Kt.splitScroll,horizontal:!0,snapToInterval:Lt,decelerationRate:"fast",children:o.map((function(e,t){return Object(Q.jsxs)(g.default,{style:Kt.wrapper,children:[Object(Q.jsxs)(g.default,{style:Kt.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:[Kt.overlayTitleText,{color:te.paid,opacity:1}],children:["SPLIT ",t+1," OF ",o.length]}),Object(Q.jsx)(J.default,{style:Kt.overlaySubtitleText,children:e.docId}),Object(Q.jsxs)(J.default,{style:Kt.overlayTitleText,children:[e.receiptItems.length," ITEMS"]})]}),Object(Q.jsxs)(me.default,{style:Kt.itemsContainer,children:[Object(Q.jsx)(g.default,{style:{paddingTop:5}}),e.receiptItems.map((function(e){return Object(Q.jsxs)(M.default,{style:Kt.tableItemContainer,children:[Object(Q.jsx)(g.default,{style:Kt.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Kt.tableItemText,children:e.orderQty})}),Object(Q.jsxs)(g.default,{style:Kt.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:Kt.tableItemText,children:[e.refRecKey?"- ":null,e.menuName]}),e.menuMod?Object(Q.jsx)(J.default,{style:Kt.tableItemModText,children:e.menuMod}):null]}),Object(Q.jsx)(g.default,{style:Kt.tableItemThirdContainer,children:Object(Q.jsxs)(J.default,{style:Kt.tableItemText,children:[Object(Q.jsx)(J.default,{style:{color:te.reserved},children:e.percentage}),Object(Q.jsx)(J.default,{style:{color:te.grey1},children:" %"})]})})]},e.recKey)}))]})]},e.docId)}))})})]})}}]),r}(b.Component),Lt=Bt.default.get("window").width/3,Kt=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1},rightContainer:{flex:2},wrapper:{flex:1,width:Lt},splitScroll:{width:"100%",height:"100%"},itemsContainer:{flex:1,borderRadius:5,margin:5,backgroundColor:te.grey2},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},buttonsContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center"},button:{height:72,width:72,borderRadius:5,margin:5,backgroundColor:te.grey2,alignItems:"center",justifyContent:"center"},buttonText:{fontFamily:"varela-round",color:"white",fontSize:12,textTransform:"uppercase"},actionButton:{height:72,margin:5,backgroundColor:te.grey2,alignItems:"center",justifyContent:"center"},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:1,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{alignItems:"center",justifyContent:"center",width:50}});function Gt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ht=function(e){d()(r,e);var t=Gt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlayText:""},n}return i()(r,[{key:"render",value:function(){var e=this,t=this.state.overlayText;return console.log("in overlayinputreference"),Object(Q.jsx)(g.default,{style:Yt.overlay,children:Object(Q.jsxs)(g.default,{style:Yt.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Yt.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Yt.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Yt.overlaySubtitleText,children:"Input Reference"})]}),Object(Q.jsx)(g.default,{style:Yt.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:Yt.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:Yt.overlaySearchBoxInput,autoFocus:!0,placeholder:"ENTER REFERENCE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},onSubmitEditing:function(){return e.props.handleUpdateFromInputReference(t)},value:t}),Object(Q.jsx)(M.default,{style:Yt.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(M.default,{style:Yt.overlayOption,onPress:function(){return e.props.handleUpdateFromInputReference(t)},children:Object(Q.jsx)(J.default,{style:Yt.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[Yt.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromInputReference("")},children:Object(Q.jsx)(J.default,{style:Yt.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),Yt=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center",marginBottom:30},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var qt=function(e){d()(r,e);var t=Wt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlaySearchText:"",tables:"",availableTables:"",selectedTargetTable:"",overlayChoosePrinterVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.serviceEntry,n=t.home,a=t.selectedTable,l=r+"api/tables",o=new URLSearchParams;o.append("shopId",n.shopId),o.append("statusFlg","C"),fetch(l+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){var r=t.filter((function(e){return e.tableId!==a.tableId}));e.setState({tables:r,availableTables:r})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(a)||e.sectionId.toUpperCase().includes(a)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state.selectedTargetTable;e?(this.setState({overlayChoosePrinterVisible:!1}),this.handleSubmit(r,e)):this.setState({overlayChoosePrinterVisible:!1})}},{key:"handleSubmit",value:function(e,t){var r=this.props.home;this.setState({selectedTargetTable:e}),this.props.cashierPrinters.length>1&&!t&&!r.defaultPrinter?this.setState({overlayChoosePrinterVisible:!0}):this.props.handleUpdateFromMergeBill(e,r.defaultPrinter||t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.selectedTable,n=t.cashierPrinters,a=this.state,l=a.overlaySearchText,o=a.availableTables,s=(a.tables,a.overlayChoosePrinterVisible);return console.log("in overlaymergebill",r),Object(Q.jsxs)(g.default,{style:Jt.overlay,children:[s&&Object(Q.jsx)(vt,{printPurpose:"MERGE BILL",cashierPrinters:n,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),Object(Q.jsxs)(g.default,{style:Jt.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Jt.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:Jt.overlayTitleText,children:["TABLE ",r.tableId]}),Object(Q.jsx)(J.default,{style:Jt.overlaySubtitleText,children:"Merge Bill"})]}),Object(Q.jsxs)(g.default,{style:Jt.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:Jt.overlayBackButton,onPress:function(){return e.props.handleUpdateFromMergeBill("")},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:Jt.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:Jt.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:l}),Object(Q.jsx)(M.default,{style:Jt.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:Jt.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:Jt.searchBoxInfoText,children:[o.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[Jt.overlayGrid,r.dummy?Jt.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[Object(Q.jsxs)(g.default,{style:Jt.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:Jt.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:Jt.overlayGridFirstLeftText,children:r.sectionId})}),Object(Q.jsx)(g.default,{style:Jt.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:Jt.overlayGridFirstRightText,children:"OCCUPIED"})})]}),Object(Q.jsx)(g.default,{style:Jt.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:Jt.overlayGridSecondText,children:r.tableId})}),Object(Q.jsxs)(g.default,{style:Jt.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:Jt.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:Jt.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:Jt.overlayGridThirdRightText})})]})]})}})]})]})}}]),r}(b.Component),Jt=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.occupied,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5}});function Qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Xt=function(e){d()(r,e);var t=Qt(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlayNumber:2},n.handleQtyChange=n.handleQtyChange.bind(D()(n)),n}return i()(r,[{key:"handleQtyChange",value:function(e){if("PLUS"===e)this.setState((function(e,t){return{overlayNumber:e.overlayNumber+1}}));else if("MINUS"===e){if(2===this.state.overlayNumber)return;this.setState((function(e,t){return{overlayNumber:e.overlayNumber-1}}))}}},{key:"handleNumberChange",value:function(e){isNaN(e)?this.setState({overlayNumber:2}):this.setState({overlayNumber:Number(e)})}},{key:"render",value:function(){var e=this,t=this.state.overlayNumber;return console.log("in overlaysplitbill"),Object(Q.jsx)(g.default,{style:Zt.overlay,children:Object(Q.jsxs)(g.default,{style:Zt.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Zt.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Zt.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Zt.overlaySubtitleText,children:"Split Bill"}),Object(Q.jsx)(J.default,{style:Zt.overlayText,children:"Enter the number of bills to split into"})]}),Object(Q.jsxs)(g.default,{style:Zt.adjustContainer,children:[Object(Q.jsx)(M.default,{style:Zt.adjustFirst,onPress:function(){return e.handleQtyChange("MINUS")},children:Object(Q.jsx)(U.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),Object(Q.jsx)(g.default,{style:Zt.adjustSecond,children:Object(Q.jsx)(N.default,{style:Zt.overlayNumber,selectTextOnFocus:!0,keyboardType:"numeric",value:null==t?void 0:t.toString(),onChangeText:function(t){return e.handleNumberChange(t)}})}),Object(Q.jsx)(M.default,{style:Zt.adjustThird,onPress:function(){return e.handleQtyChange("PLUS")},children:Object(Q.jsx)(U.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),Object(Q.jsxs)(g.default,{style:Zt.buttonsContainer,children:[Object(Q.jsx)(M.default,{style:[Zt.button,2===t&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayNumber:2})},children:Object(Q.jsx)(J.default,{style:Zt.buttonText,children:"2"})}),Object(Q.jsx)(M.default,{style:[Zt.button,3===t&&{backgroundColor:te.reserved}],onPress:function(){return e.setState({overlayNumber:3})},children:Object(Q.jsx)(J.default,{style:Zt.buttonText,children:"3"})}),Object(Q.jsx)(M.default,{style:[Zt.button,4===t&&{backgroundColor:te.paid}],onPress:function(){return e.setState({overlayNumber:4})},children:Object(Q.jsx)(J.default,{style:Zt.buttonText,children:"4"})})]}),Object(Q.jsx)(M.default,{style:Zt.overlayOption,onPress:function(){return e.props.handleUpdateFromSplitBill(t,"ITEM")},children:Object(Q.jsx)(J.default,{style:Zt.overlayOptionText,children:"Split By Item"})}),Object(Q.jsx)(M.default,{style:Zt.overlayOption,onPress:function(){return e.props.handleUpdateFromSplitBill(t,"AMOUNT")},children:Object(Q.jsx)(J.default,{style:Zt.overlayOptionText,children:"Split By Amount"})}),Object(Q.jsx)(M.default,{style:[Zt.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromSplitBill("")},children:Object(Q.jsx)(J.default,{style:Zt.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),$t=Bt.default.get("window").height/8,Zt=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayNumber:{width:"100%",fontFamily:"varela-round",color:"white",fontSize:32,textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{alignItems:"center",justifyContent:"center",flexDirection:"row",marginBottom:30},button:{height:$t-10,width:$t-10,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:24,textTransform:"uppercase"},adjustContainer:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},adjustFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},adjustSecond:{flex:1,justifyContent:"center",alignItems:"center",marginHorizontal:20},adjustThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}});function _t(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var er=function(e){d()(r,e);var t=_t(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={receipts:e.receipts.map((function(e){return{docId:e.docId,recKey:e.recKey,amount:"0"}})),warning:"Total amount to split is "+e.selectedTable.grandTotal.toFixed(2),overlayChoosePrinterVisible:!1},n.handleFillRemainder=n.handleFillRemainder.bind(D()(n)),n.handleSetAmountForReceipt=n.handleSetAmountForReceipt.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"handleFillRemainder",value:function(e){var t=this.props.selectedTable,r=this.state.receipts,n=r,a=r.findIndex((function(t){return t.recKey===e.recKey})),l=r.filter((function(t){return t.recKey!==e.recKey})).reduce((function(e,t){return e+Number(t.amount)}),0);l<=Number(t.grandTotal)&&(n[a].amount=(Number(t.grandTotal)-l).toFixed(2).toString(),this.setState({receipts:n}))}},{key:"handleSetAmountForReceipt",value:function(e,t){var r=this.state.receipts,n=r;n[r.findIndex((function(e){return e.docId===t}))].amount=e,this.setState({receipts:n},(function(){return console.log("receiptsUpdated",r)}))}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handleSubmit(e)}},{key:"handleSubmit",value:function(e){var t=this.props,r=t.selectedTable,n=t.cashierPrinters,a=t.home,l=this.state.receipts,o=l.reduce((function(e,t){return e+Number(t.amount)}),0).toFixed(2);if(console.log("aggregate",o),l.some((function(e){return 0===Number(e.amount)}))||Number(o)!==Number(r.grandTotal))return console.log("validation failed"),void this.setState({warning:"Ensure numbers are valid and add up to "+r.grandTotal.toFixed(2)});n.length>1&&!e&&!a.defaultPrinter?this.setState({overlayChoosePrinterVisible:!0}):this.props.handleUpdateFromSplitAmount(l,a.defaultPrinter||e)}},{key:"doFillEvenly",value:function(){var e=this.props.selectedTable,t=this.state.receipts,r=t,n=Number(e.grandTotal/t.length).toFixed(2);r.forEach((function(t,a){a!==r.length-1?t.amount=Number(n).toFixed(2):t.amount=(e.grandTotal-n*(r.length-1)).toFixed(2)})),this.setState({receipts:r},(function(){return console.log("receiptsUpdated",t)}))}},{key:"render",value:function(){var e=this,t=this.props,r=(t.selectedTable,t.cashierPrinters),n=this.state,a=n.receipts,l=n.warning,o=n.overlayChoosePrinterVisible;return console.log("in overlaysplitamount"),Object(Q.jsxs)(g.default,{style:tr.overlay,children:[o&&Object(Q.jsx)(vt,{printPurpose:"SPLIT BY AMOUNT",cashierPrinters:r,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),Object(Q.jsxs)(g.default,{style:tr.overlayContent,children:[Object(Q.jsxs)(g.default,{style:tr.overlayHeader,children:[Object(Q.jsx)(J.default,{style:tr.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:tr.overlaySubtitleText,children:"Split Amount"}),Object(Q.jsx)(J.default,{style:tr.overlayText,children:l})]}),Object(Q.jsx)(me.default,{style:tr.overlayScroll,children:a.map((function(t){return Object(Q.jsxs)(g.default,{style:tr.inputRow,children:[Object(Q.jsxs)(M.default,{style:tr.inputRowLeft,onPress:function(){return e.handleFillRemainder(t)},children:[Object(Q.jsx)(J.default,{style:tr.inputRowTitleText,children:"RECEIPT"}),Object(Q.jsx)(J.default,{style:tr.inputRowSubtitleText,children:t.docId})]}),Object(Q.jsxs)(g.default,{style:tr.inputRowRight,children:[Object(Q.jsx)(N.default,{style:tr.textInput,keyboardType:"numeric",selectTextOnFocus:!0,value:a.find((function(e){return e.docId===t.docId})).amount,onChangeText:function(r){return e.handleSetAmountForReceipt(r,t.docId)}}),Object(Q.jsx)(J.default,{style:tr.percentageText})]})]},t.docId)}))}),Object(Q.jsx)(M.default,{style:[tr.overlayOption,{marginTop:20}],onPress:function(){return e.doFillEvenly()},children:Object(Q.jsx)(J.default,{style:tr.overlayOptionText,children:"fill evenly"})}),Object(Q.jsx)(M.default,{style:[tr.overlayOption],onPress:function(){return e.handleSubmit()},children:Object(Q.jsx)(J.default,{style:tr.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[tr.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromSplitAmount("")},children:Object(Q.jsx)(J.default,{style:tr.overlayOptionText,children:S.a.get("cancel")})})]})]})}}]),r}(b.Component),tr=(Bt.default.get("window").height,m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayNumber:{fontFamily:"varela-round",color:"white",fontSize:32},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},overlayScroll:{height:280},inputRow:{height:60,marginVertical:5,marginHorizontal:40,flexDirection:"row"},inputRowLeft:{flex:1,justifyContent:"center"},inputRowRight:{flex:1,borderRadius:5,flexDirection:"row",backgroundColor:te.grey1,alignItems:"center",justifyContent:"flex-end"},inputRowTitleText:{fontFamily:"varela-round",fontSize:12,color:te.paid},inputRowSubtitleText:{fontFamily:"varela-round",fontSize:20,color:"white"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"right"},percentageText:{fontFamily:"varela-round",fontSize:20,color:"white",opacity:.6,paddingHorizontal:10}}));function rr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var nr=function(e){d()(r,e);var t=rr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlayText:"",overlaySearchText:"",paymentMethods:e.paymentMethods,availablePaymentMethods:e.paymentMethods,selectedPaymentMethod:null},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n}return i()(r,[{key:"handleOverlaySearchText",value:function(e){var t=this.state.paymentMethods,r=[];this.setState({overlaySearchText:e});var n=e.toUpperCase();console.log("caseText",n),r=t,e?(r=r.filter((function(e){return e.pmId.toUpperCase().includes(n)||e.name.toUpperCase().includes(n)})),this.setState({availablePaymentMethods:r})):this.setState({availablePaymentMethods:r})}},{key:"render",value:function(){var e=this,t=this.state,r=t.overlayText,n=t.selectedPaymentMethod,a=t.availablePaymentMethods,l=t.overlaySearchText;return console.log("in overlayupdatetips",a),Object(Q.jsx)(g.default,{style:ar.overlay,children:Object(Q.jsxs)(g.default,{style:ar.overlayContent,children:[Object(Q.jsxs)(g.default,{style:ar.overlayHeader,children:[Object(Q.jsx)(J.default,{style:ar.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:ar.overlaySubtitleText,children:"Update Tips"})]}),Object(Q.jsx)(g.default,{style:ar.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:ar.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:ar.overlaySearchBoxInput,autoFocus:!0,keyboardType:"numeric",placeholder:"ENTER TIPS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},value:r}),Object(Q.jsx)(M.default,{style:ar.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(g.default,{style:{paddingBottom:10}}),Object(Q.jsxs)(g.default,{style:ar.selectWrapper,children:[Object(Q.jsx)(g.default,{style:ar.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:[ar.overlaySearchBox,{marginHorizontal:0}],children:[Object(Q.jsx)(N.default,{style:ar.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:l}),Object(Q.jsx)(M.default,{style:ar.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(g.default,{style:ar.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:ar.searchBoxInfoText,children:[a.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],data:a,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[ar.overlayGrid,(null==n?void 0:n.pmId)===r.pmId&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({selectedPaymentMethod:r})},children:[Object(Q.jsxs)(g.default,{style:ar.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:ar.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:ar.overlayGridFirstLeftText,children:r.pmId})}),Object(Q.jsx)(g.default,{style:ar.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:ar.overlayGridFirstRightText})})]}),Object(Q.jsx)(g.default,{style:ar.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:ar.overlayGridSecondText,children:r.name})}),Object(Q.jsxs)(g.default,{style:ar.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:ar.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:ar.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:ar.overlayGridThirdRightText})})]})]})}})]}),Object(Q.jsx)(M.default,{style:ar.overlayOption,onPress:function(){return e.props.handleUpdateFromUpdateTips(r,n)},children:Object(Q.jsx)(J.default,{style:ar.overlayOptionText,children:S.a.get("submit")})}),Object(Q.jsx)(M.default,{style:[ar.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromUpdateTips()},children:Object(Q.jsx)(J.default,{style:ar.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),ar=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1,alignItems:"center",justifyContent:"center"},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},selectText:{fontFamily:"varela-round",color:"white",fontSize:16},selectWrapper:{flex:1,backgroundColor:te.grey1,borderRadius:5,marginHorizontal:5,marginBottom:5},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function lr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var or=function(e){d()(r,e);var t=lr(r);function r(e){return o()(this,r),t.call(this,e)}return i()(r,[{key:"render",value:function(){var e=this,t=this.props.receipts;return console.log("in overlayalert",this.props),Object(Q.jsx)(g.default,{style:sr.overlay,children:Object(Q.jsxs)(g.default,{style:sr.overlayContent,children:[Object(Q.jsxs)(g.default,{style:sr.overlayHeader,children:[Object(Q.jsx)(J.default,{style:sr.overlayTitleText,children:"VIEW"}),Object(Q.jsx)(J.default,{style:sr.overlaySubtitleText,children:"Splitted Receipts"}),Object(Q.jsx)(J.default,{style:sr.overlayText})]}),Object(Q.jsx)(me.default,{style:sr.overlayScroll,children:t.map((function(e){return Object(Q.jsxs)(g.default,{style:sr.inputRow,children:[Object(Q.jsxs)(g.default,{style:sr.inputRowLeft,children:[Object(Q.jsx)(J.default,{style:sr.inputRowTitleText,children:"RECEIPT"}),Object(Q.jsx)(J.default,{style:sr.inputRowSubtitleText,children:e.docId})]}),Object(Q.jsxs)(g.default,{style:sr.inputRowRight,children:[Object(Q.jsx)(J.default,{style:sr.textInput,children:e.grandTotal?e.grandTotal.toFixed(2):null}),Object(Q.jsx)(J.default,{style:sr.percentageText})]})]},e.recKey)}))}),Object(Q.jsx)(M.default,{style:sr.overlayOption,onPress:function(){return e.props.handleUpdateFromViewSplitted("")},children:Object(Q.jsx)(J.default,{style:sr.overlayOptionText,children:"OK"})})]})})}}]),r}(b.Component),sr=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},overlayScroll:{height:280},inputRow:{height:60,marginVertical:5,marginHorizontal:40,flexDirection:"row"},inputRowLeft:{flex:1,justifyContent:"center"},inputRowRight:{flex:1,borderRadius:5,flexDirection:"row",backgroundColor:te.grey1,alignItems:"center",justifyContent:"flex-end"},inputRowTitleText:{fontFamily:"varela-round",fontSize:12,color:te.paid},inputRowSubtitleText:{fontFamily:"varela-round",fontSize:20,color:"white"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"right"},percentageText:{fontFamily:"varela-round",fontSize:20,color:"white",opacity:.6,paddingHorizontal:10}}),ir=r(365),cr=r(352),dr=r.n(cr);function ur(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var fr=function(){function e(t){o()(this,e),Object.defineProperty(this,"qrstring",{value:this.generate(t)})}return i()(e,[{key:"output",value:function(){return this.qrstring}},{key:"padLeft",value:function(e,t,r){return t<String(e).length?e.toString():Array(t-String(e).length+1).join(r||"0")+e}},{key:"crc16",value:function(e){var t,r=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],n=65535;for(t=0;t<e.length;t++){var a=e.charCodeAt(t);if(a>255)throw new RangeError;n=r[255&(a^n>>8)]^n<<8}return(65535&(0^n)).toString(16).toUpperCase()}},{key:"generate",value:function(e){var t=this;for(var r in e)"string"==typeof e[r]&&(e[r]=e[r].trim());var n=[{id:"00",value:"01"},{id:"01",value:"12"},{id:"26",value:[{id:"00",value:"SG.PAYNOW"},{id:"01",value:"2"},{id:"02",value:String(e.uen)},{id:"03",value:String(!e.amount||e.editable?1:0)},{id:"04",value:String(e.expiry)}]},{id:"52",value:"0000"},{id:"53",value:"702"},{id:"54",value:String(e.amount||0)},{id:"58",value:"SG"},{id:"59",value:String(e.company||"COMPANY")},{id:"60",value:"Singapore"}],a={id:"62",value:[{id:"01",value:String(e.refNumber||"")}]};e.refNumber&&n.push(a);var l=n.reduce((function(e,r){return Array.isArray(r.value)&&(r.value=r.value.reduce((function(e,r){return e+=r.id+t.padLeft(r.value.length.toString(),2)+r.value}),"")),e+=r.id+t.padLeft(r.value.length.toString(),2)+r.value}),"");return l+="6304"+this.padLeft(this.crc16(l+"6304"),4)}}]),e}(),hr=function(e){d()(r,e);var t=ur(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={input:e.input},n}return i()(r,[{key:"componentDidMount",value:function(){var e=this.props.home,t=new fr({uen:e.uen,amount:Number(this.props.input.amount),editable:!1,expiry:le()().format("YYYYMMDD"),refNumber:this.props.input.reference,company:e.orgName});this.setState({qrcodeString:t.output()})}},{key:"render",value:function(){var e=this,t=this.state,r=(t.input,t.qrcodeString);return console.log("in overlayalert",this.props),Object(Q.jsx)(g.default,{style:yr.overlay,children:Object(Q.jsxs)(g.default,{style:yr.overlayContent,children:[Object(Q.jsxs)(g.default,{style:yr.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:yr.overlaySubtitleText,children:["$",this.props.input.amount]}),Object(Q.jsx)(J.default,{style:[yr.overlayText,{marginTop:0}],children:this.props.home.orgName})]}),Object(Q.jsx)(ir.default,{size:300,value:r,color:"#761972",logo:dr.a,logoSize:100}),Object(Q.jsx)(g.default,{style:yr.overlayHeader,children:Object(Q.jsx)(J.default,{style:[yr.overlayText,{marginTop:5}],children:"Thank you!"})}),Object(Q.jsx)(M.default,{style:[yr.overlayOption,{width:400}],onPress:function(){return e.props.handleUpdateFromPaynow("")},children:Object(Q.jsx)(J.default,{style:yr.overlayOptionText,children:"CONTINUE"})})]})})}}]),r}(b.Component),yr=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{alignItems:"center",position:"relative"},overlayHeader:{margin:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function br(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var pr=function(e){d()(r,e);var t=br(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,home:e.route.params.home,paymentMethods:e.route.params.masters.paymentMethods,settings:e.route.params.masters.settings,cashierPrinters:e.route.params.masters.cashierPrinters,privileges:e.route.params.masters.privileges,selectedTable:e.route.params.selectedTable,payments:e.route.params.pospays,selectedPaymentMethod:null,selectedPaymentItem:"",numberString:"0",pay:e.route.params.selectedTable.balance,overlayPaynowVisible:!1,overlayInputReferenceVisible:!1,overlayMergeBillVisible:!1,overlaySplitBillVisible:!1,overlaySplitAmountVisible:!1,overlayUpdateTipsVisible:!1,overlayViewSplittedVisible:!1,requestedPrivilege:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:"",printPurpose:"",selectedPrinter:"",overlayChoosePrinterVisible:!1,splitting:!1,availableReceipts:[],splitReceipts:[],tableItems:[]},n.handleBuildNumberString=n.handleBuildNumberString.bind(D()(n)),n.handleSelectPaymentMethod=n.handleSelectPaymentMethod.bind(D()(n)),n.handleRounding=n.handleRounding.bind(D()(n)),n.handleEnterButton=n.handleEnterButton.bind(D()(n)),n.handleFinishButton=n.handleFinishButton.bind(D()(n)),n.handleAddPayment=n.handleAddPayment.bind(D()(n)),n.handleDeletePayment=n.handleDeletePayment.bind(D()(n)),n.handleFinishPayment=n.handleFinishPayment.bind(D()(n)),n.handleUnsplitBill=n.handleUnsplitBill.bind(D()(n)),n.handlePressPaymentItem=n.handlePressPaymentItem.bind(D()(n)),n.handlePressPaymentItemRef=n.handlePressPaymentItemRef.bind(D()(n)),n.handlePressMerge=n.handlePressMerge.bind(D()(n)),n.handlePressUnmerge=n.handlePressUnmerge.bind(D()(n)),n.handlePressTips=n.handlePressTips.bind(D()(n)),n.handlePressSplit=n.handlePressSplit.bind(D()(n)),n.handlePressUnsplit=n.handlePressUnsplit.bind(D()(n)),n.handleViewSplitted=n.handleViewSplitted.bind(D()(n)),n.handleUpdateFromInputReference=n.handleUpdateFromInputReference.bind(D()(n)),n.handleUpdateFromMergeBill=n.handleUpdateFromMergeBill.bind(D()(n)),n.handleUpdateFromSplitBill=n.handleUpdateFromSplitBill.bind(D()(n)),n.handleUpdateFromSplitAmount=n.handleUpdateFromSplitAmount.bind(D()(n)),n.handleUpdateFromSplit=n.handleUpdateFromSplit.bind(D()(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleUpdateFromUpdateTips=n.handleUpdateFromUpdateTips.bind(D()(n)),n.handleUpdateFromViewSplitted=n.handleUpdateFromViewSplitted.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleUpdateFromPaynow=n.handleUpdateFromPaynow.bind(D()(n)),n.handleOpenDrawer=n.handleOpenDrawer.bind(D()(n)),n.handleValidateAmount=n.handleValidateAmount.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){this.handleViewSplitted()}},{key:"handleBuildNumberString",value:function(e){var t=this.state.numberString;if("DEL"===e)if(1!==t.length){var r=t.slice(0,-1);this.setState({numberString:r})}else this.setState({numberString:"0"});else if("CLEAR"===e)"0"!==t&&this.setState({numberString:"0"});else if("."===e){if(t.length>5)return;if(t.indexOf(".")<"0"){var n=t+".";this.setState({numberString:n})}}else if("0"===e){if(t.length>7)return;if(t.indexOf(".")>"0"&&t.split(".")[1].length>1)return;if("0"!==t){var a=t+"0";this.setState({numberString:a})}}else if("00"===e){if(t.length>7)return;if(t.indexOf(".")>"0"&&t.split(".")[1].length>0)return;if("0"!==t){var l=t+"00";this.setState({numberString:l})}}else{if(t.length>7)return;if(t.indexOf(".")>"0"&&t.split(".")[1].length>1)return;if("0"!==t){var o=t+e;this.setState({numberString:o})}else this.setState({numberString:e})}}},{key:"handleSelectPaymentMethod",value:function(e){if("P"===e.refType){var t=this.state,r=(t.numberString,t.selectedTable),n="";return n=r.vipPtsMoney<r.balance?Math.floor(r.vipPtsMoney):Math.floor(r.balance),void this.setState({numberString:n,selectedPaymentMethod:e})}this.setState({selectedPaymentMethod:e}),console.log(e),this.handleRounding(e)}},{key:"handleEnterButton",value:function(){var e=this,t=this.state,r=t.numberString,n=t.selectedPaymentMethod,a=Number(r);n?0!==a&&("P"!==n.refType||this.handleValidateAmount())&&this.setState({loading:!0},(function(){return e.handleAddPayment()})):this.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Missing Payment Method",text:"Please select a payment method",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0})}},{key:"handleValidateAmount",value:function(){var e=this.state,t=e.numberString,r=e.selectedTable,n=Number(t),a=Number.isInteger(n);return console.log("isInteger",a,r.balance,r.vipPtsMoney),!(!Number.isInteger(n)||n>r.balance||n>r.vipPtsMoney)||(this.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Inappropriate Amount",text:"Enter an integer less than balance and redeemable",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0}),!1)}},{key:"handleFinishButton",value:function(){var e=this;this.setState({loading:!0},(function(){return e.handleFinishPayment()}))}},{key:"handleFinishPayment",value:function(e){var t=this,r=this.props.navigation,n=this.state,a=n.serviceEntry,l=n.home,o=n.cashierPrinters,s=n.settings,i=n.selectedTable;if(o.length>1&&!e&&!l.defaultPrinter)this.setState({printPurpose:"FINISH PAYMENT",overlayChoosePrinterVisible:!0});else{var c=a+"api/tables/"+i.recKey+"/finish-payment",d={userId:l.userId,opentableRecKey:i.recKey,iomodelId:l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post finish-payment successful",e),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Finish Payment",l.userName,e.message,i.tableId),e.message?t.setState({loading:!1,overlayProcedureMessageVisible:e.message.toUpperCase()}):r.goBack()})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUnsplitBill",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.settings,l=t.selectedTable,o=r+"api/tables/"+l.recKey+"/unsplit-receipt",s={userId:n.userId,opentableRecKey:l.recKey};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){console.log("post unsplit successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Unsplit Bill",n.userName,t.message,l.tableId),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):(e.setState({selectedTable:t.opentable,payments:t.opentablePospays,pay:t.opentable.balance}),e.handleViewSplitted())})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePressPaymentItemRef",value:function(e){"PAYNOW"===e.pmId?this.setState({overlayPaynowVisible:!0}):this.setState({selectedPaymentItem:e,overlayInputReferenceVisible:!0})}},{key:"handlePressPaymentItem",value:function(e){this.setState({selectedPaymentItem:e});var t=[];t.push({text:"Yes",handleText:"handleDeletePayment"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:e.name,text:"Delete payment of "+Number(e.payMoney).toFixed(2)+"?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"handleDeletePayment",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.settings,l=t.selectedTable,o=t.selectedPaymentItem,s=r+"api/tables/"+l.recKey+"/delete-payment",i={userId:n.userId,opentableRecKey:l.recKey,opentablePospayRecKey:o.recKey};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(t){console.log("post delete-payment successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Delete Payment",n.userName,t.message,l.tableId),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({selectedTable:t.opentable,payments:t.opentablePospays,numberString:"0",pay:t.opentable.balance})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleAddPayment",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.settings,l=t.paymentMethods,o=t.selectedPaymentMethod,s=t.selectedTable,i=t.pay,c=t.numberString,d=r+"api/tables/"+s.recKey+"/add-payment";console.log("here debug",Number(c));var u={userId:n.userId,opentableRecKey:s.recKey,pmId:o.pmId,payAmt:Number(c),roundAmt:Number(s.balance-i).toFixed(2)};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(t){console.log("post add-payment successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Add Payment",n.userName,t.message,s.tableId),t.message?e.setState({loading:!1,overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({loading:!1,selectedTable:t.opentable,payments:t.opentablePospays,numberString:"0",pay:t.opentable.balance},(function(){e.handleRounding(l.find((function(e){return e.pmId===o.pmId}))),e.handleAfterAddPayment()}))})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleAfterAddPayment",value:function(){var e=this.state,t=e.home,r=e.selectedTable,n=e.payments.find((function(e){return"PAYNOW"===e.pmId}));n&&this.setState({overlayPaynowVisible:!0,overlayPaynowInput:{amount:n.payMoney.toFixed(2),reference:t.shopId+"-"+r.docNo}})}},{key:"handleRounding",value:function(e){console.log(e);var t=this.state.selectedTable,r=(this.state.numberString,Number(t.balance));if("N"!==e.roundingFlg)switch(e.roundType){case"0":console.log("case 0"),this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"1":console.log("case 1"),r=Math.ceil(10*r)/10,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"2":console.log("case 2"),r=Math.floor(20*r)/20,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"3":console.log("case 3"),r=Math.floor(10*r)/10,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"4":console.log("case 4"),r=Math.round(20*r)/20,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"5":console.log("legacy case 5 not in use");break;case"6":console.log("legacy case 6 not in use")}else this.setState({pay:r,numberString:r.toFixed(2).toString()})}},{key:"handlePressTips",value:function(){this.setState({overlayUpdateTipsVisible:!0})}},{key:"handlePressSplit",value:function(){this.setState({overlaySplitBillVisible:!0})}},{key:"handlePressUnsplit",value:function(){var e=this.state.selectedTable,t=[];t.push({text:"Yes",handleText:"handleUnsplitBill"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Unsplit Bill",text:"Unsplit Bill for Table "+e.tableId+" ?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"handlePressMerge",value:function(){this.setState({overlayMergeBillVisible:!0})}},{key:"handlePressUnmerge",value:function(e){var t=this,r=this.state,n=r.serviceEntry,a=r.home,l=r.cashierPrinters,o=r.settings,s=r.selectedTable;if(l.length>1&&!e&!a.defaultPrinter)this.setState({printPurpose:"UNMERGE BILL",overlayChoosePrinterVisible:!0});else{var i=n+"api/tables/"+s.recKey+"/unmerge-bill",c={userId:a.userId,iomodelId:a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post unmerge-bill successful",e.opentable),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Unmerge Bill",a.userName,e.message,s.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.setState({selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleViewSplitted",value:function(){var e=this,t=this.state,r=(t.home,t.serviceEntry+"api/tables/"+t.selectedTable.recKey+"/splitted-receipts");fetch(r).then((function(e){return e.json()})).then((function(t){console.log("get splitted-receipts successful",t),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({splitReceipts:null==t?void 0:t.filter((function(e){return e.recKey>0}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOpenDrawer",value:function(e,t){var r=this,n=this.state,a=n.home,l=n.serviceEntry,o=n.cashierPrinters,s=n.privileges,i=n.settings,c=n.selectedTable;if(o.length>1&&!e&!a.defaultPrinter)this.setState({printPurpose:"OPEN DRAWER",overlayChoosePrinterVisible:!0});else if("Y"===a.adminFlg||s.some((function(e){return"OPENDRAWER"===e.priId}))||t){var d=l+"api/open-cashdrawer",u={userId:a.userId,shopId:a.shopId,iomodelId:a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){console.log("post open-cashdrawer successful",e),"Y"===i.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Open Cashdrawer",a.userName,e.message,c.tableId),e.message&&r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"OPENDRAWER"})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){e?"handleDeletePayment"===e?(this.handleDeletePayment(),this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})):"handleUnsplitBill"===e&&(this.handleUnsplitBill(),this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})):this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"handleUpdateFromPaynow",value:function(e){e||this.setState({overlayPaynowVisible:!1})}},{key:"handleUpdateFromInputReference",value:function(e){var t=this;if(this.setState({overlayInputReferenceVisible:!1}),e){var r=this.state,n=r.serviceEntry,a=r.home,l=r.settings,o=r.selectedTable,s=r.selectedPaymentItem,i=n+"api/tables/"+o.recKey+"/payment-reference",c={userId:a.userId,opentableRecKey:o.recKey,opentablePospayRecKey:s.recKey,ref:e};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post payment-reference successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Payment Reference",a.userName,e.message,o.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.setState({selectedTable:e.opentable,payments:e.opentablePospays,numberString:"0",pay:e.opentable.balance})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromSplitBill",value:function(e,t){var r=this;if(e){var n=this.state,a=n.selectedTable,l=n.serviceEntry,o=n.home,s=n.settings,i=l+"api/tables/"+a.recKey+"/start-split-receipt",c={userId:o.userId,opentableRecKey:a.recKey,splitCount:e};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post start-split-receipt successful",e),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Start Split Bill",o.userName,e.message,a.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):"ITEM"===t?r.setState({splitting:!0,selectedTable:e.opentable,tableItems:e.opentableItems,availableReceipts:e.receiptmases}):"AMOUNT"===t&&r.setState({overlaySplitAmountVisible:!0,overlaySplitBillVisible:!1,selectedTable:e.opentable,availableReceipts:e.receiptmases})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlaySplitBillVisible:!1})}},{key:"handleUpdateFromSplit",value:function(e,t){var r=this;if(console.log("receipts",e),e){var n=this.state,a=n.serviceEntry,l=n.home,o=n.settings,s=n.selectedTable,i=a+"api/tables/"+s.recKey+"/finish-split-receipt",c={userId:l.userId,opentableRecKey:s.recKey,splittedReceipts:e.map((function(e){return{receiptRecKey:e.recKey,itemPercentages:e.receiptItems.map((function(e){return{itemRecKey:e.recKey,percentage:e.percentage}}))}})),iomodelId:t&&t.iomodelId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post finish-split-receipt successful",e),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Finish Split Bill",l.userName,e.message,s.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({splitting:!1,overlaySplitBillVisible:!1,selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else{var d=this.state,u=d.serviceEntry,f=d.home,h=d.settings,y=d.selectedTable,b=u+"api/tables/"+y.recKey+"/unsplit-receipt",p={userId:f.userId,opentableRecKey:y.recKey};fetch(b,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(p)}).then((function(e){return e.json()})).then((function(e){console.log("post unsplit successful",e),"Y"===h.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(u,"Unsplit Bill",f.userName,e.message,y.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({splitting:!1,selectedTable:e.opentable,overlaySplitBillVisible:!1}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromSplitAmount",value:function(e,t){var r=this;if(console.log("receipts",e),this.setState({overlaySplitAmountVisible:!1}),e){var n=this.state,a=n.serviceEntry,l=n.home,o=n.settings,s=n.selectedTable,i=a+"api/tables/"+s.recKey+"/finish-split-receipt-byamt",c={userId:l.userId,opentableRecKey:s.recKey,splittedReceiptsByamt:e.map((function(e){return{receiptRecKey:e.recKey,amt:e.amount}})),iomodelId:t&&t.iomodelId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post finish-split-receipt successful",e),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Finish Split Bill",l.userName,e.message,s.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else{var d=this.state,u=d.serviceEntry,f=d.home,h=d.settings,y=d.selectedTable,b=u+"api/tables/"+y.recKey+"/unsplit-receipt",p={userId:f.userId,opentableRecKey:y.recKey};fetch(b,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(p)}).then((function(e){return e.json()})).then((function(e){console.log("post unsplit successful",e),"Y"===h.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(u,"Unsplit Bill",f.userName,e.message,y.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({selectedTable:e.opentable}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromMergeBill",value:function(e,t){var r=this;if(e){var n=this.state,a=n.selectedTable,l=n.serviceEntry,o=n.home,s=n.settings,i=l+"api/tables/"+a.recKey+"/merge-bill",c={userId:o.userId,shopId:o.shopId,tableIdGuest:e.tableId,iomodelId:t&&t.iomodelId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post merge-bill successful",e),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Merge Bill",o.userName,e.message,a.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance,overlayMergeBillVisible:!1})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlayMergeBillVisible:!1})}},{key:"handleUpdateFromUpdateTips",value:function(e,t){var r=this;if(this.setState({overlayUpdateTipsVisible:!1}),e){var n=this.state,a=n.serviceEntry,l=n.home,o=n.settings,s=n.selectedTable,i=a+"api/tables/"+s.recKey+"/update-tips",c={userId:l.userId,opentableRecKey:s.recKey,tips:Number(e).toFixed(2),pmId:(null==t?void 0:t.pmId)||""};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(n){console.log("post update-tips successful",n),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Update Tips",l.userName,n.message,s.tableId,"",e+","+(null==t?void 0:t.pmId)),n.message?r.setState({overlayProcedureMessageVisible:n.message.toUpperCase()}):r.setState({selectedTable:n.opentable,payments:n.opentablePospays,numberString:"0",pay:n.opentable.balance})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromViewSplitted",value:function(e){e||this.setState({overlayViewSplittedVisible:!1})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.state.selectedTable;e?(this.setState({printPurpose:"",selectedPrinter:e,overlayChoosePrinterVisible:!1}),"UNMERGE BILL"===t?this.handlePressUnmerge(e):"FINISH PAYMENT"===t?this.handleFinishPayment(e):"OPEN DRAWER"===t&&this.handleOpenDrawer(e)):this.setState({printPurpose:"",selectedPrinter:"",overlayChoosePrinterVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.requestedPrivilege,o=r.settings,s=r.selectedPrinter,i=r.selectedTable;if(e){var c=a+"api/super-user",d={locId:n.locId,accessCode:e,priId:l};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access "+l,n.userName,e.message,i.tableId,"",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),"OPENDRAWER"===l&&t.handleOpenDrawer(s,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=(t.route,t.navigation),n=this.state,a=n.serviceEntry,l=n.home,o=n.cashierPrinters,s=(n.settings,n.selectedTable),i=n.overlayInputReferenceVisible,c=n.overlayMergeBillVisible,d=n.overlaySplitBillVisible,u=n.overlayUpdateTipsVisible,f=n.overlaySplitAmountVisible,h=n.overlayViewSplittedVisible,y=n.overlayRequestAccessVisible,b=n.overlayAlertVisible,p=n.overlayAlertInputValue,m=n.overlayPaynowVisible,j=n.overlayPaynowInput,x=n.numberString,v=n.paymentMethods,T=n.payments,O=n.selectedPaymentMethod,I=n.pay,C=n.splitting,F=n.availableReceipts,P=n.splitReceipts,R=n.tableItems,w=n.requestedPrivilege,k=(n.selectedPrinter,n.printPurpose),E=n.overlayChoosePrinterVisible,B=n.overlayProcedureMessageVisible,D=n.loading;return console.log("in pos"),C?Object(Q.jsx)(Nt,{serviceEntry:a,home:l,selectedTable:s,availableReceipts:F,tableItems:R,cashierPrinters:o,handleUpdateFromSplit:this.handleUpdateFromSplit}):Object(Q.jsxs)(g.default,{style:gr.container,children:[b&&Object(Q.jsx)(St,{input:p,handleUpdateFromAlert:this.handleUpdateFromAlert}),B&&Object(Q.jsx)(se,{text:B,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),i&&Object(Q.jsx)(Ht,{handleUpdateFromInputReference:this.handleUpdateFromInputReference}),c&&Object(Q.jsx)(qt,{serviceEntry:a,home:l,cashierPrinters:o,selectedTable:s,handleUpdateFromMergeBill:this.handleUpdateFromMergeBill}),d&&Object(Q.jsx)(Xt,{handleUpdateFromSplitBill:this.handleUpdateFromSplitBill}),f&&Object(Q.jsx)(er,{home:l,selectedTable:s,receipts:F,cashierPrinters:o,handleUpdateFromSplitAmount:this.handleUpdateFromSplitAmount}),h&&Object(Q.jsx)(or,{selectedTable:s,receipts:F,handleUpdateFromViewSplitted:this.handleUpdateFromViewSplitted}),u&&Object(Q.jsx)(nr,{paymentMethods:v,handleUpdateFromUpdateTips:this.handleUpdateFromUpdateTips}),y&&Object(Q.jsx)(Ge,{home:l,requestedPrivilege:w,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),E&&Object(Q.jsx)(vt,{printPurpose:k,cashierPrinters:o,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),m&&Object(Q.jsx)(hr,{home:l,input:j,handleUpdateFromPaynow:this.handleUpdateFromPaynow}),Object(Q.jsxs)(g.default,{style:gr.leftContainer,children:[Object(Q.jsx)(g.default,{style:gr.leftFirstContainer,children:Object(Q.jsxs)(g.default,{style:gr.rowOf5,children:[Object(Q.jsxs)(M.default,{style:gr.headerKeyContainer,onPress:function(){return r.goBack()},children:[Object(Q.jsx)(J.default,{style:[gr.headerKeyTextTableId],children:s.tableId}),Object(Q.jsx)(J.default,{style:[gr.headerKeyText,{marginTop:0}],children:S.a.get("back")})]}),Object(Q.jsxs)(M.default,{style:[gr.headerKeyContainer,"Y"===s.splitFlg&&{opacity:.2}],onPress:function(){return e.handlePressTips()},disabled:"Y"===s.splitFlg,children:[Object(Q.jsx)(U.default,{name:"like2",size:24,color:"white",style:{height:30}}),Object(Q.jsx)(J.default,{style:gr.headerKeyText,children:S.a.get("tips")})]}),Object(Q.jsxs)(M.default,{style:gr.headerKeyContainer,onPress:function(){return e.handleOpenDrawer()},children:[Object(Q.jsx)(U.default,{name:"laptop",size:24,color:"white",style:{height:30}}),Object(Q.jsx)(J.default,{style:gr.headerKeyText,children:S.a.get("drawer")})]}),"Y"===s.splitFlg?Object(Q.jsxs)(M.default,{style:gr.headerKeyContainer,onPress:function(){return e.handlePressUnsplit()},children:[Object(Q.jsx)(U.default,{name:"switcher",size:24,color:"white",style:{height:30}}),Object(Q.jsx)(J.default,{style:gr.headerKeyText,children:S.a.get("unsplit")})]}):Object(Q.jsxs)(M.default,{style:gr.headerKeyContainer,onPress:function(){return e.handlePressSplit()},children:[Object(Q.jsx)(U.default,{name:"switcher",size:24,color:"white",style:{height:30}}),Object(Q.jsx)(J.default,{style:gr.headerKeyText,children:S.a.get("splitbill")})]}),"Y"===s.hostFlg||s.refTableId?Object(Q.jsxs)(M.default,{style:gr.headerKeyContainer,onPress:function(){return e.handlePressUnmerge()},children:[Object(Q.jsx)(U.default,{name:"menuunfold",size:24,color:"white",style:{height:30}}),Object(Q.jsx)(J.default,{style:gr.headerKeyText,children:S.a.get("unmerge")})]}):Object(Q.jsxs)(M.default,{style:[gr.headerKeyContainer,"Y"===s.splitFlg&&{opacity:.2}],disabled:"Y"===s.splitFlg,onPress:function(){return e.handlePressMerge()},children:[Object(Q.jsx)(U.default,{name:"menufold",size:24,color:"white",style:{height:30}}),Object(Q.jsx)(J.default,{style:gr.headerKeyText,children:S.a.get("mergebill")})]})]})}),Object(Q.jsxs)(g.default,{style:gr.leftSecondContainer,children:[Object(Q.jsxs)(g.default,{style:gr.tableSummaryContainer,children:[Object(Q.jsxs)(g.default,{style:gr.tableSummaryTitleContainer,children:[Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryTitleText,children:S.a.get("beforedisc")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryTitleText,children:S.a.get("totaldisc")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryTitleText,children:S.a.get("servicecharge")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryTitleText,children:S.a.get("tax")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsxs)(J.default,{style:gr.tableSummaryTitleText,children:[S.a.get("tips")," ",s.tipsPmId]})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:[gr.tableSummaryTitleText,{color:te.reserved}],children:S.a.get("grandtotal")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:[gr.tableSummaryTitleText,{color:te.paid}],children:S.a.get("pay")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryTitleText,children:S.a.get("balance")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryTitleText,children:S.a.get("tender")})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryTitle,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryTitleText,children:S.a.get("change")})})]}),Object(Q.jsxs)(g.default,{style:gr.tableSummaryValueContainer,children:[Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.beforeDisc?s.beforeDisc.toFixed(2):"0.00"})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.totalDisc?s.totalDisc.toFixed(2):"0.00"})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.serviceCharge?s.serviceCharge.toFixed(2):"0.00"})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.totalTax?s.totalTax.toFixed(2):"0.00"})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.tips?s.tips.toFixed(2):"0.00"})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:[gr.tableSummaryValueText,{color:te.reserved}],children:s.grandTotal.toFixed(2)||0})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:[gr.tableSummaryValueText,{color:te.paid}],children:I.toFixed(2)||0})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.balance.toFixed(2)||0})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.tender.toFixed(2)||0})}),Object(Q.jsx)(g.default,{style:gr.tableSummaryValue,children:Object(Q.jsx)(J.default,{style:gr.tableSummaryValueText,children:s.change.toFixed(2)||0})})]})]}),Object(Q.jsxs)(me.default,{style:{maxHeight:30},horizontal:!0,showsHorizontalScrollIndicator:!1,children:[s.vipId&&Object(Q.jsxs)(g.default,{style:{flexDirection:"row",alignItems:"center"},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.paid,marginLeft:20,marginRight:10},children:s.vipId||"-"}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.reserved},children:s.vipName||"-"})]}),P&&P.map((function(e){return Object(Q.jsxs)(g.default,{style:{flexDirection:"row",flex:1,alignItems:"center"},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.paid,marginLeft:20,marginRight:10},children:e.docId}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"white"},children:e.grandTotal?e.grandTotal.toFixed(2):"-"})]},e.recKey.toString())}))]}),Object(Q.jsxs)(g.default,{style:{flex:1,backgroundColor:te.grey2,borderRadius:5},children:[Object(Q.jsxs)(g.default,{style:gr.paymentsContainer,children:[Object(Q.jsx)(g.default,{style:gr.paymentsFirst,children:Object(Q.jsx)(J.default,{style:gr.paymentsTitleText,children:"No."})}),Object(Q.jsx)(g.default,{style:gr.paymentsSecond,children:Object(Q.jsx)(J.default,{style:gr.paymentsTitleText,children:"Payment ID"})}),Object(Q.jsx)(g.default,{style:gr.paymentsThird,children:Object(Q.jsx)(J.default,{style:gr.paymentsTitleText,children:"Ref"})}),Object(Q.jsx)(g.default,{style:gr.paymentsFourth,children:Object(Q.jsx)(J.default,{style:gr.paymentsTitleText,children:"Amount"})})]}),Object(Q.jsx)(me.default,{style:{flex:1},ref:function(t){return e.posScrollView=t},onContentSizeChange:function(t,r){e.posScrollView.scrollToEnd({animated:!0})},showsVerticalScrollIndicator:!1,children:T.map((function(t,r){return Object(Q.jsxs)(g.default,{style:gr.datumContainer,children:[Object(Q.jsx)(g.default,{style:gr.datumFirst,children:Object(Q.jsx)(J.default,{style:gr.datumText,children:r+1})}),Object(Q.jsx)(M.default,{style:gr.datumSecond,onPress:function(){return e.handlePressPaymentItem(t)},children:Object(Q.jsx)(J.default,{style:gr.datumText,children:t.name})}),Object(Q.jsx)(M.default,{style:gr.datumThird,onPress:function(){return e.handlePressPaymentItemRef(t)},children:Object(Q.jsx)(J.default,{style:gr.datumText,children:t.payRef})}),Object(Q.jsx)(g.default,{style:gr.datumFourth,children:Object(Q.jsx)(J.default,{style:gr.datumText,children:t.payMoney.toFixed(2)})})]},r)}))})]})]}),Object(Q.jsxs)(g.default,{style:gr.rowOf5,children:[Object(Q.jsx)(M.default,{disabled:!0,style:gr.headerKeyContainer}),Object(Q.jsx)(M.default,{disabled:!0,style:gr.headerKeyContainer}),Object(Q.jsx)(M.default,{disabled:!0,style:gr.headerKeyContainer}),Object(Q.jsx)(M.default,{disabled:!0,style:gr.headerKeyContainer}),Object(Q.jsx)(M.default,{disabled:!0,style:gr.headerKeyContainer})]})]}),Object(Q.jsxs)(g.default,{style:gr.rightContainer,children:[Object(Q.jsx)(g.default,{style:gr.rightFirstContainer,children:Object(Q.jsx)(Ie.default,{style:{flex:3},showsVerticalScrollIndicator:!1,numColumns:5,data:v,extraData:O,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsx)(g.default,{style:{flex:.2,height:mr},children:Object(Q.jsx)(M.default,{style:[r.pmId===(null==O?void 0:O.pmId)?gr.activeFunctionKeyContainer:gr.functionKeyContainer,r.pmId?null:{opacity:.2}],onPress:function(){return e.handleSelectPaymentMethod(r)},children:Object(Q.jsx)(J.default,{style:r.pmId===(null==O?void 0:O.pmId)?gr.activeFunctionKeyText:gr.functionKeyText,children:r.pmId})})})}})}),Object(Q.jsx)(g.default,{style:gr.rightFirstNumberContainer,children:Object(Q.jsx)(J.default,{style:gr.rightFirstNumberText,children:x})}),Object(Q.jsxs)(g.default,{style:gr.rightSecondContainer,children:[Object(Q.jsx)(g.default,{style:gr.rightSecondLeftContainer,children:Object(Q.jsx)(M.default,{style:gr.clearContainer,onPress:function(){return e.handleBuildNumberString("CLEAR")},children:Object(Q.jsx)(J.default,{style:gr.keyText,children:"CLEAR"})})}),Object(Q.jsxs)(g.default,{style:gr.rightSecondMiddleContainer,children:[Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("7")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"7"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("4")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"4"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("1")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"1"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("0")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"0"})})]}),Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("8")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"8"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("5")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"5"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("2")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"2"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString(".")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"."})})]}),Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("9")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"9"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("6")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"6"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("3")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"3"})}),Object(Q.jsx)(M.default,{style:gr.keyContainer,onPress:function(){return e.handleBuildNumberString("00")},children:Object(Q.jsx)(J.default,{style:gr.keyNumberText,children:"00"})})]})]}),Object(Q.jsxs)(g.default,{style:gr.rightSecondRightContainer,children:[Object(Q.jsx)(M.default,{style:gr.backspaceContainer,onPress:function(){return e.handleBuildNumberString("DEL")},children:Object(Q.jsx)(J.default,{style:gr.keyText,children:"DEL"})}),0!==s.balance?Object(Q.jsx)(M.default,{style:[gr.enterContainer,D&&{opacity:.2}],onPress:function(){return e.handleEnterButton()},disabled:D,children:Object(Q.jsx)(J.default,{style:gr.keyText,children:"ENTER"})}):Object(Q.jsx)(M.default,{style:[gr.finishContainer,D&&{opacity:.2}],onPress:function(){return e.handleFinishButton()},disabled:D,children:Object(Q.jsx)(J.default,{style:gr.keyText,children:"FINISH"})})]})]})]})]})}}]),r}(b.Component),mr=Bt.default.get("window").height/8,gr=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1},rightContainer:{flex:1},leftFirstContainer:{flex:1},leftSecondContainer:{flex:6,margin:5},rightFirstContainer:{flex:3},rightSecondContainer:{flex:4,flexDirection:"row"},rightSecondLeftContainer:{flex:1},rightSecondMiddleContainer:{flex:3,flexDirection:"row"},rightSecondRightContainer:{flex:1},rowOf5:{flex:1,flexDirection:"row"},rightFirstNumberContainer:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},tableSummaryContainer:{justifyContent:"space-between",flexDirection:"row",marginHorizontal:60,marginTop:10,marginBottom:20},tableSummaryTitleContainer:{alignItems:"flex-start"},tableSummaryValueContainer:{alignItems:"flex-end"},tableSummaryTitle:{height:30,justifyContent:"flex-end"},tableSummaryValue:{height:30,justifyContent:"flex-end"},tableSummaryTitleText:{fontFamily:"varela-round",textTransform:"uppercase",color:"white"},tableSummaryValueText:{fontFamily:"varela-round",fontSize:20,color:"white"},keyContainer:{flex:1,margin:5,borderColor:"white",borderWidth:2,borderRadius:5,alignItems:"center",justifyContent:"center"},backspaceContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5,backgroundColor:te.grey4},enterContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5,backgroundColor:te.reserved},finishContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.occupied,borderRadius:5,borderWidth:2,borderColor:"white"},clearContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5,backgroundColor:te.paid},functionKeyContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5},activeFunctionKeyContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:"white",borderColor:"white",borderWidth:2,borderRadius:5},headerKeyContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey3,borderRadius:5},headerKeyTextTableId:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",fontSize:24},headerKeyText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",fontSize:12},keyText:{fontFamily:"varela-round",color:"white"},keyNumberText:{fontFamily:"varela-round",color:"white",fontSize:32},functionKeyText:{fontFamily:"varela-round",color:"white",textAlign:"center"},activeFunctionKeyText:{fontFamily:"varela-round",color:te.grey3,textAlign:"center"},rightFirstNumberText:{fontFamily:"varela-round",color:"white",fontSize:64},paymentsContainer:{height:30,flexDirection:"row",marginHorizontal:5},dataContainer:{flex:1},paymentsFirst:{flex:1,justifyContent:"center",alignItems:"center",borderRightWidth:3,borderRightColor:te.grey2},paymentsSecond:{flex:3,justifyContent:"center",paddingLeft:10},paymentsThird:{flex:5,justifyContent:"center",paddingLeft:10},paymentsFourth:{flex:2,justifyContent:"center",alignItems:"flex-end",paddingRight:10},paymentsTitleText:{color:te.grey5,fontFamily:"varela-round"},datumFirst:{flex:1,justifyContent:"center",alignItems:"center",borderRightWidth:3,borderRightColor:"white"},datumSecond:{flex:3,justifyContent:"center",paddingLeft:10},datumThird:{flex:5,justifyContent:"center",paddingLeft:10},datumFourth:{flex:2,justifyContent:"center",alignItems:"flex-end",paddingRight:10},datumText:{color:"white",fontFamily:"varela-round",fontSize:16},datumContainer:{backgroundColor:te.grey4,flexDirection:"row",marginHorizontal:5,marginBottom:5,minHeight:50,paddingVertical:5}});function jr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var xr=function(e){d()(r,e);var t=jr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,selectedTable:e.route.params.selectedTable,menus:e.route.params.masters.menus,settings:e.route.params.masters.settings,selectedAdhocItem:"",selectedMenu:"",adhocItems:[],searchText:"",availableMenus:e.route.params.masters.menus.filter((function(e){return"X"===e.menuType}))},n.handleSelectTableItem=n.handleSelectTableItem.bind(D()(n)),n.handleSelectAdhoc=n.handleSelectAdhoc.bind(D()(n)),n.handlePressSettleAsMenu=n.handlePressSettleAsMenu.bind(D()(n)),n.handlePressSettleAsRetail=n.handlePressSettleAsRetail.bind(D()(n)),n.handleSearchText=n.handleSearchText.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){this.doGet()}},{key:"doGet",value:function(){var e=this,t=this.state,r=(t.home,t.serviceEntry+"api/tables/"+t.selectedTable.recKey+"/opentable-adhocs");fetch(r).then((function(e){return e.json()})).then((function(t){console.log("get opentable-adhocs successful",t),e.setState({adhocItems:t})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleSelectTableItem",value:function(e){this.setState({selectedAdhocItem:e,selectedMenu:""})}},{key:"handleSelectAdhoc",value:function(e){this.state.selectedAdhocItem&&this.setState({selectedMenu:e})}},{key:"handlePressSettleAsMenu",value:function(){var e=this,t=(this.props.navigation,this.state),r=t.home,n=t.serviceEntry,a=t.settings,l=t.selectedTable,o=t.selectedAdhocItem,s=t.selectedMenu;if(o){var i=n+"api/tables/"+l.recKey+"/insert-item",c={userId:r.userId,opentableRecKey:l.recKey,restmenuRecKey:s.recKey,adhocRecKey:o.recKey,orderQty:"1"};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){console.log("post insert-item successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Adhoc Settle Menu",r.userName,t.message,l.tableId,"",o.recKey),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.doGet()})).catch((function(t){console.log(t),e.setState({loading:!1})}))}}},{key:"handlePressSettleAsRetail",value:function(){var e=this,t=(this.props.navigation,this.state),r=t.home,n=t.serviceEntry,a=t.settings,l=t.selectedTable,o=t.selectedAdhocItem;if(o){var s=n+"api/tables/"+l.recKey+"/insert-item",i={userId:r.userId,opentableRecKey:l.recKey,adhocRecKey:o.recKey,orderQty:o.orderQty};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(t){console.log("post insert-item successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Adhoc Settle Retail",r.userName,t.message,l.tableId,"",o.recKey),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.doGet()})).catch((function(t){console.log(t),e.setState({loading:!1})}))}}},{key:"handleSearchText",value:function(e){var t=this.state.menus,r=[];this.setState({searchText:e});var n=e.toUpperCase();r=t.filter((function(e){return"X"===e.menuType})),e?(r=r.filter((function(e){return e.menuName.toUpperCase().includes(n)||e.menuId.toUpperCase().includes(n)})),this.setState({availableMenus:r})):this.setState({availableMenus:r})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.selectedTable,a=r.adhocItems,l=r.selectedAdhocItem,o=r.selectedMenu,s=r.searchText,i=r.availableMenus,c=r.overlayProcedureMessageVisible;return console.log("in adhoc"),Object(Q.jsxs)(g.default,{style:vr.container,children:[c&&Object(Q.jsx)(se,{text:c,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsx)(g.default,{style:vr.leftContainer,children:Object(Q.jsxs)(g.default,{style:vr.wrapper,children:[Object(Q.jsxs)(g.default,{style:vr.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:vr.overlayTitleText,children:["TABLE ",n.tableId]}),Object(Q.jsx)(J.default,{style:vr.overlaySubtitleText,children:"Ad Hoc"}),Object(Q.jsxs)(J.default,{style:vr.overlayTitleText,children:[a.length," ITEMS"]})]}),Object(Q.jsxs)(g.default,{style:vr.buttonsContainer,children:[Object(Q.jsxs)(M.default,{style:[vr.button,{opacity:.2}],disabled:!0,onPress:function(){return e.handlePressSettleAsRetail()},children:[Object(Q.jsx)(J.default,{style:vr.buttonText,children:"Settle"}),Object(Q.jsx)(J.default,{style:vr.buttonText,children:"As"}),Object(Q.jsx)(J.default,{style:vr.buttonText,children:"Retail"})]}),Object(Q.jsxs)(M.default,{style:[vr.button,!o&&{opacity:.2}],disabled:!o,onPress:function(){return e.handlePressSettleAsMenu()},children:[Object(Q.jsx)(J.default,{style:vr.buttonText,children:"Settle"}),Object(Q.jsx)(J.default,{style:vr.buttonText,children:"As"}),Object(Q.jsx)(J.default,{style:vr.buttonText,children:"Menu"})]})]}),Object(Q.jsxs)(me.default,{style:[vr.itemsContainer],children:[Object(Q.jsx)(g.default,{style:{paddingTop:5}}),a.map((function(t){return Object(Q.jsxs)(M.default,{style:[vr.tableItemContainer,l.recKey===t.recKey&&{backgroundColor:te.occupied}],onPress:function(){return e.handleSelectTableItem(t)},children:[Object(Q.jsx)(g.default,{style:vr.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:vr.tableItemText,children:t.orderQty})}),Object(Q.jsxs)(g.default,{style:vr.tableItemSecondContainer,children:[Object(Q.jsx)(J.default,{style:vr.tableItemText,children:t.name}),Object(Q.jsx)(J.default,{style:vr.tableItemText,children:le()(t.createDate).format("HH:mm")})]}),Object(Q.jsx)(g.default,{style:vr.tableItemThirdContainer,children:Object(Q.jsx)(J.default,{style:vr.tableItemText})})]},t.recKey)}))]}),Object(Q.jsx)(M.default,{style:vr.actionButton,onPress:function(){return t.goBack()},children:Object(Q.jsx)(J.default,{style:[vr.buttonText,{color:te.paid}],children:"QUIT"})})]})}),Object(Q.jsx)(g.default,{style:vr.rightContainer,children:Object(Q.jsxs)(g.default,{style:vr.rightWrapper,children:[Object(Q.jsxs)(g.default,{style:vr.searchBox,children:[Object(Q.jsx)(N.default,{style:vr.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:s,onChangeText:function(t){return e.handleSearchText(t)}}),Object(Q.jsx)(M.default,{style:vr.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsx)(g.default,{style:vr.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:vr.searchBoxInfoText,children:[i.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:{flex:1},data:i,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[vr.grid,o.recKey===r.recKey&&{backgroundColor:te.occupied}],onPress:function(){return e.handleSelectAdhoc(r)},children:[Object(Q.jsxs)(g.default,{style:vr.gridFirst,children:[Object(Q.jsx)(g.default,{style:vr.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:vr.gridFirstLeftText,children:r.menuId})}),Object(Q.jsx)(g.default,{style:vr.gridFirstRight})]}),Object(Q.jsx)(g.default,{style:vr.gridSecond,children:Object(Q.jsx)(J.default,{style:vr.gridSecondText,children:r.menuName})}),Object(Q.jsx)(g.default,{style:vr.gridThird})]},r.recKey)}})]})})]})}}]),r}(b.Component),vr=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1},rightContainer:{flex:2,alignItems:"center",justifyContent:"center",margin:5},wrapper:{flex:1},splitScroll:{width:"100%",height:"100%"},itemsContainer:{flex:1,borderRadius:5,margin:5,backgroundColor:te.grey2},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},buttonsContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center"},actionButton:{height:72,margin:5,backgroundColor:te.grey2,alignItems:"center",justifyContent:"center"},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:1,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{alignItems:"center",justifyContent:"center",width:50},rightWrapper:{flex:1,borderRadius:5,width:"100%",alignItems:"center",justifyContent:"center",backgroundColor:te.grey2},button:{height:72,width:72,borderRadius:5,margin:5,backgroundColor:te.grey2,alignItems:"center",justifyContent:"center"},buttonText:{fontFamily:"varela-round",color:"white",fontSize:12,textTransform:"uppercase"},gap:{padding:5},searchBox:{backgroundColor:te.grey1,height:50,width:400,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{height:80,width:400,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:te.reserved,fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"}});function Tr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Or=function(e){d()(r,e);var t=Tr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,dayclosePayments:e.route.params.dayclosePayments,cashierPrinters:e.route.params.masters.cashierPrinters,settings:e.route.params.masters.settings,overlayChoosePrinterVisible:!1},n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleFinishDayclose=n.handleFinishDayclose.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){e?(this.setState({overlayChoosePrinterVisible:!1}),this.handleFinishDayclose(e)):this.setState({overlayChoosePrinterVisible:!1})}},{key:"handleFinishDayclose",value:function(e){var t=this,r=this.props.navigation,n=this.state,a=n.serviceEntry,l=n.home,o=n.settings,s=n.dayclosePayments,i=n.cashierPrinters;if(0!==s.length)if(i.length>1&&!e&&!l.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{var c=a+"api/finish-dayclose",d={userId:l.userId,orgId:l.orgId,shopId:l.shopId,daycloseRecKey:s[0].masRecKey,iomodelId:l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post finish-dayclose successful",e),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Finish Dayclose",l.userName,e.message,"","",""),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.goBack()}))}}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.dayclosePayments,a=r.cashierPrinters,l=r.overlayChoosePrinterVisible,o=r.overlayProcedureMessageVisible;return console.log("in dayclose"),Object(Q.jsxs)(g.default,{style:Sr.container,children:[o&&Object(Q.jsx)(se,{text:o,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),l&&Object(Q.jsx)(vt,{printPurpose:"DAY-END CLOSE",cashierPrinters:a,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),Object(Q.jsx)(g.default,{style:Sr.containerFirst,children:Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsxs)(M.default,{style:Sr.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Sr.buttonText,children:"BACK"})]})})}),Object(Q.jsxs)(g.default,{style:Sr.containerSecond,children:[Object(Q.jsxs)(g.default,{style:Sr.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Sr.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Sr.overlaySubtitleText,children:"Day-end Closing"}),Object(Q.jsxs)(J.default,{style:Sr.overlayTitleText,children:[n.length," PAYMENT METHODS"]})]}),Object(Q.jsxs)(g.default,{style:Sr.summary,children:[Object(Q.jsx)(J.default,{style:Sr.summaryText,children:"TOTAL"}),Object(Q.jsx)(J.default,{style:Sr.summaryTotalText,children:n.reduce((function(e,t){return e+t.systemAmt}),0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),Object(Q.jsx)(J.default,{style:Sr.overlayTitleText})]}),Object(Q.jsxs)(g.default,{style:Sr.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Sr.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Sr.titleText,children:"Line No."})}),Object(Q.jsx)(g.default,{style:Sr.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:Sr.titleText,children:"Payment ID"})}),Object(Q.jsx)(g.default,{style:Sr.titleThirdContainer,children:Object(Q.jsx)(J.default,{style:Sr.titleText,children:"Payment Name"})}),Object(Q.jsx)(g.default,{style:Sr.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Sr.titleText,children:"Amount"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return Object(Q.jsxs)(g.default,{style:[Sr.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:Sr.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Sr.tableItemText,children:t.lineNo})}),Object(Q.jsx)(g.default,{style:Sr.tableItemSecondContainer,children:Object(Q.jsx)(J.default,{style:Sr.tableItemText,children:t.pmId})}),Object(Q.jsx)(g.default,{style:Sr.tableItemThirdContainer,children:Object(Q.jsx)(J.default,{style:Sr.tableItemText,children:t.name})}),Object(Q.jsx)(g.default,{style:Sr.tableItemFourthContainer,children:Object(Q.jsx)(J.default,{style:Sr.tableItemText,children:t.systemAmt.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})})]})}})]}),Object(Q.jsx)(g.default,{style:Sr.containerThird,children:Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsxs)(M.default,{style:Sr.button,onPress:function(){return e.handleFinishDayclose()},children:[Object(Q.jsx)(U.default,{name:"isv",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Sr.buttonText,children:"DAY CLOSE"})]})})})]})}}]),r}(b.Component),Sr=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:te.grey3},containerThird:{flex:1,flexDirection:"row",padding:10},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},titleFirstContainer:{width:100,alignItems:"center",justifyContent:"center"},titleSecondContainer:{flex:1,justifyContent:"center"},titleThirdContainer:{flex:1,justifyContent:"center"},titleFourthContainer:{width:150,alignItems:"flex-end",justifyContent:"center",paddingRight:20},titleText:{fontFamily:"varela-round",color:te.grey5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:100,alignItems:"center",justifyContent:"center"},tableItemSecondContainer:{flex:1,justifyContent:"center"},tableItemThirdContainer:{flex:1,justifyContent:"center"},tableItemFourthContainer:{width:150,alignItems:"flex-end",justifyContent:"center",paddingRight:20},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},summary:{marginVertical:15,alignItems:"center",justifyContent:"center"},summaryTotalText:{fontFamily:"varela-round",fontSize:32,color:te.reserved,textAlign:"center"},summaryText:{fontFamily:"varela-round",fontSize:12,color:te.paid,textAlign:"center"}});function Ir(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Cr=function(e){d()(r,e);var t=Ir(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:"",printers:[],loading:!1},n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.home,n=t.serviceEntry+"api/iomodels",a=new URLSearchParams;a.append("posNo",r.shopId),fetch(n+="?"+a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("iomodels",t),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({printers:t},(function(){return e.handlePingAll()}))})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePingPrinter",value:function(e){var t=this,r=this.state,n=r.serviceEntry,a=r.printers,l=a;l.find((function(t){return t.recKey===e.recKey})).statusFlg="PING...",this.setState({printers:l});var o=n+"api/iomodels/"+e.recKey;fetch(o,{method:"GET"}).then((function(e){return e.json()})).then((function(r){if(console.log("ping iomodel",r),r.message)t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()});else{var n=a;"OK"===r.msgId?n.find((function(t){return t.recKey===e.recKey})).statusFlg="ONLINE":n.find((function(t){return t.recKey===e.recKey})).statusFlg="OFFLINE",t.setState({printers:n})}})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handlePressPingAll",value:function(){var e=[];e.push({text:"Yes",handleText:"handlePingAll"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Ping All Printers",text:"Send ping to all printers?",ok:!1,cancel:!0,options:e},overlayAlertVisible:!0})}},{key:"handlePressTestAll",value:function(){var e=[];e.push({text:"Yes",handleText:"handleTestAll"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Test All Printers",text:"Send test command to all printers?",ok:!1,cancel:!0,options:e},overlayAlertVisible:!0})}},{key:"handleTestAll",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=r+"api/test-printer",l=new URLSearchParams;l.append("userId",n.userId),l.append("orgId",n.orgId),l.append("locId",n.locId),l.append("shopId",n.shopId),fetch(a+="?"+l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("post test-printer successful",t),t.message&&e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePingAll",value:function(){var e=this;this.state.printers.forEach((function(t){return e.handlePingPrinter(t)}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&("handleTestAll"===e?this.handleTestAll():"handlePingAll"===e&&this.handlePingAll())}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.printers,a=(r.loading,r.overlayProcedureMessageVisible),l=r.overlayAlertVisible,o=r.overlayAlertInputValue;return console.log("in printers"),Object(Q.jsxs)(g.default,{style:Fr.container,children:[l&&Object(Q.jsx)(St,{input:o,handleUpdateFromAlert:this.handleUpdateFromAlert}),a&&Object(Q.jsx)(se,{text:a,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsxs)(g.default,{style:Fr.leftContainer,children:[Object(Q.jsx)(g.default,{style:Fr.navigateContainer,children:Object(Q.jsxs)(g.default,{style:Fr.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:Fr.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Fr.buttonText,children:S.a.get("back")})]}),Object(Q.jsx)(g.default,{style:Fr.selectionContainer})]})}),Object(Q.jsx)(g.default,{style:Fr.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Fr.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:Fr.gap}),Object(Q.jsxs)(g.default,{style:Fr.gridContainer,children:[Object(Q.jsx)(g.default,{style:Fr.gap}),Object(Q.jsx)(Ie.default,{style:{flex:1,width:"100%"},data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;if(t.index%2===0)return Object(Q.jsxs)(M.default,{style:Fr.grid,onPress:function(){return e.handlePingPrinter(r)},children:[Object(Q.jsxs)(g.default,{style:Fr.gridFirst,children:[Object(Q.jsx)(g.default,{style:Fr.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:Fr.gridFirstLeftText,children:r.iomodelId})}),Object(Q.jsx)(g.default,{style:Fr.gridFirstRight,children:Object(Q.jsx)(J.default,{style:[Fr.gridFirstRightText,{color:"PING..."===r.statusFlg?te.reserved:"ONLINE"===r.statusFlg?te.vacant:te.paid}],children:"ONLINE"===r.statusFlg?S.a.get("online"):"OFFLINE"===r.statusFlg?S.a.get("offline"):r.statusFlg})})]}),Object(Q.jsx)(g.default,{style:Fr.gridSecond,children:Object(Q.jsx)(J.default,{style:Fr.gridSecondText,children:r.name})}),Object(Q.jsxs)(g.default,{style:Fr.gridThird,children:[Object(Q.jsx)(g.default,{style:Fr.gridThirdLeft}),Object(Q.jsx)(g.default,{style:Fr.gridThirdRight,children:Object(Q.jsx)(J.default,{style:Fr.gridThirdRightText,children:r.printPort})})]})]})}})]}),Object(Q.jsx)(g.default,{style:Fr.gap})]})})]}),Object(Q.jsxs)(g.default,{style:Fr.rightContainer,children:[Object(Q.jsx)(g.default,{style:Fr.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Fr.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsx)(g.default,{style:Fr.gap}),Object(Q.jsxs)(g.default,{style:Fr.gridContainer,children:[Object(Q.jsx)(g.default,{style:Fr.gap}),Object(Q.jsx)(Ie.default,{style:{flex:1,width:"100%"},data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;if(t.index%2)return Object(Q.jsxs)(M.default,{style:Fr.grid,onPress:function(){return e.handlePingPrinter(r)},children:[Object(Q.jsxs)(g.default,{style:Fr.gridFirst,children:[Object(Q.jsx)(g.default,{style:Fr.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:Fr.gridFirstLeftText,children:r.iomodelId})}),Object(Q.jsx)(g.default,{style:Fr.gridFirstRight,children:Object(Q.jsx)(J.default,{style:[Fr.gridFirstRightText,{color:"PING..."===r.statusFlg?te.reserved:"ONLINE"===r.statusFlg?te.vacant:te.paid}],children:"ONLINE"===r.statusFlg?S.a.get("online"):"OFFLINE"===r.statusFlg?S.a.get("offline"):r.statusFlg})})]}),Object(Q.jsx)(g.default,{style:Fr.gridSecond,children:Object(Q.jsx)(J.default,{style:Fr.gridSecondText,children:r.name})}),Object(Q.jsxs)(g.default,{style:Fr.gridThird,children:[Object(Q.jsx)(g.default,{style:Fr.gridThirdLeft}),Object(Q.jsx)(g.default,{style:Fr.gridThirdRight,children:Object(Q.jsx)(J.default,{style:Fr.gridThirdRightText,children:r.printPort})})]})]},r.recKey)}})]}),Object(Q.jsx)(g.default,{style:Fr.gap})]})}),Object(Q.jsx)(g.default,{style:Fr.navigateContainer,children:Object(Q.jsxs)(g.default,{style:Fr.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:Fr.button,onPress:function(){return e.handlePressPingAll()},children:[Object(Q.jsx)(U.default,{name:"fork",color:"white",size:36}),Object(Q.jsxs)(J.default,{style:Fr.buttonText,children:["PING ",S.a.get("all")]})]}),Object(Q.jsxs)(M.default,{style:Fr.button,onPress:function(){return e.handlePressTestAll()},children:[Object(Q.jsx)(U.default,{name:"printer",color:"white",size:36}),Object(Q.jsxs)(J.default,{style:Fr.buttonText,children:[S.a.get("test")," ",S.a.get("all")]})]})]})})]})]})}}]),r}(b.Component),Fr=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round",textTransform:"uppercase"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function Pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Rr=function(e){d()(r,e);var t=Pr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={dateString:e.dateString?le()(e.dateString).format("YYYY-MM-DD"):le()(new Date).format("YYYY-MM-DD"),valid:!0},n.handleValidate=n.handleValidate.bind(D()(n)),n.handleQtyChange=n.handleQtyChange.bind(D()(n)),n}return i()(r,[{key:"handleValidate",value:function(e){this.setState({dateString:e,valid:le()(e,"YYYY-MM-DD",!0).isValid()})}},{key:"handleQtyChange",value:function(e){var t=this.state.dateString;if("PLUS"===e){var r=le()(t).add(1,"days").format("YYYY-MM-DD");this.setState({dateString:r,valid:le()(r,"YYYY-MM-DD",!0).isValid()})}else if("MINUS"===e){var n=le()(t).subtract(1,"days").format("YYYY-MM-DD");this.setState({dateString:n,valid:le()(n,"YYYY-MM-DD",!0).isValid()})}}},{key:"render",value:function(){var e=this,t=this.state,r=t.dateString,n=t.valid;return console.log("in overlayenterdate",this.props),Object(Q.jsx)(g.default,{style:wr.overlay,children:Object(Q.jsxs)(g.default,{style:wr.overlayContent,children:[Object(Q.jsxs)(g.default,{style:wr.overlayHeader,children:[Object(Q.jsx)(J.default,{style:wr.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:wr.overlaySubtitleText,children:"Enter Date"})]}),Object(Q.jsxs)(g.default,{style:wr.inputRow,children:[Object(Q.jsx)(M.default,{style:wr.inputRowFirst,onPress:function(){return e.handleQtyChange("MINUS")},children:Object(Q.jsx)(U.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),Object(Q.jsx)(g.default,{style:wr.inputRowSecond,children:Object(Q.jsx)(N.default,{style:[wr.textInput,!n&&{color:te.paid}],keyboardType:"numeric",value:r,onChangeText:function(t){return e.handleValidate(t)}})}),Object(Q.jsx)(M.default,{style:wr.inputRowThird,onPress:function(){return e.handleQtyChange("PLUS")},children:Object(Q.jsx)(U.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),Object(Q.jsx)(M.default,{onPress:function(){return e.setState({dateString:le()().format("YYYY-MM-DD"),valid:!0})},children:Object(Q.jsx)(J.default,{style:wr.overlayText,children:"YYYY-MM-DD"})}),Object(Q.jsx)(M.default,{style:[wr.overlayOption,{marginTop:20},!n&&{opacity:.2}],disabled:!n,onPress:function(){return e.props.handleUpdateFromEnterDate(r,e.props.dateType)},children:Object(Q.jsx)(J.default,{style:wr.overlayOptionText,children:"OK"})}),Object(Q.jsx)(M.default,{style:[wr.overlayOption,{backgroundColor:te.paid}],onPress:function(){return e.props.handleUpdateFromEnterDate("")},children:Object(Q.jsx)(J.default,{style:wr.overlayOptionText,children:S.a.get("cancel")})})]})})}}]),r}(b.Component),wr=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:te.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},inputRow:{height:60,width:"100%",marginVertical:5,flexDirection:"row",justifyContent:"center"},inputRowFirst:{width:100,height:60,alignItems:"center",justifyContent:"center"},inputRowSecond:{flex:1,minWidth:80,width:150,borderRadius:5,backgroundColor:te.grey1,alignItems:"center",justifyContent:"center"},inputRowThird:{width:100,height:60,alignItems:"center",justifyContent:"center"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"center"}});function kr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Er=function(e){d()(r,e);var t=kr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,cashierPrinters:e.route.params.masters.cashierPrinters,privileges:e.route.params.masters.privileges,selectedButton:"",fromDateString:le()().format("YYYY-MM-DD"),toDateString:le()().format("YYYY-MM-DD"),reportDetails:"",requestedPrivilege:"",overlayRequestAccessVisible:!1,overlayChoosePrinterVisible:!1,overlayEnterDateVisible:!1,overlayProcedureMessageVisible:!1},n.handlePressDate=n.handlePressDate.bind(D()(n)),n.handleSelectReport=n.handleSelectReport.bind(D()(n)),n.handlePrintReport=n.handlePrintReport.bind(D()(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handlePressDate",value:function(e){var t=this.state,r=t.fromDateString,n=t.toDateString;this.setState({overlayEnterDateVisible:!0,selectedDateType:e,selectedDateString:"FROMDATE"===e?r:n})}},{key:"handleSelectReport",value:function(e,t){var r=this,n=this.state,a=n.serviceEntry,l=n.home,o=n.privileges,s=n.fromDateString,i=n.toDateString;if("Y"===l.adminFlg||o.some((function(t){return t.priId===e}))||t){this.setState({selectedButton:e}),console.log("report");var c=a+"api/bistro-report",d={userId:l.userId,orgId:l.orgId,locId:l.locId,shopId:l.shopId,reportCode:e,fromDateString:s,toDateString:i};console.log("body",d,c),fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post bistro-report successful",e),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({reportDetails:e})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:e})}},{key:"handlePrintReport",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.cashierPrinters,o=r.selectedButton,s=r.fromDateString,i=r.toDateString;if(o)if(l.length>1&&!e&!n.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{var c=a+"api/print-bistro-report",d={userId:n.userId,orgId:n.orgId,locId:n.locId,shopId:n.shopId,reportCode:o,iomodelId:n.defaultPrinter&&n.defaultPrinter.iomodelId||e&&e.iomodelId,fromDateString:s,toDateString:i};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post print-bistro-report successful",e),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.setState({reportDetails:e})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromEnterDate",value:function(e,t){var r=this;if(this.setState({overlayEnterDateVisible:!1}),e){var n=this.state,a=n.serviceEntry,l=n.home,o=n.selectedButton,s=n.fromDateString,i=n.toDateString;"TODATE"===t?i=le()(e).format("YYYY-MM-DD"):s=le()(e).format("YYYY-MM-DD"),this.setState({fromDateString:s,toDateString:i});var c=a+"api/bistro-report",d={userId:l.userId,orgId:l.orgId,locId:l.locId,shopId:l.shopId,reportCode:o,fromDateString:s,toDateString:i};console.log("body",d,c),fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("receipts",e),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({reportDetails:e})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handlePrintReport(e)}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.requestedPrivilege;if(e){var o=a+"api/super-user",s={locId:n.locId,accessCode:e,priId:l};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSelectReport(l,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,a=r.cashierPrinters,l=r.selectedButton,o=r.reportDetails,s=r.requestedPrivilege,i=r.fromDateString,c=r.toDateString,d=r.selectedDateString,u=r.selectedDateType,f=r.overlayProcedureMessageVisible,h=r.overlayEnterDateVisible,y=r.overlayChoosePrinterVisible,b=r.overlayRequestAccessVisible;return console.log("in reports"),Object(Q.jsxs)(g.default,{style:Br.container,children:[f&&Object(Q.jsx)(se,{text:f,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),h&&Object(Q.jsx)(Rr,{dateString:d,dateType:u,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),y&&Object(Q.jsx)(vt,{printPurpose:"PRINT REPORT",cashierPrinters:a,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),b&&Object(Q.jsx)(Ge,{home:n,requestedPrivilege:s,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),Object(Q.jsx)(g.default,{style:Br.containerFirst,children:Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsxs)(M.default,{style:Br.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Br.buttonText,children:S.a.get("back")})]}),Object(Q.jsxs)(M.default,{style:[Br.selection,"REVENUESUM"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectReport("REVENUESUM")},children:[Object(Q.jsx)(J.default,{style:[Br.selectionText,"REVENUESUM"===l&&{color:te.grey1}],children:"REVENUE"}),Object(Q.jsx)(J.default,{style:[Br.selectionText,"REVENUESUM"===l&&{color:te.grey1}],children:"SUMMARY"})]}),Object(Q.jsx)(g.default,{style:Br.gap}),Object(Q.jsxs)(M.default,{style:[Br.selection,"REVENUEDTL"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectReport("REVENUEDTL")},children:[Object(Q.jsx)(J.default,{style:[Br.selectionText,,"REVENUEDTL"===l&&{color:te.grey1}],children:"REVENUE"}),Object(Q.jsx)(J.default,{style:[Br.selectionText,,"REVENUEDTL"===l&&{color:te.grey1}],children:"DETAIL"})]}),Object(Q.jsx)(g.default,{style:Br.gap}),Object(Q.jsxs)(M.default,{style:[Br.selection,"COLLECTION"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectReport("COLLECTION")},children:[Object(Q.jsx)(J.default,{style:[Br.selectionText,"COLLECTION"===l&&{color:te.grey1}],children:"PAYMENT"}),Object(Q.jsx)(J.default,{style:[Br.selectionText,"COLLECTION"===l&&{color:te.grey1}],children:"COLLECTION"})]}),Object(Q.jsx)(g.default,{style:Br.gap})]})}),Object(Q.jsxs)(g.default,{style:Br.containerSecond,children:[Object(Q.jsxs)(g.default,{style:Br.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Br.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Br.overlaySubtitleText,children:S.a.get("reports")}),Object(Q.jsx)(g.default,{style:Br.gap}),Object(Q.jsxs)(g.default,{style:{flexDirection:"row",alignItems:"center"},children:[Object(Q.jsx)(M.default,{style:{height:30,justifyContent:"center",backgroundColor:"none"},onPress:function(){return e.handlePressDate("FROMDATE")},children:Object(Q.jsx)(J.default,{style:Br.overlayTitleText,children:i})}),Object(Q.jsx)(J.default,{style:Br.overlayTitleText,children:"    /    "}),Object(Q.jsx)(M.default,{style:{height:30,justifyContent:"center",backgroundColor:"none"},onPress:function(){return e.handlePressDate("TODATE")},children:Object(Q.jsx)(J.default,{style:Br.overlayTitleText,children:c})})]}),Object(Q.jsx)(J.default,{style:[Br.overlayTitleText,{color:te.paid,opacity:1}],children:"REVENUESUM"===l?"REVENUE SUMMARY":"REVENUEDTL"===l?"REVENUE DETAIL":"COLLECTION"===l?"PAYMENT COLLECTION":null})]}),o?Object(Q.jsx)(me.default,{style:Br.reportContainer,showsVerticalScrollIndicator:!1,children:o.map((function(e,t){return Object(Q.jsxs)(g.default,{style:Br.reportLineContainer,children:[Object(Q.jsx)(g.default,{style:Br.reportLineFirst,children:Object(Q.jsx)(J.default,{style:Br.reportLineFirstText,children:e.description})}),Object(Q.jsx)(g.default,{style:Br.reportLineSecond,children:Object(Q.jsx)(J.default,{style:Br.reportLineSecondText,children:e.qty})}),Object(Q.jsx)(g.default,{style:Br.reportLineThird,children:Object(Q.jsx)(J.default,{style:Br.reportLineThirdText,children:e.val?e.val.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):null})})]},e.recKey)}))}):null]}),Object(Q.jsx)(g.default,{style:Br.containerThird,children:Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsxs)(M.default,{style:[Br.button,!l&&{opacity:.2}],disabled:!l,onPress:function(){return e.handlePrintReport()},children:[Object(Q.jsx)(U.default,{name:"printer",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Br.buttonText,children:S.a.get("print")})]})})})]})}}]),r}(b.Component),Br=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:te.grey3,alignItems:"center"},containerThird:{flex:1,flexDirection:"row",padding:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},selection:{width:"100%",backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",height:70},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},reportContainer:{flex:1,width:440,borderTopLeftRadius:5,borderTopRightRadius:5,backgroundColor:te.grey2,padding:20},reportLineContainer:{height:50,flexDirection:"row"},reportLineFirst:{width:240},reportLineSecond:{width:60},reportLineThird:{width:100,alignItems:"flex-end"},reportLineFirstText:{fontFamily:"varela-round",color:te.grey5},reportLineSecondText:{fontFamily:"varela-round",color:te.grey5},reportLineThirdText:{fontFamily:"varela-round",color:te.grey5}});function Dr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Ur=function(e){d()(r,e);var t=Dr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,home:e.route.params.home,cashierPrinters:e.route.params.masters.cashierPrinters,selectedButton:"ORDERS",masters:[],availableMasters:[],searches:[],selectedMaster:"",details:[],searchText:"",receiptsxText:"",headers:"",pays:"",selectedDateString:le()(new Date).format("YYYY-MM-DD"),overlayChoosePrinterVisible:!1},n.handlePressDate=n.handlePressDate.bind(D()(n)),n.handlePressSearch=n.handlePressSearch.bind(D()(n)),n.handleSelectButton=n.handleSelectButton.bind(D()(n)),n.handleSelectMaster=n.handleSelectMaster.bind(D()(n)),n.handleReprint=n.handleReprint.bind(D()(n)),n.handleSearchText=n.handleSearchText.bind(D()(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.selectedDateString,l=r+"api/orders",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("docDateString",a),fetch(l+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("orders",t),e.setState({masters:t,availableMasters:t})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePressDate",value:function(){this.setState({overlayEnterDateVisible:!0})}},{key:"handlePressSearch",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.receiptsxText;if(this.setState({selectedMaster:"",details:[],pays:"",headers:""}),a){var l=r+"api/receipts-search",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("searchInput",a),fetch(l+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("masters",t),e.setState({masters:t.receiptmas,availableMasters:t.receiptmas,searches:t.receiptpaydtl,details:[]})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}}},{key:"handleUpdateFromEnterDate",value:function(e){var t=this;if(this.setState({overlayEnterDateVisible:!1,selectedMaster:"",details:[],pays:"",headers:""}),e){var r=this.state,n=r.serviceEntry,a=r.home,l=r.selectedButton,o=n;o+="ORDERS"===l?"api/orders":"KOTS"===l?"api/kots":"RECEIPTS"===l?"api/receipts":"api/daycloses";var s=new URLSearchParams,i=le()(e).format("YYYY-MM-DD");s.append("orgId",a.orgId),s.append("shopId",a.shopId),s.append("docDateString",i),o+="?"+s,fetch(o,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("masters",e),"RECEIPTS"===l?t.setState({masters:e.receiptmas,availableMasters:e.receiptmas,searches:e.receiptpaydtl,selectedDateString:i,details:[]}):t.setState({masters:e,availableMasters:e,searches:[],selectedDateString:i,details:[]})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleSelectButton",value:function(e){var t=this,r=this.state,n=r.serviceEntry,a=r.home,l=r.selectedDateString;if(this.setState({details:[],selectedMaster:"",selectedButton:e,pays:"",headers:""}),"RECEIPTSX"!==e){var o=n;o+="ORDERS"===e?"api/orders":"KOTS"===e?"api/kots":"RECEIPTS"===e?"api/receipts":"api/daycloses";var s=new URLSearchParams;s.append("orgId",a.orgId),s.append("shopId",a.shopId),s.append("docDateString",l),o+="?"+s,fetch(o,{method:"GET"}).then((function(e){return e.json()})).then((function(r){console.log("masters",r),r.message?console.log(r.message):"RECEIPTS"===e?t.setState({masters:r.receiptmas,availableMasters:r.receiptmas,searches:r.receiptpaydtl}):t.setState({masters:r,availableMasters:r,searches:[]})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({masters:[],availableMasters:[]})}},{key:"handleSelectMaster",value:function(e){var t=this,r=this.state,n=r.serviceEntry,a=r.selectedButton;this.setState({selectedMaster:e});var l=n;console.log("item",a,e),l+="ORDERS"===a?"api/orders/"+e.recKey+"/items":"KOTS"===a?"api/kots/"+e.recKey+"/items":"RECEIPTS"===a||"RECEIPTSX"===a?"api/receipts/"+e.recKey+"/bundle":"api/daycloses/"+e.recKey+"/amts",fetch(l,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("details",e),"RECEIPTS"===a||"RECEIPTSX"===a?t.setState({details:e.receiptitems,pays:e.receiptpays,headers:e.receiptmas}):t.setState({details:e})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleReprint",value:function(e){var t=this,r=this.state,n=r.serviceEntry,a=r.home,l=r.cashierPrinters,o=r.selectedMaster,s=r.selectedButton;if(o)if(l.length>1&&!e&&!a.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{var i=n;i+="ORDERS"===s?"api/orders/"+o.recKey+"/reprint":"KOTS"===s?"api/kots/"+o.recKey+"/reprint":"RECEIPTS"===s||"RECEIPTSX"===s?"api/receipts/"+o.recKey+"/reprint":"api/daycloses/"+o.recKey+"/reprint",console.log("debug",a.defaultPrinter);var c={userId:a.userId,iomodelId:a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post reprint successful",e)})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.masters,n=(t.availableMasters,t.searchText,t.searches),a=[];this.setState({searchText:e,selectedMaster:"",details:[],pays:"",headers:""});var l=e.toUpperCase();console.log("caseText",l),a=r,e?(a=a.filter((function(e){var t=n.filter((function(e){return e.payMoney===Number(l)})),r=n.filter((function(e){return e.pmId.toUpperCase().includes(l)}));return e.docId.toUpperCase().includes(l)||e.tableId.toUpperCase().includes(l)||e.createUserId.toUpperCase().includes(l)||t.some((function(t){return t.docId===e.docId}))||r.some((function(t){return t.docId===e.docId}))})),this.setState({availableMasters:a})):this.setState({availableMasters:a})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handleReprint(e)}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.cashierPrinters,a=r.selectedButton,l=(r.masters,r.availableMasters),o=r.details,s=r.searchText,i=r.receiptsxText,c=r.selectedMaster,d=r.selectedDateString,u=r.pays,f=r.headers,h=r.overlayChoosePrinterVisible,y=r.overlayEnterDateVisible;return console.log("in reprint"),Object(Q.jsxs)(g.default,{style:Ar.container,children:[y&&Object(Q.jsx)(Rr,{dateString:d,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),h&&Object(Q.jsx)(vt,{printPurpose:"REPRINT",cashierPrinters:n,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),Object(Q.jsxs)(g.default,{style:Ar.leftContainer,children:[Object(Q.jsx)(g.default,{style:Ar.navigateContainer,children:Object(Q.jsxs)(g.default,{style:Ar.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:Ar.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Ar.buttonText,children:S.a.get("back")})]}),Object(Q.jsxs)(me.default,{style:Ar.selectionContainer,alwaysBounceVertical:!1,showsVerticalScrollIndicator:!1,children:[Object(Q.jsx)(M.default,{style:[Ar.selection,"ORDERS"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("ORDERS")},children:Object(Q.jsx)(J.default,{style:[Ar.selectionText,"ORDERS"===a&&{color:te.grey1}],children:"ORDERS"})}),Object(Q.jsx)(g.default,{style:Ar.gap}),Object(Q.jsx)(M.default,{style:[Ar.selection,"KOTS"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("KOTS")},children:Object(Q.jsx)(J.default,{style:[Ar.selectionText,"KOTS"===a&&{color:te.grey1}],children:"KOTS"})}),Object(Q.jsx)(g.default,{style:Ar.gap}),Object(Q.jsx)(M.default,{style:[Ar.selection,"RECEIPTS"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("RECEIPTS")},children:Object(Q.jsx)(J.default,{style:[Ar.selectionText,"RECEIPTS"===a&&{color:te.grey1}],children:"RECEIPTS"})}),Object(Q.jsx)(g.default,{style:Ar.gap}),Object(Q.jsxs)(M.default,{style:[Ar.selection,"RECEIPTSX"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("RECEIPTSX")},children:[Object(Q.jsx)(J.default,{style:[Ar.selectionText,"RECEIPTSX"===a&&{color:te.grey1}],children:"RECEIPTS"}),Object(Q.jsx)(J.default,{style:[Ar.selectionText,{color:te.paid}],children:"UNKNOWN DATE"})]}),Object(Q.jsx)(g.default,{style:Ar.gap}),Object(Q.jsx)(M.default,{style:[Ar.selection,"DAYCLOSES"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("DAYCLOSES")},children:Object(Q.jsx)(J.default,{style:[Ar.selectionText,"DAYCLOSES"===a&&{color:te.grey1}],children:"DAY CLOSES"})}),Object(Q.jsx)(g.default,{style:Ar.gap})]})]})}),Object(Q.jsx)(g.default,{style:Ar.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Ar.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:Ar.gap}),Object(Q.jsxs)(g.default,{style:Ar.gridContainer,children:["RECEIPTSX"!==a?Object(Q.jsxs)(g.default,{style:Ar.searchBox,children:[Object(Q.jsx)(N.default,{style:Ar.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:s,onChangeText:function(t){return e.handleSearchText(t)}}),Object(Q.jsx)(M.default,{style:Ar.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}):Object(Q.jsxs)(g.default,{style:Ar.searchBox,children:[Object(Q.jsx)(N.default,{style:Ar.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:i,onChangeText:function(t){return e.setState({receiptsxText:t})}}),Object(Q.jsx)(M.default,{style:Ar.searchBoxButton,onPress:function(){e.handlePressSearch(),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"search1",size:24,color:te.grey4})})]}),Object(Q.jsxs)(g.default,{style:Ar.searchBoxInfo,children:["RECEIPTSX"!==a&&Object(Q.jsx)(M.default,{style:Ar.searchBoxInfoLeft,onPress:function(){return e.handlePressDate()},children:Object(Q.jsx)(J.default,{style:Ar.searchBoxInfoText,children:d})}),Object(Q.jsx)(g.default,{style:Ar.searchBoxInfoRight,children:Object(Q.jsxs)(J.default,{style:Ar.searchBoxInfoText,children:[l.length," DOCS"]})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[Ar.grid,c.recKey===r.recKey&&{backgroundColor:te.occupied}],onPress:function(){return e.handleSelectMaster(r)},children:[Object(Q.jsxs)(g.default,{style:Ar.gridFirst,children:[Object(Q.jsx)(g.default,{style:Ar.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:Ar.gridFirstLeftText,children:r.tableId})}),Object(Q.jsx)(g.default,{style:Ar.gridFirstRight,children:Object(Q.jsx)(J.default,{style:Ar.gridFirstRightText,children:r.createUserId})})]}),Object(Q.jsx)(g.default,{style:Ar.gridSecond,children:Object(Q.jsx)(J.default,{style:Ar.gridSecondText,children:r.docId})}),Object(Q.jsxs)(g.default,{style:Ar.gridThird,children:[Object(Q.jsx)(g.default,{style:Ar.gridThirdLeft}),Object(Q.jsx)(g.default,{style:Ar.gridThirdRight,children:Object(Q.jsxs)(J.default,{style:Ar.gridThirdRightText,children:["RECEIPTSX"===a&&le()(r.createDate).format("YYYY-MM-DD "),le()(r.createDate).format("HH:mm")]})})]})]})}})]}),Object(Q.jsx)(g.default,{style:Ar.gap})]})})]}),Object(Q.jsxs)(g.default,{style:Ar.rightContainer,children:[Object(Q.jsx)(g.default,{style:Ar.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Ar.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsx)(g.default,{style:Ar.gap}),"RECEIPTS"===a||"RECEIPTSX"===a?Object(Q.jsxs)(g.default,{style:Ar.gridContainer,children:[Object(Q.jsxs)(g.default,{style:Ar.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Ar.overlayTitleText,children:c&&c.tableId||" "}),Object(Q.jsx)(J.default,{style:Ar.overlaySubtitleText,children:c?c.docId:" "})]}),Object(Q.jsxs)(g.default,{style:Ar.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Ar.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Qty"})}),Object(Q.jsx)(g.default,{style:Ar.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Desc"})}),Object(Q.jsx)(g.default,{style:Ar.titleThirdContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Price"})}),Object(Q.jsx)(g.default,{style:Ar.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Total"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return Object(Q.jsxs)(M.default,{style:[Ar.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:Ar.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:t.orderQty})}),Object(Q.jsxs)(M.default,{style:Ar.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:Ar.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?Object(Q.jsx)(J.default,{style:Ar.tableItemModText,children:t.menuMod}):null]}),Object(Q.jsx)(g.default,{style:Ar.tableItemThirdContainer,children:Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:t.netPrice&&t.netPrice.toFixed(2)})}),Object(Q.jsx)(g.default,{style:Ar.tableItemFourthContainer,children:Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:t.lineTotal&&t.lineTotal.toFixed(2)})})]})}}),Object(Q.jsxs)(g.default,{style:Ar.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Ar.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"No."})}),Object(Q.jsx)(g.default,{style:[Ar.titleSecondContainer,{flex:10}],children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"PM ID"})}),Object(Q.jsx)(g.default,{style:Ar.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Amount"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},data:u,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item,r=e.index;return Object(Q.jsxs)(M.default,{style:[Ar.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:Ar.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:r+1})}),Object(Q.jsxs)(M.default,{style:[Ar.tableItemSecondContainer,{flex:10}],children:[Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:t.pmId}),t.payRef&&Object(Q.jsx)(J.default,{style:[Ar.tableItemText,{color:te.reserved}],children:t.payRef})]}),Object(Q.jsx)(g.default,{style:Ar.tableItemFourthContainer,children:Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:t.payMoney&&"$"+t.payMoney.toFixed(2)})})]})}}),Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"SUBTOTAL"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:f.beforeDisc&&f.beforeDisc.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"DISCOUNT"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:f.totalDisc&&f.totalDisc.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"SVC CHARGE"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:f.serviceCharge&&f.serviceCharge.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:[Ar.titleText,{color:"white"}],children:"TOTAL"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:[Ar.titleText,{color:"white"}],children:f.grandTotal&&f.grandTotal.toFixed(2)})})]})]})]}):Object(Q.jsxs)(g.default,{style:Ar.gridContainer,children:[Object(Q.jsxs)(M.default,{style:Ar.overlayHeader,onPress:function(){return e.setState({selectedMaster:"",details:[]})},children:[Object(Q.jsx)(J.default,{style:Ar.overlayTitleText,children:c&&c.tableId||" "}),Object(Q.jsx)(J.default,{style:Ar.overlaySubtitleText,children:c?c.docId:" "})]}),"DAYCLOSES"===a?Object(Q.jsxs)(g.default,{style:Ar.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:[Ar.titleSecondContainer,{flex:3}],children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Payment Method"})}),Object(Q.jsx)(g.default,{style:[Ar.titleFourthContainer,{flex:1}],children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Amount"})})]}):Object(Q.jsxs)(g.default,{style:Ar.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Ar.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Qty"})}),Object(Q.jsx)(g.default,{style:Ar.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"Desc"})}),Object(Q.jsx)(g.default,{style:Ar.titleThirdContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"KOTS"!==a&&"Price"})}),Object(Q.jsx)(g.default,{style:Ar.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Ar.titleText,children:"KOTS"!==a&&"Total"})})]}),"DAYCLOSES"===a?Object(Q.jsx)(Ie.default,{style:{flex:1},data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return Object(Q.jsxs)(M.default,{style:[Ar.tableItemContainer],children:[Object(Q.jsx)(M.default,{style:Ar.tableItemSecondContainer,children:Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:t.pmId})}),Object(Q.jsx)(g.default,{style:Ar.tableItemFourthContainer,children:Object(Q.jsxs)(J.default,{style:Ar.tableItemText,children:["$",t.systemAmt&&t.systemAmt.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]})}}):Object(Q.jsx)(Ie.default,{style:{flex:1},data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return Object(Q.jsxs)(M.default,{style:[Ar.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:Ar.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Ar.tableItemText,children:t.orderQty})}),Object(Q.jsxs)(M.default,{style:Ar.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:Ar.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?Object(Q.jsx)(J.default,{style:Ar.tableItemModText,children:t.menuMod}):null]}),Object(Q.jsx)(g.default,{style:Ar.tableItemThirdContainer,children:Object(Q.jsxs)(J.default,{style:Ar.tableItemText,children:["KOTS"!==a&&"$",t.netPrice&&t.netPrice.toFixed(2)]})}),Object(Q.jsx)(g.default,{style:Ar.tableItemFourthContainer,children:Object(Q.jsxs)(J.default,{style:Ar.tableItemText,children:["KOTS"!==a&&"$",t.lineTotal&&t.lineTotal.toFixed(2)]})})]})}})]}),Object(Q.jsx)(g.default,{style:Ar.gap})]})}),Object(Q.jsx)(g.default,{style:Ar.navigateContainer,children:Object(Q.jsx)(g.default,{style:Ar.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:[Ar.button,!c&&{opacity:.2}],onPress:function(){return e.handleReprint()},disabled:!c,children:[Object(Q.jsx)(U.default,{name:"printer",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Ar.buttonText,children:S.a.get("reprint")})]})})})]})]})}}]),r}(b.Component),Ar=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",height:70},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function Vr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Mr=function(e){d()(r,e);var t=Vr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,settings:e.route.params.masters.settings,selectedTable:e.route.params.selectedTable,tableItems:e.route.params.tableItems,selectedTableItems:[],arrangedItems:e.route.params.tableItems.filter((function(e){return"N"===e.confirmFlg})),overlayProcedureMessageVisible:!1},n.handleSelectTableItem=n.handleSelectTableItem.bind(D()(n)),n.handleReset=n.handleReset.bind(D()(n)),n.handleAddLineBreak=n.handleAddLineBreak.bind(D()(n)),n.handleRemoveLineBreak=n.handleRemoveLineBreak.bind(D()(n)),n.handleResequence=n.handleResequence.bind(D()(n)),n.handleShiftTop=n.handleShiftTop.bind(D()(n)),n.handleShiftUp=n.handleShiftUp.bind(D()(n)),n.handleShiftDown=n.handleShiftDown.bind(D()(n)),n.handleShiftBottom=n.handleShiftBottom.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"handleSelectTableItem",value:function(e){console.log("menu selected",e);var t=this.state,r=(t.selectedTableItems,t.arrangedItems,t.tableItems),n=[];n.push(e);var a=[];a=r.filter((function(t){return t.refRecKey===e.recKey})),console.log("comboItems",a),a.forEach((function(e){return n.push(e)})),this.setState({selectedTableItems:n})}},{key:"handleReset",value:function(){this.setState({arrangedItems:this.state.tableItems.filter((function(e){return"N"===e.confirmFlg})),selectedTableItems:[]})}},{key:"handleAddLineBreak",value:function(){var e=this.state,t=e.arrangedItems,r=e.selectedTableItems;if(0!==r.length){var n=t,a=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));n[a].lineBreak="Y",this.setState({arrangedItems:n})}}},{key:"handleRemoveLineBreak",value:function(){var e=this.state,t=e.arrangedItems,r=e.selectedTableItems;if(0!==r.length){var n=t,a=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));n[a].lineBreak="N",this.setState({arrangedItems:n})}}},{key:"handleShiftTop",value:function(){var e,t=this,r=this.state,n=r.selectedTableItems,a=r.arrangedItems;n.forEach((function(e){a=a.filter((function(t){return t.recKey!==e.recKey}))})),(e=a).unshift.apply(e,w()(n)),this.setState({arrangedItems:a},(function(){return t.scrollViewRef.scrollToOffset({animated:!0,offset:0})}))}},{key:"handleShiftUp",value:function(){var e,t=this.state,r=t.selectedTableItems,n=t.arrangedItems,a=n,l=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));if(0!==l){r.forEach((function(e){a=a.filter((function(t){return t.recKey!==e.recKey}))}));var o=l-1;n[o].refRecKey&&(o=n.indexOf(n.find((function(e){return e.recKey===n[l-1].refRecKey})))),(e=a).splice.apply(e,[o,0].concat(w()(r))),this.setState({arrangedItems:a})}}},{key:"handleShiftDown",value:function(){var e,t=this.state,r=t.selectedTableItems,n=t.arrangedItems,a=n,l=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));if(l!==n.length-r.length){r.forEach((function(e){a=a.filter((function(t){return t.recKey!==e.recKey}))}));var o=l+1;if(a.some((function(e){return e.refRecKey===a[l].recKey}))){var s=n.filter((function(e){return e.refRecKey===a[l].recKey})).length;console.log("skip",s),o+=s}(e=a).splice.apply(e,[o,0].concat(w()(r))),this.setState({arrangedItems:a})}}},{key:"handleShiftBottom",value:function(){var e,t=this,r=this.state,n=r.selectedTableItems,a=r.arrangedItems;n.forEach((function(e){a=a.filter((function(t){return t.recKey!==e.recKey}))})),(e=a).push.apply(e,w()(n)),this.setState({arrangedItems:a},(function(){return t.scrollViewRef.scrollToEnd()}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleResequence",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,a=r.home,l=r.settings,o=r.selectedTable,s=r.tableItems,i=r.arrangedItems,c=s.filter((function(e){return"Y"===e.confirmFlg})).length;console.log("skip",c);var d=n+"api/tables/"+o.recKey+"/resequence",u=i.map((function(e,t){return{opentableItemRecKey:e.recKey,lineNo:e.lineNo,newLineNo:t+1+c,lineBreak:e.lineBreak}})),f={userId:a.userId,opentableRecKey:o.recKey,itemPayloads:u};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(r){console.log("post resequence successful",r),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Resequence Items",a.userName,r.message,o.tableId,"",""),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):t.goBack()}))}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.selectedTable,a=(r.tableItems,r.arrangedItems),l=r.selectedTableItems,o=r.overlayProcedureMessageVisible;return console.log("in resequence",l,a),Object(Q.jsxs)(g.default,{style:zr.container,children:[o&&Object(Q.jsx)(se,{text:o,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsx)(g.default,{style:zr.containerFirst,children:Object(Q.jsxs)(me.default,{style:{flex:1},alwaysBounceVertical:!1,showsVerticalScrollIndicator:!1,children:[Object(Q.jsxs)(M.default,{style:zr.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:S.a.get("back")})]}),Object(Q.jsxs)(M.default,{style:zr.button,onPress:function(){return e.handleReset()},children:[Object(Q.jsx)(U.default,{name:"reload1",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"Reset"})]}),l[0]?"Y"===l[0].lineBreak?Object(Q.jsxs)(M.default,{style:zr.button,onPress:function(){return e.handleRemoveLineBreak()},children:[Object(Q.jsx)(U.default,{name:"minus",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"Remove Break"})]}):Object(Q.jsxs)(M.default,{style:zr.button,onPress:function(){return e.handleAddLineBreak()},children:[Object(Q.jsx)(U.default,{name:"minus",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"Add Break"})]}):Object(Q.jsxs)(g.default,{style:[zr.button,{opacity:.2}],children:[Object(Q.jsx)(U.default,{name:"minus",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"Add Break"})]}),Object(Q.jsxs)(M.default,{style:zr.button,onPress:function(){return e.handleResequence()},children:[Object(Q.jsx)(U.default,{name:"bars",size:36,color:te.reserved}),Object(Q.jsx)(J.default,{style:[zr.buttonText,{color:te.reserved}],children:"Confirm"})]})]})}),Object(Q.jsxs)(g.default,{style:zr.containerSecond,children:[Object(Q.jsxs)(g.default,{style:zr.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:zr.overlayTitleText,children:[S.a.get("table")," ",n.tableId]}),Object(Q.jsx)(J.default,{style:zr.overlaySubtitleText,children:S.a.get("resequence")})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},ref:function(t){return e.scrollViewRef=t},showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;t.index;return Object(Q.jsxs)(g.default,{children:["Y"===r.lineBreak&&Object(Q.jsx)(g.default,{style:zr.lineBreakContainer,children:Object(Q.jsx)(J.default,{style:[zr.tableItemText,{color:te.paid}],children:"- Line Break -"})}),Object(Q.jsxs)(M.default,{disabled:!!r.refRecKey,style:[zr.tableItemContainer,l.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:te.occupied},r.refRecKey&&{opacity:.2}],onPress:function(){return e.handleSelectTableItem(r)},children:[Object(Q.jsx)(g.default,{style:zr.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:zr.tableItemText,children:r.orderQty})}),Object(Q.jsxs)(g.default,{style:zr.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:zr.tableItemText,children:[r.refRecKey&&"- ",r.menuName]}),r.menuMod&&Object(Q.jsx)(J.default,{style:zr.tableItemModText,children:r.menuMod})]}),Object(Q.jsx)(g.default,{style:zr.tableItemThirdContainer,children:Object(Q.jsx)(J.default,{style:zr.tableItemText})})]})]})}})]}),Object(Q.jsx)(g.default,{style:zr.containerThird,children:Object(Q.jsxs)(me.default,{style:{flex:1},alwaysBounceVertical:!1,showsVerticalScrollIndicator:!1,children:[Object(Q.jsxs)(M.default,{style:[zr.button,0!==l.length?null:{opacity:.2}],disabled:0===l.length,onPress:function(){return e.handleShiftTop()},children:[Object(Q.jsx)(U.default,{name:"arrowup",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"TOP"})]}),Object(Q.jsxs)(M.default,{style:[zr.button,0!==l.length?null:{opacity:.2}],disabled:0===l.length,onPress:function(){return e.handleShiftUp()},children:[Object(Q.jsx)(U.default,{name:"up",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"SHIFT"})]}),Object(Q.jsxs)(M.default,{style:[zr.button,0!==l.length?null:{opacity:.2}],disabled:0===l.length,onPress:function(){return e.handleShiftDown()},children:[Object(Q.jsx)(U.default,{name:"down",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"SHIFT"})]}),Object(Q.jsxs)(M.default,{style:[zr.button,0!==l.length?null:{opacity:.2}],disabled:0===l.length,onPress:function(){return e.handleShiftBottom()},children:[Object(Q.jsx)(U.default,{name:"arrowdown",size:36,color:"white"}),Object(Q.jsx)(J.default,{style:zr.buttonText,children:"BOTTOM"})]})]})})]})}}]),r}(b.Component),zr=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:te.grey3},containerThird:{flex:1,flexDirection:"row",padding:10},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:1,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{alignItems:"center",justifyContent:"center",width:50},lineBreakContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,alignItems:"center",justifyContent:"center"}});function Nr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Lr=function(e){d()(r,e);var t=Nr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,tableItems:e.route.params.tableItems,selectedTable:e.route.params.selectedTable,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,tables:[],availableTables:[],selectedTargetTable:"",selectedTableItems:[],searchText:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleSelectTargetTable=n.handleSelectTargetTable.bind(D()(n)),n.handlePressSelectAll=n.handlePressSelectAll.bind(D()(n)),n.handleSelectTableItem=n.handleSelectTableItem.bind(D()(n)),n.handleSearchText=n.handleSearchText.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.selectedTable,l=r+"api/tables",o=new URLSearchParams;o.append("shopId",n.shopId),o.append("statusFlg","C"),fetch(l+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("tables",t),e.setState({tables:t.filter((function(e){return e.tableId!==a.tableId})),availableTables:t.filter((function(e){return e.tableId!==a.tableId}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"generateTextForSelectAll",value:function(){return 0===this.state.selectedTableItems.length?"SELECT ALL":"DESELECT ALL"}},{key:"handlePressSelectAll",value:function(){var e=this.state,t=e.selectedTableItems,r=e.tableItems;0===t.length?this.setState({selectedTableItems:r}):this.setState({selectedTableItems:[]})}},{key:"handleSelectTargetTable",value:function(e){this.setState({selectedTargetTable:e})}},{key:"handleSelectTableItem",value:function(e){console.log("tableitem selected",e);var t=this.state,r=t.selectedTableItems,n=t.tableItems,a=r;if(r.some((function(t){return t.recKey===e.recKey})))a=a.filter((function(t){return t.recKey!==e.recKey&&t.refRecKey!==e.recKey}));else{a.push(e);var l=[];l=n.filter((function(t){return t.refRecKey===e.recKey})),console.log("comboItems",l),l.forEach((function(e){return a.push(e)}))}this.setState({selectedTableItems:a})}},{key:"handleSubmit",value:function(e){var t=this,r=this.props.navigation,n=this.state,a=n.selectedTable,l=n.selectedTableItems,o=n.selectedTargetTable,s=n.home,i=n.serviceEntry,c=n.privileges,d=n.settings;if(0!==l.length&&o)if("Y"===s.adminFlg||c.some((function(e){return"TRANSFERITEMS"===e.priId}))||e){var u=l.filter((function(e){return!e.refRecKey})).map((function(e){return e.recKey})).reduce((function(e,t){return e+t+","}),"");console.log("converted",u);var f=i+"api/tables/"+a.recKey+"/transfer-items",h={userId:s.userId,opentableRecKeyFrom:a.recKey,opentableRecKeyTo:o.recKey,opentableItemRecKeys:u,superUserId:e};fetch(f,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(h)}).then((function(e){return e.json()})).then((function(e){console.log("post transfer-items successful",e),"Y"===d.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(i,"Transfer Items",s.userName,e.message,a.tableId,"",o.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.goBack()}))}else this.setState({overlayRequestAccessVisible:!0})}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,t.searchText,[]);this.setState({searchText:e});var a=e.toUpperCase();console.log("caseText",a),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(a)||e.sectionId.toUpperCase().includes(a)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.settings,o=r.selectedTable;r.selectedTargetTable;if(e){var s=a+"api/super-user",i={locId:n.locId,accessCode:e,priId:"TRANSFERITEMS"};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access TRANSFERITEMS",n.userName,e.message,o.tableId,"",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSubmit(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.tableItems,a=r.home,l=r.selectedTargetTable,o=r.availableTables,s=r.searchText,i=r.selectedTableItems,c=r.overlayRequestAccessVisible,d=r.overlayProcedureMessageVisible;return console.log("in transfer"),Object(Q.jsxs)(g.default,{style:Kr.container,children:[c&&Object(Q.jsx)(Ge,{home:a,requestedPrivilege:"TRANSFERITEM",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),d&&Object(Q.jsx)(se,{text:d,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsxs)(g.default,{style:Kr.leftContainer,children:[Object(Q.jsx)(g.default,{style:Kr.navigateContainer,children:Object(Q.jsx)(g.default,{style:Kr.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:Kr.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Kr.buttonText,children:S.a.get("back")})]})})}),Object(Q.jsx)(g.default,{style:Kr.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Kr.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:Kr.gap}),Object(Q.jsxs)(g.default,{style:Kr.gridContainer,children:[Object(Q.jsx)(g.default,{style:[Kr.searchBox,{backgroundColor:te.grey3,alignItems:"center",justifyContent:"center"}],children:Object(Q.jsx)(M.default,{onPress:function(){return e.handlePressSelectAll()},children:Object(Q.jsx)(J.default,{style:Kr.titleText,children:this.generateTextForSelectAll()})})}),Object(Q.jsxs)(g.default,{style:Kr.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Kr.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Kr.titleText,children:"Qty"})}),Object(Q.jsx)(g.default,{style:Kr.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:Kr.titleText,children:"Desc"})}),Object(Q.jsx)(g.default,{style:Kr.titleThirdContainer,children:Object(Q.jsx)(J.default,{style:Kr.titleText,children:"Price"})}),Object(Q.jsx)(g.default,{style:Kr.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Kr.titleText,children:"Total"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[Kr.tableItemContainer,i.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:te.occupied},r.refRecKey&&{opacity:.2}],onPress:function(){return e.handleSelectTableItem(r)},disabled:!!r.refRecKey,children:[Object(Q.jsx)(g.default,{style:Kr.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Kr.tableItemText,children:r.orderQty})}),Object(Q.jsxs)(g.default,{style:Kr.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:Kr.tableItemText,children:[r.refRecKey?"- ":null,r.menuName]}),r.menuMod?Object(Q.jsx)(J.default,{style:Kr.tableItemModText,children:r.menuMod}):null]}),Object(Q.jsx)(g.default,{style:Kr.tableItemThirdContainer,children:Object(Q.jsx)(J.default,{style:Kr.tableItemText,children:r.netPrice&&r.netPrice.toFixed(2)})}),Object(Q.jsx)(g.default,{style:Kr.tableItemFourthContainer,children:Object(Q.jsx)(J.default,{style:Kr.tableItemText,children:r.lineTotal&&r.lineTotal.toFixed(2)})})]})}})]}),Object(Q.jsx)(g.default,{style:Kr.gap})]})})]}),Object(Q.jsxs)(g.default,{style:Kr.rightContainer,children:[Object(Q.jsx)(g.default,{style:Kr.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Kr.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsx)(g.default,{style:Kr.gap}),Object(Q.jsxs)(g.default,{style:Kr.gridContainer,children:[Object(Q.jsxs)(g.default,{style:Kr.searchBox,children:[Object(Q.jsx)(N.default,{style:Kr.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:s,onChangeText:function(t){return e.handleSearchText(t)}}),Object(Q.jsx)(M.default,{style:Kr.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsx)(g.default,{style:[Kr.searchBoxInfo,{justifyContent:"center"}],children:Object(Q.jsxs)(J.default,{style:Kr.searchBoxInfoText,children:[o.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[Kr.grid,l.tableId===r.tableId&&{backgroundColor:te.occupied}],onPress:function(){return e.handleSelectTargetTable(r)},children:[Object(Q.jsxs)(g.default,{style:Kr.gridFirst,children:[Object(Q.jsx)(g.default,{style:Kr.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:Kr.gridFirstLeftText,children:r.sectionId})}),Object(Q.jsx)(g.default,{style:Kr.gridFirstRight,children:Object(Q.jsx)(J.default,{style:[Kr.gridFirstRightText,l.tableId===r.tableId?{color:"white"}:{color:te.occupied}],children:"OCCUPIED"})})]}),Object(Q.jsx)(g.default,{style:Kr.gridSecond,children:Object(Q.jsx)(J.default,{style:Kr.gridSecondText,children:r.tableId})}),Object(Q.jsxs)(g.default,{style:Kr.gridThird,children:[Object(Q.jsx)(g.default,{style:Kr.gridThirdLeft}),Object(Q.jsx)(g.default,{style:Kr.gridThirdRight})]})]})}})]}),Object(Q.jsx)(g.default,{style:Kr.gap})]})}),Object(Q.jsx)(g.default,{style:Kr.navigateContainer,children:Object(Q.jsx)(g.default,{style:Kr.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:[Kr.button,(!l||0===i.length)&&{opacity:.2}],onPress:function(){return e.handleSubmit()},disabled:!l||0===i.length,children:[Object(Q.jsx)(U.default,{name:"export",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Kr.buttonText,children:S.a.get("transfer")})]})})})]})]})}}]),r}(b.Component),Kr=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:te.reserved,fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5}});function Gr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Hr=function(e){d()(r,e);var t=Gr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={overlaySearchText:"",returns:e.returns,availableReturns:e.returns,selectedReturn:"",remarks:""},n.handleOverlaySearchText=n.handleOverlaySearchText.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.returns,n=(t.availableReturns,[]);this.setState({overlaySearchText:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",this.state.availableReturns),n=r,e?(n=n.filter((function(e){return e.returnId.toUpperCase().includes(a)||e.name.toUpperCase().includes(a)})),this.setState({availableReturns:n})):this.setState({availableReturns:n})}},{key:"handleSubmit",value:function(e){var t=this.state.remarks,r=e;r.remarks=t,this.props.handleUpdateFromVoidReceipt(r)}},{key:"render",value:function(){var e=this,t=this.state,r=t.overlaySearchText,n=t.availableReturns,a=t.remarks;return console.log("in overlayvoidreceipt, state",this.state),Object(Q.jsx)(g.default,{style:Yr.overlay,children:Object(Q.jsxs)(g.default,{style:Yr.overlayContent,children:[Object(Q.jsxs)(g.default,{style:Yr.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Yr.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:Yr.overlaySubtitleText,children:"Void Receipt"})]}),Object(Q.jsx)(g.default,{style:[Yr.searchBoxWrapper,{marginBottom:10}],children:Object(Q.jsx)(g.default,{style:Yr.overlaySearchBox,children:Object(Q.jsx)(N.default,{style:Yr.overlaySearchBoxInput,placeholder:"ENTER REMARKS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({remarks:t})},value:a})})}),Object(Q.jsxs)(g.default,{style:Yr.searchBoxWrapper,children:[Object(Q.jsx)(M.default,{style:Yr.overlayBackButton,onPress:function(){return e.props.handleUpdateFromVoidReceipt("")},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})}),Object(Q.jsxs)(g.default,{style:Yr.overlaySearchBox,children:[Object(Q.jsx)(N.default,{style:Yr.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:r}),Object(Q.jsx)(M.default,{style:Yr.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})]}),Object(Q.jsx)(g.default,{style:Yr.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:Yr.searchBoxInfoText,children:[n.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[Yr.overlayGrid,r.dummy?Yr.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[Object(Q.jsxs)(g.default,{style:Yr.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:Yr.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:Yr.overlayGridFirstLeftText,children:r.returnId})}),Object(Q.jsx)(g.default,{style:Yr.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:Yr.overlayGridFirstRightText})})]}),Object(Q.jsx)(g.default,{style:Yr.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:Yr.overlayGridSecondText,children:r.name})}),Object(Q.jsxs)(g.default,{style:Yr.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:Yr.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:Yr.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:Yr.overlayGridThirdRightText})})]})]})}})]})})}}]),r}(b.Component),Yr=m.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5}});function Wr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var qr=function(e){d()(r,e);var t=Wr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,settings:e.route.params.masters.settings,masters:[],availableMasters:[],searches:[],selectedMaster:"",details:[],headers:[],searchText:"",selectedDateString:le()(new Date).format("YYYY-MM-DD"),overlayVoidReceiptVisible:!1,overlayEnterDateVisible:!1,overlayChoosePrinterVisible:!1,overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1,loading:!1,mode:"VOID",reopenResponse:""},n.handleSelectMaster=n.handleSelectMaster.bind(D()(n)),n.handleVoid=n.handleVoid.bind(D()(n)),n.handlePressVoid=n.handlePressVoid.bind(D()(n)),n.handlePressReopen=n.handlePressReopen.bind(D()(n)),n.handleSearchText=n.handleSearchText.bind(D()(n)),n.handlePressDate=n.handlePressDate.bind(D()(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind(D()(n)),n.handleUpdateFromVoidReceipt=n.handleUpdateFromVoidReceipt.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.selectedDateString,l=r+"api/receipts",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("docDateString",a),fetch(l+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("receipts",t),e.setState({masters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:t.receiptpaydtl})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleSelectMaster",value:function(e){var t=this,r=this.state.serviceEntry;this.setState({selectedMaster:e});var n=r+"api/receipts/"+e.recKey+"/bundle";console.log("item",e),fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("details",e),t.setState({details:e.receiptitems,pays:e.receiptpays,headers:e.receiptmas})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.masters,n=(t.availableMasters,t.searchText,t.searches),a=[];this.setState({searchText:e});var l=e.toUpperCase();console.log("caseText",l),a=r,e?(a=a.filter((function(e){var t=n.filter((function(e){return e.payMoney===Number(l)})),r=n.filter((function(e){return e.pmId.toUpperCase().includes(l)}));return e.docId.toUpperCase().includes(l)||e.tableId.toUpperCase().includes(l)||t.some((function(t){return t.docId===e.docId}))||r.some((function(t){return t.docId===e.docId}))})),this.setState({availableMasters:a})):this.setState({availableMasters:a})}},{key:"handlePressDate",value:function(){this.setState({overlayEnterDateVisible:!0})}},{key:"handleUpdateFromEnterDate",value:function(e){var t=this;if(this.setState({overlayEnterDateVisible:!1,selectedMaster:"",headers:"",details:"",pays:""}),e){var r=this.state,n=r.serviceEntry,a=r.home,l=le()(e).format("YYYY-MM-DD"),o=n+"api/receipts",s=new URLSearchParams;s.append("orgId",a.orgId),s.append("shopId",a.shopId),s.append("docDateString",l),fetch(o+="?"+s,{method:"GET"}).then((function(e){return e.json()})).then((function(r){console.log("receipts",r),r.message?console.log(r.message):t.setState({masters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:r.receiptpaydtl,selectedDateString:le()(e).format("YYYY-MM-DD")})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state.selectedReturn;this.setState({overlayChoosePrinterVisible:!1,selectedPrinter:e}),e&&this.handleVoid(r,e)}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.settings,o=r.requestedPrivilege,s=r.selectedPrinter,i=r.selectedReturn;if(e){var c=a+"api/super-user",d={locId:n.locId,accessCode:e,priId:o};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access "+o,n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleVoid(i,s,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.props.navigation;this.state.reopenResponse;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"handleReopen"===e&&t.goBack()}},{key:"handleUpdateFromVoidReceipt",value:function(e){this.setState({overlayVoidReceiptVisible:!1}),e&&(this.setState({selectedReturn:e}),this.handleVoid(e))}},{key:"handlePressReopen",value:function(){this.setState({mode:"REOPEN"}),this.handleVoid()}},{key:"handlePressVoid",value:function(){this.setState({mode:"VOID"}),this.handleVoid()}},{key:"handleVoid",value:function(e,t,r){var n=this,a=this.state,l=a.serviceEntry,o=a.home,s=a.settings,i=a.selectedMaster,c=a.selectedDateString,d=a.mode;if(i)if(e)if(this.props.route.params.masters.cashierPrinters.length>1&&!t&&!o.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else if(r){this.setState({loading:!0});var u="",f="";"REOPEN"===d?(u=l+"api/void-receipt-reopen",f={userId:o.userId,receiptRecKey:i.recKey,returnId:e.returnId,superUserId:r,iomodelId:o.defaultPrinter&&o.defaultPrinter.iomodelId||t&&t.iomodelId,docDateString:c,remarks:e.remarks},console.log("body",f)):(u=l+"api/void-receipt",f={userId:o.userId,receiptRecKey:i.recKey,returnId:e.returnId,superUserId:r,iomodelId:o.defaultPrinter&&o.defaultPrinter.iomodelId||t&&t.iomodelId,docDateString:c,remarks:e.remarks},console.log("body",f)),fetch(u,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){console.log("post void-receipt successful",e),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"REOPEN"===d?"Reopen Receipt":"Void Receipt",o.userName,e.message,"REOPEN"!==d||e.message?"":e.opentable.tableId,"",i.recKey+","+i.tableId),e.message?n.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):"REOPEN"===d?(n.props.route.params.handleUpdateFromVoid(e),n.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Procedure Reply",text:"Receipt voided successfully, reopened Table "+e.opentable.tableId,ok:!1,cancel:!1,options:[{text:"Ok",handleText:"handleReopen"}]},overlayAlertVisible:!0,reopenResponse:e,loading:!1})):n.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Procedure Reply",text:"Receipt voided successfully",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0,masters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:e.receiptpaydtl,selectedMaster:"",headers:"",details:"",pays:"",loading:!1})})).catch((function(e){console.log(e),n.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"VOIDRECEIPT"});else this.setState({overlayVoidReceiptVisible:!0})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,a=(r.masters,r.availableMasters),l=r.details,o=r.pays,s=r.headers,i=r.searchText,c=r.selectedMaster,d=r.selectedDateString,u=r.overlayEnterDateVisible,f=r.overlayChoosePrinterVisible,h=r.overlayRequestAccessVisible,y=r.overlayProcedureMessageVisible,b=r.overlayVoidReceiptVisible,p=r.overlayAlertVisible,m=r.overlayAlertInputValue,j=r.requestedPrivilege,x=r.loading;return console.log("in reprint"),Object(Q.jsxs)(g.default,{style:Jr.container,children:[p&&Object(Q.jsx)(St,{input:m,handleUpdateFromAlert:this.handleUpdateFromAlert}),b&&Object(Q.jsx)(Hr,{returns:this.props.route.params.masters.returns,handleUpdateFromVoidReceipt:this.handleUpdateFromVoidReceipt}),f&&Object(Q.jsx)(vt,{printPurpose:"VOID RECEIPT",cashierPrinters:this.props.route.params.masters.cashierPrinters,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),u&&Object(Q.jsx)(Rr,{dateString:d,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),y&&Object(Q.jsx)(se,{text:y,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),h&&Object(Q.jsx)(Ge,{home:n,requestedPrivilege:j,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),Object(Q.jsxs)(g.default,{style:Jr.leftContainer,children:[Object(Q.jsx)(g.default,{style:Jr.navigateContainer,children:Object(Q.jsx)(g.default,{style:Jr.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:Jr.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Jr.buttonText,children:S.a.get("back")})]})})}),Object(Q.jsx)(g.default,{style:Jr.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Jr.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:Jr.gap}),Object(Q.jsxs)(g.default,{style:Jr.gridContainer,children:[Object(Q.jsxs)(g.default,{style:Jr.searchBox,children:[Object(Q.jsx)(N.default,{style:Jr.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:i,onChangeText:function(t){return e.handleSearchText(t)}}),Object(Q.jsx)(M.default,{style:Jr.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsxs)(M.default,{style:Jr.searchBoxInfo,onPress:function(){return e.handlePressDate()},children:[Object(Q.jsx)(g.default,{style:Jr.searchBoxInfoLeft,children:Object(Q.jsx)(J.default,{style:Jr.searchBoxInfoText,children:d})}),Object(Q.jsx)(g.default,{style:Jr.searchBoxInfoRight,children:Object(Q.jsxs)(J.default,{style:Jr.searchBoxInfoText,children:[a.length," DOCS"]})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[Jr.grid,c.recKey===r.recKey&&{backgroundColor:te.occupied}],onPress:function(){return e.handleSelectMaster(r)},children:[Object(Q.jsxs)(g.default,{style:Jr.gridFirst,children:[Object(Q.jsx)(g.default,{style:Jr.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:Jr.gridFirstLeftText,children:r.tableId})}),Object(Q.jsx)(g.default,{style:Jr.gridFirstRight,children:Object(Q.jsx)(J.default,{style:Jr.gridFirstRightText,children:r.createUserId})})]}),Object(Q.jsx)(g.default,{style:Jr.gridSecond,children:Object(Q.jsx)(J.default,{style:Jr.gridSecondText,children:r.docId})}),Object(Q.jsxs)(g.default,{style:Jr.gridThird,children:[Object(Q.jsx)(g.default,{style:Jr.gridThirdLeft}),Object(Q.jsx)(g.default,{style:Jr.gridThirdRight,children:Object(Q.jsx)(J.default,{style:Jr.gridThirdRightText,children:le()(r.createDate).format("HH:mm")})})]})]})}})]}),Object(Q.jsx)(g.default,{style:Jr.gap})]})})]}),Object(Q.jsxs)(g.default,{style:Jr.rightContainer,children:[Object(Q.jsx)(g.default,{style:Jr.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Jr.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsxs)(g.default,{style:Jr.overlayHeader,children:[Object(Q.jsx)(J.default,{style:Jr.overlayTitleText,children:c?c.tableId:" "}),Object(Q.jsx)(J.default,{style:Jr.overlaySubtitleText,children:c?c.docId:" "})]}),Object(Q.jsx)(g.default,{style:Jr.gap}),Object(Q.jsxs)(g.default,{style:[Jr.gridContainer,{flex:3}],children:[Object(Q.jsxs)(g.default,{style:Jr.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Jr.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"Qty"})}),Object(Q.jsx)(g.default,{style:Jr.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"Desc"})}),Object(Q.jsx)(g.default,{style:Jr.titleThirdContainer,children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"Price"})}),Object(Q.jsx)(g.default,{style:Jr.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"Total"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return Object(Q.jsxs)(M.default,{style:[Jr.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:Jr.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Jr.tableItemText,children:t.orderQty})}),Object(Q.jsxs)(M.default,{style:Jr.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:Jr.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?Object(Q.jsx)(J.default,{style:Jr.tableItemModText,children:t.menuMod}):null]}),Object(Q.jsx)(g.default,{style:Jr.tableItemThirdContainer,children:Object(Q.jsxs)(J.default,{style:Jr.tableItemText,children:["$",t.netPrice&&t.netPrice.toFixed(2)]})}),Object(Q.jsx)(g.default,{style:Jr.tableItemFourthContainer,children:Object(Q.jsxs)(J.default,{style:Jr.tableItemText,children:["$",t.lineTotal&&t.lineTotal.toFixed(2)]})})]})}})]}),Object(Q.jsx)(g.default,{style:Jr.gap}),Object(Q.jsxs)(g.default,{style:Jr.gridContainer,children:[Object(Q.jsxs)(g.default,{style:Jr.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Jr.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"No."})}),Object(Q.jsx)(g.default,{style:[Jr.titleSecondContainer,{flex:10}],children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"PM ID"})}),Object(Q.jsx)(g.default,{style:Jr.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"Amount"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item,r=e.index;return Object(Q.jsxs)(M.default,{style:[Jr.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:Jr.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:Jr.tableItemText,children:r+1})}),Object(Q.jsxs)(M.default,{style:[Jr.tableItemSecondContainer,{flex:10}],children:[Object(Q.jsx)(J.default,{style:Jr.tableItemText,children:t.pmId}),t.payRef&&Object(Q.jsx)(J.default,{style:[Jr.tableItemText,{color:te.reserved}],children:t.payRef})]}),Object(Q.jsx)(g.default,{style:Jr.tableItemFourthContainer,children:Object(Q.jsx)(J.default,{style:Jr.tableItemText,children:t.payMoney&&"$"+t.payMoney.toFixed(2)})})]})}})]}),Object(Q.jsx)(g.default,{style:Jr.gap}),Object(Q.jsx)(g.default,{style:[Jr.gridContainer,{flex:2,backgroundColor:"none"}],children:Object(Q.jsxs)(g.default,{style:{flex:1,width:"100%"},children:[Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"SUBTOTAL"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:s.beforeDisc&&s.beforeDisc.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"DISCOUNT"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:s.totalDisc&&s.totalDisc.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:"SVC CHARGE"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:Jr.titleText,children:s.serviceCharge&&s.serviceCharge.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:[Jr.titleText,{color:"white"}],children:"TOTAL"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:[Jr.titleText,{color:"white"}],children:s.grandTotal&&s.grandTotal.toFixed(2)})})]})]})}),Object(Q.jsx)(g.default,{style:Jr.gap})]})}),Object(Q.jsx)(g.default,{style:Jr.navigateContainer,children:Object(Q.jsxs)(g.default,{style:Jr.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:[Jr.button,(!c||x)&&{opacity:.2}],onPress:function(){return e.handlePressVoid()},disabled:!c||x,children:[Object(Q.jsx)(U.default,{name:"exception1",color:te.paid,size:36}),Object(Q.jsx)(J.default,{style:[Jr.buttonText,{color:te.paid}],children:S.a.get("void")})]}),Object(Q.jsxs)(M.default,{style:[Jr.button,(!c||x)&&{opacity:.2}],onPress:function(){return e.handlePressReopen()},disabled:!c||x,children:[Object(Q.jsx)(U.default,{name:"exception1",color:te.reserved,size:36}),Object(Q.jsx)(J.default,{style:[Jr.buttonText,{color:te.reserved}],children:S.a.get("reopen")})]})]})})]})]})}}]),r}(b.Component),Jr=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginTop:10,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function Qr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Xr=function(e){d()(r,e);var t=Qr(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,settings:e.route.params.masters.settings,masters:[],availableMasters:[],searches:[],selectedMaster:"",details:[],headers:[],searchText:"",selectedDateString:le()(new Date).format("YYYY-MM-DD"),overlayEnterDateVisible:!1,overlayChoosePrinterVisible:!1,overlayProcedureMessageVisible:!1,loading:!1,reopenResponse:""},n.handleSelectMaster=n.handleSelectMaster.bind(D()(n)),n.handleSearchText=n.handleSearchText.bind(D()(n)),n.handlePressDate=n.handlePressDate.bind(D()(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind(D()(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.selectedDateString,l=r+"api/deposit-receipts",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("docDateString",a),fetch(l+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("receipts",t),e.setState({masters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:t.receiptpaydtl})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleSelectMaster",value:function(e){var t=this,r=this.state.serviceEntry;this.setState({selectedMaster:e});var n=r+"api/receipts/"+e.recKey+"/bundle";fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({details:e.receiptitems,pays:e.receiptpays,headers:e.receiptmas})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.masters,n=(t.availableMasters,t.searchText,t.searches),a=[];this.setState({searchText:e});var l=e.toUpperCase();console.log("caseText",l),a=r,e?(a=a.filter((function(e){var t=n.filter((function(e){return e.payMoney===Number(l)})),r=n.filter((function(e){return e.pmId.toUpperCase().includes(l)}));return e.docId.toUpperCase().includes(l)||e.tableId.toUpperCase().includes(l)||t.some((function(t){return t.docId===e.docId}))||r.some((function(t){return t.docId===e.docId}))})),this.setState({availableMasters:a})):this.setState({availableMasters:a})}},{key:"handlePressDate",value:function(){this.setState({overlayEnterDateVisible:!0})}},{key:"handleUpdateFromEnterDate",value:function(e){var t=this;if(this.setState({overlayEnterDateVisible:!1,selectedMaster:"",headers:"",details:"",pays:""}),e){var r=this.state,n=r.serviceEntry,a=r.home,l=le()(e).format("YYYY-MM-DD"),o=n+"api/deposit-receipts",s=new URLSearchParams;s.append("orgId",a.orgId),s.append("shopId",a.shopId),s.append("docDateString",l),fetch(o+="?"+s,{method:"GET"}).then((function(e){return e.json()})).then((function(r){console.log("receipts",r),r.message?console.log(r.message):t.setState({masters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:r.receiptpaydtl,selectedDateString:le()(e).format("YYYY-MM-DD")})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state.selectedReturn;this.setState({overlayChoosePrinterVisible:!1,selectedPrinter:e}),e&&this.handleVoid(r,e)}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.props.navigation,this.state.reopenResponse;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"handlePressCollect",value:function(e){var t=this,r=this.state,n=r.serviceEntry,a=r.home,l=r.settings,o=r.selectedMaster,s=r.selectedDateString;if(o)if(this.props.route.params.masters.cashierPrinters.length>1&&!e&&!a.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{this.setState({loading:!0});var i,c;i=n+"api/collection-receipt",c={userId:a.userId,receiptRecKey:o.recKey,iomodelId:a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId,docDateString:s},console.log("body",c),fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post collect-receipt successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Collect Receipt",a.userName,e.message,"","",o.recKey),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):t.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Procedure Reply",text:"Receipt collected successfully",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0,masters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:e.receiptpaydtl,selectedMaster:"",headers:"",details:"",pays:"",loading:!1})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=(r.home,r.masters,r.availableMasters),a=r.details,l=r.pays,o=r.headers,s=r.searchText,i=r.selectedMaster,c=r.selectedDateString,d=r.overlayEnterDateVisible,u=r.overlayChoosePrinterVisible,f=r.overlayProcedureMessageVisible,h=r.overlayAlertVisible,y=r.overlayAlertInputValue,b=r.loading;return console.log("in reprint"),Object(Q.jsxs)(g.default,{style:$r.container,children:[h&&Object(Q.jsx)(St,{input:y,handleUpdateFromAlert:this.handleUpdateFromAlert}),u&&Object(Q.jsx)(vt,{printPurpose:"VOID RECEIPT",cashierPrinters:this.props.route.params.masters.cashierPrinters,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),d&&Object(Q.jsx)(Rr,{dateString:c,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),f&&Object(Q.jsx)(se,{text:f,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsxs)(g.default,{style:$r.leftContainer,children:[Object(Q.jsx)(g.default,{style:$r.navigateContainer,children:Object(Q.jsx)(g.default,{style:$r.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:$r.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:$r.buttonText,children:S.a.get("back")})]})})}),Object(Q.jsx)(g.default,{style:$r.displayContainer,children:Object(Q.jsxs)(g.default,{style:[$r.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:$r.gap}),Object(Q.jsxs)(g.default,{style:$r.gridContainer,children:[Object(Q.jsxs)(g.default,{style:$r.searchBox,children:[Object(Q.jsx)(N.default,{style:$r.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:s,onChangeText:function(t){return e.handleSearchText(t)}}),Object(Q.jsx)(M.default,{style:$r.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsxs)(M.default,{style:$r.searchBoxInfo,onPress:function(){return e.handlePressDate()},children:[Object(Q.jsx)(g.default,{style:$r.searchBoxInfoLeft,children:Object(Q.jsx)(J.default,{style:$r.searchBoxInfoText,children:c})}),Object(Q.jsx)(g.default,{style:$r.searchBoxInfoRight,children:Object(Q.jsxs)(J.default,{style:$r.searchBoxInfoText,children:[n.length," DOCS"]})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[$r.grid,i.recKey===r.recKey&&{backgroundColor:te.occupied}],onPress:function(){return e.handleSelectMaster(r)},children:[Object(Q.jsxs)(g.default,{style:$r.gridFirst,children:[Object(Q.jsx)(g.default,{style:$r.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:$r.gridFirstLeftText,children:r.tableId})}),Object(Q.jsx)(g.default,{style:$r.gridFirstRight,children:Object(Q.jsx)(J.default,{style:$r.gridFirstRightText,children:r.createUserId})})]}),Object(Q.jsx)(g.default,{style:$r.gridSecond,children:Object(Q.jsx)(J.default,{style:$r.gridSecondText,children:r.docId})}),Object(Q.jsxs)(g.default,{style:$r.gridThird,children:[Object(Q.jsx)(g.default,{style:$r.gridThirdLeft}),Object(Q.jsx)(g.default,{style:$r.gridThirdRight,children:Object(Q.jsx)(J.default,{style:$r.gridThirdRightText,children:le()(r.createDate).format("HH:mm")})})]})]})}})]}),Object(Q.jsx)(g.default,{style:$r.gap})]})})]}),Object(Q.jsxs)(g.default,{style:$r.rightContainer,children:[Object(Q.jsx)(g.default,{style:$r.displayContainer,children:Object(Q.jsxs)(g.default,{style:[$r.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsxs)(g.default,{style:$r.overlayHeader,children:[Object(Q.jsx)(J.default,{style:$r.overlayTitleText,children:i?i.tableId:" "}),Object(Q.jsx)(J.default,{style:$r.overlaySubtitleText,children:i?i.docId:" "})]}),Object(Q.jsx)(g.default,{style:$r.gap}),Object(Q.jsxs)(g.default,{style:[$r.gridContainer,{flex:3}],children:[Object(Q.jsxs)(g.default,{style:$r.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:$r.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"Qty"})}),Object(Q.jsx)(g.default,{style:$r.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"Desc"})}),Object(Q.jsx)(g.default,{style:$r.titleThirdContainer,children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"Price"})}),Object(Q.jsx)(g.default,{style:$r.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"Total"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return Object(Q.jsxs)(M.default,{style:[$r.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:$r.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:$r.tableItemText,children:t.orderQty})}),Object(Q.jsxs)(M.default,{style:$r.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:$r.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?Object(Q.jsx)(J.default,{style:$r.tableItemModText,children:t.menuMod}):null]}),Object(Q.jsx)(g.default,{style:$r.tableItemThirdContainer,children:Object(Q.jsxs)(J.default,{style:$r.tableItemText,children:["$",t.netPrice&&t.netPrice.toFixed(2)]})}),Object(Q.jsx)(g.default,{style:$r.tableItemFourthContainer,children:Object(Q.jsxs)(J.default,{style:$r.tableItemText,children:["$",t.lineTotal&&t.lineTotal.toFixed(2)]})})]})}})]}),Object(Q.jsx)(g.default,{style:$r.gap}),Object(Q.jsxs)(g.default,{style:$r.gridContainer,children:[Object(Q.jsxs)(g.default,{style:$r.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:$r.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"No."})}),Object(Q.jsx)(g.default,{style:[$r.titleSecondContainer,{flex:10}],children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"PM ID"})}),Object(Q.jsx)(g.default,{style:$r.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"Amount"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item,r=e.index;return Object(Q.jsxs)(M.default,{style:[$r.tableItemContainer],children:[Object(Q.jsx)(g.default,{style:$r.tableItemFirstContainer,children:Object(Q.jsx)(J.default,{style:$r.tableItemText,children:r+1})}),Object(Q.jsxs)(M.default,{style:[$r.tableItemSecondContainer,{flex:10}],children:[Object(Q.jsx)(J.default,{style:$r.tableItemText,children:t.pmId}),t.payRef&&Object(Q.jsx)(J.default,{style:[$r.tableItemText,{color:te.reserved}],children:t.payRef})]}),Object(Q.jsx)(g.default,{style:$r.tableItemFourthContainer,children:Object(Q.jsx)(J.default,{style:$r.tableItemText,children:t.payMoney&&"$"+t.payMoney.toFixed(2)})})]})}})]}),Object(Q.jsx)(g.default,{style:$r.gap}),Object(Q.jsx)(g.default,{style:[$r.gridContainer,{flex:2,backgroundColor:"none"}],children:Object(Q.jsxs)(g.default,{style:{flex:1,width:"100%"},children:[Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"SUBTOTAL"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:$r.titleText,children:o.beforeDisc&&o.beforeDisc.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"DISCOUNT"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:$r.titleText,children:o.totalDisc&&o.totalDisc.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:$r.titleText,children:"SVC CHARGE"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:$r.titleText,children:o.serviceCharge&&o.serviceCharge.toFixed(2)})})]}),Object(Q.jsxs)(g.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:[$r.titleText,{color:"white"}],children:"TOTAL"})}),Object(Q.jsx)(g.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:Object(Q.jsx)(J.default,{style:[$r.titleText,{color:"white"}],children:o.grandTotal&&o.grandTotal.toFixed(2)})})]})]})}),Object(Q.jsx)(g.default,{style:$r.gap})]})}),Object(Q.jsx)(g.default,{style:$r.navigateContainer,children:Object(Q.jsx)(g.default,{style:$r.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:[$r.button,(!i||b)&&{opacity:.2}],disabled:!i||b,onPress:function(){return e.handlePressCollect()},children:[Object(Q.jsx)(U.default,{name:"gift",color:te.reserved,size:36}),Object(Q.jsx)(J.default,{style:[$r.buttonText,{color:te.reserved}],children:S.a.get("collect")})]})})})]})]})}}]),r}(b.Component),$r=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginTop:10,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function Zr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var _r=function(e){d()(r,e);var t=Zr(r);function r(e){var n,a,l;return o()(this,r),(l=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,selectedTable:e.route.params.selectedTable,mode:e.route.params.mode,masters:e.route.params.masters,settings:e.route.params.masters.settings,vipSources:e.route.params.masters.vipSources,availableVipSources:e.route.params.masters.vipSources,overlayPax:"NEW"===e.route.params.mode?(null==(n=e.route.params.masters.tablemas)||null==(a=n.find((function(t){return t.tableId===e.route.params.selectedTable.tableId})))?void 0:a.capacity)||2:e.route.params.selectedTable.pax||0,overlayVip:"NEW"===e.route.params.mode?null:{vipId:e.route.params.selectedTable.vipId||"",vipName:e.route.params.selectedTable.vipName||"",vipDisc:e.route.params.selectedTable.vipDisc||"",vipPhone:e.route.params.selectedTable.vipPhone||"",cumPts:e.route.params.selectedTable.cumPts||"",vipPtsMoney:e.route.params.selectedTable.vipPtsMoney||"",classId:e.route.params.selectedTable.classId||""},overlayValidateVipId:"",overlayValidateCardNumber:"",overlayValidateNric:"",overlayValidateVipName:"",overlayValidateVipPhone:"",overlayValidateVipPhoneCountryCode:"",overlayValidateEmailAddress:"",vipResults:"",selectedVipResult:"",overlaySource:"NEW"===e.route.params.mode?"":{sourceId:e.route.params.selectedTable.sourceId||""},overlaySourceSearch:"",overlayDeliveryFlg:"NEW"===e.route.params.mode?"N":e.route.params.selectedTable.homeDelivery||"",overlayPostalCode:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.dpostalcode||"",overlayAddr1:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress1||"",overlayAddr2:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress2||"",overlayAddr3:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress3||"",overlayAddr4:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress4||"",activePage:"PAX",warning:""},l.handleQtyChange=l.handleQtyChange.bind(D()(l)),l.handlePressTab=l.handlePressTab.bind(D()(l)),l.handleSearchVip=l.handleSearchVip.bind(D()(l)),l.handleEnterVip=l.handleEnterVip.bind(D()(l)),l.handleClearVip=l.handleClearVip.bind(D()(l)),l.handlePressNext=l.handlePressNext.bind(D()(l)),l.handlePressPrev=l.handlePressPrev.bind(D()(l)),l.handleOverlaySearchText=l.handleOverlaySearchText.bind(D()(l)),l.handleAddressChange=l.handleAddressChange.bind(D()(l)),l.handleCheckDeliveryFlg=l.handleCheckDeliveryFlg.bind(D()(l)),l.handleSubmit=l.handleSubmit.bind(D()(l)),l.handleUpdateFromProcedureMessage=l.handleUpdateFromProcedureMessage.bind(D()(l)),l}return i()(r,[{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.mode,a=r.home,l=r.serviceEntry,o=r.selectedTable,s=r.settings,i=r.overlayPax,c=r.overlayVip,d=r.overlaySource,u=r.overlayValidateVipName,f=r.overlayDeliveryFlg,h=r.overlayPostalCode,y=r.overlayAddr1,b=r.overlayAddr2,p=r.overlayAddr3,m=r.overlayAddr4;if(i||0===i){var g=l+"api/tables/"+o.recKey+("NEW"===n?"/change-table-status":"/update-table-info"),j={userId:a.userId,locId:a.locId,tableStatus:"C",pax:i,vipName:null!=c&&c.vipId?null==c?void 0:c.vipName:u,phone:null==c?void 0:c.vipPhone,reservationTime:"",sourceId:d.sourceId,deliveryFlg:f,postalCode:h,addr1:y,addr2:b,addr3:p,addr4:m};fetch(g,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(j)}).then((function(e){return e.json()})).then((function(r){console.log("post table-edit-open successful",r),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"NEW"===n?"Open Table":"Edit Table",a.userName,r.message,o.tableId,"",null!=c&&c.vipId?null==c?void 0:c.vipName:u),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):"NEW"===n?e.props.route.params.handleUpdateFromTable():t.goBack()}))}}},{key:"handleAddressChange",value:function(e,t){var r=this;"POSTALCODE"===e?this.setState({overlayPostalCode:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR1"===e?this.setState({overlayAddr1:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR2"===e?this.setState({overlayAddr2:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR3"===e?this.setState({overlayAddr3:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR4"===e&&this.setState({overlayAddr4:t},(function(){return r.handleCheckDeliveryFlg()}))}},{key:"handleCheckDeliveryFlg",value:function(){var e=this.state,t=e.overlayPostalCode,r=e.overlayAddr1,n=e.overlayAddr2,a=e.overlayAddr3,l=e.overlayAddr4;t||r||n||a||l?this.setState({overlayDeliveryFlg:"Y"}):this.setState({overlayDeliveryFlg:"N"})}},{key:"handleQtyChange",value:function(e){if("PLUS"===e)this.setState((function(e,t){return{overlayPax:e.overlayPax+1}}));else if("MINUS"===e){if(0===this.state.overlayPax)return;this.setState((function(e,t){return{overlayPax:e.overlayPax-1}}))}}},{key:"handlePaxChange",value:function(e){isNaN(e)?this.setState({overlayPax:0}):this.setState({overlayPax:Number(e)})}},{key:"handlePressTab",value:function(e){Bt.default.get("window").width;"VIP"===e?this.setState({activePage:"VIP"}):"PAX"===e?this.setState({activePage:"PAX"}):"SOURCE"===e?this.setState({activePage:"SOURCE"}):"DELIVERY"===e&&this.setState({activePage:"DELIVERY"})}},{key:"handlePressNext",value:function(){var e=this.state.activePage;Bt.default.get("window").width;if("PAX"===e)this.setState({activePage:"VIP"});else if("VIP"===e)this.setState({activePage:"SOURCE"});else if("SOURCE"===e)this.setState({activePage:"DELIVERY"});else if("DELIVERY"===e)return}},{key:"handlePressPrev",value:function(){var e=this.state.activePage;Bt.default.get("window").width;"PAX"!==e&&("VIP"===e?this.setState({activePage:"PAX"}):"SOURCE"===e?this.setState({activePage:"VIP"}):"DELIVERY"===e&&this.setState({activePage:"SOURCE"}))}},{key:"handleSearchVip",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=(t.masters,t.settings),l=t.selectedTable,o=(t.overlayVip,t.overlayValidateVipId),s=t.overlayValidateCardNumber,i=t.overlayValidateVipName,c=t.overlayValidateNric,d=t.overlayValidateEmailAddress,u=t.overlayValidateVipPhone,f=t.overlayValidateVipPhoneCountryCode,h=r+"api/tables/"+l.recKey+"/search-vip",y={opentableRecKey:l.recKey};o&&(y.vipId=o),s&&(y.cardNumber=s),i&&(y.vipName=i),c&&(y.nric=c),d&&(y.emailAddress=d),u&&(y.vipPhone=u,y.vipPhoneCountryCode=f),console.log("before searching vip",y),fetch(h,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(y)}).then((function(e){return e.json()})).then((function(t){console.log("post successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Search Vip",n.userName,t.message,l.tableId),t.message?e.setState({warning:"Invalid VIP search"}):e.setState({warning:t.length+" VIP result(s) found",vipResults:t})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleEnterVip",value:function(e){var t=this;this.setState({selectedVipResult:e});var r=this.state,n=r.serviceEntry,a=r.home,l=(r.masters,r.settings),o=r.selectedTable,s=n+"api/tables/"+o.recKey+"/enter-vip",i={opentableRecKey:o.recKey,customerNumber:e.customerNumber,name:e.name,mobileNumber:e.mobileNumber,emailAddress:e.emailaddress,customerSource:e.customerSource};console.log("before entering vip",e),fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(r){console.log("post successful",r),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Input Vip",a.userName,r.message,o.tableId,"",e.customerNumber+","+e.name),r.message?t.setState({warning:"VIP input unsuccessful"}):t.setState({overlayVip:{vipId:r.opentable.vipId||"",vipName:r.opentable.vipName||"",vipPhone:r.opentable.vipPhone||"",vipPtsMoney:r.opentable.vipPtsMoney||"",cumPts:r.opentable.cumPts||"",vipDisc:r.opentable.vipDisc||"",classId:r.opentable.classId||""},warning:"VIP input successful"})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleClearVip",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=(t.masters,t.settings),l=t.selectedTable,o=r+"api/tables/"+l.recKey+"/update-table-vip-info";fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({vipId:"",vipName:"",classId:"",vipDisc:"",cumPts:"",pts:"",money:"",cardNo:"",birthday:"",qrcode:"",phone:""})}).then((function(e){return e.json()})).then((function(t){console.log("post successful",t),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(r,"Clear Vip",n.userName,t.message,l.tableId,"",""),t.message?e.setState({warning:t.message}):e.setState({overlayVip:{vipId:t.opentable.vipId||"",vipName:t.opentable.vipName||"",vipPhone:t.opentable.vipPhone||"",vipPtsMoney:t.opentable.vipPtsMoney||"",cumPts:t.opentable.cumPts||"",vipDisc:t.opentable.vipDisc||"",classId:t.opentable.classId||""},warning:"VIP cleared"})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.vipSources,n=t.availableVipSources,a=[];this.setState({overlaySourceSearch:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",n),a=r,e?(a=a.filter((function(e){return e.sourceId.toUpperCase().includes(l)||e.name.toUpperCase().includes(l)})),this.setState({availableVipSources:a})):this.setState({availableVipSources:a})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.mode,a=r.selectedTable,l=r.overlayProcedureMessageVisible,o=r.overlayPax,s=r.overlayVip,i=r.overlayValidateVipId,c=r.overlayValidateCardNumber,d=r.overlayValidateEmailAddress,u=r.overlayValidateVipPhone,f=r.overlayValidateVipPhoneCountryCode,h=r.overlayValidateVipName,y=(r.overlayValidateNric,r.overlaySource),b=r.overlaySourceSearch,p=r.vipResults,m=r.selectedVipResult,j=r.overlayDeliveryFlg,x=r.overlayPostalCode,v=r.overlayAddr1,T=r.overlayAddr2,O=r.overlayAddr3,I=r.overlayAddr4,C=r.warning,F=r.activePage,P=r.availableVipSources;console.log("in overlayopentable");var R=Bt.default.get("window").width/5*3;return Object(Q.jsxs)(g.default,{style:tn.overlay,children:[l&&Object(Q.jsx)(se,{text:l,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsxs)(g.default,{style:tn.overlayContent,children:[Object(Q.jsxs)(g.default,{style:tn.overlayHeader,children:[Object(Q.jsxs)(J.default,{style:tn.overlayTitleText,children:[S.a.get("table")," ",a.tableId]}),Object(Q.jsx)(J.default,{style:tn.overlaySubtitleText,children:"NEW"===n?S.a.get("open"):S.a.get("edit")}),Object(Q.jsx)(J.default,{style:tn.overlayText,children:C||"Enter Pax, VIP & Source"})]}),Object(Q.jsxs)(g.default,{style:tn.tabsContainer,children:[Object(Q.jsxs)(M.default,{style:[tn.tabContainer,"PAX"===F&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("PAX")},children:[null!==o?Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"PAX"===F&&{color:te.grey1}],children:o}):Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"PAX"===F&&{color:te.grey1}],children:"TBD"}),Object(Q.jsx)(J.default,{style:[tn.tabText,"PAX"===F&&{color:te.grey1}],children:"PAX"})]}),Object(Q.jsxs)(M.default,{style:[tn.tabContainer,"VIP"===F&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("VIP")},children:[null!=s&&s.vipId?Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"VIP"===F&&{color:te.grey1}],children:null==s?void 0:s.vipId}):Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"VIP"===F&&{color:te.grey1}],children:"TBD"}),Object(Q.jsx)(J.default,{style:[tn.tabText,"VIP"===F&&{color:te.grey1}],children:"VIP"})]}),Object(Q.jsxs)(M.default,{style:[tn.tabContainer,"SOURCE"===F&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("SOURCE")},children:[y.sourceId?Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"SOURCE"===F&&{color:te.grey1}],children:y.sourceId}):Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"SOURCE"===F&&{color:te.grey1}],children:"TBD"}),Object(Q.jsx)(J.default,{style:[tn.tabText,"SOURCE"===F&&{color:te.grey1}],children:"SOURCE"})]}),Object(Q.jsxs)(M.default,{style:[tn.tabContainer,"DELIVERY"===F&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("DELIVERY")},children:["Y"===j?Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"DELIVERY"===F&&{color:te.grey1}],children:"YES"}):Object(Q.jsx)(J.default,{style:[tn.tabFocusText,"DELIVERY"===F&&{color:te.grey1}],children:"NO"}),Object(Q.jsx)(J.default,{style:[tn.tabText,"DELIVERY"===F&&{color:te.grey1}],children:"DELIVERY"})]})]}),"PAX"===F?Object(Q.jsxs)(g.default,{style:[tn.overlayPage,{width:R}],children:[Object(Q.jsxs)(g.default,{style:tn.adjustContainer,children:[Object(Q.jsx)(M.default,{style:tn.adjustFirst,onPress:function(){return e.handleQtyChange("MINUS")},children:Object(Q.jsx)(U.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),Object(Q.jsx)(g.default,{style:tn.adjustSecond,children:Object(Q.jsx)(N.default,{style:tn.overlayPax,selectTextOnFocus:!0,keyboardType:"numeric",value:null==o?void 0:o.toString(),onChangeText:function(t){return e.handlePaxChange(t)}})}),Object(Q.jsx)(M.default,{style:tn.adjustThird,onPress:function(){return e.handleQtyChange("PLUS")},children:Object(Q.jsx)(U.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),Object(Q.jsxs)(g.default,{style:tn.buttonsContainer,children:[Object(Q.jsx)(M.default,{style:[tn.button,1===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:1})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"1"})}),Object(Q.jsx)(M.default,{style:[tn.button,2===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:2})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"2"})}),Object(Q.jsx)(M.default,{style:[tn.button,3===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:3})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"3"})}),Object(Q.jsx)(M.default,{style:[tn.button,4===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:4})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"4"})})]}),Object(Q.jsxs)(g.default,{style:tn.buttonsContainer,children:[Object(Q.jsx)(M.default,{style:[tn.button,5===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:5})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"5"})}),Object(Q.jsx)(M.default,{style:[tn.button,6===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:6})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"6"})}),Object(Q.jsx)(M.default,{style:[tn.button,7===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:7})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"7"})}),Object(Q.jsx)(M.default,{style:[tn.button,8===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:8})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"8"})})]}),Object(Q.jsxs)(g.default,{style:tn.buttonsContainer,children:[Object(Q.jsx)(M.default,{style:[tn.button,9===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:9})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"9"})}),Object(Q.jsx)(M.default,{style:[tn.button,10===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:10})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"10"})}),Object(Q.jsx)(M.default,{style:[tn.button,11===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:11})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"11"})}),Object(Q.jsx)(M.default,{style:[tn.button,12===o&&{backgroundColor:te.occupied}],onPress:function(){return e.setState({overlayPax:12})},children:Object(Q.jsx)(J.default,{style:tn.buttonText,children:"12"})})]})]}):"VIP"===F?Object(Q.jsx)(g.default,{style:[tn.overlayPage,{width:R}],children:p&&0!==p.length?Object(Q.jsxs)(g.default,{style:tn.selectWrapper,children:[Object(Q.jsx)(g.default,{style:tn.searchBoxWrapper,children:Object(Q.jsx)(g.default,{style:[tn.overlaySearchBox,{marginHorizontal:0,justifyContent:"space-between"}],children:Object(Q.jsx)(M.default,{style:tn.overlaySearchBoxButton,onPress:function(){return e.setState({vipResults:""})},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:"white"})})})}),Object(Q.jsx)(g.default,{style:tn.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:tn.searchBoxInfoText,children:[p.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:p,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[tn.overlayGrid,r.customerNumber===m.customerNumber&&{backgroundColor:te.occupied}],onPress:function(){return e.handleEnterVip(r)},children:[Object(Q.jsxs)(g.default,{style:tn.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:tn.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:tn.overlayGridFirstLeftText,children:r.customerNumber})}),Object(Q.jsx)(g.default,{style:tn.overlayGridFirstRight,children:Object(Q.jsxs)(J.default,{style:[tn.overlayGridFirstRightText,r.customerNumber===m.customerNumber&&{color:"white"}],children:[r.hasActiveMembership," ",r.customerSource]})})]}),Object(Q.jsx)(g.default,{style:tn.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:tn.overlayGridSecondText,children:r.name})}),Object(Q.jsxs)(g.default,{style:tn.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:tn.overlayGridThirdLeft,children:Object(Q.jsx)(J.default,{style:tn.overlayGridThirdLeftText,children:r.emailaddress})}),Object(Q.jsx)(g.default,{style:tn.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:tn.overlayGridThirdRightText,children:r.mobileNumber?r.mobileNumber:" "})})]})]})}})]}):Object(Q.jsxs)(g.default,{style:tn.vipInputsContainer,children:[Object(Q.jsxs)(g.default,{style:tn.vipInputsRow,children:[Object(Q.jsx)(N.default,{style:tn.vipInput,placeholder:"VIP ID",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipId:t})},value:i,onSubmitEditing:function(){return e.handleSearchVip()}}),Object(Q.jsx)(N.default,{style:tn.vipInput,placeholder:"CARD NO.",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateCardNumber:t})},value:c,onSubmitEditing:function(){return e.handleSearchVip()}})]}),Object(Q.jsxs)(g.default,{style:tn.vipInputsRow,children:[Object(Q.jsx)(N.default,{style:tn.vipInput,placeholder:"VIP NAME",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipName:t})},value:h,onSubmitEditing:function(){return e.handleSearchVip()}}),Object(Q.jsx)(N.default,{style:[tn.vipInput,{width:50}],placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipPhoneCountryCode:t})},value:f}),Object(Q.jsx)(N.default,{style:[tn.vipInput,{width:130}],placeholder:"VIP PHONE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipPhone:t})},value:u,onSubmitEditing:function(){return e.handleSearchVip()}})]}),Object(Q.jsxs)(g.default,{style:tn.vipInputsRow,children:[Object(Q.jsx)(N.default,{style:tn.vipInput,placeholder:"VIP EMAIL",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateEmailAddress:t})},value:d,onSubmitEditing:function(){return e.handleSearchVip()}}),Object(Q.jsx)(g.default,{style:{flex:1,alignItems:"flex-end",justifyContent:"center"},children:Object(Q.jsx)(M.default,{style:{paddingHorizontal:10,height:20,margin:5,borderRadius:40,backgroundColor:te.paid,alignItems:"center",justifyContent:"center"},onPress:function(){return e.handleClearVip()},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:10,textTransform:"uppercase",color:"white"},children:S.a.get("remove")})})})]}),Object(Q.jsxs)(g.default,{style:tn.vipInputsRow,children:[Object(Q.jsxs)(g.default,{style:[tn.detailWrapper,{alignItems:"flex-start"}],children:[Object(Q.jsx)(J.default,{style:tn.detailTitle,children:"VIP ID"}),Object(Q.jsx)(J.default,{style:tn.detailText,children:(null==s?void 0:s.vipId)||"-"})]}),Object(Q.jsxs)(g.default,{style:tn.detailWrapper,children:[Object(Q.jsx)(J.default,{style:tn.detailTitle,children:"VIP CLASS"}),Object(Q.jsx)(J.default,{style:tn.detailText,children:(null==s?void 0:s.classId)||"-"})]}),Object(Q.jsxs)(g.default,{style:tn.detailWrapper,children:[Object(Q.jsx)(J.default,{style:tn.detailTitle,children:"VIP DISC"}),Object(Q.jsx)(J.default,{style:tn.detailText,children:(null==s?void 0:s.vipDisc)||"-"})]})]}),Object(Q.jsxs)(g.default,{style:tn.vipInputsRow,children:[Object(Q.jsxs)(g.default,{style:[tn.detailWrapper,{alignItems:"flex-start"}],children:[Object(Q.jsx)(J.default,{style:tn.detailTitle,children:"VIP NAME"}),Object(Q.jsx)(J.default,{style:tn.detailText,children:(null==s?void 0:s.vipName)||"-"})]}),Object(Q.jsxs)(g.default,{style:tn.detailWrapper,children:[Object(Q.jsx)(J.default,{style:tn.detailTitle,children:"CUMULATIVE PTS"}),Object(Q.jsx)(J.default,{style:tn.detailText,children:(null==s?void 0:s.cumPts)||"-"})]}),Object(Q.jsxs)(g.default,{style:tn.detailWrapper,children:[Object(Q.jsx)(J.default,{style:tn.detailTitle,children:"REDEEMABLE"}),Object(Q.jsx)(J.default,{style:tn.detailText,children:(null==s?void 0:s.vipPtsMoney)||"-"})]})]})]})}):"SOURCE"===F?Object(Q.jsx)(g.default,{style:[tn.overlayPage,{width:R}],children:Object(Q.jsxs)(g.default,{style:tn.selectWrapper,children:[Object(Q.jsx)(g.default,{style:tn.searchBoxWrapper,children:Object(Q.jsxs)(g.default,{style:[tn.overlaySearchBox,{marginHorizontal:0}],children:[Object(Q.jsx)(N.default,{style:tn.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:b}),Object(Q.jsx)(M.default,{style:tn.overlaySearchBoxButton,onPress:function(){e.setState({overlaySourceSearch:"",overlaySource:""},(function(){return e.handleOverlaySearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]})}),Object(Q.jsx)(g.default,{style:tn.searchBoxInfo,children:Object(Q.jsxs)(J.default,{style:tn.searchBoxInfoText,children:[P.length," ITEMS"]})}),Object(Q.jsx)(Ie.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:P,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:[tn.overlayGrid,r.dummy?tn.hidden:null],onPress:function(){return e.setState({overlaySource:r,overlaySourceSearch:r.sourceId})},children:[Object(Q.jsxs)(g.default,{style:tn.overlayGridFirst,children:[Object(Q.jsx)(g.default,{style:tn.overlayGridFirstLeft,children:Object(Q.jsx)(J.default,{style:tn.overlayGridFirstLeftText,children:r.sourceId})}),Object(Q.jsx)(g.default,{style:tn.overlayGridFirstRight,children:Object(Q.jsx)(J.default,{style:tn.overlayGridFirstRightText})})]}),Object(Q.jsx)(g.default,{style:tn.overlayGridSecond,children:Object(Q.jsx)(J.default,{style:tn.overlayGridSecondText,children:r.name})}),Object(Q.jsxs)(g.default,{style:tn.overlayGridThird,children:[Object(Q.jsx)(g.default,{style:tn.overlayGridThirdLeft}),Object(Q.jsx)(g.default,{style:tn.overlayGridThirdRight,children:Object(Q.jsx)(J.default,{style:tn.overlayGridThirdRightText})})]})]})}})]})}):Object(Q.jsx)(g.default,{style:[tn.overlayPage,{width:R}],children:Object(Q.jsxs)(g.default,{style:tn.vipInputsContainer,children:[Object(Q.jsx)(g.default,{style:tn.vipInputsRow,children:Object(Q.jsx)(N.default,{style:tn.vipInput,placeholder:"POSTAL CODE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("POSTALCODE",t)},value:x})}),Object(Q.jsx)(g.default,{style:tn.vipInputsRow,children:Object(Q.jsx)(N.default,{style:[tn.vipInput,{width:390}],placeholder:"ADDR1",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR1",t)},value:v})}),Object(Q.jsx)(g.default,{style:tn.vipInputsRow,children:Object(Q.jsx)(N.default,{style:[tn.vipInput,{width:390}],placeholder:"ADDR2",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR2",t)},value:T})}),Object(Q.jsx)(g.default,{style:tn.vipInputsRow,children:Object(Q.jsx)(N.default,{style:[tn.vipInput,{width:390}],placeholder:"ADDR3",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR3",t)},value:O})}),Object(Q.jsx)(g.default,{style:tn.vipInputsRow,children:Object(Q.jsx)(N.default,{style:[tn.vipInput,{width:390}],placeholder:"ADDR4",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR4",t)},value:I})})]})}),Object(Q.jsxs)(g.default,{style:tn.overlayOptionsContainer,children:[Object(Q.jsxs)(M.default,{style:tn.overlayOptionContainer,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"close",size:32,color:"white"}),Object(Q.jsx)(J.default,{style:tn.overlayOptionText,children:S.a.get("close")})]}),Object(Q.jsxs)(M.default,{style:tn.overlayOptionContainer,onPress:function(){return e.handlePressPrev()},children:[Object(Q.jsx)(U.default,{name:"left",size:32,color:"white"}),Object(Q.jsx)(J.default,{style:tn.overlayOptionText,children:"PREV"})]}),Object(Q.jsxs)(M.default,{style:tn.overlayOptionContainer,onPress:function(){return e.handlePressNext()},children:[Object(Q.jsx)(U.default,{name:"right",size:32,color:"white"}),Object(Q.jsx)(J.default,{style:tn.overlayOptionText,children:"NEXT"})]}),Object(Q.jsxs)(M.default,{style:tn.overlayOptionContainer,onPress:function(){return e.handleSubmit()},children:[Object(Q.jsx)(U.default,{name:"NEW"===n?"appstore-o":"edit",size:32,color:"white"}),Object(Q.jsx)(J.default,{style:tn.overlayOptionText,children:"NEW"===n?S.a.get("open"):S.a.get("edit")})]})]})]})]})}}]),r}(b.Component),en=Bt.default.get("window").height/8,tn=m.default.create({overlay:{backgroundColor:te.grey2,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{flex:1,width:"60%",backgroundColor:te.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayPax:{width:"100%",fontFamily:"varela-round",color:"white",fontSize:32,textAlign:"center"},buttonsContainer:{alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:en-10,width:en-10,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:24,textTransform:"uppercase"},adjustContainer:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},adjustFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginRight:50},adjustSecond:{flex:1,justifyContent:"center",alignItems:"center"},adjustThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:50},overlayOptionContainer:{flex:1,alignItems:"center",justifyContent:"center"},overlayOptionsContainer:{height:100,marginTop:20,backgroundColor:te.grey3,flexDirection:"row",margin:5},overlayOptionText:{fontFamily:"varela-round",fontSize:10,color:"white",marginTop:5,textTransform:"uppercase"},overlayPage:{flex:1,justifyContent:"center",alignItems:"center"},tabsContainer:{height:40,flexDirection:"row",alignItems:"center",justifyContent:"center"},tabContainer:{backgroundColor:te.grey1,width:120,alignItems:"center",justifyContent:"center",borderRadius:20,height:40,marginHorizontal:5},tabText:{fontSize:10,fontFamily:"varela-round",color:"white"},tabFocusText:{fontSize:16,fontFamily:"varela-round",color:"white"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},vipInputsContainer:{marginTop:20,width:400,alignItems:"center"},vipInputsRow:{height:50,width:400,flexDirection:"row"},vipInput:{backgroundColor:te.grey1,borderRadius:5,color:"white",fontFamily:"varela-round",fontSize:16,margin:5,paddingHorizontal:10,width:190},overlaySearchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:50,flexDirection:"row",flex:1,alignItems:"center"},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlaySearchBoxButtonText:{fontSize:14,fontFamily:"varela-round",color:"white",textTransform:"uppercase"},overlaySearchVipButton:{alignItems:"center",justifyContent:"center",height:110},detailWrapper:{alignItems:"flex-end",margin:5,width:370/3},detailText:{fontSize:16,fontFamily:"varela-round",color:"white"},detailTitle:{opacity:.6,fontSize:10,fontFamily:"varela-round",color:"white"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:te.occupied,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},selectWrapper:{flex:1,marginTop:50,width:400,backgroundColor:te.grey1,borderRadius:5}});function rn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var nn=function(e){d()(r,e);var t=rn(r);function r(e){var n,a,l,s,i,c,d,u,f,h;return o()(this,r),(h=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,settings:e.route.params.masters.settings,modBundles:e.route.params.masters.modBundles,mods:e.route.params.masters.mods,selectedTable:e.route.params.selectedTable,selectedMenu:e.route.params.selectedMenu,selectedTableItem:e.route.params.selectedTableItem,loading:!1,menuName:e.route.params.selectedTableItem?null==(n=e.route.params.selectedTableItem)?void 0:n.menuName:e.route.params.selectedMenu.menuName,qtyInput:(null==(a=e.route.params.selectedTableItem)||null==(l=a.orderQty)?void 0:l.toString())||"1",orderType:"N"===e.route.params.selectedMenu.serviceFlg?"B":e.route.params.selectedTableItem?(null==(s=e.route.params.selectedTableItem)?void 0:s.orderType)||"A":"SYS"===(null==(i=e.route.params.selectedTable)?void 0:i.sectionId)?"B":"A",lineBreak:e.route.params.selectedTableItem?e.route.params.selectedTableItem.lineBreak:"N",modInput:e.route.params.selectedTableItem?(null==(c=e.route.params.selectedTableItem)?void 0:c.menuMod)||"":"N"===e.route.params.selectedMenu.serviceFlg||"SYS"===(null==(d=e.route.params.selectedTable)?void 0:d.sectionId)?"*"+S.a.get("takeaway")+"  ":"",modRecKeys:(null==(u=e.route.params.selectedTableItem)||null==(f=u.modRecKeys)?void 0:f.split(","))||[]},h.handleUpdateFromProcedureMessage=h.handleUpdateFromProcedureMessage.bind(D()(h)),h.handleUpdateFromAlert=h.handleUpdateFromAlert.bind(D()(h)),h}return i()(r,[{key:"componentDidMount",value:function(){console.log("mount menu",this.state.selectedMenu,this.state.selectedTableItem)}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.state;t.selectedTable,t.selectedTableItem;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"doValidateQty",value:function(e){!e||isNaN(e)?this.setState({qtyInput:"0"}):this.setState({qtyInput:e})}},{key:"doChangeQty",value:function(e){var t=this.state.qtyInput,r=Number(t);if("PLUS"===e)this.setState({qtyInput:(r+1).toString()});else if("MINUS"===e){if(r<=1)return;this.setState({qtyInput:(r-1).toString()})}}},{key:"doToggleOrderType",value:function(){var e=this.state,t=e.orderType,r=e.modInput;"A"===t?(r=r.replace("*"+S.a.get("takeaway")+"  ",""),r="*"+S.a.get("takeaway")+"  "+r,this.setState({orderType:"B",modInput:r})):(r=r.replace("*"+S.a.get("takeaway")+"  ",""),this.setState({orderType:"A",modInput:r}))}},{key:"doToggleLineBreak",value:function(){var e=this.state.lineBreak;this.setState({lineBreak:"Y"===e?"N":"Y"})}},{key:"doPressModBundle",value:function(e){this.setState({selectedModBundle:e})}},{key:"doPressMod",value:function(e){var t=this.state,r=t.modInput,n=t.selectedModBundle,a=t.modRecKeys,l=r,o=a;"A"===n.modmas.modType?a.some((function(t){return t===e.recKey.toString()}))?(l=l.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))):(l+="*"+e.name+"  ",o.push(e.recKey.toString())):(n.moditems.forEach((function(e){l=l.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))})),a.some((function(t){return t===e.recKey.toString()}))||(l+="*"+e.name+"  ",o.push(e.recKey.toString()))),this.setState({modInput:l,modRecKeys:o})}},{key:"doSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,a=r.home,l=r.selectedTable,o=r.selectedMenu,s=r.selectedTableItem,i=r.mods,c=(r.masters,r.settings),d=r.modBundles,u=r.menuName,f=r.modInput,h=r.qtyInput,y=r.orderType,b=r.lineBreak,p=r.modRecKeys;if(l)if("SYS"===l.sectionId||"C"===l.statusFlg)if(d.filter((function(e){return"Y"===e.modmas.mustFlg&&("Y"===e.modmas.globalFlg||i.some((function(t){return t.menuId===o.menuId&&t.modId===e.modmas.modId})))})).some((function(e){return!e.moditems.some((function(e){return p.some((function(t){return t===e.recKey.toString()}))}))})))this.setState({overlayProcedureMessageVisible:"CHECK COMPULSORY MODIFIERS",loading:!1});else if(s){var m=n+"api/tables/"+l.recKey+"/update-item",g={userId:a.userId,opentableRecKey:l.recKey,opentableItemRecKey:s.recKey,restmenuMod:f,orderQty:h,orderType:y,modRecKeys:p.join(","),menuName:u,lineBreak:b};fetch(m,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(g)}).then((function(e){return e.json()})).then((function(r){"Y"===c.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Update Item",a.userName,r.message,l.tableId,u),console.log("post update-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else{var j=n+"api/tables/"+l.recKey+"/insert-item",x={userId:a.userId,opentableRecKey:l.recKey,restmenuRecKey:o.recKey,restmenuMod:f,orderQty:h,orderType:y,modRecKeys:p.join(","),menuName:u,lineBreak:b};fetch(j,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(r){"Y"===c.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Insert Item",a.userName,r.message,l.tableId,u,h),console.log("post insert-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else this.setState({overlayProcedureMessageVisible:"CHECK TABLE STATUS",loading:!1});else this.setState({overlayProcedureMessageVisible:"MISSING TABLE",loading:!1})}},{key:"render",value:function(){var e,t,r,n,a=this,l=this.props,o=l.navigation,s=(l.route,this.state),i=s.loading,c=s.home,d=s.settings,u=s.selectedMenu,f=(s.selectedTable,s.selectedTableItem),h=s.masters,y=s.mods,b=s.modBundles,p=s.selectedModBundle,m=s.menuName,j=s.modInput,x=s.qtyInput,v=s.orderType,T=s.lineBreak,O=s.modRecKeys,I=s.overlayProcedureMessageVisible,C=s.overlayAlertVisible,F=s.overlayAlertInputValue;return Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",backgroundColor:"rgba(0,0,0,0.9)"},children:[C&&Object(Q.jsx)(St,{input:F,handleUpdateFromAlert:this.handleUpdateFromAlert}),I&&Object(Q.jsx)(se,{text:I,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsx)(g.default,{style:{width:10}}),Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsx)(me.default,{contentContainerStyle:{flexGrow:1,alignItems:"flex-end",justifyContent:"center"},showsVerticalScrollIndicator:!1,children:null==p?void 0:p.moditems.map((function(e){var t;return Object(Q.jsxs)(M.default,{style:[an.modButton,{margin:10},O.some((function(t){return t===e.recKey.toString()}))&&{backgroundColor:te.occupied}],onPress:function(){return a.doPressMod(e)},children:[Object(Q.jsx)(J.default,{style:an.modText,children:e.name}),0!==e.listPrice&&Object(Q.jsxs)(J.default,{style:{position:"absolute",top:-15,right:10,fontFamily:"varela-round",color:te.reserved,fontSize:20},children:[e.listPrice<0?"":"+",null==(t=e.listPrice)?void 0:t.toFixed(2)]})]},e.recKey.toString())}))})}),Object(Q.jsx)(g.default,{style:{flex:2},children:Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",padding:5},children:[Object(Q.jsxs)(g.default,{style:{flex:1,margin:5,backgroundColor:te.grey2,borderRadius:5},children:[Object(Q.jsxs)(g.default,{style:{flex:1,margin:5,marginBottom:0,backgroundColor:te.grey4},children:[Object(Q.jsxs)(g.default,{style:{alignItems:"center",marginTop:10},children:[Object(Q.jsxs)(g.default,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(Q.jsxs)(J.default,{style:{fontFamily:"varela-round",color:te.paid,fontSize:16},children:[u.menuId," "]}),Object(Q.jsxs)(J.default,{style:{fontFamily:"varela-round",color:te.reserved,fontSize:16},children:[" $",(null==f||null==(e=f.listPrice)?void 0:e.toFixed(2))||(null==(t=u.listPrice)?void 0:t.toFixed(2))]})]}),Object(Q.jsx)(N.default,{style:{height:50,width:"90%",fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},editable:"Y"===c.adminFlg||h.privileges.some((function(e){return"EDITITEM"===e.priId}))||0===u.listPrice,multiline:!0,blurOnSubmit:!0,value:m,onChangeText:function(e){return a.setState({menuName:e})}})]}),Object(Q.jsxs)(g.default,{style:an.menuQtyRow,children:[Object(Q.jsx)(M.default,{style:an.menuQtyRowFirst,onPress:function(){return a.doChangeQty("MINUS")},children:Object(Q.jsx)(U.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),Object(Q.jsx)(g.default,{style:an.menuQtyRowSecond,children:Object(Q.jsx)(N.default,{style:an.qtyTextInput,value:x,keyboardType:"numeric",onChangeText:function(e){return a.doValidateQty(e)}})}),Object(Q.jsx)(M.default,{style:an.menuQtyRowThird,onPress:function(){return a.doChangeQty("PLUS")},children:Object(Q.jsx)(U.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),Object(Q.jsx)(N.default,{style:an.modifierTextInput,multiline:!0,placeholder:"CHOOSE FROM PREDEFINED MODIFIERS OR ENTER TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:j,onChangeText:function(e){return a.setState({modInput:e})}}),Object(Q.jsxs)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[(null==y?void 0:y.filter((function(e){return e.menuId===u.menuId})).length)>0&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(g.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:te.grey2},children:Object(Q.jsx)(J.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:te.grey7},children:"MENU SPECIFIC MODIFIER"})}),Object(Q.jsx)(g.default,{style:an.modContainer,children:null==y||null==(r=y.filter((function(e){return e.menuId===u.menuId})))||null==(n=r.map((function(e){return b.find((function(t){return t.modmas.modId===e.modId}))})))?void 0:n.map((function(e){return Object(Q.jsx)(M.default,{style:[an.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:te.paid}],onPress:function(){return a.doPressModBundle(e)},children:Object(Q.jsx)(J.default,{style:an.modText,children:e.modmas.name})},e.modmas.recKey.toString())}))})]}),Object(Q.jsx)(g.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:te.grey2},children:Object(Q.jsx)(J.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:te.grey7},children:"GLOBAL MODIFIER"})}),Object(Q.jsx)(g.default,{style:an.modContainer,children:null==b?void 0:b.filter((function(e){return"Y"===e.modmas.globalFlg})).map((function(e){return Object(Q.jsx)(M.default,{style:[an.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:te.paid}],onPress:function(){return a.doPressModBundle(e)},children:Object(Q.jsx)(J.default,{style:an.modText,children:e.modmas.name})},e.modmas.recKey.toString())}))})]})]}),Object(Q.jsxs)(g.default,{style:{height:100,margin:5,marginTop:0,flexDirection:"row",backgroundColor:"white"},children:[Object(Q.jsxs)(M.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},disabled:i,onPress:function(){return o.goBack()},children:[Object(Q.jsx)(U.default,{name:"close",size:48,color:te.grey4}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:12,color:te.grey4,textTransform:"uppercase"},children:S.a.get("close")})]}),Object(Q.jsxs)(M.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},disabled:i,onPress:function(){return a.setState({loading:!0},(function(){return a.doSubmit()}))},children:[Object(Q.jsx)(U.default,{name:"check",size:48,color:te.grey4}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",fontSize:12,color:te.grey4},children:"OK"})]})]})]}),Object(Q.jsx)(g.default,{style:{margin:5,width:120},children:Object(Q.jsxs)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,alwaysBounceVertical:!1,children:[Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:80,marginVertical:5}}),Object(Q.jsxs)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"A"===v?te.grey3:te.paid,borderRadius:5,marginVertical:5},disabled:"N"===u.serviceFlg,onPress:function(){return a.doToggleOrderType()},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:"A"===v?S.a.get("dinein"):S.a.get("takeaway")}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",fontSize:10},children:"ORDER TYPE"})]}),"Y"===d.find((function(e){return"MARKFIRE"===e.setId})).setString?Object(Q.jsxs)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"N"===T?te.grey3:te.occupied,borderRadius:5,marginVertical:5},disabled:"Y"===(null==f?void 0:f.confirmFlg),onPress:function(){return a.doToggleLineBreak()},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase",fontSize:10},children:"N"===T?S.a.get("no"):S.a.get("add")}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white"},children:"LINE BREAK"})]}):Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:i,onPress:function(){return a.setState({loading:!0},(function(){return a.doSubmit()}))},children:Object(Q.jsx)(U.default,{name:"check",size:28,color:te.grey4})}),Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:te.grey3,borderRadius:5,marginVertical:5},onPress:function(){return a.doChangeQty("PLUS")},children:Object(Q.jsx)(U.default,{name:"plus",size:26,color:"white"})}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:te.grey3,borderRadius:5,marginVertical:5},onPress:function(){return a.doChangeQty("MINUS")},children:Object(Q.jsx)(U.default,{name:"minus",size:32,color:"white"})}),Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:i,onPress:function(){return o.goBack()},children:Object(Q.jsx)(U.default,{name:"close",size:26,color:te.grey4})})]})})]})})]})}}]),r}(b.Component),an=m.default.create({modifierTextInput:{fontFamily:"varela-round",fontSize:20,color:"white",paddingHorizontal:20,height:120,backgroundColor:te.grey3},menuQtyRow:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},menuQtyRowFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginRight:10},menuQtyRowSecond:{flex:1,justifyContent:"center",alignItems:"center"},menuQtyRowThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:10},qtyTextInput:{fontFamily:"varela-round",fontSize:32,width:"100%",color:"white",textAlign:"center"},modContainer:{padding:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center",backgroundColor:te.grey4},modButton:{paddingHorizontal:20,minHeight:32,justifyContent:"center",borderRadius:16,backgroundColor:te.grey2,margin:5},modText:{fontFamily:"varela-round",color:"white",fontSize:20}});function ln(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var on=function(e){d()(r,e);var t=ln(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,home:e.route.params.home,selectedTable:e.route.params.selectedTable,settings:e.route.params.masters.settings,hasCameraPermission:null,detected:!1},n.handleBarCodeScanned=n.handleBarCodeScanned.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){var e,t;return Oe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Oe.a.awrap(C.BarCodeScanner.requestPermissionsAsync());case 2:e=r.sent,t=e.status,this.setState({hasCameraPermission:"granted"===t});case 5:case"end":return r.stop()}}),null,this,null,Promise)}},{key:"handleBarCodeScanned",value:function(e){var t=this,r=(e.type,e.data),n=this.props.navigation,a=this.state,l=a.serviceEntry,o=a.home,s=a.settings,i=a.selectedTable;a.detected;this.setState({detected:!0},(function(){var e=l+"api/tables/"+i.recKey+"/scan-barcode",a={userId:o.userId,orgId:o.orgId,locId:o.locId,shopId:o.shopId,vipId:o.vipId,barcode:r,opentableRecKey:i.recKey};fetch(e,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(a)}).then((function(e){if(e.ok)return e.json();throw t.setState({detected:!1}),e})).then((function(e){console.log("post scan-barcode successful",e),"Y"===s.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Scan Barcode",o.userName,e.message,null==i?void 0:i.tableId,"",r),n.goBack()})).catch((function(e){console.log("error: ",JSON.stringify(e))}))}))}},{key:"render",value:function(){var e=this.props,t=e.navigation,r=(e.route,this.state),n=(r.hasCameraPermission,r.detected);return Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsx)(C.BarCodeScanner,{onBarCodeScanned:n?null:this.handleBarCodeScanned,style:{flex:1}}),Object(Q.jsxs)(M.default,{style:dn.backButton,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",size:48,color:"white"}),Object(Q.jsx)(J.default,{style:dn.buttonText,children:S.a.get("back")})]}),Object(Q.jsx)(g.default,{style:dn.iconContainer,children:Object(Q.jsx)(A.default,{name:"ios-barcode",color:n?"red":"white",size:400})})]})}}]),r}(b.Component),sn=Bt.default.get("window").width,cn=Bt.default.get("window").height,dn=m.default.create({iconContainer:{position:"absolute",right:sn/2-200,top:cn/2-200,opacity:.5,width:400,height:400,alignItems:"center",justifyContent:"center"},backButton:{position:"absolute",left:50,top:50,width:100,height:100,alignItems:"center",justifyContent:"center",borderRadius:10},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function un(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var fn=function(e){d()(r,e);var t=un(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,selectedTable:e.route.params.selectedTable,maps:[],thisTable:!!e.route.params.selectedTable,thisUser:!1,overlayChoosePrinterVisible:!1},n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){this.doReload()}},{key:"doReload",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.selectedTable,l=t.thisTable,o=t.thisUser,s=r+"api/debuglogs",i=new URLSearchParams;o&&i.append("msg2",n.userName),l&&i.append("msg4",a.tableId),fetch(s+="?"+i,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({maps:t})}))}},{key:"doLoad",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,a=t.selectedTable,l=t.thisTable,o=t.thisUser,s=t.maps;if(!(s.length<40)){var i=r+"api/debuglogs",c=new URLSearchParams;c.append("recKey",s[s.length-1].recKey),o&&c.append("msg2",n.userName),l&&c.append("msg4",a.tableId),fetch(i+="?"+c,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({maps:[].concat(w()(s),w()(t))})}))}}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"doToggleTable",value:function(){var e=this,t=this.state.thisTable;this.setState({thisTable:!t},(function(){return e.doReload()}))}},{key:"doToggleUser",value:function(){var e=this,t=this.state.thisUser;this.setState({thisUser:!t},(function(){return e.doReload()}))}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,a=r.selectedTable,l=r.maps,o=r.thisUser,s=r.thisTable,i=r.overlayProcedureMessageVisible;return Object(Q.jsxs)(g.default,{style:hn.container,children:[i&&Object(Q.jsx)(se,{text:i,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsx)(g.default,{style:hn.containerFirst,children:Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsxs)(M.default,{style:hn.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:hn.buttonText,children:S.a.get("back")})]})})}),Object(Q.jsxs)(g.default,{style:hn.containerSecond,children:[Object(Q.jsxs)(M.default,{style:hn.overlayHeader,onPress:function(){return e.traceRef.scrollToOffset({animated:!0,offset:0})},children:[Object(Q.jsx)(J.default,{style:hn.overlayTitleText,children:S.a.get("action")}),Object(Q.jsx)(J.default,{style:hn.overlaySubtitleText,children:S.a.get("trace")}),Object(Q.jsx)(J.default,{style:hn.overlayTitleText})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},ref:function(t){return e.traceRef=t},showsVerticalScrollIndicator:!1,data:l,onEndReachedThreshold:.4,onEndReached:function(){return e.doLoad()},keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;e.index;return Object(Q.jsxs)(me.default,{style:{minHeight:40,paddingVertical:5},contentContainerStyle:{alignItems:"center"},horizontal:!0,alwaysBounceHorizontal:!1,showsHorizontalScrollIndicator:!1,children:[Object(Q.jsx)(J.default,{style:[hn.traceText,{textAlign:"right",width:40,color:te.grey5}],children:le()(t.createDate).format("ddd")}),Object(Q.jsx)(J.default,{style:[hn.traceText,{marginLeft:10}],children:le()(t.createDate).format("HH:mm")}),Object(Q.jsxs)(g.default,{style:{width:30,marginHorizontal:5,alignItems:"center"},children:["Fire Course"===t.msg1&&Object(Q.jsx)(je.default,{name:"fire",size:20,color:te.reserved,style:{marginLeft:1}}),"Send Order"===t.msg1&&Object(Q.jsx)(ge.default,{name:"send",size:18,color:te.occupied,style:{}}),"Finish Payment"===t.msg1&&Object(Q.jsx)(xe.default,{name:"checkbox-blank",size:22,color:te.paid,style:{}}),"Finish Dayclose"===t.msg1&&Object(Q.jsx)(xe.default,{name:"moon-full",size:22,color:te.reserved,style:{}}),("Open Table"===t.msg1||"Create Table"===t.msg1||"Reopen Receipt"===t.msg1&&!t.msg3)&&Object(Q.jsx)(xe.default,{name:"checkbox-blank",size:22,color:te.occupied,style:{}})]}),Object(Q.jsxs)(J.default,{style:[hn.traceText,{color:te.grey5}],children:[t.msg2," "]}),Object(Q.jsx)(J.default,{style:[hn.traceText,{marginLeft:5,color:te.paid}],children:t.msg1}),t.msg5&&Object(Q.jsxs)(J.default,{style:[hn.traceText,{marginLeft:5,color:te.reserved}],children:['"',t.msg5,'"']}),t.msg6&&Object(Q.jsxs)(J.default,{style:[hn.traceText,{marginLeft:5,color:te.vacant}],children:["<",t.msg6,">"]}),t.msg4&&Object(Q.jsxs)(J.default,{style:[hn.traceText,{marginLeft:5,color:te.occupied}],children:["#",t.msg4]}),t.msg3&&Object(Q.jsxs)(J.default,{style:[hn.traceText,{marginLeft:5,color:te.adhoc}],children:["[",t.msg3,"]"]})]})}})]}),Object(Q.jsx)(g.default,{style:hn.containerThird,children:Object(Q.jsxs)(g.default,{style:{flex:1},children:[Object(Q.jsxs)(M.default,{style:[hn.button],onPress:function(){return e.doToggleUser()},children:[Object(Q.jsx)(U.default,{name:"woman",color:"white",size:36}),Object(Q.jsx)(J.default,{style:hn.buttonText,numberOfLines:1,children:o?n.userName:S.a.get("all")+" "+S.a.get("user")})]}),Object(Q.jsxs)(M.default,{style:[hn.button],disabled:!a,onPress:function(){return e.doToggleTable()},children:[Object(Q.jsx)(U.default,{name:"appstore-o",color:"white",size:36}),Object(Q.jsx)(J.default,{style:hn.buttonText,children:s?S.a.get("table")+" "+a.tableId:S.a.get("all")+" "+S.a.get("table")})]})]})})]})}}]),r}(b.Component),hn=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:te.grey3},containerThird:{flex:1,flexDirection:"row",padding:10},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},traceText:{fontFamily:"varela-round",color:"white",fontSize:12}});function yn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var bn=function(e){d()(r,e);var t=yn(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,menus:w()(new Map(e.route.params.masters.menus.map((function(e){return[e.menuId,e]}))).values()),availableMenus:w()(new Map(e.route.params.masters.menus.map((function(e){return[e.menuId,e]}))).values()),updateds:[],searchText:"",displayMode:"ALL",overlayRequestPrivilegeVisible:!1,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:"",loading:!1},n.handleSelectMenu=n.handleSelectMenu.bind(D()(n)),n.handleSelectUpdated=n.handleSelectUpdated.bind(D()(n)),n.handlePressDisplayMode=n.handlePressDisplayMode.bind(D()(n)),n.handleSubmit=n.handleSubmit.bind(D()(n)),n.handleUpdateMenu=n.handleUpdateMenu.bind(D()(n)),n.handleSearchText=n.handleSearchText.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"handleSelectMenu",value:function(e){var t=this.state,r=(t.menus,t.updateds);if(!r.some((function(t){return t.recKey===e.recKey}))){var n=r;n.push(e),this.setState({updateds:n})}}},{key:"handleSelectUpdated",value:function(e){var t=this.state,r=(t.menus,t.updateds);r=r.filter((function(t){return t.recKey!==e.recKey})),this.setState({updateds:r})}},{key:"handleSubmit",value:function(){var e=this.state.updateds,t=[];t.push({text:"Yes",handleText:"handleUpdateMenu"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Update Menu",text:"Update "+e.length+" menus?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"handleUpdateMenu",value:function(e){var t=this,r=this.props.navigation,n=this.state,a=n.home,l=n.settings,o=n.privileges,s=n.serviceEntry,i=n.updateds;if("Y"===a.adminFlg||o.some((function(e){return"UPDATEMENU"===e.priId}))||e){var c=i.map((function(e){return{recKey:e.recKey,newStatusFlg:"A"===e.statusFlg?"B":"A"}})).reduce((function(e,t){return e+t.recKey+","+t.newStatusFlg+","}),""),d=s+"api/update-restmenu",u={userId:a.userId,orgId:a.orgId,shopId:a.shopId,restmenuRecKeys:c};this.setState({loading:!0}),fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){console.log("post update-restmenu successful"),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(s,"Update Menu",a.userName,e.message,"","",i.map((function(e){return{menuId:e.menuId,newStatusFlg:"A"===e.statusFlg?"B":"A"}})).reduce((function(e,t){return e+t.menuId+","+t.newStatusFlg+","}),"")),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):r.navigate("Login",{sync:new Date})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0})}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.menus,n=(t.availableMenus,t.searchText,[]);this.setState({searchText:e,displayMode:"ALL"});var a=e.toUpperCase();n=r,e?(n=n.filter((function(e){return e.menuName.toUpperCase().includes(a)||e.menuId.toUpperCase().includes(a)})),this.setState({availableMenus:n})):this.setState({availableMenus:n})}},{key:"handlePressDisplayMode",value:function(){var e=this.state,t=e.displayMode,r=e.menus;"INACTIVE ONLY"===t?this.setState({availableMenus:r,searchText:"",displayMode:"ALL"}):"ALL"===t&&this.setState({availableMenus:r.filter((function(e){return"B"===e.statusFlg})),searchText:"",displayMode:"INACTIVE ONLY"})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.settings;if(e){var o=a+"api/super-user",s={locId:n.locId,accessCode:e,priId:"UPDATEMENU"};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access UPDATEMENU",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleUpdateMenu(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"handleUpdateMenu"===e&&this.handleUpdateMenu()}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,a=r.availableMenus,l=r.updateds,o=r.searchText,s=r.displayMode,i=r.overlayRequestAccessVisible,c=r.overlayProcedureMessageVisible,d=r.overlayAlertVisible,u=r.overlayAlertInputValue,f=r.loading;return console.log("in activate"),Object(Q.jsxs)(g.default,{style:pn.container,children:[d&&Object(Q.jsx)(St,{input:u,handleUpdateFromAlert:this.handleUpdateFromAlert}),c&&Object(Q.jsx)(se,{text:c,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),i&&Object(Q.jsx)(Ge,{home:n,requestedPrivilege:"UPDATEMENU",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),Object(Q.jsxs)(g.default,{style:pn.leftContainer,children:[Object(Q.jsx)(g.default,{style:pn.navigateContainer,children:Object(Q.jsxs)(g.default,{style:pn.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:pn.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:pn.buttonText,children:S.a.get("back")})]}),Object(Q.jsx)(g.default,{style:pn.selectionContainer})]})}),Object(Q.jsx)(g.default,{style:pn.displayContainer,children:Object(Q.jsxs)(g.default,{style:[pn.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:pn.gap}),Object(Q.jsxs)(g.default,{style:pn.gridContainer,children:[Object(Q.jsxs)(g.default,{style:pn.searchBox,children:[Object(Q.jsx)(N.default,{style:pn.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:o,onChangeText:function(t){return e.handleSearchText(t)}}),Object(Q.jsx)(M.default,{style:pn.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsxs)(g.default,{style:pn.searchBoxInfo,children:[Object(Q.jsx)(M.default,{style:pn.searchBoxInfoLeft,onPress:function(){return e.handlePressDisplayMode()},children:Object(Q.jsx)(J.default,{style:pn.searchBoxInfoText,children:s})}),Object(Q.jsx)(g.default,{style:pn.searchBoxInfoRight,children:Object(Q.jsxs)(J.default,{style:pn.searchBoxInfoText,children:[a.length," ITEMS"]})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},data:a,showsVerticalScrollIndicator:!1,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return Object(Q.jsxs)(M.default,{style:pn.grid,onPress:function(){return e.handleSelectMenu(r)},children:[Object(Q.jsxs)(g.default,{style:pn.gridFirst,children:[Object(Q.jsx)(g.default,{style:pn.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:pn.gridFirstLeftText,children:r.menuId})}),Object(Q.jsx)(g.default,{style:pn.gridFirstRight,children:"A"===r.statusFlg?Object(Q.jsx)(J.default,{style:[pn.gridFirstRightText,{color:te.reserved}],children:"ACTIVE"}):Object(Q.jsx)(J.default,{style:[pn.gridFirstRightText,{color:te.paid}],children:"INACTIVE"})})]}),Object(Q.jsx)(g.default,{style:pn.gridSecond,children:Object(Q.jsx)(J.default,{style:pn.gridSecondText,children:r.menuName})}),Object(Q.jsxs)(g.default,{style:pn.gridThird,children:[Object(Q.jsx)(g.default,{style:pn.gridThirdLeft,children:Object(Q.jsxs)(J.default,{style:[pn.gridThirdRightText,{color:te.reserved}],children:["KOT ",r.kotType||"-"]})}),Object(Q.jsx)(g.default,{style:pn.gridThirdRight,children:Object(Q.jsxs)(J.default,{style:pn.gridThirdRightText,children:["$",r.listPrice.toFixed(2)]})})]})]})}})]}),Object(Q.jsx)(g.default,{style:pn.gap})]})})]}),Object(Q.jsxs)(g.default,{style:pn.rightContainer,children:[Object(Q.jsx)(g.default,{style:pn.displayContainer,children:Object(Q.jsxs)(g.default,{style:[pn.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsx)(g.default,{style:pn.gap}),Object(Q.jsxs)(g.default,{style:pn.gridContainer,children:[Object(Q.jsx)(g.default,{style:[pn.searchBox,{backgroundColor:te.grey3}]}),Object(Q.jsxs)(g.default,{style:pn.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:[pn.titleSecondContainer,{flex:3}],children:Object(Q.jsxs)(J.default,{style:pn.titleText,children:[l.length," Changes"]})}),Object(Q.jsx)(g.default,{style:[pn.titleFourthContainer,{flex:1}],children:Object(Q.jsx)(J.default,{style:pn.titleText,children:"New Status"})})]}),Object(Q.jsx)(me.default,{style:{flex:1},children:l?l.map((function(t,r){return Object(Q.jsxs)(M.default,{style:pn.grid,onPress:function(){return e.handleSelectUpdated(t)},children:[Object(Q.jsxs)(g.default,{style:pn.gridFirst,children:[Object(Q.jsx)(g.default,{style:pn.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:pn.gridFirstLeftText,children:t.menuId})}),Object(Q.jsx)(g.default,{style:pn.gridFirstRight,children:"B"===t.statusFlg?Object(Q.jsx)(J.default,{style:[pn.gridFirstRightText,{color:te.reserved}],children:"ACTIVE"}):Object(Q.jsx)(J.default,{style:[pn.gridFirstRightText,{color:te.paid}],children:"INACTIVE"})})]}),Object(Q.jsx)(g.default,{style:pn.gridSecond,children:Object(Q.jsx)(J.default,{style:pn.gridSecondText,children:t.menuName})}),Object(Q.jsxs)(g.default,{style:pn.gridThird,children:[Object(Q.jsx)(g.default,{style:pn.gridThirdLeft}),Object(Q.jsx)(g.default,{style:pn.gridThirdRight,children:Object(Q.jsxs)(J.default,{style:pn.gridThirdRightText,children:["$",t.listPrice.toFixed(2)]})})]})]},r)})):null})]}),Object(Q.jsx)(g.default,{style:pn.gap})]})}),Object(Q.jsx)(g.default,{style:pn.navigateContainer,children:Object(Q.jsx)(g.default,{style:pn.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:[pn.button,(f||0===l.length)&&{opacity:.2}],disabled:f||0===l.length,onPress:function(){return e.handleSubmit()},children:[Object(Q.jsx)(U.default,{name:"bulb1",color:"white",size:36}),Object(Q.jsx)(J.default,{style:pn.buttonText,children:S.a.get("update")})]})})})]})]})}}]),r}(b.Component),pn=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function mn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var gn=function(e){d()(r,e);var t=mn(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,menus:w()(new Map(e.route.params.masters.menus.map((function(e){return[e.menuId,e]}))).values()),availableMenus:w()(new Map(e.route.params.masters.menus.map((function(e){return[e.menuId,e]}))).values()),searchText:"",displayMode:"ALL",limiteds:[],selectedMenu:null,statusFlg:"",serveLimit:"",loading:!1},n.handlePressDisplayMode=n.handlePressDisplayMode.bind(D()(n)),n.handleSearchText=n.handleSearchText.bind(D()(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind(D()(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){this.doGet()}},{key:"doGet",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=(t.home,r+"api/restmenu-serve");n+="?"+new URLSearchParams,console.log(n),fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({limiteds:t})}))}},{key:"doSelectMenu",value:function(e){var t,r=this.state.limiteds;this.setState({selectedMenu:e,statusFlg:e.statusFlg,serveLimit:(null==(t=r.find((function(t){return t.recKey===e.recKey})))?void 0:t.serveLimit.toString())||"0"})}},{key:"doToggleStatus",value:function(){"A"===this.state.statusFlg?this.setState({statusFlg:"B"}):this.setState({statusFlg:"A"})}},{key:"doSubmit",value:function(){var e=this.state.selectedMenu,t=[];t.push({text:"Yes",handleText:"doLimitMenu"}),this.setState({overlayAlertInputValue:{title:S.a.get("action"),subtitle:"Limit Menu",text:"Limit "+e.menuName+"?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"doLimitMenu",value:function(e){var t=this,r=(this.props.navigation,this.state),n=r.home,a=r.settings,l=(r.privileges,r.serviceEntry),o=r.selectedMenu,s=r.statusFlg,i=r.serveLimit,c=l+"api/update-restmenu-serve",d={userId:n.userId,orgId:n.orgId,shopId:n.shopId,restmenuRecKey:o.recKey,statusFlg:s,serveLimit:i};this.setState({loading:!0}),fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post update-restmenu-serve"),"Y"===a.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(l,"Limit Menu",n.userName,e.message,"",o.menuName,i+","+s),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):t.setState({loading:!1,displayMode:"ALL",menus:e,availableMenus:e},(function(){return t.doGet()}))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.menus,n=(t.availableMenus,t.searchText,[]);this.setState({searchText:e,displayMode:"ALL"});var a=e.toUpperCase();n=r,e?(n=n.filter((function(e){return e.menuName.toUpperCase().includes(a)||e.menuId.toUpperCase().includes(a)})),this.setState({availableMenus:n})):this.setState({availableMenus:n})}},{key:"handlePressDisplayMode",value:function(){var e=this.state,t=e.displayMode,r=e.menus,n=(e.availableMenus,e.limiteds);"LIMITED ONLY"===t?this.setState({availableMenus:r,searchText:"",displayMode:"ALL"}):"ALL"===t&&this.setState({availableMenus:r.filter((function(e){return n.some((function(t){return t.recKey===e.recKey}))})),searchText:"",displayMode:"LIMITED ONLY"})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,a=r.serviceEntry,l=r.settings;if(e){var o=a+"api/super-user",s={locId:n.locId,accessCode:e,priId:"UPDATEMENU"};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),"Y"===l.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(a,"Request Access UPDATEMENU",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.doLimitMenu(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"doLimitMenu"===e&&this.doLimitMenu()}},{key:"renderItem",value:function(e){var t=this,r=this.state.limiteds.find((function(t){return t.recKey===e.recKey}));return Object(Q.jsxs)(M.default,{style:jn.grid,onPress:function(){return t.doSelectMenu(e)},children:[Object(Q.jsxs)(g.default,{style:jn.gridFirst,children:[Object(Q.jsx)(g.default,{style:jn.gridFirstLeft,children:Object(Q.jsx)(J.default,{style:jn.gridFirstLeftText,children:e.menuId})}),Object(Q.jsx)(g.default,{style:jn.gridFirstRight,children:"A"===e.statusFlg?Object(Q.jsx)(J.default,{style:[jn.gridFirstRightText,{color:te.reserved}],children:"ACTIVE"}):Object(Q.jsx)(J.default,{style:[jn.gridFirstRightText,{color:te.paid}],children:"INACTIVE"})})]}),Object(Q.jsx)(g.default,{style:jn.gridSecond,children:Object(Q.jsx)(J.default,{style:jn.gridSecondText,children:e.menuName})}),Object(Q.jsxs)(g.default,{style:jn.gridThird,children:[Object(Q.jsx)(g.default,{style:jn.gridThirdLeft,children:r&&Object(Q.jsxs)(J.default,{style:{fontFamily:"varela-round",color:te.vacant,fontSize:12},children:["LIMIT ",r.serveLimit," SERVED ",r.serveCount]})}),Object(Q.jsx)(g.default,{style:jn.gridThirdRight,children:Object(Q.jsxs)(J.default,{style:jn.gridThirdRightText,children:["$",e.listPrice.toFixed(2)]})})]})]})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,a=r.availableMenus,l=r.selectedMenu,o=r.searchText,s=r.displayMode,i=r.overlayRequestAccessVisible,c=r.overlayProcedureMessageVisible,d=r.overlayAlertVisible,u=r.overlayAlertInputValue,f=r.loading,h=r.statusFlg,y=r.serveLimit;return console.log("in activate"),Object(Q.jsxs)(g.default,{style:jn.container,children:[d&&Object(Q.jsx)(St,{input:u,handleUpdateFromAlert:this.handleUpdateFromAlert}),c&&Object(Q.jsx)(se,{text:c,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),i&&Object(Q.jsx)(Ge,{home:n,requestedPrivilege:"UPDATEMENU",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),Object(Q.jsxs)(g.default,{style:jn.leftContainer,children:[Object(Q.jsx)(g.default,{style:jn.navigateContainer,children:Object(Q.jsxs)(g.default,{style:jn.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:jn.button,onPress:function(){return t.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:jn.buttonText,children:S.a.get("back")})]}),Object(Q.jsx)(g.default,{style:jn.selectionContainer})]})}),Object(Q.jsx)(g.default,{style:jn.displayContainer,children:Object(Q.jsxs)(g.default,{style:[jn.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:jn.gap}),Object(Q.jsxs)(g.default,{style:jn.gridContainer,children:[Object(Q.jsxs)(g.default,{style:jn.searchBox,children:[Object(Q.jsx)(N.default,{style:jn.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:o,onChangeText:function(t){return e.handleSearchText(t)}}),Object(Q.jsx)(M.default,{style:jn.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),Re.default.dismiss()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsxs)(g.default,{style:jn.searchBoxInfo,children:[Object(Q.jsx)(M.default,{style:jn.searchBoxInfoLeft,onPress:function(){return e.handlePressDisplayMode()},children:Object(Q.jsx)(J.default,{style:jn.searchBoxInfoText,children:s})}),Object(Q.jsx)(g.default,{style:jn.searchBoxInfoRight,children:Object(Q.jsxs)(J.default,{style:jn.searchBoxInfoText,children:[a.length," ITEMS"]})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},data:a,showsVerticalScrollIndicator:!1,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return e.renderItem(r)}})]}),Object(Q.jsx)(g.default,{style:jn.gap})]})})]}),Object(Q.jsxs)(g.default,{style:jn.rightContainer,children:[Object(Q.jsx)(g.default,{style:jn.displayContainer,children:Object(Q.jsxs)(g.default,{style:[jn.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsx)(g.default,{style:jn.gap}),l&&Object(Q.jsxs)(g.default,{style:{flex:1,backgroundColor:te.grey3,borderRadius:5},children:[Object(Q.jsxs)(g.default,{style:{alignItems:"center",marginTop:10},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.paid,fontSize:16},children:l.menuId}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},children:l.menuName})]}),Object(Q.jsxs)(g.default,{style:jn.inputContainer,children:[Object(Q.jsxs)(g.default,{style:jn.inputRow,children:[Object(Q.jsx)(g.default,{style:jn.inputRowLeft,children:Object(Q.jsx)(J.default,{style:jn.inputRowLeftText,children:"Status"})}),Object(Q.jsx)(M.default,{style:jn.inputRowRight,onPress:function(){return e.doToggleStatus()},children:Object(Q.jsx)(J.default,{style:[jn.inputRowRightText,{color:"A"===h?te.reserved:te.paid}],children:"A"===h?"Active":"Inactive"})})]}),Object(Q.jsxs)(g.default,{style:jn.inputRow,children:[Object(Q.jsx)(g.default,{style:jn.inputRowLeft,children:Object(Q.jsx)(J.default,{style:jn.inputRowLeftText,children:"Limit"})}),Object(Q.jsx)(g.default,{style:jn.inputRowRight,children:Object(Q.jsx)(N.default,{style:jn.textInput,keyboardType:"numeric",selectTextOnFocus:!0,value:y,onChangeText:function(t){return e.setState({serveLimit:t})}})})]})]})]}),Object(Q.jsx)(g.default,{style:jn.gap})]})}),Object(Q.jsx)(g.default,{style:jn.navigateContainer,children:Object(Q.jsx)(g.default,{style:jn.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:[jn.button,!l&&{opacity:.2}],disabled:f||!l,onPress:function(){return e.doSubmit()},children:[Object(Q.jsx)(U.default,{name:"staro",color:"white",size:36}),Object(Q.jsx)(J.default,{style:jn.buttonText,children:S.a.get("update")})]})})})]})]})}}]),r}(b.Component),jn=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},inputContainer:{marginTop:30,marginHorizontal:5},inputRow:{flexDirection:"row",height:40,margin:5},inputRowLeft:{flex:1,paddingLeft:10,justifyContent:"center"},inputRowRight:{flex:1,backgroundColor:te.grey1,borderRadius:5,justifyContent:"center",alignItems:"flex-end"},inputRowLeftText:{color:"white",fontFamily:"varela-round",fontSize:16},inputRowRightText:{paddingHorizontal:10,color:"white",fontFamily:"varela-round",fontSize:16},textInput:{paddingHorizontal:10,flex:1,width:"100%",textAlign:"right",color:"white",fontFamily:"varela-round",fontSize:16}});function xn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var vn=function(e){d()(r,e);var t=xn(r);function r(e){var n;return o()(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,selectedTable:e.route.params.selectedTable,tableItems:e.route.params.tableItems,kitchenmsgs:e.route.params.masters.kitchenmsgs,kottypes:e.route.params.masters.kottypes,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,remark:"",selectedTableItems:[],selectedKottypes:[],selectedKitchenmsg:null,overlayRequestPrivilegeVisible:!1,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:""},n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind(D()(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind(D()(n)),n}return i()(r,[{key:"componentDidMount",value:function(){}},{key:"doReset",value:function(){Re.default.dismiss(),this.setState({selectedKitchenmsg:null,selectedKottypes:[],selectedTableItems:[],remark:""})}},{key:"doPressFire",value:function(){var e=this.state;e.selectedKottypes,e.selectedTableItems,e.remark;this.doSubmit()}},{key:"doPressKitchenmsg",value:function(e){var t,r=this.state,n=r.selectedKitchenmsg,a=r.kottypes;(null==n?void 0:n.recKey)===(null==e?void 0:e.recKey)?this.setState({selectedKitchenmsg:null,remark:"",selectedKottypes:[]}):this.setState({selectedKitchenmsg:e,remark:e.name,selectedKottypes:(null==(t=e.kotTypes)?void 0:t.split(",").map((function(e){return a.find((function(t){return t.kotType===e}))})))||[]})}},{key:"doPressTableItem",value:function(e){var t=this.state.selectedTableItems,r=t;t.some((function(t){return t.recKey===e.recKey}))?r=t.filter((function(t){return t.recKey!==e.recKey})):r.push(e),this.setState({selectedTableItems:r})}},{key:"doPressKottype",value:function(e){var t=this.state.selectedKottypes,r=t;t.some((function(t){return t.recKey===e.recKey}))?r=t.filter((function(t){return t.recKey!==e.recKey})):r.push(e),this.setState({selectedKottypes:r})}},{key:"doPressAllKottype",value:function(){var e=this.state,t=e.selectedKottypes,r=e.kottypes;r.some((function(e){return!t.some((function(t){return t.recKey===e.recKey}))}))?this.setState({selectedKottypes:r}):this.setState({selectedKottypes:[]})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"doSubmit"===e&&this.doSubmit()}},{key:"doSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,a=r.home,l=r.selectedTable,o=(r.masters,r.settings),s=r.selectedKitchenmsg,i=r.selectedTableItems,c=r.selectedKottypes,d=r.remark,u=n+"api/tables/"+l.recKey+"/fire-kot",f={userId:a.userId,opentableRecKey:l.recKey,remark:d,kotTypes:c.map((function(e){return e.kotType})).join(","),opentableItemRecKeys:i.map((function(e){return e.recKey})).join(","),msgId:null==s?void 0:s.msgId};console.log(f),fetch(u,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(r){console.log("post fire-kot successful",r),"Y"===o.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Fire Course",a.userName,r.message,l.tableId,"",d+" ("+i.map((function(e){return e.menuId})).join(",")+") ("+c.map((function(e){return e.kotType})).join(",")+")"),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):t.goBack()}))}},{key:"render",value:function(){var e,t=this,r=this.props.navigation,n=this.state,a=(n.home,n.remark),l=n.kottypes,o=n.kitchenmsgs,s=n.tableItems,i=n.selectedKitchenmsg,c=n.selectedTableItems,d=n.selectedKottypes,u=n.overlayProcedureMessageVisible,f=n.overlayAlertVisible,h=n.overlayAlertInputValue;return Object(Q.jsxs)(g.default,{style:Tn.container,children:[f&&Object(Q.jsx)(St,{input:h,handleUpdateFromAlert:this.handleUpdateFromAlert}),u&&Object(Q.jsx)(se,{text:u,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsxs)(g.default,{style:Tn.leftContainer,children:[Object(Q.jsx)(g.default,{style:Tn.navigateContainer,children:Object(Q.jsxs)(g.default,{style:Tn.navigateWrapper,children:[Object(Q.jsxs)(M.default,{style:Tn.navigateButton,onPress:function(){return r.goBack()},children:[Object(Q.jsx)(U.default,{name:"left",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Tn.navigateButtonText,children:S.a.get("back")})]}),Object(Q.jsx)(g.default,{style:Tn.selectionContainer})]})}),Object(Q.jsx)(g.default,{style:Tn.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Tn.displayWrapper,{paddingRight:5}],children:[Object(Q.jsx)(g.default,{style:Tn.gap}),Object(Q.jsxs)(g.default,{style:Tn.gridContainer,children:[Object(Q.jsxs)(g.default,{style:Tn.searchBox,children:[Object(Q.jsx)(N.default,{style:Tn.searchBoxInputValue,placeholder:"ENTER MESSAGE",placeholderTextColor:"rgba(255,255,255,0.2)",value:a,onChangeText:function(e){return t.setState({remark:e})}}),Object(Q.jsx)(M.default,{style:Tn.searchBoxButton,onPress:function(){return t.doReset()},children:Object(Q.jsx)(U.default,{name:"close",size:24,color:te.grey4})})]}),Object(Q.jsx)(g.default,{style:Tn.searchBoxInfo,children:Object(Q.jsx)(g.default,{style:Tn.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:Tn.titleText,children:"Desc"})})}),Object(Q.jsx)(Ie.default,{style:{flex:1,marginHorizontal:2.5},showsVerticalScrollIndicator:!1,data:o,numColumns:2,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var r=e.item;return Object(Q.jsx)(M.default,{style:[Tn.tableItemContainer,{marginHorizontal:2.5},(null==i?void 0:i.recKey)===(null==r?void 0:r.recKey)&&{backgroundColor:te.occupied}],onPress:function(){return t.doPressKitchenmsg(r)},children:Object(Q.jsx)(g.default,{style:Tn.tableItemSecondContainer,children:Object(Q.jsx)(J.default,{style:Tn.tableItemText,children:r.name})})})}})]}),Object(Q.jsx)(g.default,{style:Tn.gap})]})})]}),Object(Q.jsxs)(g.default,{style:Tn.rightContainer,children:[Object(Q.jsx)(g.default,{style:Tn.displayContainer,children:Object(Q.jsxs)(g.default,{style:[Tn.displayWrapper,{paddingLeft:5}],children:[Object(Q.jsx)(g.default,{style:Tn.gap}),Object(Q.jsxs)(g.default,{style:Tn.gridContainer,children:[Object(Q.jsxs)(g.default,{style:Tn.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:Tn.titleFirstContainer,children:Object(Q.jsx)(J.default,{style:Tn.titleText,children:"Qty"})}),Object(Q.jsx)(g.default,{style:Tn.titleSecondContainer,children:Object(Q.jsx)(J.default,{style:Tn.titleText,children:"Desc"})}),Object(Q.jsx)(g.default,{style:Tn.titleThirdContainer,children:Object(Q.jsx)(J.default,{style:Tn.titleText,children:"Price"})}),Object(Q.jsx)(g.default,{style:Tn.titleFourthContainer,children:Object(Q.jsx)(J.default,{style:Tn.titleText,children:"Total"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:s,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var r=e.item;return Object(Q.jsxs)(M.default,{style:[Tn.tableItemContainer,c.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:te.occupied},r.refRecKey&&{opacity:.2}],disabled:!!r.refRecKey,onPress:function(){return t.doPressTableItem(r)},children:[Object(Q.jsx)(g.default,{style:[Tn.tableItemFirstContainer,"Y"===r.fireFlg&&{borderRightColor:te.reserved}],children:Object(Q.jsx)(J.default,{style:Tn.tableItemText,children:r.orderQty})}),Object(Q.jsxs)(g.default,{style:Tn.tableItemSecondContainer,children:[Object(Q.jsxs)(J.default,{style:Tn.tableItemText,children:[r.refRecKey?"- ":null,r.menuName]}),r.menuMod?Object(Q.jsx)(J.default,{style:Tn.tableItemModText,children:r.menuMod}):null]}),Object(Q.jsx)(g.default,{style:Tn.tableItemThirdContainer,children:Object(Q.jsx)(J.default,{style:Tn.tableItemText,children:r.netPrice&&r.netPrice.toFixed(2)})}),Object(Q.jsx)(g.default,{style:Tn.tableItemFourthContainer,children:Object(Q.jsx)(J.default,{style:Tn.tableItemText,children:r.lineTotal&&r.lineTotal.toFixed(2)})})]})}})]}),Object(Q.jsx)(g.default,{style:Tn.gap}),Object(Q.jsxs)(g.default,{style:Tn.gridContainer,children:[Object(Q.jsxs)(g.default,{style:Tn.searchBoxInfo,children:[Object(Q.jsx)(g.default,{style:{paddingLeft:10,alignItems:"center",justifyContent:"center"},children:Object(Q.jsx)(J.default,{style:Tn.titleText,children:"Destination"})}),Object(Q.jsx)(g.default,{style:Tn.titleFourthContainer,children:d.length>1?Object(Q.jsx)(J.default,{style:[Tn.titleText,{color:"white"}],children:"Various"}):1===d.length?Object(Q.jsx)(J.default,{style:[Tn.titleText,{color:"white"}],children:null==l||null==(e=l.find((function(e){return e.kotType===d[0].kotType})))?void 0:e.kotName}):Object(Q.jsx)(J.default,{style:[Tn.titleText,{color:"white"}],children:"-"})})]}),Object(Q.jsx)(Ie.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},ListHeaderComponent:Object(Q.jsx)(M.default,{style:[Tn.tableItemContainer,!l.some((function(e){return!d.some((function(t){return t.recKey===e.recKey}))}))&&{backgroundColor:te.occupied}],onPress:function(){return t.doPressAllKottype()},children:Object(Q.jsx)(g.default,{style:Tn.tableItemSecondContainer,children:Object(Q.jsx)(J.default,{style:Tn.tableItemText,children:"ALL KOT PRINTERS"})})}),renderItem:function(e){var r=e.item;return Object(Q.jsx)(M.default,{style:[Tn.tableItemContainer,d.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:te.occupied}],onPress:function(){return t.doPressKottype(r)},children:Object(Q.jsxs)(g.default,{style:[Tn.tableItemSecondContainer,{flexDirection:"row",justifyContent:"space-between",paddingRight:10,alignItems:"center"}],children:[Object(Q.jsx)(J.default,{style:Tn.tableItemText,children:r.kotName}),Object(Q.jsx)(J.default,{style:Tn.tableItemText,children:r.kotType})]})})}})]}),Object(Q.jsx)(g.default,{style:Tn.gap})]})}),Object(Q.jsx)(g.default,{style:Tn.navigateContainer,children:Object(Q.jsx)(g.default,{style:Tn.navigateWrapper,children:Object(Q.jsxs)(M.default,{style:[Tn.navigateButton,(0===c.length&&0===d.length||!a)&&{opacity:.2}],disabled:0===c.length&&0===d.length||!a,onPress:function(){return t.doPressFire()},children:[Object(Q.jsx)(U.default,{name:"customerservice",color:"white",size:36}),Object(Q.jsx)(J.default,{style:Tn.navigateButtonText,children:S.a.get("fire")})]})})})]})]})}}]),r}(b.Component),Tn=m.default.create({container:{flex:1,flexDirection:"row",backgroundColor:te.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:te.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:te.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:te.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:te.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:te.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:te.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},navigateButton:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},navigateButtonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:te.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:te.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:te.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:te.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:te.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:te.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){P()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function In(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Cn=function(e){d()(r,e);var t=In(r);function r(e){var n,a,l,s,i,c;return o()(this,r),(c=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,preference:e.route.params.preference,masters:e.route.params.masters,settings:e.route.params.masters.settings,modBundles:e.route.params.masters.modBundles,mods:e.route.params.masters.mods,selectedTable:e.route.params.selectedTable,selectedMenu:e.route.params.selectedMenu,selectedTableItem:e.route.params.selectedTableItem,comboGroups:e.route.params.masters.comboGroups.filter((function(t){return t.refMenuId===e.route.params.selectedMenu.menuId})),comboItems:e.route.params.masters.comboItems.filter((function(t){return t.refMenuId===e.route.params.selectedMenu.menuId})),selectedComboItems:[],selectedComboItem:null,loading:!1,menuName:e.route.params.selectedTableItem?null==(n=e.route.params.selectedTableItem)?void 0:n.menuName:e.route.params.selectedMenu.menuName,qtyInput:(null==(a=e.route.params.selectedTableItem)||null==(l=a.orderQty)?void 0:l.toString())||"1",orderType:e.route.params.selectedTableItem?(null==(s=e.route.params.selectedTableItem)?void 0:s.orderType)||"A":"SYS"===(null==(i=e.route.params.selectedTable)?void 0:i.sectionId)?"B":"A"},c.handleUpdateFromProcedureMessage=c.handleUpdateFromProcedureMessage.bind(D()(c)),c.handleUpdateFromAlert=c.handleUpdateFromAlert.bind(D()(c)),c}return i()(r,[{key:"componentDidMount",value:function(){console.log("mount menu",this.state.comboItems),this.doPrepareComboItems()}},{key:"doPrepareComboItems",value:function(){var e=this.state.comboItems.map((function(e){return Sn(Sn({},e),{},{modInput:"",modRecKeys:[]})}));this.setState({comboItems:e})}},{key:"doComboItemModInput",value:function(e){var t=this.state,r=t.comboItems,n=t.selectedComboItem,a=r;a.find((function(e){return e.recKey===n.recKey})).modInput=e,this.setState({comboItems:a})}},{key:"doPressComboItem",value:function(e){var t=this.state.selectedComboItems,r=t;t.some((function(t){return t.recKey===e.recKey}))?(r=t.filter((function(t){return t.recKey!==e.recKey})),this.setState({selectedComboItems:r,selectedComboItem:null})):(r.push(e),this.setState({selectedComboItems:r,selectedComboItem:e}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.state;t.selectedTable,t.selectedTableItem;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"doValidateQty",value:function(e){!e||isNaN(e)?this.setState({qtyInput:"0"}):this.setState({qtyInput:e})}},{key:"doChangeQty",value:function(e){var t=this.state.qtyInput,r=Number(t);if("PLUS"===e)this.setState({qtyInput:(r+1).toString()});else if("MINUS"===e){if(r<=1)return;this.setState({qtyInput:(r-1).toString()})}}},{key:"doToggleOrderType",value:function(){var e=this.state,t=e.orderType,r=e.comboItems;"A"===t?(r.forEach((function(e){e.modInput=e.modInput.replace("*"+S.a.get("takeaway")+"  ",""),e.modInput="*"+S.a.get("takeaway")+"  "+e.modInput})),this.setState({orderType:"B",comboItems:r})):(r.forEach((function(e){e.modInput=e.modInput.replace("*"+S.a.get("takeaway")+"  ","")})),this.setState({orderType:"A",comboItems:r}))}},{key:"doPressModBundle",value:function(e){this.setState({selectedModBundle:e})}},{key:"doPressMod",value:function(e){var t=this.state,r=t.selectedModBundle,n=t.selectedComboItem,a=t.comboItems,l=a.find((function(e){return e.recKey===n.recKey})).modInput,o=a.find((function(e){return e.recKey===n.recKey})).modRecKeys;"A"===r.modmas.modType?a.find((function(e){return e.recKey===n.recKey})).modRecKeys.some((function(t){return t===e.recKey.toString()}))?(l=l.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))):(l+="*"+e.name+"  ",o.push(e.recKey.toString())):(r.moditems.forEach((function(e){l=l.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))})),a.find((function(e){return e.recKey===n.recKey})).modRecKeys.some((function(t){return t===e.recKey.toString()}))||(l+="*"+e.name+"  ",o.push(e.recKey.toString())));var s=a;s.find((function(e){return e.recKey===n.recKey})).modInput=l,s.find((function(e){return e.recKey===n.recKey})).modRecKeys=o,this.setState({comboItems:s})}},{key:"doSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,a=r.home,l=r.selectedTable,o=r.selectedMenu,s=r.selectedTableItem,i=(r.mods,r.masters,r.settings),c=(r.modBundles,r.comboGroups),d=r.comboItems,u=r.selectedComboItems,f=r.menuName,h=r.qtyInput,y=r.orderType;if(l)if("SYS"===l.sectionId||"C"===l.statusFlg)if(s){var b=n+"api/tables/"+l.recKey+"/update-combo",p={opentableRecKey:l.recKey,userId:a.userId,restmenuRecKey:o.recKey,orderQty:h,orderType:y,menuName:f,itemPayloads:u.map((function(e){return{combogroupRecKey:c.find((function(t){return t.groupNo===e.groupNo})).recKey,comboitemRecKey:e.recKey,restmenuMod:d.find((function(t){return t.recKey===e.recKey})).modInput,modRecKeys:d.find((function(t){return t.recKey===e.recKey})).modRecKeys.join(","),orderQty:h,orderType:y}}))};fetch(b,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(p)}).then((function(e){return e.json()})).then((function(r){"Y"===i.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Update Item",a.userName,r.message,l.tableId,f),console.log("post update-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else{var m=n+"api/tables/"+l.recKey+"/insert-combo",g={opentableRecKey:l.recKey,userId:a.userId,restmenuRecKey:o.recKey,orderQty:h,orderType:y,menuName:f,itemPayloads:u.map((function(e){return{combogroupRecKey:c.find((function(t){return t.groupNo===e.groupNo})).recKey,comboitemRecKey:e.recKey,restmenuMod:d.find((function(t){return t.recKey===e.recKey})).modInput,modRecKeys:d.find((function(t){return t.recKey===e.recKey})).modRecKeys.join(","),orderQty:h,orderType:y}}))};fetch(m,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(g)}).then((function(e){return e.json()})).then((function(r){"Y"===i.find((function(e){return"BISTRODEBUG"===e.setId})).setString&&ee(n,"Insert Item",a.userName,r.message,l.tableId,f),console.log("post insert-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else this.setState({overlayProcedureMessageVisible:"CHECK TABLE STATUS",loading:!1});else this.setState({overlayProcedureMessageVisible:"MISSING TABLE",loading:!1})}},{key:"render",value:function(){var e,t,r=this,n=this.props,a=n.navigation,l=(n.route,this.state),o=l.loading,s=l.preference,i=l.home,c=l.selectedMenu,d=(l.selectedTableItem,l.masters),u=l.mods,f=l.modBundles,h=l.selectedModBundle,y=l.menuName,b=l.qtyInput,p=l.orderType,m=l.comboGroups,j=l.comboItems,x=(l.selectedComboItems,l.selectedComboItem),v=l.overlayProcedureMessageVisible,T=l.overlayAlertVisible,O=l.overlayAlertInputValue;return Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",backgroundColor:"rgba(0,0,0,0.9)"},children:[T&&Object(Q.jsx)(St,{input:O,handleUpdateFromAlert:this.handleUpdateFromAlert}),v&&Object(Q.jsx)(se,{text:v,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),Object(Q.jsx)(g.default,{style:{width:10}}),Object(Q.jsx)(g.default,{style:{flex:1},children:x&&Object(Q.jsx)(g.default,{style:{flex:1,marginVertical:10,marginLeft:0,backgroundColor:te.grey2,borderRadius:5},children:Object(Q.jsxs)(g.default,{style:{flex:1,margin:5,backgroundColor:te.grey4},children:[Object(Q.jsxs)(g.default,{style:{alignItems:"center",marginVertical:10},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.paid,fontSize:16},children:x.menuId}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},numberOfLines:2,children:x.menuName})]}),Object(Q.jsx)(N.default,{style:Fn.modifierTextInput,multiline:!0,placeholder:"CHOOSE FROM PREDEFINED MODIFIERS OR ENTER TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:j.find((function(e){return e.recKey===x.recKey})).modInput,onChangeText:function(e){return r.doComboItemModInput(e)}}),Object(Q.jsxs)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[(null==u?void 0:u.filter((function(e){return e.menuId===c.menuId})).length)>0&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(g.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:te.grey2},children:Object(Q.jsx)(J.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:te.grey7},children:"MENU SPECIFIC MODIFIER"})}),Object(Q.jsx)(g.default,{style:Fn.modContainer,children:null==u||null==(e=u.filter((function(e){return e.menuId===c.menuId})))||null==(t=e.map((function(e){return f.find((function(t){return t.modmas.modId===e.modId}))})))?void 0:t.map((function(e){return Object(Q.jsx)(M.default,{style:[Fn.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:te.paid}],onPress:function(){return r.doPressModBundle(e)},children:Object(Q.jsx)(J.default,{style:Fn.modText,children:e.modmas.name})},e.modmas.recKey.toString())}))})]}),Object(Q.jsx)(g.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:te.grey2},children:Object(Q.jsx)(J.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:te.grey7},children:"GLOBAL MODIFIER"})}),Object(Q.jsx)(g.default,{style:Fn.modContainer,children:null==f?void 0:f.filter((function(e){return"Y"===e.modmas.globalFlg})).map((function(e){return Object(Q.jsx)(M.default,{style:[Fn.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:te.paid}],onPress:function(){return r.doPressModBundle(e)},children:Object(Q.jsx)(J.default,{style:Fn.modText,children:e.modmas.name})},e.modmas.recKey.toString())}))})]}),Object(Q.jsxs)(g.default,{style:{flex:1,backgroundColor:te.grey4},children:[Object(Q.jsx)(g.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:te.grey2},children:Object(Q.jsx)(J.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:te.grey7},children:"OPTIONS"})}),Object(Q.jsx)(me.default,{contentContainerStyle:{flexGrow:1,alignItems:"flex-end",justifyContent:"center"},showsVerticalScrollIndicator:!1,children:null==h?void 0:h.moditems.map((function(e){var t,n;return Object(Q.jsxs)(M.default,{style:[Fn.modButton,{margin:10},(null==(t=j.find((function(e){return e.recKey===x.recKey})))?void 0:t.modRecKeys.some((function(t){return t===e.recKey.toString()})))&&{backgroundColor:te.occupied}],onPress:function(){return r.doPressMod(e)},children:[Object(Q.jsx)(J.default,{style:Fn.modText,children:e.name}),0!==e.listPrice&&Object(Q.jsxs)(J.default,{style:{position:"absolute",top:-15,right:10,fontFamily:"varela-round",color:te.reserved,fontSize:20},children:[e.listPrice<0?"":"+",null==(n=e.listPrice)?void 0:n.toFixed(2)]})]},e.recKey.toString())}))})]})]})})}),Object(Q.jsx)(g.default,{style:{flex:2},children:Object(Q.jsxs)(g.default,{style:{flex:1,flexDirection:"row",padding:5},children:[Object(Q.jsx)(g.default,{style:{flex:1,margin:5,backgroundColor:te.grey2,borderRadius:5},children:Object(Q.jsxs)(g.default,{style:{flex:1,margin:5,marginBottom:0,backgroundColor:te.grey4},children:[Object(Q.jsxs)(g.default,{style:{alignItems:"center",marginTop:10},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.paid,fontSize:16},children:c.menuId}),Object(Q.jsx)(N.default,{style:{height:50,width:"90%",fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},editable:"Y"===i.adminFlg||d.privileges.some((function(e){return"EDITITEM"===e.priId})),multiline:!0,blurOnSubmit:!0,value:y,onChangeText:function(e){return r.setState({menuName:e})}})]}),Object(Q.jsxs)(g.default,{style:Fn.menuQtyRow,children:[Object(Q.jsx)(M.default,{style:Fn.menuQtyRowFirst,onPress:function(){return r.doChangeQty("MINUS")},children:Object(Q.jsx)(U.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),Object(Q.jsx)(g.default,{style:Fn.menuQtyRowSecond,children:Object(Q.jsx)(N.default,{style:Fn.qtyTextInput,value:b,keyboardType:"numeric",onChangeText:function(e){return r.doValidateQty(e)}})}),Object(Q.jsx)(M.default,{style:Fn.menuQtyRowThird,onPress:function(){return r.doChangeQty("PLUS")},children:Object(Q.jsx)(U.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),Object(Q.jsx)(me.default,{style:{flex:1,backgroundColor:te.grey2,paddingBottom:5},showsVerticalScrollIndicator:!1,children:m.map((function(e){return Object(Q.jsxs)(g.default,{children:[Object(Q.jsx)(g.default,{style:{height:20,justifyContent:"center",alignItems:"center"},children:Object(Q.jsx)(J.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white"},children:e.groupName})}),Object(Q.jsx)(Ie.default,{style:{margin:-2.5},showsVerticalScrollIndicator:!1,data:j.filter((function(t){return t.groupNo===e.groupNo})),numColumns:s.mcolsize,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(e){var t=e.item;return r.renderComboItem(t)}})]},e.recKey.toString())}))})]})}),Object(Q.jsx)(g.default,{style:{margin:5,width:120},children:Object(Q.jsxs)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,alwaysBounceVertical:!1,children:[Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:80,marginVertical:5}}),Object(Q.jsxs)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"A"===p?te.grey3:te.paid,borderRadius:5,marginVertical:5},onPress:function(){return r.doToggleOrderType()},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:"A"===p?S.a.get("dinein"):S.a.get("takeaway")}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",fontSize:10},children:"ORDER TYPE"})]}),Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:o,onPress:function(){return r.setState({loading:!0},(function(){return r.doSubmit()}))},children:Object(Q.jsx)(U.default,{name:"check",size:28,color:te.grey4})}),Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:te.grey3,borderRadius:5,marginVertical:5},onPress:function(){return r.doChangeQty("PLUS")},children:Object(Q.jsx)(U.default,{name:"plus",size:26,color:"white"})}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:te.grey3,borderRadius:5,marginVertical:5},onPress:function(){return r.doChangeQty("MINUS")},children:Object(Q.jsx)(U.default,{name:"minus",size:32,color:"white"})}),Object(Q.jsx)(g.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),Object(Q.jsx)(M.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:o,onPress:function(){return a.goBack()},children:Object(Q.jsx)(U.default,{name:"close",size:26,color:te.grey4})})]})})]})})]})}},{key:"renderComboItem",value:function(e){var t,r=this,n=this.state,a=n.preference,l=n.selectedComboItems.some((function(t){return t.recKey===e.recKey}));return Object(Q.jsx)(g.default,{style:{flex:1/a.mcolsize},children:Object(Q.jsxs)(g.default,{style:[{margin:2.5,flexDirection:"row",height:90,backgroundColor:l?te.occupied:te.grey4}],children:[Object(Q.jsx)(M.default,{style:{width:50,backgroundColor:l?"rgba(0,0,0,0.4)":te.grey3,justifyContent:"center",alignItems:"center"},onPress:function(){return r.setState({selectedComboItem:e})},children:Object(Q.jsx)(U.default,{name:"ellipsis1",size:18,color:"black"})}),Object(Q.jsxs)(M.default,{style:{flex:1,padding:10},onPress:function(){return r.doPressComboItem(e)},children:[Object(Q.jsxs)(g.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"white",fontSize:12}}),Object(Q.jsxs)(J.default,{style:[{fontFamily:"varela-round",fontSize:12,color:0===Number(e.addonPrice)?"transparent":l?"white":te.reserved}],children:["+",null==(t=e.addonPrice)?void 0:t.toFixed(2)]})]}),Object(Q.jsx)(g.default,{style:{flex:1},children:Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:"white"},numberOfLines:2,children:e.menuName})}),Object(Q.jsxs)(g.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:te.vacant,fontSize:12,textTransform:"uppercase"}}),Object(Q.jsx)(J.default,{style:{fontFamily:"varela-round",color:l?"white":te.paid,fontSize:12},children:e.menuId})]})]})]})})}}]),r}(b.Component),Fn=m.default.create({modifierTextInput:{fontFamily:"varela-round",fontSize:20,color:"white",paddingHorizontal:20,height:120,backgroundColor:te.grey3},menuQtyRow:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},menuQtyRowFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginRight:10},menuQtyRowSecond:{flex:1,justifyContent:"center",alignItems:"center"},menuQtyRowThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:10},qtyTextInput:{fontFamily:"varela-round",fontSize:32,width:"100%",color:"white",textAlign:"center"},modContainer:{padding:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center",backgroundColor:te.grey4},modButton:{paddingHorizontal:20,minHeight:32,justifyContent:"center",borderRadius:16,backgroundColor:te.grey2,margin:5},modText:{fontFamily:"varela-round",color:"white",fontSize:20}});function Pn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y()(e);if(t){var a=y()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var Rn=Object(v.default)(),wn=function(e){d()(n,e);var t=Pn(n);function n(){var e;o()(this,n);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0},e}return i()(n,[{key:"componentDidMount",value:function(){var e=a()((function*(){var e={zhs:r(467),zht:r(468),en:r(469),ja:r(470)},t=yield I.default.getItem("language");yield S.a.init({currentLocale:t||"en",locales:e}),yield T.loadAsync({"varela-round":r(471)}),"web"!==j.default.OS&&C.BarCodeScanner.getPermissionsAsync().then((function(e){return"granted"!==e.status?C.BarCodeScanner.requestPermissionsAsync():Promise.resolve(e)})),this.setState({loading:!1})}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?Object(Q.jsx)(g.default,{}):Object(Q.jsxs)(x.default,{children:[Object(Q.jsx)(p.StatusBar,{hidden:!0}),Object(Q.jsxs)(Rn.Navigator,{screenOptions:{headerShown:!1,animation:"none",gestureEnabled:!1},children:[Object(Q.jsx)(Rn.Screen,{name:"Login",component:be,options:be.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Preference",component:kt,options:kt.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Main",component:Pt,options:Pt.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Pos",component:pr,options:pr.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Split",component:Nt,options:Nt.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Void",component:qr,options:qr.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Collect",component:Xr,options:Xr.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Transfer",component:Lr,options:Lr.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Resequence",component:Mr,options:Mr.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Reprint",component:Ur,options:Ur.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Report",component:Er,options:Er.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Printer",component:Cr,options:Cr.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Dayclose",component:Or,options:Or.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Adhoc",component:xr,options:xr.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Scan",component:on,options:on.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Trace",component:fn,options:fn.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Activate",component:bn,options:bn.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Limit",component:gn,options:gn.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Table",component:_r,options:_r.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Fire",component:vn,options:vn.navigationOptions}),Object(Q.jsx)(Rn.Screen,{name:"Menu",component:nn,options:{presentation:"transparentModal"}}),Object(Q.jsx)(Rn.Screen,{name:"Combo",component:Cn,options:{presentation:"transparentModal"}})]})]})}}]),n}(b.Component);m.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},374:function(e,t,r){e.exports=r(474)},378:function(e,t){},402:function(e,t){},416:function(e,t,r){var n={"./af":161,"./af.js":161,"./ar":162,"./ar-dz":163,"./ar-dz.js":163,"./ar-kw":164,"./ar-kw.js":164,"./ar-ly":165,"./ar-ly.js":165,"./ar-ma":166,"./ar-ma.js":166,"./ar-sa":167,"./ar-sa.js":167,"./ar-tn":168,"./ar-tn.js":168,"./ar.js":162,"./az":169,"./az.js":169,"./be":170,"./be.js":170,"./bg":171,"./bg.js":171,"./bm":172,"./bm.js":172,"./bn":173,"./bn-bd":174,"./bn-bd.js":174,"./bn.js":173,"./bo":175,"./bo.js":175,"./br":176,"./br.js":176,"./bs":177,"./bs.js":177,"./ca":178,"./ca.js":178,"./cs":179,"./cs.js":179,"./cv":180,"./cv.js":180,"./cy":181,"./cy.js":181,"./da":182,"./da.js":182,"./de":183,"./de-at":184,"./de-at.js":184,"./de-ch":185,"./de-ch.js":185,"./de.js":183,"./dv":186,"./dv.js":186,"./el":187,"./el.js":187,"./en-au":188,"./en-au.js":188,"./en-ca":189,"./en-ca.js":189,"./en-gb":190,"./en-gb.js":190,"./en-ie":191,"./en-ie.js":191,"./en-il":192,"./en-il.js":192,"./en-in":193,"./en-in.js":193,"./en-nz":194,"./en-nz.js":194,"./en-sg":195,"./en-sg.js":195,"./eo":196,"./eo.js":196,"./es":197,"./es-do":198,"./es-do.js":198,"./es-mx":199,"./es-mx.js":199,"./es-us":200,"./es-us.js":200,"./es.js":197,"./et":201,"./et.js":201,"./eu":202,"./eu.js":202,"./fa":203,"./fa.js":203,"./fi":204,"./fi.js":204,"./fil":205,"./fil.js":205,"./fo":206,"./fo.js":206,"./fr":207,"./fr-ca":208,"./fr-ca.js":208,"./fr-ch":209,"./fr-ch.js":209,"./fr.js":207,"./fy":210,"./fy.js":210,"./ga":211,"./ga.js":211,"./gd":212,"./gd.js":212,"./gl":213,"./gl.js":213,"./gom-deva":214,"./gom-deva.js":214,"./gom-latn":215,"./gom-latn.js":215,"./gu":216,"./gu.js":216,"./he":217,"./he.js":217,"./hi":218,"./hi.js":218,"./hr":219,"./hr.js":219,"./hu":220,"./hu.js":220,"./hy-am":221,"./hy-am.js":221,"./id":222,"./id.js":222,"./is":223,"./is.js":223,"./it":224,"./it-ch":225,"./it-ch.js":225,"./it.js":224,"./ja":226,"./ja.js":226,"./jv":227,"./jv.js":227,"./ka":228,"./ka.js":228,"./kk":229,"./kk.js":229,"./km":230,"./km.js":230,"./kn":231,"./kn.js":231,"./ko":232,"./ko.js":232,"./ku":233,"./ku.js":233,"./ky":234,"./ky.js":234,"./lb":235,"./lb.js":235,"./lo":236,"./lo.js":236,"./lt":237,"./lt.js":237,"./lv":238,"./lv.js":238,"./me":239,"./me.js":239,"./mi":240,"./mi.js":240,"./mk":241,"./mk.js":241,"./ml":242,"./ml.js":242,"./mn":243,"./mn.js":243,"./mr":244,"./mr.js":244,"./ms":245,"./ms-my":246,"./ms-my.js":246,"./ms.js":245,"./mt":247,"./mt.js":247,"./my":248,"./my.js":248,"./nb":249,"./nb.js":249,"./ne":250,"./ne.js":250,"./nl":251,"./nl-be":252,"./nl-be.js":252,"./nl.js":251,"./nn":253,"./nn.js":253,"./oc-lnc":254,"./oc-lnc.js":254,"./pa-in":255,"./pa-in.js":255,"./pl":256,"./pl.js":256,"./pt":257,"./pt-br":258,"./pt-br.js":258,"./pt.js":257,"./ro":259,"./ro.js":259,"./ru":260,"./ru.js":260,"./sd":261,"./sd.js":261,"./se":262,"./se.js":262,"./si":263,"./si.js":263,"./sk":264,"./sk.js":264,"./sl":265,"./sl.js":265,"./sq":266,"./sq.js":266,"./sr":267,"./sr-cyrl":268,"./sr-cyrl.js":268,"./sr.js":267,"./ss":269,"./ss.js":269,"./sv":270,"./sv.js":270,"./sw":271,"./sw.js":271,"./ta":272,"./ta.js":272,"./te":273,"./te.js":273,"./tet":274,"./tet.js":274,"./tg":275,"./tg.js":275,"./th":276,"./th.js":276,"./tk":277,"./tk.js":277,"./tl-ph":278,"./tl-ph.js":278,"./tlh":279,"./tlh.js":279,"./tr":280,"./tr.js":280,"./tzl":281,"./tzl.js":281,"./tzm":282,"./tzm-latn":283,"./tzm-latn.js":283,"./tzm.js":282,"./ug-cn":284,"./ug-cn.js":284,"./uk":285,"./uk.js":285,"./ur":286,"./ur.js":286,"./uz":287,"./uz-latn":288,"./uz-latn.js":288,"./uz.js":287,"./vi":289,"./vi.js":289,"./x-pseudo":290,"./x-pseudo.js":290,"./yo":291,"./yo.js":291,"./zh-cn":292,"./zh-cn.js":292,"./zh-hk":293,"./zh-hk.js":293,"./zh-mo":294,"./zh-mo.js":294,"./zh-tw":295,"./zh-tw.js":295};function a(e){var t=l(e);return r(t)}function l(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=l,e.exports=a,a.id=416},467:function(e){e.exports=JSON.parse('{"accesscode":"\u767b\u5f55\u4ee3\u7801","A":"\u7a7a\u684c","B":"\u5df2\u4fdd\u7559","C":"\u7528\u9910\u4e2d","D":"\u5df2\u7ed3\u8d26","E":"\u505c\u7528","action":"\u52a8\u4f5c","cancel":"\u53d6\u6d88","qty":"\u6570\u91cf","desc":"\u63cf\u8ff0","price":"\u5355\u4ef7","total":"\u5c0f\u8ba1","back":"\u8fd4\u56de","retail":"\u96f6\u552e","takeaway":"\u5e26\u8d70","dinein":"\u5802\u98df","menu":"\u83dc\u5355","payment":"\u4ed8\u6b3e","floorplan":"\u5e73\u9762\u56fe","func":"\u529f\u80fd","send":"\u53d1\u9001","fire":"\u50ac\u5355","adhoc":"\u7279\u8bbe","type":"\u7c7b\u578b","scan":"\u626b\u63cf","barcode":"\u6761\u7801","submit":"\u63d0\u4ea4","bill":"\u8d26\u5355","firecourse":"\u901a\u544a\u53a8\u5e08","course":"\u81b3\u9053","beverage":"\u996e\u6599","soup":"\u6c64","appetizer":"\u5f00\u80c3\u83dc","main":"\u4e3b\u83dc","dessert":"\u751c\u54c1","sales":"\u9500\u552e","deposit":"\u5b9a\u91d1","choose":"\u9009\u62e9","select":"\u9009\u62e9","printer":"\u6253\u5370\u673a","left":"\u5269","press":"\u70b9\u51fb","default":"\u9ed8\u8ba4","all":"\u5168\u90e8","void":"\u5220\u5355","reopen":"\u91cd\u5f00","test":"\u6d4b\u8bd5","collect":"\u63d0\u53d6","update":"\u66f4\u65b0","preference":"\u503e\u5411","yes":"\u662f","transfer":"\u8f6c\u79fb","online":"\u5728\u7ebf","offline":"\u4e0b\u7ebf","user":"\u7528\u6237","combo":"\u5957\u9910","print":"\u6253\u5370","active":"\u6d3b\u8dc3","inactive":"\u975e\u6d3b\u8dc3","enter":"\u8f93\u5165","search":"\u641c\u7d22","text":"\u5b57\u6bb5","add":"Add","no":"No","table":"\u684c\u53f7","open":"\u5f00\u684c","edit":"\u7f16\u8f91","close":"\u5173\u95ed","reset":"\u91cd\u7f6e","reserve":"\u4fdd\u7559","disable":"\u505c\u7528","mergetable":"\u5e76\u684c","splittable":"\u62c6\u684c","changetable":"\u6362\u684c","printbill":"\u8d26\u5355","resequence":"\u6392\u5e8f","transferitems":"\u8f6c\u79fb\u9879\u76ee","headerdisc":"\u6574\u5355\u6298\u6263","item":"\u9879\u76ee","reviseitem":"\u7f16\u8f91\u9879\u76ee","remove":"\u79fb\u9664","duplicate":"\u590d\u5236","changeprice":"\u4fee\u6539\u5355\u4ef7","linedisc":"\u6298\u6263","revert":"\u5f52\u8fd8","linebreak":"\u5212\u7ebf\u5206\u5272","tips":"\u5c0f\u8d39","drawer":"\u6536\u94f6\u673a","splitbill":"\u5206\u5f00\u7ed3\u8d26","mergebill":"\u5408\u5e76\u7ed3\u8d26","unsplit":"\u64a4\u6d88\u62c6\u5206","unmerge":"\u64a4\u6d88\u5408\u5e76","beforedisc":"\u5c0f\u8ba1","totaldisc":"\u6298\u6263","servicecharge":"\u670d\u52a1\u8d39","grandtotal":"\u603b\u8ba1","tax":"\u6d88\u8d39\u7a0e","pay":"\u5e94\u4ed8\u91d1\u989d","balance":"\u4f59\u989d","tender":"\u5b9e\u6536\u91d1\u989d","change":"\u627e\u96f6","additionalfunctions":"\u989d\u5916\u529f\u80fd","reprint":"\u91cd\u5370","voidreceipts":"\u5220\u5355","collection":"\u63d0\u53d6","opendrawer":"\u6253\u5f00\u6536\u94f6\u673a","testprint":"\u6d4b\u8bd5\u6253\u5370","dayend":"\u65e5\u7ed3","reports":"\u62a5\u8868","activate":"\u542f\u52a8\u83dc\u5355","syncmasters":"\u540c\u6b65\u6570\u636e","logout":"\u767b\u51fa","trace":"\u8ffd\u8e2a","limited":"\u9650\u5b9a\u83dc\u5355"}')},468:function(e){e.exports=JSON.parse('{"accesscode":"\u767b\u9304\u865f\u78bc","A":"\u7a7a\u684c","B":"\u5df2\u4fdd\u7559","C":"\u7528\u9910\u4e2d","D":"\u5df2\u7d50\u8cec","E":"\u505c\u7528","action":"\u52d5\u4f5c","cancel":"\u53d6\u6d88","qty":"\u6578\u91cf","desc":"\u63cf\u8ff0","price":"\u55ae\u50f9","total":"\u5c0f\u8a08","back":"\u8fd4\u56de","retail":"\u96f6\u552e","takeaway":"\u5e26\u8d70","dinein":"\u5802\u98df","menu":"\u83dc\u55ae","payment":"\u4ed8\u6b3e","floorplan":"\u5e73\u9762\u5716","func":"\u529f\u80fd","send":"\u767c\u9001","fire":"\u50ac\u55ae","adhoc":"\u7279\u8a2d","type":"\u985e\u578b","scan":"\u6383\u63cf","barcode":"\u689d\u78bc","submit":"\u63d0\u4ea4","bill":"\u8cec\u55ae","firecourse":"\u901a\u544a\u5eda\u5e2b","course":"\u81b3\u9053","beverage":"\u98f2\u6599","soup":"\u6e6f","appetizer":"\u958b\u80c3\u83dc","main":"\u4e3b\u83dc","dessert":"\u751c\u54c1","sales":"\u92b7\u552e","deposit":"\u8a02\u91d1","choose":"\u9078\u64c7","select":"\u9078\u64c7","printer":"\u6253\u5370\u6a5f","left":"\u5269","press":"\u9ede\u64ca","default":"\u9ed8\u8a8d","all":"\u5168\u90e8","void":"\u5220\u55ae","reopen":"\u91cd\u958b","test":"\u6e2c\u8a66","collect":"\u63d0\u53d6","update":"\u66f4\u65b0","preference":"\u50be\u5411","yes":"\u662f","transfer":"\u8f49\u79fb","online":"\u5728\u7dab","offline":"\u4e0b\u7dab","user":"\u7528\u6237","combo":"\u5957\u9910","print":"\u6253\u5370","active":"\u6d3b\u8e8d","inactive":"\u975e\u6d3b\u8e8d","enter":"\u8f38\u5165","search":"\u641c\u7d22","text":"\u5b57\u6bb5","add":"Add","no":"No","table":"\u684c\u865f","open":"\u958b\u684c","edit":"\u7de8\u8f2f","close":"\u95dc\u9589","reset":"\u91cd\u7f6e","reserve":"\u4fdd\u7559","disable":"\u505c\u7528","mergetable":"\u62fc\u684c","splittable":"\u62c6\u684c","changetable":"\u8f49\u684c","printbill":"\u8cec\u55ae","resequence":"\u6392\u5e8f","transferitems":"\u8f49\u79fb\u9805\u76ee","headerdisc":"\u6574\u55ae\u6298\u6263","item":"\u9805\u76ee","reviseitem":"\u7de8\u5236\u9805\u76ee","remove":"\u79fb\u9664","duplicate":"\u8907\u88fd","changeprice":"\u4fee\u6539\u55ae\u50f9","linedisc":"\u6298\u6263","revert":"\u6b78\u9084","linebreak":"","tips":"\u5c0f\u8cbb","drawer":"\u6536\u9280\u6a5f","splitbill":"\u5206\u958b\u7d50\u8cec","mergebill":"\u5408\u62fc\u7d50\u8cec","unsplit":"\u64a4\u6d88\u62c6\u5206","unmerge":"\u64a4\u6d88\u5408\u62fc","beforedisc":"\u5c0f\u8a08","totaldisc":"\u6298\u6263","servicecharge":"\u670d\u52d9\u8cbb","grandtotal":"\u7e3d\u8a08","tax":"\u6d88\u8cbb\u7a05","pay":"\u61c9\u4ed8\u91d1\u984d","balance":"\u9918\u984d","tender":"\u5be6\u6536\u91d1\u984d","change":"\u627e\u96f6","additionalfunctions":"\u984d\u5916\u529f\u80fd","reprint":"\u91cd\u5370","voidreceipts":"\u5220\u55ae","collection":"\u63d0\u53d6","opendrawer":"\u6253\u958b\u6536\u9280\u6a5f","testprint":"\u6e2c\u8a66\u6253\u5370","dayend":"\u65e5\u7ed3","reports":"\u5831\u8868","activate":"\u5553\u52d5\u83dc\u55ae","syncmasters":"\u540c\u6b65\u6578\u64da","logout":"\u767b\u51fa","trace":"\u8ffd\u8e2a","limited":"\u9650\u5b9a\u83dc\u55ae"}')},469:function(e){e.exports=JSON.parse('{"accesscode":"Access Code","A":"Vacant","B":"Reserved","C":"Occupied","D":"Paid","E":"Unavailable","action":"Action","cancel":"Cancel","qty":"Qty","desc":"Desc","price":"Price","total":"Total","back":"Back","retail":"Retail","takeaway":"Take Away","dinein":"Dine In","menu":"Menu","payment":"Payment","floorplan":"Floor Plan","func":"Func","send":"Send","fire":"Fire","adhoc":"Adhoc","type":"Type","scan":"Scan","barcode":"Barcode","submit":"Submit","bill":"Bill","firecourse":"Fire Course","course":"Course","beverage":"Beverage","soup":"Soup","appetizer":"Appetizer","main":"Main","dessert":"Dessert","sales":"Sales","deposit":"Deposit","choose":"Choose","select":"Select","printer":"Printer","left":"Left","press":"Press","default":"Default","all":"All","void":"Void","reopen":"Reopen","test":"Test","collect":"Collect","update":"Update","preference":"Preference","yes":"Yes","transfer":"Transfer","online":"Online","offline":"Offline","user":"User","combo":"Combo","print":"Print","active":"Active","inactive":"Inactive","enter":"Enter","search":"Search","text":"Text","add":"Add","no":"No","table":"Table","open":"Open","edit":"Edit","close":"Close","reset":"Reset","reserve":"Reserve","disable":"Disable","mergetable":"Merge Table","splittable":"Split Table","changetable":"Change Table","printbill":"Print Bill","resequence":"Resequence","transferitems":"Transfer Items","headerdisc":"Header Disc","item":"Item","reviseitem":"Revise Item","remove":"Remove","duplicate":"Duplicate","changeprice":"Change Price","linedisc":"Line Disc","revert":"Revert","linebreak":"Line Break","tips":"Tips","drawer":"Drawer","splitbill":"Split Bill","mergebill":"Merge Bill","unsplit":"Undo Split","unmerge":"Undo Merge","beforedisc":"Before Disc","totaldisc":"Total Disc","servicecharge":"Service Charge","grandtotal":"Grand Total","tax":"Tax","pay":"Pay","balance":"Balance","tender":"Tender","change":"Change","additionalfunctions":"Additional Functions","reprint":"Reprint","voidreceipts":"Void Receipts","collection":"Collection","opendrawer":"Open Drawer","testprint":"Test Printer","dayend":"Day-end","reports":"Reports","activate":"Activate","syncmasters":"Sync Masters","logout":"Log Out","trace":"Trace","limited":"Limited"}')},470:function(e){e.exports=JSON.parse('{"accesscode":"\u30d1\u30b9","A":"\u7a7a\u5ba4","B":"\u4e88\u7d04\u3057\u305f","C":"\u6709\u4eba","D":"\u6709\u7d66\u306e","E":"\u7121\u52b9","action":"\u64cd\u4f5c","cancel":"\u53d6\u6d88","qty":"\u6570\u91cf","desc":"\u53d9\u8ff0","price":"\u4fa1\u683c","total":"\u5408\u8a08","back":"\u8fd4\u3059","retail":"\u5c0f\u58f2","takeaway":"\u6301\u3061\u53bb\u308b","dinein":"\u3067\u98df\u3079\u308b","menu":"\u30e1\u30cb\u30e5\u30fc","payment":"\u652f\u6255","floorplan":"\u9593\u53d6\u308a","func":"\u50cd\u304d","send":"\u51fa\u3059","fire":"\u4fc3\u3059","adhoc":"\u81e8\u6642","type":"\u7a2e\u985e","scan":"\u30b9\u30ad\u30e3\u30f3","barcode":"\u30d0\u30fc\u30b3\u30fc\u30c9","submit":"\u78ba\u8a8d","bill":"\u4ed8\u3051","firecourse":"\u30d5\u30a1\u30a4\u30e4\u30fc\u30b3\u30fc\u30b9","course":"\u30b3\u30fc\u30b9","beverage":"\u98f2\u6599","soup":"\u30b9\u30fc\u30d7","appetizer":"\u524d\u83dc","main":"\u4e3b\u83dc","dessert":"\u751c\u54c1","sales":"\u9500\u552e","deposit":"\u5b9a\u91d1","choose":"\u9078\u3076","select":"\u9078\u3076","printer":"\u30d7\u30ea\u30f3\u30bf\u30fc","left":"\u5269","press":"\u62bc\u3059","default":"\u65e2\u5b9a","all":"\u5168","void":"\u53d6\u6d88","reopen":"\u518d\u958b","test":"\u30c6\u30b9\u30c8","collect":"\u63d0\u53d6","update":"\u66f4\u65b0","preference":"\u597d\u307f","yes":"\u306f\u3044","transfer":"\u79fb\u884c","online":"\u30aa\u30f3\u30e9\u30a4\u30f3","offline":"\u30aa\u30d5\u30e9\u30a4\u30f3","user":"\u4f7f\u7528\u8005","combo":"\u5957\u9910","print":"\u5370\u5237","active":"\u6d3b\u6027\u306a","inactive":"\u975e\u6d3b\u6027","enter":"\u30a8\u30f3\u30bf\u30fc","search":"\u63a2\u3059","text":"\u672c\u6587","add":"Add","no":"No","table":"\u5353","open":"\u958b\u3044\u305f","edit":"\u7de8\u96c6","close":"\u9078\u3076","reset":"\u30ea\u30bb\u30c3\u30c8","reserve":"\u4e88\u7d04","disable":"\u3067\u304d\u306a\u304f\u3059\u308b","mergetable":"\u5e76\u684c","splittable":"\u62c6\u684c","changetable":"\u6362\u684c","printbill":"\u4ed8\u3051","resequence":"\u9806\u5e8f","transferitems":"\u79fb\u884c","headerdisc":"\u6574\u5355\u5272\u5f15","item":"\u9805\u76ee","reviseitem":"\u7de8\u96c6\u9805\u76ee","remove":"\u9664\u304f","duplicate":"\u8907\u88fd","changeprice":"\u4fa1\u683c\u5909\u66f4","linedisc":"\u9805\u76ee\u5272\u5f15","revert":"\u623b\u3059","linebreak":"\u6539\u884c","tips":"\u30c1\u30c3\u30d7","drawer":"\u92ad\u7bb1","splitbill":"\u5206\u5f00\u7ed3\u8d26","mergebill":"\u5408\u5e76\u7ed3\u8d26","unsplit":"\u64a4\u6d88\u62c6\u5206","unmerge":"\u64a4\u6d88\u5408\u5e76","beforedisc":"\u5c0f\u8ba1","totaldisc":"\u5272\u5f15","servicecharge":"\u30b5\u30fc\u30d3\u30b9\u6599","grandtotal":"\u7dcf\u8a08","tax":"\u7a0e","pay":"\u5165\u91d1","balance":"\u6b8b\u9ad8","tender":"\u5165\u672d","change":"\u5c0f\u92ad","additionalfunctions":"\u8ffd\u52a0\u6a5f\u80fd","reprint":"\u8ee2\u8f09","voidreceipts":"\u5220\u5355","collection":"\u63d0\u53d6","opendrawer":"\u92ad\u7bb1","testprint":"\u6d4b\u8bd5\u6253\u5370","dayend":"\u65e5\u5e30\u308a","reports":"\u30ec\u30dd\u30fc\u30c8","activate":"\u6d3b\u6027\u5316","syncmasters":"\u540c\u671f\u3059\u308b","logout":"\u767b\u51fa","trace":"\u75d5\u8de1","limited":"\u9650\u5b9a\u30e1\u30cb\u30e5\u30fc"}')},471:function(e,t,r){e.exports=r.p+"./fonts/VarelaRound-Regular.ttf"}},[[374,1,2]]]);
//# sourceMappingURL=app.8dcf35f0.chunk.js.map