(()=>{var e={2791:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>jn});var n=r(5861),l=r(5671),a=r(3144),o=r(136),i=r(2963),s=r(1120),d=r(9526),c=r(3292),u=r(4333),f=r(1133),h=r(7132),y=r(5693),g=r(9125),m=r(2361),p=r(7904),x=r(5519),v=r(7367),b=r(4942),j=r(3433),T=r(9439),S=r(7326),I=r(5738),C=r(3034),F=r(2640),R=r(1451),P=r(9899),w=r(3497),k=r(8859),E=r(6337),B=r(9950),D=r(4365),U=r(5987),A=r(9233),O=r(7557),V=["style","children"];function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,b.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e){var t,r,n=e.style,l=e.children,a=(0,U.default)(e,V),o=n;return Array.isArray(n)&&(o={},n.forEach((function(e){o=Object.assign(o,e)}))),(0,O.jsx)(A.default,z(z({style:z(z({},o),{},{fontSize:(null==(t=o)?void 0:t.fontSize)||14,fontFamily:(null==(r=o)?void 0:r.fontFamily)||"varela-round"})},a),{},{children:l}))}function K(e,t,r,n,l,a,o){fetch(e+"api/debug/",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({msg1:t,msg2:r,msg3:n,msg4:l,msg5:a,msg6:o})})}const L={vacant:"#30BEAE",reserved:"#FFB86F",occupied:"#2A79A8",paid:"#E84855",unavailable:"#424549",adhoc:"#7a4988",deposit:"#d65c91",grey1:"#23272A",grey2:"#2C2F33",grey3:"#36393E",grey4:"#424549",grey5:"#99aab5",grey7:"#E3E5E8",grey8:"#EBEDEF",grey9:"#F2F3F5",size:"web"===h.default.OS?5:4,black8:"#000000aa",white8:"#ffffffcc"},G=r.p+"static/media/logo-small-light.2b420db167ebc1d82406.png";var H=r(6105),Y=r.n(H);function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var q=function(e){(0,o.default)(r,e);var t=W(r);function r(e){return(0,l.default)(this,r),t.call(this,e)}return(0,a.default)(r,[{key:"render",value:function(){var e=this;return console.log("in overlayproceduremessage",this.props),(0,O.jsx)(f.default,{style:J.overlay,children:(0,O.jsxs)(f.default,{style:J.overlayContent,children:[(0,O.jsxs)(f.default,{style:J.overlayHeader,children:[(0,O.jsx)(A.default,{style:J.overlayTitleText,children:"WARNING"}),(0,O.jsx)(A.default,{style:[J.overlaySubtitleText,{color:L.paid}],children:"Procedure Message"}),(0,O.jsx)(A.default,{style:J.overlayText,children:this.props.text.toUpperCase()})]}),(0,O.jsx)(R.default,{style:J.overlayOption,onPress:function(){return e.props.handleUpdateFromProcedureMessage("")},children:(0,O.jsx)(A.default,{style:J.overlayOptionText,children:"OK"})})]})})}}]),r}(d.Component),J=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:3,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var X=function(e){(0,o.default)(r,e);var t=Q(r);function r(e){return(0,l.default)(this,r),t.call(this,e)}return(0,a.default)(r,[{key:"render",value:function(){var e=this;return console.log("in overlaylanguage",this.props),(0,O.jsx)(f.default,{style:$.overlay,children:(0,O.jsxs)(f.default,{style:$.overlayContent,children:[(0,O.jsxs)(f.default,{style:$.overlayHeader,children:[(0,O.jsx)(A.default,{style:$.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:$.overlaySubtitleText,children:"Language \u8bed\u8a00 \u30e9\u30f3\u30b2\u30fc\u30b8"})]}),(0,O.jsxs)(f.default,{style:$.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:$.button,onPress:function(){return e.props.handleUpdateFromLanguage("en")},children:[(0,O.jsx)(A.default,{style:{marginTop:5,color:"white",fontFamily:"varela-round",fontSize:24},children:"Aa"}),(0,O.jsx)(A.default,{style:[$.buttonText],children:"ENGLISH"})]}),(0,O.jsxs)(R.default,{style:$.button,onPress:function(){return e.props.handleUpdateFromLanguage("zhs")},children:[(0,O.jsx)(A.default,{style:{color:"white",fontFamily:"varela-round",fontSize:24},children:"\u7b80\u4f53"}),(0,O.jsx)(A.default,{style:[$.buttonText],children:"\u7b80\u4f53\u4e2d\u6587"})]})]}),(0,O.jsxs)(f.default,{style:$.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:$.button,onPress:function(){return e.props.handleUpdateFromLanguage("zht")},children:[(0,O.jsx)(A.default,{style:{color:"white",fontFamily:"varela-round",fontSize:24},children:"\u7e41\u9ad4"}),(0,O.jsx)(A.default,{style:$.buttonText,children:"\u7e41\u9ad4\u4e2d\u6587"})]}),(0,O.jsxs)(R.default,{style:$.button,onPress:function(){return e.props.handleUpdateFromLanguage("ja")},children:[(0,O.jsx)(A.default,{style:{color:"white",fontFamily:"varela-round",fontSize:24},children:"\u65e5\u672c\u8a9e"}),(0,O.jsx)(A.default,{style:$.buttonText,children:"\u65e5\u672c\u8a9e"})]})]}),(0,O.jsx)(R.default,{style:[$.overlayOption,{backgroundColor:L.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromLanguage("")},children:(0,O.jsx)(A.default,{style:$.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),$=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}}),_=r(8576);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var ee=function(e){(0,o.default)(r,e);var t=Z(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={input:e.input},n}return(0,a.default)(r,[{key:"render",value:function(){var e=this,t=this.state.input;return console.log("in overlayalert",this.props),(0,O.jsx)(f.default,{style:te.overlay,children:(0,O.jsxs)(f.default,{style:te.overlayContent,children:[(0,O.jsxs)(f.default,{style:te.overlayHeader,children:[(0,O.jsx)(A.default,{style:te.overlayTitleText,children:null==t?void 0:t.title}),(0,O.jsx)(A.default,{style:te.overlaySubtitleText,children:null==t?void 0:t.subtitle}),(0,O.jsx)(A.default,{style:te.overlayText,children:null==t?void 0:t.text})]}),(null==t?void 0:t.ok)&&(0,O.jsx)(R.default,{style:te.overlayOption,onPress:function(){return e.props.handleUpdateFromAlert("")},children:(0,O.jsx)(A.default,{style:te.overlayOptionText,children:"OK"})}),null!=t&&t.options?null==t?void 0:t.options.map((function(t){return(0,O.jsx)(R.default,{style:te.overlayOption,onPress:function(){return e.props.handleUpdateFromAlert(t.handleText)},children:(0,O.jsx)(A.default,{style:te.overlayOptionText,children:t.text})},t.handleText)})):null,(null==t?void 0:t.cancel)&&(0,O.jsx)(R.default,{style:[te.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromAlert("")},children:(0,O.jsx)(A.default,{style:te.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),te=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{margin:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var ne=function(e){(0,o.default)(r,e);var t=re(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={preference:null,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:""},n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=(0,n.default)((function*(){var e=yield x.default.getItem("preference");e&&(e=JSON.parse(e),this.setState({preference:e}))}));return function(){return e.apply(this,arguments)}}()},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"doReset"===e&&this.doReset()}},{key:"doPressReset",value:function(){var e=[];e.push({text:p.default.get("yes"),handleText:"doReset"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:p.default.get("reset")+" "+p.default.get("preference"),text:"Reset all to factory preset?",ok:!1,cancel:!0,options:e},overlayAlertVisible:!0})}},{key:"doReset",value:function(){var e={tcolsize:"web"===h.default.OS?5:4,mcolsize:"web"===h.default.OS?3:2,pcolsize:"web"===h.default.OS?5:3,mquick:"Y",dsecondary:"N",usecondary:""};this.setState({preference:e}),x.default.setItem("preference",JSON.stringify(e))}},{key:"doTcolsize",value:function(){var e=this.state.preference;e.tcolsize<8?e.tcolsize=e.tcolsize+1:e.tcolsize=3,this.setState({preference:e}),x.default.setItem("preference",JSON.stringify(e))}},{key:"doMcolsize",value:function(){var e=this.state.preference;e.mcolsize<6?e.mcolsize=e.mcolsize+1:e.mcolsize=1,this.setState({preference:e}),x.default.setItem("preference",JSON.stringify(e))}},{key:"doPcolsize",value:function(){var e=this.state.preference;e.pcolsize<7?e.pcolsize=e.pcolsize+1:e.pcolsize=2,this.setState({preference:e}),x.default.setItem("preference",JSON.stringify(e))}},{key:"doMquick",value:function(){var e=this.state.preference;"Y"===e.mquick?e.mquick="N":e.mquick="Y",this.setState({preference:e}),x.default.setItem("preference",JSON.stringify(e))}},{key:"doDsecondary",value:function(){var e=this.state.preference;"N"===e.dsecondary?e.dsecondary="Y":e.dsecondary="N",this.setState({preference:e}),x.default.setItem("preference",JSON.stringify(e))}},{key:"doUsecondary",value:function(e){var t=this.state.preference;t.usecondary=e,this.setState({preference:t}),x.default.setItem("preference",JSON.stringify(t))}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.preference,l=r.overlayProcedureMessageVisible,a=r.overlayAlertVisible,o=r.overlayAlertInputValue;return console.log("render preference"),(0,O.jsxs)(f.default,{style:le.container,children:[a&&(0,O.jsx)(ee,{input:o,handleUpdateFromAlert:this.handleUpdateFromAlert}),l&&(0,O.jsx)(q,{text:l,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsxs)(f.default,{style:le.leftContainer,children:[(0,O.jsx)(f.default,{style:le.navigateContainer,children:(0,O.jsxs)(f.default,{style:le.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:le.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:le.buttonText,children:p.default.get("back")})]}),(0,O.jsx)(f.default,{style:le.selectionContainer})]})}),(0,O.jsx)(f.default,{style:le.displayContainer,children:(0,O.jsxs)(f.default,{style:[le.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:le.gap}),(0,O.jsxs)(f.default,{style:le.gridContainer,children:[(0,O.jsx)(f.default,{style:le.gap}),(0,O.jsxs)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[(0,O.jsxs)(R.default,{style:le.grid,onPress:function(){return e.doTcolsize()},children:[(0,O.jsxs)(f.default,{style:le.gridFirst,children:[(0,O.jsx)(A.default,{style:le.gridFirstLeftText,children:"TCOLSIZE"}),(0,O.jsx)(A.default,{style:[le.gridFirstRightText],children:"3-8"})]}),(0,O.jsxs)(f.default,{style:le.gridSecond,children:[(0,O.jsx)(A.default,{style:le.gridSecondText,children:"Number of Columns for Table"}),(0,O.jsx)(A.default,{style:[le.gridSecondText,{color:L.reserved}],children:null==n?void 0:n.tcolsize})]}),(0,O.jsxs)(f.default,{style:le.gridThird,children:[(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}]}),"web"===h.default.OS&&5===(null==n?void 0:n.tcolsize)||"web"!==h.default.OS&&4===(null==n?void 0:n.tcolsize)?(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.vacant}],children:p.default.get("default")}):(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}],children:p.default.get("preference")})]})]}),(0,O.jsxs)(R.default,{style:le.grid,onPress:function(){return e.doPcolsize()},children:[(0,O.jsxs)(f.default,{style:le.gridFirst,children:[(0,O.jsx)(A.default,{style:le.gridFirstLeftText,children:"PCOLSIZE"}),(0,O.jsx)(A.default,{style:[le.gridFirstRightText],children:"2-7"})]}),(0,O.jsxs)(f.default,{style:le.gridSecond,children:[(0,O.jsx)(A.default,{style:le.gridSecondText,children:"Number of Columns for POS"}),(0,O.jsx)(A.default,{style:[le.gridSecondText,{color:L.reserved}],children:null==n?void 0:n.pcolsize})]}),(0,O.jsxs)(f.default,{style:le.gridThird,children:[(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}]}),"web"===h.default.OS&&5===(null==n?void 0:n.pcolsize)||"web"!==h.default.OS&&3===(null==n?void 0:n.pcolsize)?(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.vacant}],children:p.default.get("default")}):(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}],children:p.default.get("preference")})]})]}),(0,O.jsxs)(f.default,{style:le.grid,children:[(0,O.jsxs)(f.default,{style:le.gridFirst,children:[(0,O.jsx)(A.default,{style:le.gridFirstLeftText,children:"USECONDARY"}),(0,O.jsx)(A.default,{style:[le.gridFirstRightText]})]}),(0,O.jsxs)(f.default,{style:le.gridSecond,children:[(0,O.jsx)(A.default,{style:le.gridSecondText,children:"Secondary Display User"}),(0,O.jsx)(w.default,{style:[le.gridSecondText,{width:100,color:L.reserved,textAlign:"right"}],defaultValue:(null==n?void 0:n.usecondary)||"",onChangeText:function(t){return e.doUsecondary(t)}})]}),(0,O.jsxs)(f.default,{style:le.gridThird,children:[(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}]}),null!=n&&n.usecondary?(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}],children:p.default.get("preference")}):(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.vacant}],children:p.default.get("default")})]})]})]})]}),(0,O.jsx)(f.default,{style:le.gap})]})})]}),(0,O.jsxs)(f.default,{style:le.rightContainer,children:[(0,O.jsx)(f.default,{style:le.displayContainer,children:(0,O.jsxs)(f.default,{style:[le.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:le.gap}),(0,O.jsxs)(f.default,{style:le.gridContainer,children:[(0,O.jsx)(f.default,{style:le.gap}),(0,O.jsxs)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[(0,O.jsxs)(R.default,{style:le.grid,onPress:function(){return e.doMcolsize()},children:[(0,O.jsxs)(f.default,{style:le.gridFirst,children:[(0,O.jsx)(A.default,{style:le.gridFirstLeftText,children:"MCOLSIZE"}),(0,O.jsx)(A.default,{style:[le.gridFirstRightText],children:"1-6"})]}),(0,O.jsxs)(f.default,{style:le.gridSecond,children:[(0,O.jsx)(A.default,{style:le.gridSecondText,children:"Number of Columns for Menu"}),(0,O.jsx)(A.default,{style:[le.gridSecondText,{color:L.reserved}],children:null==n?void 0:n.mcolsize})]}),(0,O.jsxs)(f.default,{style:le.gridThird,children:[(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}]}),"web"===h.default.OS&&3===(null==n?void 0:n.mcolsize)||"web"!==h.default.OS&&2===(null==n?void 0:n.mcolsize)?(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.vacant}],children:p.default.get("default")}):(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}],children:p.default.get("preference")})]})]}),(0,O.jsxs)(R.default,{style:le.grid,onPress:function(){return e.doMquick()},children:[(0,O.jsxs)(f.default,{style:le.gridFirst,children:[(0,O.jsx)(A.default,{style:le.gridFirstLeftText,children:"MQUICK"}),(0,O.jsx)(A.default,{style:[le.gridFirstRightText],children:"Y/N"})]}),(0,O.jsxs)(f.default,{style:le.gridSecond,children:[(0,O.jsx)(A.default,{style:le.gridSecondText,children:"Quick Select for Menu"}),(0,O.jsx)(A.default,{style:[le.gridSecondText,{color:L.reserved}],children:null==n?void 0:n.mquick})]}),(0,O.jsxs)(f.default,{style:le.gridThird,children:[(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}]}),"Y"===(null==n?void 0:n.mquick)?(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.vacant}],children:p.default.get("default")}):(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}],children:p.default.get("preference")})]})]}),(0,O.jsxs)(R.default,{style:le.grid,onPress:function(){return e.doDsecondary()},children:[(0,O.jsxs)(f.default,{style:le.gridFirst,children:[(0,O.jsx)(A.default,{style:le.gridFirstLeftText,children:"DSECONDARY"}),(0,O.jsx)(A.default,{style:[le.gridFirstRightText],children:"Y/N"})]}),(0,O.jsxs)(f.default,{style:le.gridSecond,children:[(0,O.jsx)(A.default,{style:le.gridSecondText,children:"Acting Secondary Display"}),(0,O.jsx)(A.default,{style:[le.gridSecondText,{color:L.reserved}],children:null==n?void 0:n.dsecondary})]}),(0,O.jsxs)(f.default,{style:le.gridThird,children:[(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}]}),"N"===(null==n?void 0:n.dsecondary)?(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.vacant}],children:p.default.get("default")}):(0,O.jsx)(A.default,{style:[le.gridThirdRightText,{color:L.paid}],children:p.default.get("preference")})]})]})]})]}),(0,O.jsx)(f.default,{style:le.gap})]})}),(0,O.jsx)(f.default,{style:le.navigateContainer,children:(0,O.jsx)(f.default,{style:le.navigateWrapper,children:(0,O.jsxs)(R.default,{style:le.button,onPress:function(){return e.doPressReset()},children:[(0,O.jsx)(F.default,{name:"warning",color:"white",size:36}),(0,O.jsxs)(A.default,{style:le.buttonText,children:[p.default.get("reset")," ",p.default.get("all")]})]})})})]})]})}}]),r}(d.Component),le=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row",justifyContent:"space-between"},gridSecond:{marginVertical:5,flexDirection:"row",justifyContent:"space-between"},gridThird:{flexDirection:"row",justifyContent:"space-between"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round",textTransform:"uppercase"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,b.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var se=function(e){(0,o.default)(r,e);var t=ie(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={preference:null,language:"-",serviceEntry:"",serviceEntryObj:null,accessCode:"",password:"",userId:"",home:null,dev:!1},n.handleUpdateFromLanguage=n.handleUpdateFromLanguage.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=(0,n.default)((function*(){var e,t,r,n,l,a,o=this,i=this.props.navigation;this.sub=i.addListener("focus",this.didFocus.bind(this));var s=yield x.default.getItem("serviceEntry"),d=yield x.default.getItem("language"),c=yield x.default.getItem("preference");c&&(c=JSON.parse(c)),c={tcolsize:(null==(e=c)?void 0:e.tcolsize)||("web"===h.default.OS?5:4),mcolsize:(null==(t=c)?void 0:t.mcolsize)||("web"===h.default.OS?3:2),pcolsize:(null==(r=c)?void 0:r.pcolsize)||("web"===h.default.OS?5:3),mquick:(null==(n=c)?void 0:n.mquick)||"Y",dsecondary:(null==(l=c)?void 0:l.dsecondary)||"N",usecondary:(null==(a=c)?void 0:a.usecondary)||""},x.default.setItem("preference",JSON.stringify(c)),console.log("mounting service",s);var u=yield x.default.getItem("serviceEntryObj");u=u?JSON.parse(u):null,this.setState({preference:c,serviceEntry:s,language:d||"en",serviceEntryObj:u}),"Y"===c.dsecondary&&i.navigate("Secondary",{preference:c,serviceEntry:s,serviceEntryObj:u}),this.state.dev&&this.setState({accessCode:"qwe"},(function(){return o.doSubmitAccessCode()}))}));return function(){return e.apply(this,arguments)}}()},{key:"didFocus",value:function(){var e=(0,n.default)((function*(){var e,t=this.props.route,r=yield x.default.getItem("preference"),n=yield x.default.getItem("serviceEntry"),l=yield x.default.getItem("serviceEntryObj");r&&this.setState({preference:JSON.parse(r)}),l&&this.setState({serviceEntryObj:JSON.parse(l)}),this.setState({serviceEntry:n}),null!=(e=t.params)&&e.sync&&Y()(t.params.sync).diff(Y()(),"seconds")>-1?this.doSubmitAccessCode():this.state.dev||this.setState({accessCode:""})}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.sub()}},{key:"handleUpdateFromLanguage",value:function(e){this.setState({overlayLanguageVisible:!1}),e&&(p.default.options.currentLocale=e,x.default.setItem("language",e),this.setState({language:e}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"doPressDownload",value:function(){var e=this;k.default.alert("Download latest bistro app?","",[{text:"Cancel"},{text:"Ok",onPress:function(){return e.doDownload()}}])}},{key:"doDownload",value:function(){"ios"===h.default.OS&&B.openURL("itms-apps://itunes.apple.com/app/id6443468946")}},{key:"doSubmitPassword",value:function(){var e=this.state,t=e.serviceEntry+"api/login-shop",r={userId:e.userId,password:e.password};this.doLogIn(t,r)}},{key:"doSubmitAccessCode",value:function(){var e=this.state,t=e.serviceEntry+"api/login-shop",r={accessCode:e.accessCode};this.doLogIn(t,r)}},{key:"doLogIn",value:function(){var e=(0,n.default)((function*(e,t){var r=this,n=this.props.navigation,l=this.state.serviceEntry;fetch(e,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(console.log("post login",e),e.message)throw r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}),e;return r.setState({home:e}),Promise.all([x.default.setItem("home",JSON.stringify(e)),e])})).then((function(e){var t=(0,T.default)(e,2),r=(t[0],t[1]),n=[],a=l+"api/sections",o=new URLSearchParams;o.append("shopId",r.shopId);var i={url:a+="?"+o,nameString:"sections"};return n.push(i),a=l+"api/tablemas",(o=new URLSearchParams).append("shopId",r.shopId),i={url:a+="?"+o,nameString:"tablemas"},n.push(i),a=l+"api/foldergrps",(o=new URLSearchParams).append("orgId",r.orgId),o.append("shopId",r.shopId),i={url:a+="?"+o,nameString:"foldergrps"},n.push(i),a=l+"api/folders",(o=new URLSearchParams).append("shopId",r.shopId),o.append("orgId",r.orgId),i={url:a+="?"+o,nameString:"folders"},n.push(i),a=l+"api/menus",(o=new URLSearchParams).append("orgId",r.orgId),o.append("shopId",r.shopId),i={url:a+="?"+o,nameString:"menus"},n.push(i),a=l+"api/mods",(o=new URLSearchParams).append("orgId",r.orgId),i={url:a+="?"+o,nameString:"mods"},n.push(i),a=l+"api/mod-bundles",(o=new URLSearchParams).append("orgId",r.orgId),i={url:a+="?"+o,nameString:"modBundles"},n.push(i),a=l+"api/combo-items",(o=new URLSearchParams).append("orgId",r.orgId),i={url:a+="?"+o,nameString:"comboItems"},n.push(i),a=l+"api/combo-groups",(o=new URLSearchParams).append("orgId",r.orgId),i={url:a+="?"+o,nameString:"comboGroups"},n.push(i),a=l+"api/payment-methods",(o=new URLSearchParams).append("shopId",r.shopId),i={url:a+="?"+o,nameString:"paymentMethods"},n.push(i),i={url:a=l+"api/vip-sources",nameString:"vipSources"},n.push(i),a=l+"api/discounts",(o=new URLSearchParams).append("shopId",r.shopId),o.append("orgId",r.orgId),i={url:a+="?"+o,nameString:"discounts"},n.push(i),i={url:a=l+"api/returns",nameString:"returns"},n.push(i),a=l+"api/settings",(o=new URLSearchParams).append("appCode","RESTMENU"),o.append("orgId",r.orgId),i={url:a+="?"+o,nameString:"settings"},n.push(i),a=l+"api/privileges",(o=new URLSearchParams).append("userId",r.userId),o.append("locId",r.locId),i={url:a+="?"+o,nameString:"privileges"},n.push(i),a=l+"api/cashier-printers",(o=new URLSearchParams).append("shopId",r.shopId),i={url:a+="?"+o,nameString:"cashierPrinters"},n.push(i),a=l+"api/kottype",(o=new URLSearchParams).append("shopId",r.shopId),i={url:a+="?"+o,nameString:"kottypes"},n.push(i),a=l+"api/kitchenmsgs",(o=new URLSearchParams).append("orgId",r.orgId),o.append("shopId",r.shopId),i={url:a+="?"+o,nameString:"kitchenmsgs"},n.push(i),Promise.all((0,j.default)(n.map((function(e){return fetch(e.url).then((function(e){return e.json()})).then((function(t){return console.log("fetching",e.nameString,t),(0,b.default)({},e.nameString,t)}))}))))})).then((function(e){var t=e.reduce((function(e,t){return oe(oe({},e),{},(0,b.default)({},Object.keys(t)[0],Object.values(t)[0]))}),{});console.log("masters",t),n.navigate("Main",{masters:t,home:r.state.home,serviceEntryObj:r.state.serviceEntryObj,serviceEntry:r.state.serviceEntry,preference:r.state.preference})})).catch((function(e){console.log("error",e),r.setState({accessCode:""})}))}));return function(t,r){return e.apply(this,arguments)}}()},{key:"doPressKey",value:function(e){var t=this.state.accessCode+e;this.setState({accessCode:t})}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.navigation,l=(r.route,this.state),a=(l.preference,l.serviceEntryObj),o=l.serviceEntry,i=l.language,s=(l.userId,l.password,l.accessCode),d=l.overlayProcedureMessageVisible,c=l.overlayLanguageVisible;return(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row"},children:[c&&(0,O.jsx)(X,{handleUpdateFromLanguage:this.handleUpdateFromLanguage}),d&&(0,O.jsx)(q,{text:d,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsxs)(f.default,{style:{flex:1,backgroundColor:"white"},children:[(0,O.jsxs)(f.default,{style:{flex:2},children:[(0,O.jsx)(f.default,{style:{flex:1,flexDirection:"row",justifyContent:"space-between"},children:(0,O.jsxs)(f.default,{children:[(0,O.jsx)(R.default,{style:{margin:20,height:36,width:36,borderRadius:18,justifyContent:"center",alignItems:"center",backgroundColor:L.paid},onPress:function(){return n.navigate("Register")},children:(0,O.jsx)(I.default,{name:"ios-globe",size:24,color:L.grey1,style:{height:24,width:24,marginTop:-2}})}),(0,O.jsx)(R.default,{style:{marginHorizontal:20,height:36,width:36,borderRadius:18,justifyContent:"center",alignItems:"center",backgroundColor:L.reserved},onPress:function(){return n.navigate("Preference")},children:(0,O.jsx)(C.default,{name:"miscellaneous-services",size:24,color:L.grey1})}),"ios"===h.default.OS&&(0,O.jsx)(R.default,{style:{margin:20,height:36,width:36,borderRadius:18,justifyContent:"center",alignItems:"center",backgroundColor:L.occupied},onPress:function(){return t.doPressDownload()},children:(0,O.jsx)(F.default,{name:"clouddownload",size:24,color:L.grey1})})]})}),(0,O.jsxs)(f.default,{style:{margin:20,alignItems:"flex-end",justifyContent:"flex-end"},children:[(0,O.jsx)(N,{style:{color:L.paid},children:(null==a?void 0:a.name)||"Entry"}),(0,O.jsx)(N,{style:{fontSize:10,marginBottom:5,color:L.occupied},numberOfLines:1,children:o}),(0,O.jsx)(N,{style:{fontSize:18},children:"AN EXTENSION OF THE EPB SYSTEM"}),(0,O.jsxs)(N,{style:{fontSize:18},children:["VERSION ",null==(e=D.default.manifest.version)?void 0:e.split(".")[0]]})]})]}),(0,O.jsx)(P.default,{style:{flex:1,width:"100%"},source:G,resizeMode:"contain"})]}),(0,O.jsxs)(f.default,{style:{flex:1,backgroundColor:L.grey1,justifyContent:"center",alignItems:"center"},children:[(0,O.jsxs)(R.default,{style:{position:"absolute",right:20,top:20,minHeight:40,alignItems:"flex-end"},onPress:function(){return t.setState({overlayLanguageVisible:!0})},children:[(0,O.jsx)(N,{style:{color:"white",textTransform:"uppercase"},children:"ja"===i?"\u65e5\u672c\u8a9e":"zhs"===i?"\u7b80\u4f53\u4e2d\u6587":"zht"===i?"\u7e41\u9ad4\u4e2d\u6587":"EN"}),(0,O.jsx)(N,{style:{color:"white",fontSize:10},children:"LANGUAGE \u8bed\u8a00 \u30e9\u30f3\u30b2\u30fc\u30b8"})]}),(0,O.jsx)(f.default,{style:de.textInputContainer,children:(0,O.jsx)(w.default,{style:de.textInput,placeholder:p.default.get("accesscode"),placeholderTextColor:"white",placeholderStyle:{textTransform:"uppercase"},onChangeText:function(e){return t.setState({accessCode:e})},value:s,secureTextEntry:!0,autoComplete:"off",autoCorrect:!1,onSubmitEditing:function(){return t.doSubmitAccessCode()}})}),(0,O.jsxs)(f.default,{children:[(0,O.jsxs)(f.default,{style:de.buttonsContainer,children:[(0,O.jsx)(R.default,{style:de.button,onPress:function(){return t.doPressKey("1")},children:(0,O.jsx)(N,{style:de.buttonText,children:"1"})}),(0,O.jsx)(R.default,{style:[de.button],onPress:function(){return t.doPressKey("2")},children:(0,O.jsx)(N,{style:de.buttonText,children:"2"})}),(0,O.jsx)(R.default,{style:[de.button],onPress:function(){return t.doPressKey("3")},children:(0,O.jsx)(N,{style:de.buttonText,children:"3"})})]}),(0,O.jsxs)(f.default,{style:de.buttonsContainer,children:[(0,O.jsx)(R.default,{style:de.button,onPress:function(){return t.doPressKey("4")},children:(0,O.jsx)(N,{style:de.buttonText,children:"4"})}),(0,O.jsx)(R.default,{style:[de.button],onPress:function(){return t.doPressKey("5")},children:(0,O.jsx)(N,{style:de.buttonText,children:"5"})}),(0,O.jsx)(R.default,{style:[de.button],onPress:function(){return t.doPressKey("6")},children:(0,O.jsx)(N,{style:de.buttonText,children:"6"})})]}),(0,O.jsxs)(f.default,{style:de.buttonsContainer,children:[(0,O.jsx)(R.default,{style:de.button,onPress:function(){return t.doPressKey("7")},children:(0,O.jsx)(N,{style:de.buttonText,children:"7"})}),(0,O.jsx)(R.default,{style:[de.button],onPress:function(){return t.doPressKey("8")},children:(0,O.jsx)(N,{style:de.buttonText,children:"8"})}),(0,O.jsx)(R.default,{style:[de.button],onPress:function(){return t.doPressKey("9")},children:(0,O.jsx)(N,{style:de.buttonText,children:"9"})})]}),(0,O.jsxs)(f.default,{style:de.buttonsContainer,children:[(0,O.jsx)(R.default,{style:[de.button,{backgroundColor:L.grey1}],onPress:function(){return t.setState({accessCode:""})},children:(0,O.jsx)(F.default,{name:"close",color:"white",size:24})}),(0,O.jsx)(R.default,{style:[de.button],onPress:function(){return t.doPressKey("0")},children:(0,O.jsx)(N,{style:de.buttonText,children:"0"})}),(0,O.jsx)(R.default,{style:[de.button,{backgroundColor:L.grey1}],onPress:function(){return t.doSubmitAccessCode()},children:(0,O.jsx)(F.default,{name:"enter",color:"white",size:24})})]})]})]})]})}}]),r}(d.Component),de=(E.default.get("window").width,u.default.create({textInputContainer:{width:"80%",marginTop:20,marginBottom:20,height:60,borderRadius:100,backgroundColor:"black"},textInput:{flex:1,fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center",paddingHorizontal:20,borderRadius:100},buttonsContainer:{alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:48,width:48,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:"black",borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:24,textTransform:"uppercase"}})),ce=r(1223),ue=r(2030),fe=r(5202),he=r(1114),ye=r(7972),ge=r(3137),me=r(9566);function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var xe=function(e){(0,o.default)(r,e);var t=pe(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,preference:e.preference,settings:e.masters.settings,sections:e.masters.sections||[],tablemas:e.masters.tablemas,tables:[],floorWidth:null,selectedSection:null,focused:null},n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=(0,n.default)((function*(){yield this.doRefresh(!0)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.refresh&&e.refresh!==this.props.refresh&&(console.log("componentDidUpdate",e.refresh,this.props.refresh),this.setState({focused:null}),this.doRefresh())}},{key:"doRefresh",value:function(){var e=(0,n.default)((function*(e){var t=this.state,r=t.sections,n=t.selectedSection;e?r.length>0?yield this.doPressFloor():yield this.doPressSection({sectionId:"SYS"}):"FLOOR"===(null==n?void 0:n.sectionId)?yield this.doPressFloor():n?yield this.doPressSection(n):this.doRefresh(!0)}));return function(t){return e.apply(this,arguments)}}()},{key:"doPressFloor",value:function(){var e=(0,n.default)((function*(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=(t.selectedTable,r+"api/tables"),a=new URLSearchParams;a.append("shopId",n.shopId),a.append("tableFlg","Y"),fetch(l+="?"+a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({tables:t,selectedSection:{sectionId:"FLOOR"}})}))}));return function(){return e.apply(this,arguments)}}()},{key:"doPressSection",value:function(){var e=(0,n.default)((function*(e){var t=this,r=this.state,n=r.serviceEntry,l=r.home,a=(r.selectedTable,n+"api/tables"),o=new URLSearchParams;o.append("shopId",l.shopId),"OCCUPIED"===(null==e?void 0:e.sectionId)?(o.append("statusFlg","C"),o.append("tableFlg","Y")):"RESERVED"===(null==e?void 0:e.sectionId)?o.append("statusFlg","B"):"SYS"===(null==e?void 0:e.sectionId)?(o.append("sectionId",e.sectionId),o.append("statusFlg","C")):o.append("sectionId",e.sectionId),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(r){t.setState({tables:r,selectedSection:{sectionId:e.sectionId}})}))}));return function(t){return e.apply(this,arguments)}}()},{key:"doPressTable",value:function(e){var t=this.state,r=t.focused,n=t.selectedSection;if((null==r?void 0:r.tableId)===e.tableId)return this.setState({focused:null}),void this.doPressFocusedTable(e);"SYS"!==e.sectionId&&(this.doPressSection(n),this.setState({focused:e})),this.props.handlePressTable(e)}},{key:"doPressFloorTable",value:function(e){var t=this.state,r=t.tables,n=t.focused;if((null==n?void 0:n.tableId)===e.tableId)return this.setState({focused:null}),void this.doPressFocusedTable(r.find((function(t){return t.tableId===e.tableId})));this.doPressFloor(),this.setState({focused:e}),this.props.handlePressTable(r.find((function(t){return t.tableId===e.tableId})))}},{key:"doPressFocusedTable",value:function(e){"A"===e.statusFlg?this.props.handleActionTable(e,"OPEN"):"C"===e.statusFlg&&this.props.handleActionTable(e,"EDIT")}},{key:"doTranslateTableColor",value:function(e){return e?e.adhocItem?L.adhoc:"SYS"===e.sectionId?"D"===e.statusFlg?L.paid:"A"===e.transType?L.grey5:L.deposit:"A"===e.statusFlg?L.vacant:"B"===e.statusFlg?L.reserved:"C"===e.statusFlg?L.occupied:"D"===e.statusFlg?L.paid:"E"===e.statusFlg?L.unavailable:void 0:L.grey9}},{key:"doTranslateFloorTableColor",value:function(e){var t=this.state.tables;return this.doTranslateTableColor(t.find((function(t){return t.tableId===e.tableId})))}},{key:"doLayout",value:function(e){this.setState({floorWidth:e.nativeEvent.layout.width/16})}},{key:"render",value:function(){var e=this,t=this.state,r=t.preference,n=t.sections,l=(t.settings,t.tables),a=t.selectedSection;return(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row",backgroundColor:L.grey1,padding:5},children:[(0,O.jsx)(f.default,{style:{flex:1,margin:5,backgroundColor:L.grey2,borderRadius:5},children:"FLOOR"===(null==a?void 0:a.sectionId)?this.renderFloor():(0,O.jsx)(me.default,{style:{flex:1,padding:3},showsVerticalScrollIndicator:!1,numColumns:r.tcolsize,horizontal:!1,data:"SYS"===(null==a?void 0:a.sectionId)?[{recKey:-999}].concat((0,j.default)(l)):l,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(t){var r=t.item,n=t.index;return e.renderTable(r,n)},initialNumToRender:25})}),(0,O.jsxs)(f.default,{style:{margin:5,width:120},children:[(0,O.jsxs)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:80,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressFloor()},children:[(0,O.jsx)(fe.default,{name:"mapbox",size:30,color:"white",style:{height:28}}),(0,O.jsx)(A.default,{style:{marginTop:10,fontFamily:"varela-round",color:"white",fontSize:10,textTransform:"uppercase"},children:p.default.get("floorplan")})]}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:L.paid,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection({sectionId:"SYS"})},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:p.default.get("takeaway")})}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:L.reserved,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection({sectionId:"RESERVED"})},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:p.default.get("B")})}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:L.occupied,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection({sectionId:"OCCUPIED"})},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:p.default.get("C")})}),n&&(0,O.jsx)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:n.map((function(t,r){return(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:(null==a?void 0:a.sectionId)===t.sectionId?"white":L.grey1,borderRadius:5,marginVertical:5},onPress:function(){return e.doPressSection(t)},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:(null==a?void 0:a.sectionId)===t.sectionId?"black":"white"},children:t.name})},r)}))})]})]})}},{key:"renderTable",value:function(e,t){var r=this,n=this.state,l=n.selectedSection,a=n.preference,o=n.focused;return"SYS"===(null==l?void 0:l.sectionId)&&0===t?(0,O.jsx)(R.default,{style:{flex:1/a.tcolsize,aspectRatio:1},onPress:function(){return r.props.handleActionTable(null,"CREATE")},children:(0,O.jsx)(f.default,{style:{flex:1,margin:3,backgroundColor:L.grey4,justifyContent:"center",alignItems:"center"},children:(0,O.jsx)(F.default,{name:"pluscircleo",size:36,color:L.grey1})})}):(0,O.jsxs)(R.default,{style:{flex:1/a.tcolsize,aspectRatio:1},disabled:!e.tableId,onPress:function(){return r.doPressTable(e)},children:[(0,O.jsxs)(f.default,{style:{flex:1,margin:3,backgroundColor:this.doTranslateTableColor(e),justifyContent:"center",alignItems:"center"},children:[e.seatTime&&(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",position:"absolute",top:5,left:5,color:"black",fontSize:4*L.size},children:Y()(e.seatTime).format("HH:mm")}),"SYS"!==e.sectionId&&e.pax>0&&(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",position:"absolute",top:5,right:5,color:"white",fontSize:4*L.size},children:[e.pax," ",(0,O.jsx)(ge.default,{color:"white",name:"users",size:4*L.size})]}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"rgba(0,0,0,0.8)",fontSize:22,letterSpacing:1},children:e.tableId}),e.vipName&&(0,O.jsx)(A.default,{style:[ve.tableLowerBand],children:e.vipName}),e.grandTotal>0&&(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",position:"absolute",bottom:5,right:5,color:"black",fontSize:4*L.size},children:["$",e.grandTotal]})]}),(null==o?void 0:o.tableId)===e.tableId&&(0,O.jsxs)(f.default,{style:{position:"absolute",top:3,left:3,right:3,bottom:3,backgroundColor:"white",alignItems:"center",justifyContent:"center"},children:[("A"===e.statusFlg||"C"===e.statusFlg)&&(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"black",fontSize:10,textTransform:"uppercase"},children:p.default.get("press")}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"rgba(0,0,0,0.8)",fontSize:22,letterSpacing:1},children:e.tableId}),"A"===e.statusFlg?(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"black",fontSize:10,textTransform:"uppercase"},children:p.default.get("open")}):"C"===e.statusFlg?(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"black",fontSize:10,textTransform:"uppercase"},children:p.default.get("edit")}):null]})]})}},{key:"renderFloor",value:function(){var e=this,t=this.state,r=(t.home,t.tablemas),n=t.tables,l=t.floorWidth,a=t.focused;return(0,O.jsxs)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[(0,O.jsxs)(f.default,{style:{flex:1,aspectRatio:1,backgroundColor:L.grey1,overflow:"hidden",borderRadius:5},children:[(0,O.jsx)(f.default,{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:(0,O.jsxs)(f.default,{style:{flex:1,justifyContent:"space-between"},children:[(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{height:6,backgroundColor:L.grey2}})]})}),(0,O.jsx)(f.default,{style:{position:"absolute",left:0,right:0,top:0,bottom:0},children:(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}}),(0,O.jsx)(f.default,{style:{width:6,backgroundColor:L.grey2}})]})}),(0,O.jsx)(f.default,{style:{flex:1,margin:3},onLayout:function(t){return e.doLayout(t)},children:l&&r.map((function(t){return(0,O.jsx)(f.default,{style:{position:"absolute",left:t.xaxis*l,top:Number(t.yaxis*l),width:t.width*l,height:Number(t.height*l)},children:"B"===t.shape?(0,O.jsx)(R.default,{style:{flex:1,alignItems:"center",justifyContent:"center",borderRadius:"C"===t.shape?l*t.height:0},onPress:function(){return e.doPressFloorTable(t)},children:(0,O.jsx)(f.default,{style:{height:Math.sqrt(.5)*(t.width*l-6),width:Math.sqrt(.5)*(t.width*l-6),backgroundColor:(null==a?void 0:a.tableId)===t.tableId?"white":e.doTranslateFloorTableColor(t),transform:[{rotateZ:"45deg"}],justifyContent:"center",alignItems:"center"},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.black8,fontSize:20,transform:[{rotateZ:"-45deg"}]},children:t.tableId})})}):(0,O.jsx)(R.default,{style:{flex:1,margin:3,backgroundColor:(null==a?void 0:a.tableId)===t.tableId?"white":e.doTranslateFloorTableColor(t),alignItems:"center",justifyContent:"center",borderRadius:"C"===t.shape?l*t.height:0},onPress:function(){return e.doPressFloorTable(t)},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.black8,fontSize:20},children:t.tableId})})},t.recKey)}))})]}),(0,O.jsx)(f.default,{style:{margin:3,marginTop:-3,flexWrap:"wrap",flexDirection:"row"},children:l&&n.filter((function(e){return!r.some((function(t){return t.tableId===e.tableId}))})).map((function(t,r){return(0,O.jsx)(f.default,{style:{width:4*l,aspectRatio:4},children:(0,O.jsx)(R.default,{style:{flex:1,margin:3,backgroundColor:(null==a?void 0:a.tableId)===t.tableId?"white":e.doTranslateFloorTableColor(t),justifyContent:"center",alignItems:"center"},onPress:function(){return e.doPressFloorTable(t)},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.black8,fontSize:20},children:t.tableId})})},r)}))})]})}}]),r}(d.Component),ve=u.default.create({textInput:{color:"white",height:60,borderRadius:30,width:"90%",alignItems:"center",justifyContent:"center",marginBottom:120,textAlign:"center",fontFamily:"varela-round",fontSize:24},onetwo:{position:"absolute",top:"0",left:"0",height:"12.5%",width:"12.5%"},tableLowerBand:{fontFamily:"varela-round",width:"100%",paddingVertical:5,backgroundColor:L.black8,justifyContent:"center",alignItems:"center",color:"white",fontSize:12,textAlign:"center",textTransform:"uppercase"}}),be=r(8053);function je(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Te=function(e){(0,o.default)(r,e);var t=je(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,serviceEntryObj:e.serviceEntryObj,preference:e.preference,settings:e.settings,foldergrps:e.foldergrps,folders:e.folders,uniqueFolders:(0,j.default)(new Map(e.folders.map((function(e){return[e.folderId,e]}))).values()),menus:e.menus,uniqueMenus:(0,j.default)(new Map(e.menus.map((function(e){return[e.menuId,e]}))).values()),modBundles:e.modBundles,displayMode:"",displays:[],limiteds:[],searchText:""},n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this;console.log("mount mainmenu");var t=this.state,r=t.foldergrps,n=t.folders,l=t.menus,a="",o=[];if(1===n.filter((function(e){return e.foldergrpId===r[0].foldergrpId})).length){var i=n.find((function(e){return e.foldergrpId===r[0].foldergrpId}));a="MENU",o=l.filter((function(e){return e.folderId===i.folderId&&e.foldergrpId===i.foldergrpId}))}else a="FOLDER",o=n.filter((function(e){return e.foldergrpId===r[0].foldergrpId}));this.setState({selectedFoldergrp:r[0],displays:o,displayMode:a},(function(){return e.doGet()}))}},{key:"doGet",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.selectedFoldergrp,a=r+"api/restmenu-serve",o=new URLSearchParams;o.append("shopId",n.shopId),l&&o.append("foldergrpId",l.foldergrpId),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?console.log(t.message):e.setState({limiteds:t})}))}},{key:"doPressFoldergrp",value:function(e){var t=this,r=this.state,n=r.folders,l=r.menus,a="",o=[];if(1===n.filter((function(t){return t.foldergrpId===e.foldergrpId})).length){var i=n.find((function(t){return t.foldergrpId===e.foldergrpId}));a="MENU",o=l.filter((function(e){return e.folderId===i.folderId&&e.foldergrpId===i.foldergrpId}))}else a="FOLDER",o=n.filter((function(t){return t.foldergrpId===e.foldergrpId}));this.setState({selectedFoldergrp:e,displays:o,displayMode:a,searchText:""},(function(){return t.doGet()}))}},{key:"doPressFolder",value:function(e){var t=this.state.menus;this.setState({displayMode:"MENU",displays:t.filter((function(t){return t.folderId===e.folderId&&t.foldergrpId===e.foldergrpId}))})}},{key:"doPressMenu",value:function(e,t){this.props.handlePressMenu(e,t)}},{key:"doSearchText",value:function(e){var t=this.state,r=t.menus;t.foldergrps;if(this.setState({searchText:e}),e){var n=e.toUpperCase(),l=r.filter((function(e){return e.menuName.toUpperCase().includes(n)||e.menuId.toUpperCase().includes(n)}));this.setState({displayMode:"MENU",displays:l,selectedFoldergrp:null})}else this.setState({displayMode:"MENU",displays:""})}},{key:"render",value:function(){var e,t,r,n,l=this,a=this.state,o=a.preference,i=a.settings,s=a.displayMode,d=a.displays,c=a.foldergrps,u=(a.folders,a.uniqueFolders),y=a.uniqueMenus,g=(a.menus,a.modBundles),m=a.searchText,x=a.selectedFoldergrp;return(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row",backgroundColor:L.grey1,padding:5},children:[(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(f.default,{style:{marginHorizontal:10,marginTop:-5,height:20,flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},children:(0,O.jsxs)(N,{style:{fontSize:10,color:L.white8},children:[(0,O.jsx)(N,{style:{fontSize:10,color:L.paid},children:y.length})," MENU ",(0,O.jsx)(N,{style:{fontSize:10,color:L.reserved},children:u.length})," FOLDER ",(0,O.jsx)(N,{style:{fontSize:10,color:L.reserved},children:c.length})," FOLDERGRP ",(0,O.jsx)(N,{style:{fontSize:10,color:L.vacant},children:g.length})," MODIFIER"]})}),(0,O.jsxs)(f.default,{style:Se.searchBox,children:[(0,O.jsx)(w.default,{style:Se.searchBoxInputValue,placeholder:(null==(e=p.default.get("enter"))?void 0:e.toUpperCase())+" "+(null==(t=p.default.get("search"))?void 0:t.toUpperCase())+" "+(null==(r=p.default.get("text"))?void 0:r.toUpperCase()),placeholderTextColor:"rgba(255,255,255,0.2)",value:m,onFocus:function(){return l.setState({selectedFoldergrp:null},(function(){return l.doGet()}))},onChangeText:function(e){return l.doSearchText(e)}}),(0,O.jsx)(R.default,{style:Se.searchBoxButton,onPress:function(){l.doPressFoldergrp(c[0]),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsx)(f.default,{style:{flex:1,margin:5,backgroundColor:L.grey2,borderRadius:5},children:"MENU"===s?"A"===(null==(n=i.find((function(e){return"POSMODE"===e.setId})))?void 0:n.setString)?(0,O.jsx)(me.default,{style:{flex:1,padding:2.5},showsVerticalScrollIndicator:!1,numColumns:o.mcolsize,horizontal:!1,data:d,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(e){var t=e.item;return l.renderMenu(t)}},"MENU"+(null==x?void 0:x.foldergrpId)):(0,O.jsx)(me.default,{style:{flex:1,padding:2.5},showsVerticalScrollIndicator:!1,numColumns:o.pcolsize,horizontal:!1,data:d,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(e){var t=e.item;return l.renderMenuB(t)}},"MENU"+(null==x?void 0:x.foldergrpId)):(0,O.jsx)(me.default,{style:{flex:1,padding:2.5},showsVerticalScrollIndicator:!1,numColumns:o.mcolsize,horizontal:!1,data:d,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(e){var t=e.item;return l.renderFolder(t)}},"FOLDER"+(null==x?void 0:x.foldergrpId))})]}),(0,O.jsxs)(f.default,{style:{margin:5,width:120},children:[(0,O.jsx)(f.default,{style:{height:90},children:(0,O.jsxs)(_.default,{horizontal:!0,pagingEnabled:!0,showsHorizontalScrollIndicator:!1,children:["web"!==h.default.OS&&(0,O.jsxs)(R.default,{style:{alignItems:"center",justifyContent:"center",height:90,width:120},onPress:function(){return l.props.handlePressScan(!0)},children:[(0,O.jsx)(fe.default,{name:"camera-iris",size:30,color:"white",style:{height:28}}),(0,O.jsx)(N,{style:{marginTop:10,fontFamily:"varela-round",color:"white",fontSize:10,textTransform:"uppercase"},children:p.default.get("scan")})]}),(0,O.jsxs)(R.default,{style:{alignItems:"center",justifyContent:"center",height:90,width:120},onPress:function(){return l.props.handlePressScan()},children:[(0,O.jsx)(fe.default,{name:"movie-filter",size:28,color:"white",style:{height:28}}),(0,O.jsx)(N,{style:{marginTop:10,fontFamily:"varela-round",color:"white",fontSize:10,textTransform:"uppercase"},children:p.default.get("barcode")})]})]})}),(0,O.jsx)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:c.map((function(e,t){return(0,O.jsxs)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:e.foldergrpId===(null==x?void 0:x.foldergrpId)?"white":L.grey1,borderRadius:5,marginVertical:5},onPress:function(){return l.doPressFoldergrp(e)},children:[("00:00"!==Y()(e.startTime,"HH:mm:ss").format("HH:mm")||"23:59"!==Y()(e.endTime,"HH:mm:ss").format("HH:mm"))&&(0,O.jsxs)(N,{style:{fontSize:12,textAlign:"center",color:e.foldergrpId===(null==x?void 0:x.foldergrpId)?"black":L.reserved},children:[Y()(e.startTime,"HH:mm:ss").format("HH:mm"),"~",Y()(e.endTime,"HH:mm:ss").format("HH:mm")]}),(0,O.jsx)(N,{style:{textAlign:"center",color:e.foldergrpId===(null==x?void 0:x.foldergrpId)?"black":"white"},children:e.name})]},t)}))})]})]})}},{key:"renderFolder",value:function(e){var t=this,r=this.state,n=r.preference,l=r.menus;return(0,O.jsx)(f.default,{style:{flex:1/n.mcolsize},children:(0,O.jsxs)(R.default,{style:{margin:2.5,height:90,backgroundColor:"black",alignItems:"center",justifyContent:"center"},onPress:function(){return t.doPressFolder(e)},children:[(0,O.jsx)(N,{style:{color:L.paid,fontSize:12},children:e.folderId}),(0,O.jsx)(N,{style:{color:"white",paddingHorizontal:10,textAlign:"center",fontSize:16},children:e.name}),(0,O.jsx)(N,{style:{color:L.vacant},children:l.filter((function(t){return t.folderId===e.folderId&&t.foldergrpId===e.foldergrpId})).length})]})})}},{key:"renderMenu",value:function(e){var t,r,n,l=this,a=this.state,o=a.preference,i=a.limiteds,s=a.searchText,d=a.foldergrps,c=a.folders,u=null==i?void 0:i.find((function(t){return t.restmenuRecKey===e.recKey}));return(0,O.jsx)(f.default,{style:{flex:1/o.mcolsize},children:(0,O.jsxs)(f.default,{style:[{margin:2.5,flexDirection:"row",height:90,backgroundColor:L.grey4},"B"===(null==u?void 0:u.statusFlg)&&{opacity:.2}],children:["Y"===o.mquick&&(0,O.jsx)(R.default,{style:{width:50,backgroundColor:L.grey3,justifyContent:"center",alignItems:"center"},disabled:"B"===(null==u?void 0:u.statusFlg),onPress:function(){return l.doPressMenu(e,!0)},children:(0,O.jsx)(F.default,{name:"check",size:18,color:L.grey1})}),(0,O.jsx)(R.default,{style:{flex:1},disabled:"B"===(null==u?void 0:u.statusFlg),onPress:function(){return l.doPressMenu(e)},children:(0,O.jsxs)(f.default,{style:{flex:1,padding:10},children:[(0,O.jsxs)(f.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(N,{style:{color:"white",fontSize:12}}),(0,O.jsxs)(N,{style:[{color:L.reserved,fontSize:12},0===Number(e.listPrice)&&{color:"white"}],children:["$",null==(t=e.listPrice)?void 0:t.toFixed(2)]})]}),(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsx)(N,{style:{color:"white"},numberOfLines:2,children:e.menuName})}),(0,O.jsxs)(f.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(N,{style:{color:L.vacant,fontSize:12,textTransform:"uppercase"},children:u&&0!==(null==u?void 0:u.serveLimit)?Number(u.serveLimit-u.serveCount)+" "+p.default.get("left"):" "}),(0,O.jsx)(N,{style:{color:L.paid,fontSize:12},children:e.menuId})]})]})}),s.length>0&&(0,O.jsxs)(N,{style:{position:"absolute",top:0,left:0,paddingHorizontal:5,backgroundColor:"black",color:"white",fontSize:10},numberOfLines:1,children:[null==(r=d.find((function(t){return t.foldergrpId===e.foldergrpId})))?void 0:r.name," > ",null==(n=c.find((function(t){return t.folderId===e.folderId})))?void 0:n.name]})]})})}},{key:"renderMenuB",value:function(e){var t,r,n,l=this,a=this.state,o=a.preference,i=a.limiteds,s=a.serviceEntryObj,d=a.searchText,c=a.foldergrps,u=a.folders,h=null==i?void 0:i.find((function(t){return t.restmenuRecKey===e.recKey}));return(0,O.jsx)(f.default,{style:{flex:1/o.pcolsize},children:(0,O.jsxs)(R.default,{style:{margin:2.5},disabled:"B"===(null==h?void 0:h.statusFlg),onPress:function(){return l.doPressMenu(e)},children:[(0,O.jsxs)(f.default,{style:{backgroundColor:L.grey3},children:[(0,O.jsx)(P.default,{style:{aspectRatio:1},source:{uri:(null==s?void 0:s.restServiceUrl)+"epbm/api/image/stock?stkId="+e.urlAddr+"&t="+e.lastupdate}}),d.length>0&&(0,O.jsxs)(N,{style:{position:"absolute",bottom:0,left:0,paddingHorizontal:5,backgroundColor:"black",color:"white",fontSize:10},numberOfLines:1,children:[null==(t=c.find((function(t){return t.foldergrpId===e.foldergrpId})))?void 0:t.name," > ",null==(r=u.find((function(t){return t.folderId===e.folderId})))?void 0:r.name]})]}),(0,O.jsx)(f.default,{style:[{flexDirection:"row",height:70,backgroundColor:L.grey4},"B"===(null==h?void 0:h.statusFlg)&&{opacity:.2}],children:(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsxs)(f.default,{style:{flex:1,padding:10},children:[(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsx)(N,{style:{color:"white"},numberOfLines:2,children:e.menuName})}),(0,O.jsxs)(f.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(N,{style:{color:L.vacant,fontSize:12,textTransform:"uppercase"},children:h&&0!==(null==h?void 0:h.serveLimit)?Number(h.serveLimit-h.serveCount)+" "+p.default.get("left"):" "}),(0,O.jsxs)(N,{style:[{color:L.reserved,fontSize:12},0===Number(e.listPrice)&&{color:"white"}],children:["$",null==(n=e.listPrice)?void 0:n.toFixed(2)]})]})]})})})]})})}}]),r}(d.Component),Se=u.default.create({searchBox:{margin:10,marginBottom:5,height:50,borderRadius:100,backgroundColor:"black",flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50,borderRadius:100},searchBoxButton:{position:"absolute",right:0,top:0,height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50}});function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ce=function(e){(0,o.default)(r,e);var t=Ie(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={timer:5},n.countdown=function(){},n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=5;this.countdown=setInterval((function(){t-=1,e.setState({timer:t}),0===t&&(clearInterval(e.countdown),e.props.handleUpdateFromAutoLogout(t))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.countdown)}},{key:"render",value:function(){var e=this,t=this.state.timer;return console.log("in overlayautologout",this.props),(0,O.jsx)(f.default,{style:Fe.overlay,children:(0,O.jsxs)(f.default,{style:Fe.overlayContent,children:[(0,O.jsxs)(f.default,{style:Fe.overlayHeader,children:[(0,O.jsx)(A.default,{style:Fe.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Fe.overlaySubtitleText,children:"Auto Logout"}),(0,O.jsx)(A.default,{style:Fe.overlayText,children:t})]}),(0,O.jsx)(R.default,{style:[Fe.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromAutoLogout("")},children:(0,O.jsx)(A.default,{style:Fe.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),Fe=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Pe=function(e){(0,o.default)(r,e);var t=Re(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,homeDelivery:"Y"===e.selectedTable.homeDelivery?"Y":"N",vipName:e.selectedTable.vipName||"",vipPhone:e.selectedTable.vipPhone||"",dlyDate:e.selectedTable.dlyDate?Y()(e.selectedTable.dlyDate).format("YYYY-MM-DD"):"",dpostalcode:e.selectedTable.dpostalcode||"",daddress1:e.selectedTable.daddress1||"",daddress2:e.selectedTable.daddress2||""},n}return(0,a.default)(r,[{key:"doPressDelivery",value:function(e){this.setState({homeDelivery:e})}},{key:"doChangePostal",value:function(e){var t=this;if(this.setState({dpostalcode:e}),6===e.length){var r=this.state.serviceEntry+"api/epbsggeo",n=new URLSearchParams;n.append("postal",e),fetch(r+="?"+n,{method:"GET"}).then((function(e){if(e.ok)return e.json()})).then((function(e){null!=e&&e.address&&t.setState({daddress1:e.address||""})}))}}},{key:"doSubmit",value:function(){var e=this.state,t=e.vipName,r=e.vipPhone,n=e.homeDelivery,l=e.dlyDate,a=e.dpostalcode,o=e.daddress1,i=e.daddress2;this.props.handleUpdateFromDeposit("G",t,r,n,l,a,o,i)}},{key:"render",value:function(){var e=this,t=this.state,r=t.vipName,n=t.vipPhone,l=t.homeDelivery,a=t.dlyDate,o=t.dpostalcode,i=t.daddress1,s=t.daddress2;return console.log("in overlayDeposit",this.props),(0,O.jsx)(f.default,{style:we.overlay,children:(0,O.jsxs)(f.default,{style:we.overlayContent,children:[(0,O.jsxs)(f.default,{style:we.overlayHeader,children:[(0,O.jsx)(A.default,{style:we.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:we.overlaySubtitleText,children:"Deposit Info"}),(0,O.jsxs)(f.default,{style:{flexDirection:"row",marginTop:20},children:[(0,O.jsx)(f.default,{style:{flex:1,alignItems:"flex-end"},children:(0,O.jsx)(R.default,{style:[we.tabContainer,{backgroundColor:"Y"===l?L.grey1:"white"}],onPress:function(){return e.doPressDelivery("N")},children:(0,O.jsx)(A.default,{style:{color:"Y"===l?"white":"black",fontFamily:"varela-round"},children:"Self Collect"})})}),(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsx)(R.default,{style:[we.tabContainer,{backgroundColor:"N"===l?L.grey1:"white"}],onPress:function(){return e.doPressDelivery("Y")},children:(0,O.jsx)(A.default,{style:{color:"N"===l?"white":"black",fontFamily:"varela-round"},children:"Delivery"})})})]})]}),(0,O.jsx)(f.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,O.jsxs)(f.default,{style:we.vipInputsContainer,children:[(0,O.jsxs)(f.default,{style:we.vipInputsRow,children:[(0,O.jsx)(w.default,{style:we.vipInput,placeholder:"NAME",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({vipName:t})},value:r}),(0,O.jsx)(w.default,{style:we.vipInput,placeholder:"PHONE",placeholderTextColor:"rgba(255,255,255,0.2)",keyboardType:"numeric",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({vipPhone:t})},value:n})]}),"Y"===l?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(f.default,{style:we.vipInputsRow,children:[(0,O.jsx)(w.default,{style:we.vipInput,placeholder:"POSTAL",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.doChangePostal(t)},value:o}),(0,O.jsx)(w.default,{style:we.vipInput,placeholder:"DLY DATE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onFocus:function(){return""===a&&e.setState({dlyDate:Y()().format("YYYY-MM-DD")})},onChangeText:function(t){return e.setState({dlyDate:t})},value:a})]}),(0,O.jsx)(f.default,{style:we.vipInputsRow,children:(0,O.jsx)(w.default,{style:[we.vipInput,{flex:1}],placeholder:"ADDR 1",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({daddress1:t})},value:i})}),(0,O.jsx)(f.default,{style:we.vipInputsRow,children:(0,O.jsx)(w.default,{style:[we.vipInput,{flex:1}],placeholder:"ADDR 2",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({daddress2:t})},value:s})})]}):(0,O.jsx)(f.default,{style:[we.vipInputsRow,{justifyContent:"flex-end"}],children:(0,O.jsx)(w.default,{style:we.vipInput,placeholder:"DLY DATE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onFocus:function(){return""===a&&e.setState({dlyDate:Y()().format("YYYY-MM-DD")})},onChangeText:function(t){return e.setState({dlyDate:t})},value:a})})]})}),(0,O.jsx)(R.default,{style:[we.overlayOption,{backgroundColor:L.grey4}],onPress:function(){return e.doSubmit()},children:(0,O.jsx)(A.default,{style:we.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[we.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromDeposit("")},children:(0,O.jsx)(A.default,{style:we.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),we=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{height:"90%",width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},vipInputsContainer:{marginBottom:20,marginHorizontal:5,width:400,alignItems:"center"},vipInputsRow:{height:50,width:400,flexDirection:"row"},vipInput:{backgroundColor:L.grey1,borderRadius:5,color:"white",fontFamily:"varela-round",fontSize:16,margin:5,paddingHorizontal:10,width:190},tabContainer:{backgroundColor:L.grey1,width:120,alignItems:"center",justifyContent:"center",borderRadius:20,height:40,marginHorizontal:5},tabText:{fontSize:10,fontFamily:"varela-round",color:"white"},tabFocusText:{fontSize:16,fontFamily:"varela-round",color:"white"}});function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ee=function(e){(0,o.default)(r,e);var t=ke(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlayText:""},n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){this.scanTextInput.focus()}},{key:"handleSubmit",value:function(e){var t=this;this.setState({overlayText:""},(function(){return t.scanTextInput.focus()})),this.props.handleUpdateFromScanBarcode(e)}},{key:"render",value:function(){var e=this,t=this.state.overlayText;return console.log("in overlayscanbarcode"),(0,O.jsx)(f.default,{style:Be.overlay,children:(0,O.jsxs)(f.default,{style:Be.overlayContent,children:[(0,O.jsxs)(f.default,{style:Be.overlayHeader,children:[(0,O.jsx)(A.default,{style:Be.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Be.overlaySubtitleText,children:"Scan Barcode"})]}),(0,O.jsx)(f.default,{style:Be.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:Be.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:Be.overlaySearchBoxInput,ref:function(t){e.scanTextInput=t},autoFocus:!0,placeholder:"ENTER BARCODE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},onSubmitEditing:function(){return e.handleSubmit(t)},value:t}),(0,O.jsx)(R.default,{style:Be.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),e.scanTextInput.focus()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(R.default,{style:Be.overlayOption,onPress:function(){return e.handleSubmit(t)},children:(0,O.jsx)(A.default,{style:Be.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[Be.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromScanBarcode("")},children:(0,O.jsx)(A.default,{style:Be.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),Be=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center",marginBottom:30},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function De(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ue=function(e){(0,o.default)(r,e);var t=De(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlayText:""},n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){this.scanTextInput.focus()}},{key:"handleSubmit",value:function(e){var t=this;this.setState({overlayText:""},(function(){return t.scanTextInput.focus()})),this.props.handleUpdateFromRequestAccess(e)}},{key:"doPressKey",value:function(e){var t=this.state.overlayText,r=t;"CLEAR"===e?this.setState({overlayText:""}):"ENTER"===e?this.handleSubmit(t):this.setState({overlayText:r+e})}},{key:"render",value:function(){var e=this,t=this.props,r=t.home,n=t.requestedPrivilege,l=this.state.overlayText;return console.log("in overlayrequestaccess"),(0,O.jsx)(f.default,{style:Ae.overlay,children:(0,O.jsxs)(f.default,{style:Ae.overlayContent,children:[(0,O.jsxs)(f.default,{style:Ae.overlayHeader,children:[(0,O.jsx)(A.default,{style:Ae.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Ae.overlaySubtitleText,children:"Request Access"}),(0,O.jsxs)(A.default,{style:Ae.overlayText,children:["Grant temporary ",n," privilege to ",r.userId,"?"]})]}),(0,O.jsx)(f.default,{style:Ae.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:Ae.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:Ae.overlaySearchBoxInput,ref:function(t){e.scanTextInput=t},secureTextEntry:!0,autoFocus:!0,placeholder:"ENTER ACCESS CODE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},onSubmitEditing:function(){return e.handleSubmit(l)},value:l}),(0,O.jsx)(R.default,{style:Ae.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),e.scanTextInput.focus()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(me.default,{style:{width:135,marginBottom:20,alignSelf:"center"},data:["1","2","3","4","5","6","7","8","9","CLEAR","0","ENTER"],scrollEnabled:!1,showsVerticalScrollIndicator:!1,numColumns:3,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return(0,O.jsx)(f.default,{style:{flex:1/3,aspectRatio:1},children:(0,O.jsx)(R.default,{style:{margin:2.5,flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"black",borderRadius:5},onPress:function(){return e.doPressKey(r)},children:"CLEAR"===r?(0,O.jsx)(F.default,{name:"close",color:"white",size:18}):"ENTER"===r?(0,O.jsx)(F.default,{name:"enter",color:"white",size:18}):(0,O.jsx)(A.default,{style:{color:"white",fontFamily:"varela-round",fontSize:18},children:r})})})}}),(0,O.jsx)(R.default,{style:[Ae.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromRequestAccess("")},children:(0,O.jsx)(A.default,{style:Ae.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),Ae=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:2,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center",marginBottom:20},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ve=function(e){(0,o.default)(r,e);var t=Oe(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,settings:e.settings,privileges:e.privileges,discounts:e.discounts,selectedTableItem:e.selectedTableItem,availableDiscounts:e.discounts,overlaySearchText:"",overlayText:"",discountSelected:!1,selectedDiscount:"",validatePass:!0,requestedPrivilege:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleValidate=n.handleValidate.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.settings,o=r.requestedPrivilege;if(e){var i=l+"api/super-user",s={locId:n.locId,accessCode:e,priId:o};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access "+o,n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleValidate(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleValidate",value:function(e){var t=this.state,r=t.home,n=t.privileges,l=t.overlayText,a=t.selectedDiscount,o=t.selectedTableItem;l?"Y"===r.adminFlg||n.some((function(e){return"CHANGEPRICE"===e.priId}))||0===o.listPrice||e?this.props.handleUpdateFromChangePrice(l,a||"-",e):this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"CHANGEPRICE"}):this.setState({validatePass:!1})}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.discounts,n=(t.availableDiscounts,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",this.state.availableDiscounts),n=r,e?(n=n.filter((function(e){return e.discId.toUpperCase().includes(l)||e.discName.toUpperCase().includes(l)})),this.setState({availableDiscounts:n})):this.setState({availableDiscounts:n})}},{key:"render",value:function(){var e=this,t=this.state,r=t.home,n=t.overlaySearchText,l=t.overlayText,a=t.discountSelected,o=t.availableDiscounts,i=(t.discounts,t.selectedDiscount),s=t.validatePass,d=t.overlayProcedureMessageVisible,c=t.overlayRequestAccessVisible,u=t.requestedPrivilege;return console.log("in overlaychangeprice, state",this.state),(0,O.jsxs)(f.default,{style:Me.overlay,children:[d&&(0,O.jsx)(q,{text:d,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),c&&(0,O.jsx)(Ue,{home:r,requestedPrivilege:u,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),(0,O.jsxs)(f.default,{style:Me.overlayContent,children:[(0,O.jsxs)(f.default,{style:Me.overlayHeader,children:[(0,O.jsx)(A.default,{style:Me.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Me.overlaySubtitleText,children:"Change Price"})]}),(0,O.jsx)(f.default,{style:Me.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:Me.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:[Me.overlaySearchBoxInput,s?null:{color:L.paid}],placeholder:"ENTER PRICE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t,validatePass:!0})},value:l}),(0,O.jsx)(R.default,{style:Me.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(f.default,{style:{paddingBottom:10}}),a?(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(f.default,{style:Me.searchBoxWrapper,children:(0,O.jsx)(R.default,{style:Me.overlaySearchBox,onPress:function(){return e.setState({overlaySearchText:"",selectedDiscount:"",discountSelected:!1})},children:(0,O.jsx)(A.default,{style:Me.selectText,children:i.discId})})}),(0,O.jsx)(f.default,{style:{paddingBottom:5}})]}):(0,O.jsxs)(f.default,{style:Me.selectWrapper,children:[(0,O.jsx)(f.default,{style:Me.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:[Me.overlaySearchBox,{marginHorizontal:0}],children:[(0,O.jsx)(w.default,{style:Me.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),(0,O.jsx)(R.default,{style:Me.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(f.default,{style:Me.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:Me.searchBoxInfoText,children:[o.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Me.overlayGrid,r.dummy?Me.hidden:null],onPress:function(){return e.setState({discountSelected:!0,selectedDiscount:r,validatePass:!0})},children:[(0,O.jsxs)(f.default,{style:Me.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:Me.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:Me.overlayGridFirstLeftText,children:r.discId})}),(0,O.jsx)(f.default,{style:Me.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:Me.overlayGridFirstRightText})})]}),(0,O.jsx)(f.default,{style:Me.overlayGridSecond,children:(0,O.jsx)(A.default,{style:Me.overlayGridSecondText,children:r.discName})}),(0,O.jsxs)(f.default,{style:Me.overlayGridThird,children:[(0,O.jsx)(f.default,{style:Me.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:Me.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:Me.overlayGridThirdRightText})})]})]})}})]}),(0,O.jsx)(R.default,{style:Me.overlayOption,onPress:function(){return e.handleValidate()},children:(0,O.jsx)(A.default,{style:Me.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[Me.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromChangePrice("","")},children:(0,O.jsx)(A.default,{style:Me.overlayOptionText,children:p.default.get("cancel")})})]})]})}}]),r}(d.Component),Me=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1,alignItems:"center",justifyContent:"center"},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},selectText:{fontFamily:"varela-round",color:"white",fontSize:16},selectWrapper:{flex:1,backgroundColor:L.grey1,borderRadius:5,marginHorizontal:5,marginBottom:5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ne=function(e){(0,o.default)(r,e);var t=ze(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,settings:e.settings,discounts:e.discounts,privileges:e.privileges,availableDiscounts:e.discounts,overlaySearchText:"",selectedDiscount:"",remarks:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.discounts,n=(t.availableDiscounts,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",this.state.availableDiscounts),n=r,e?(n=n.filter((function(e){return e.discId.toUpperCase().includes(l)||e.discName.toUpperCase().includes(l)})),this.setState({availableDiscounts:n})):this.setState({availableDiscounts:n})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.settings,o=r.selectedDiscount;if(e){var i=l+"api/super-user",s={locId:n.locId,accessCode:e,priId:"LINEDISC"};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access LINEDISC",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSubmit(o,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleSubmit",value:function(e,t){var r=this.state,n=r.home,l=r.privileges,a=r.remarks,o=e;o.remarks=a,"Y"===n.adminFlg||l.some((function(e){return"LINEDISC"===e.priId}))||t?this.props.handleUpdateFromLineDiscount(o,t):this.setState({overlayRequestAccessVisible:!0,selectedDiscount:e})}},{key:"render",value:function(){var e=this,t=this.state,r=t.home,n=t.overlaySearchText,l=t.availableDiscounts,a=t.remarks,o=t.overlayRequestAccessVisible,i=t.overlayProcedureMessageVisible;return console.log("in overlaylinediscount, state",this.state),(0,O.jsxs)(f.default,{style:Ke.overlay,children:[i&&(0,O.jsx)(q,{text:i,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),o&&(0,O.jsx)(Ue,{home:r,requestedPrivilege:"LINEDISC",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),(0,O.jsxs)(f.default,{style:Ke.overlayContent,children:[(0,O.jsxs)(f.default,{style:Ke.overlayHeader,children:[(0,O.jsx)(A.default,{style:Ke.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Ke.overlaySubtitleText,children:"Line Discount"})]}),(0,O.jsx)(f.default,{style:[Ke.searchBoxWrapper,{marginBottom:10}],children:(0,O.jsx)(f.default,{style:Ke.overlaySearchBox,children:(0,O.jsx)(w.default,{style:Ke.overlaySearchBoxInput,placeholder:"ENTER REMARKS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({remarks:t})},value:a})})}),(0,O.jsxs)(f.default,{style:Ke.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:Ke.overlayBackButton,onPress:function(){return e.props.handleUpdateFromLineDiscount("")},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:Ke.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:Ke.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),(0,O.jsx)(R.default,{style:Ke.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:Ke.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:Ke.searchBoxInfoText,children:[l.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Ke.overlayGrid,r.dummy?Ke.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[(0,O.jsxs)(f.default,{style:Ke.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:Ke.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:Ke.overlayGridFirstLeftText,children:r.discId})}),(0,O.jsx)(f.default,{style:Ke.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:Ke.overlayGridFirstRightText})})]}),(0,O.jsx)(f.default,{style:Ke.overlayGridSecond,children:(0,O.jsx)(A.default,{style:Ke.overlayGridSecondText,children:r.discName})}),(0,O.jsxs)(f.default,{style:Ke.overlayGridThird,children:[(0,O.jsx)(f.default,{style:Ke.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:Ke.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:Ke.overlayGridThirdRightText})})]})]})}})]})]})}}]),r}(d.Component),Ke=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5}});function Le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ge=function(e){(0,o.default)(r,e);var t=Le(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,settings:e.settings,privileges:e.privileges,discounts:e.discounts,availableDiscounts:e.discounts,overlaySearchText:"",selectedDiscount:"",remarks:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.discounts,n=(t.availableDiscounts,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",this.state.availableDiscounts),n=r,e?(n=n.filter((function(e){return e.discId.toUpperCase().includes(l)||e.discName.toUpperCase().includes(l)})),this.setState({availableDiscounts:n})):this.setState({availableDiscounts:n})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.settings,o=r.selectedDiscount;if(e){var i=l+"api/super-user",s={locId:n.locId,accessCode:e,priId:"HEADERDISC"};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access HEADERDISC",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSubmit(o,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleSubmit",value:function(e,t){var r=this.state,n=r.home,l=r.privileges,a=r.remarks,o=e;o.remarks=a,"Y"===n.adminFlg||l.some((function(e){return"HEADERDISC"===e.priId}))||t?this.props.handleUpdateFromHeaderDiscount(o,t):this.setState({overlayRequestAccessVisible:!0,selectedDiscount:e})}},{key:"render",value:function(){var e=this,t=this.state,r=t.home,n=t.overlaySearchText,l=t.availableDiscounts,a=t.remarks,o=t.overlayRequestAccessVisible,i=t.overlayProcedureMessageVisible;return console.log("in overlayheaderdiscount, state",this.state),(0,O.jsxs)(f.default,{style:He.overlay,children:[i&&(0,O.jsx)(q,{text:i,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),o&&(0,O.jsx)(Ue,{home:r,requestedPrivilege:"HEADERDISC",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),(0,O.jsxs)(f.default,{style:He.overlayContent,children:[(0,O.jsxs)(f.default,{style:He.overlayHeader,children:[(0,O.jsx)(A.default,{style:He.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:He.overlaySubtitleText,children:"Header Discount"})]}),(0,O.jsx)(f.default,{style:[He.searchBoxWrapper,{marginBottom:10}],children:(0,O.jsx)(f.default,{style:He.overlaySearchBox,children:(0,O.jsx)(w.default,{style:He.overlaySearchBoxInput,placeholder:"ENTER REMARKS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({remarks:t})},value:a})})}),(0,O.jsxs)(f.default,{style:He.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:He.overlayBackButton,onPress:function(){return e.props.handleUpdateFromHeaderDiscount("")},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:He.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:He.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),(0,O.jsx)(R.default,{style:He.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:He.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:He.searchBoxInfoText,children:[l.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[He.overlayGrid,r.dummy?He.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[(0,O.jsxs)(f.default,{style:He.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:He.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:He.overlayGridFirstLeftText,children:r.discId})}),(0,O.jsx)(f.default,{style:He.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:He.overlayGridFirstRightText})})]}),(0,O.jsx)(f.default,{style:He.overlayGridSecond,children:(0,O.jsx)(A.default,{style:He.overlayGridSecondText,children:r.discName})}),(0,O.jsxs)(f.default,{style:He.overlayGridThird,children:[(0,O.jsx)(f.default,{style:He.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:He.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:He.overlayGridThirdRightText})})]})]})}})]})]})}}]),r}(d.Component),He=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5}}),Ye=r(2860);function We(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var qe=function(e){(0,o.default)(r,e);var t=We(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,overlaySearchText:"",tables:"",availableTables:"",mergeTables:[]},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n.handleSelectTable=n.handleSelectTable.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=r+"api/tables",a=new URLSearchParams;a.append("shopId",n.shopId),a.append("statusFlg","A"),fetch(l+="?"+a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({tables:t.filter((function(e){return"SYS"!==e.sectionId})),availableTables:t.filter((function(e){return"SYS"!==e.sectionId}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",this.state.availableTables),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(l)||e.sectionId.toUpperCase().includes(l)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"handleSelectTable",value:function(e){var t=this.state.mergeTables,r=t;t.some((function(t){return t.tableId===e.tableId}))?r=r.filter((function(t){return t.tableId!==e.tableId})):r.push(e),this.setState({mergeTables:r})}},{key:"handlePressSelection",value:function(e){var t=this.state.mergeTables;t.filter((function(t){return t.tableId!==e.tableId})),(0,Ye.default)("mergeTablesUpdate"),this.setState({mergeTables:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.selectedTable,n=t.overlaySearchText,l=t.availableTables,a=(t.tables,t.mergeTables);return console.log("in overlaymergetable, state",this.state),(0,O.jsx)(f.default,{style:Je.overlay,children:(0,O.jsxs)(f.default,{style:Je.overlayContent,children:[(0,O.jsxs)(f.default,{style:Je.overlayHeader,children:[(0,O.jsxs)(A.default,{style:Je.overlayTitleText,children:["TABLE ",r.tableId]}),(0,O.jsx)(A.default,{style:Je.overlaySubtitleText,children:"Merge Table"})]}),(0,O.jsx)(f.default,{style:Je.selectionContainer,children:a.map((function(t){return(0,O.jsx)(R.default,{style:[Je.modalAvailableMod],onPress:function(){return e.handleSelectTable(t)},children:(0,O.jsx)(A.default,{style:[Je.modalAvailableModText],children:t.tableId})},t.recKey)}))}),(0,O.jsxs)(f.default,{style:Je.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:Je.overlayBackButton,onPress:function(){return e.props.handleUpdateFromMergeTable([])},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:Je.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:Je.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),(0,O.jsx)(R.default,{style:Je.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:Je.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:Je.searchBoxInfoText,children:[l.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:Je.overlayGrid,onPress:function(){return e.handleSelectTable(r)},children:[(0,O.jsxs)(f.default,{style:Je.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:Je.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:Je.overlayGridFirstLeftText,children:r.sectionId})}),(0,O.jsx)(f.default,{style:Je.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:Je.overlayGridFirstRightText,children:"VACANT"})})]}),(0,O.jsx)(f.default,{style:Je.overlayGridSecond,children:(0,O.jsx)(A.default,{style:Je.overlayGridSecondText,children:r.tableId})}),(0,O.jsxs)(f.default,{style:Je.overlayGridThird,children:[(0,O.jsx)(f.default,{style:Je.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:Je.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:Je.overlayGridThirdRightText})})]})]})}}),(0,O.jsx)(R.default,{style:[Je.overlayOption,{backgroundColor:L.vacant}],onPress:function(){return e.props.handleUpdateFromMergeTable(a)},children:(0,O.jsx)(A.default,{style:Je.overlayOptionText,children:p.default.get("submit")})})]})})}}]),r}(d.Component),Je=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},selectionContainer:{height:35,paddingBottom:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},modalAvailableMod:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",borderRadius:16,height:30,backgroundColor:L.grey1,marginRight:5,marginBottom:5},modalAvailableModText:{fontFamily:"varela-round",color:L.grey5,fontSize:20}});function Qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Xe=function(e){(0,o.default)(r,e);var t=Qe(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,tableItems:e.tableItems,overlaySearchText:"",availableTableItems:e.tableItems.filter((function(e){return!e.refRecKey})),selectedTableItems:[]},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n.handleSelectTableItem=n.handleSelectTableItem.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleOverlaySearchText",value:function(e){var t=this.state.tableItems,r=[];this.setState({overlaySearchText:e});var n=e.toUpperCase();console.log("caseText",n),console.log("available",this.state.availableTableItems),r=t.filter((function(e){return!e.refRecKey})),e?(r=r.filter((function(e){return e.menuId.toUpperCase().includes(n)||e.menuName.toUpperCase().includes(n)})),this.setState({availableTableItems:r})):this.setState({availableTableItems:r})}},{key:"handleSelectTableItem",value:function(e){var t=this.state.selectedTableItems;t.some((function(t){return t.recKey===e.recKey}))?t=t.filter((function(t){return t.recKey!==e.recKey})):t.push(e),this.setState({selectedTableItems:t})}},{key:"handlePressSelection",value:function(e){var t=this.state.selectedTableItems;t.filter((function(t){return t.recKey!==e.recKey})),(0,Ye.default)("selectedTableItemsUpdate"),this.setState({selectedTableItems:t})}},{key:"render",value:function(){var e=this,t=this.state,r=t.selectedTable,n=t.overlaySearchText,l=t.availableTableItems,a=t.selectedTableItems;return console.log("in overlaysplittable, state",this.state),(0,O.jsx)(f.default,{style:$e.overlay,children:(0,O.jsxs)(f.default,{style:$e.overlayContent,children:[(0,O.jsxs)(f.default,{style:$e.overlayHeader,children:[(0,O.jsxs)(A.default,{style:$e.overlayTitleText,children:["TABLE ",r.tableId]}),(0,O.jsx)(A.default,{style:$e.overlaySubtitleText,children:"Split Table"})]}),(0,O.jsx)(f.default,{style:$e.selectionContainer,children:a.map((function(t){return(0,O.jsx)(R.default,{style:[$e.modalAvailableMod],onPress:function(){return e.handleSelectTableItem(t)},children:(0,O.jsx)(A.default,{style:[$e.modalAvailableModText],children:t.lineNo})},t.recKey)}))}),(0,O.jsxs)(f.default,{style:$e.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:$e.overlayBackButton,onPress:function(){return e.props.handleUpdateFromSplitTable("")},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:$e.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:$e.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),(0,O.jsx)(R.default,{style:$e.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:$e.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:$e.searchBoxInfoText,children:[l.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:$e.overlayGrid,onPress:function(){return e.handleSelectTableItem(r)},children:[(0,O.jsxs)(f.default,{style:$e.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:$e.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:$e.overlayGridFirstLeftText,children:r.menuId})}),(0,O.jsx)(f.default,{style:$e.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:$e.overlayGridFirstRightText,children:r.lineNo})})]}),(0,O.jsx)(f.default,{style:$e.overlayGridSecond,children:(0,O.jsx)(A.default,{style:$e.overlayGridSecondText,children:r.menuName})}),(0,O.jsxs)(f.default,{style:$e.overlayGridThird,children:[(0,O.jsx)(f.default,{style:$e.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:$e.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:$e.overlayGridThirdRightText})})]})]})}}),(0,O.jsx)(R.default,{style:$e.overlayOption,onPress:function(){return e.props.handleUpdateFromSplitTable(a)},children:(0,O.jsx)(A.default,{style:$e.overlayOptionText,children:p.default.get("submit")})})]})})}}]),r}(d.Component),$e=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},selectionContainer:{height:35,paddingBottom:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center"},modalAvailableMod:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",borderRadius:16,height:30,backgroundColor:L.grey1,marginRight:5,marginBottom:5},modalAvailableModText:{fontFamily:"varela-round",color:L.grey5,fontSize:20}});function _e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ze=function(e){(0,o.default)(r,e);var t=_e(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.home,serviceEntry:e.serviceEntry,selectedTable:e.selectedTable,overlaySearchText:"",tables:"",availableTables:""},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=r+"api/tables",a=new URLSearchParams;a.append("shopId",n.shopId),a.append("statusFlg","A"),fetch(l+="?"+a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({tables:t.filter((function(e){return"SYS"!==e.sectionId})),availableTables:t.filter((function(e){return"SYS"!==e.sectionId}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",this.state.availableTables),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(l)||e.sectionId.toUpperCase().includes(l)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"render",value:function(){var e=this,t=this.state,r=t.overlaySearchText,n=t.availableTables,l=(t.tables,t.selectedTable);return console.log("in overlaychangetable, state",this.state),(0,O.jsx)(f.default,{style:et.overlay,children:(0,O.jsxs)(f.default,{style:et.overlayContent,children:[(0,O.jsxs)(f.default,{style:et.overlayHeader,children:[(0,O.jsxs)(A.default,{style:et.overlayTitleText,children:["TABLE ",l.tableId]}),(0,O.jsx)(A.default,{style:et.overlaySubtitleText,children:"Change Table"})]}),(0,O.jsxs)(f.default,{style:et.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:et.overlayBackButton,onPress:function(){return e.props.handleUpdateFromChangeTable("")},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:et.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:et.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:r}),(0,O.jsx)(R.default,{style:et.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:et.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:et.searchBoxInfoText,children:[n.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[et.overlayGrid,r.dummy?et.hidden:null],onPress:function(){return e.props.handleUpdateFromChangeTable(r)},children:[(0,O.jsxs)(f.default,{style:et.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:et.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:et.overlayGridFirstLeftText,children:r.sectionId})}),(0,O.jsx)(f.default,{style:et.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:et.overlayGridFirstRightText,children:"VACANT"})})]}),(0,O.jsx)(f.default,{style:et.overlayGridSecond,children:(0,O.jsx)(A.default,{style:et.overlayGridSecondText,children:r.tableId})}),(0,O.jsxs)(f.default,{style:et.overlayGridThird,children:[(0,O.jsx)(f.default,{style:et.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:et.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:et.overlayGridThirdRightText})})]})]})}})]})})}}]),r}(d.Component),et=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5}});function tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var rt=function(e){(0,o.default)(r,e);var t=tt(r);function r(e){return(0,l.default)(this,r),t.call(this,e)}return(0,a.default)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.selectedTable,n=t.selectedTableItem;t.tableItems;return console.log("in overlayreviseitem",this.props),(0,O.jsx)(f.default,{style:nt.overlay,children:(0,O.jsxs)(f.default,{style:nt.overlayContent,children:[(0,O.jsxs)(f.default,{style:nt.overlayHeader,children:[(0,O.jsxs)(A.default,{style:nt.overlayTitleText,children:[p.default.get("table")," ",r.tableId]}),(0,O.jsx)(A.default,{style:nt.overlaySubtitleText,children:p.default.get("reviseitem")}),(0,O.jsx)(A.default,{style:nt.overlayText,children:n.menuName.toUpperCase()})]}),(0,O.jsxs)(f.default,{style:nt.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:nt.button,onPress:function(){return e.props.handleUpdateFromReviseItem("voidItem")},children:[(0,O.jsx)(F.default,{name:"close",color:"white",size:32}),(0,O.jsx)(A.default,{style:nt.buttonText,children:p.default.get("remove")})]}),(0,O.jsxs)(R.default,{style:nt.button,onPress:function(){return e.props.handleUpdateFromReviseItem("duplicateItem")},children:[(0,O.jsx)(F.default,{name:"copy1",color:"white",size:32}),(0,O.jsx)(A.default,{style:nt.buttonText,children:p.default.get("duplicate")})]}),(0,O.jsxs)(R.default,{style:[nt.button,"Y"===n.confirmFlg&&{opacity:.2}],disabled:"Y"===n.confirmFlg,onPress:function(){return e.props.handleUpdateFromReviseItem("lineBreak")},children:[(0,O.jsx)(F.default,{name:"minus",color:"white",size:32}),(0,O.jsx)(A.default,{style:nt.buttonText,children:p.default.get("linebreak")})]}),(0,O.jsxs)(R.default,{style:nt.button,onPress:function(){return e.props.handleUpdateFromReviseItem("editItem")},children:[(0,O.jsx)(F.default,{name:"edit",color:"white",size:32}),(0,O.jsx)(A.default,{style:nt.buttonText,children:p.default.get("edit")})]})]}),(0,O.jsxs)(f.default,{style:nt.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:[nt.button,!("S"===n.menuType||"X"===n.menuType)&&{opacity:.2}],disabled:!("S"===n.menuType||"X"===n.menuType),onPress:function(){return e.props.handleUpdateFromReviseItem("revertItem")},children:[(0,O.jsx)(F.default,{name:"man",color:"white",size:32}),(0,O.jsx)(A.default,{style:nt.buttonText,children:p.default.get("revert")})]}),(0,O.jsxs)(R.default,{style:[nt.button,"N"===n.discFlg&&0!==n.listPrice&&{opacity:.2}],disabled:"N"===n.discFlg&&0!==n.listPrice,onPress:function(){return e.props.handleUpdateFromReviseItem("changePrice")},children:[(0,O.jsx)(F.default,{name:"exception1",color:"white",size:32}),(0,O.jsx)(A.default,{style:nt.buttonText,children:p.default.get("changeprice")})]}),(0,O.jsxs)(R.default,{style:[nt.button,"N"===n.discFlg&&{opacity:.2}],disabled:"N"===n.discFlg,onPress:function(){return e.props.handleUpdateFromReviseItem("lineDiscount")},children:[(0,O.jsx)(F.default,{name:"exception1",color:"white",size:32}),(0,O.jsx)(A.default,{style:nt.buttonText,children:p.default.get("linedisc")})]})]}),(0,O.jsx)(R.default,{style:[nt.overlayOption,{backgroundColor:L.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromReviseItem("")},children:(0,O.jsx)(A.default,{style:nt.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),nt=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{margin:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var at=function(e){(0,o.default)(r,e);var t=lt(r);function r(e){return(0,l.default)(this,r),t.call(this,e)}return(0,a.default)(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.selectedTable;t.tableItems;return console.log("in overlayadditionalfunctions",this.props),(0,O.jsx)(f.default,{style:ot.overlay,children:(0,O.jsxs)(f.default,{style:ot.overlayContent,children:[(0,O.jsxs)(f.default,{style:ot.overlayHeader,children:[(0,O.jsxs)(A.default,{style:ot.overlayTitleText,children:[p.default.get("table")," ",r.tableId]}),(0,O.jsxs)(A.default,{style:ot.overlaySubtitleText,children:[p.default.get("table")," ",p.default.get("action")]})]}),(0,O.jsxs)(f.default,{style:ot.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:[ot.button,(!r||"SYS"===r.sectionId||"A"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"SYS"===r.sectionId||"A"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("openTable")},children:[(0,O.jsx)(F.default,{name:"appstore-o",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("open")})]}),(0,O.jsxs)(R.default,{style:[ot.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("editTable")},children:[(0,O.jsx)(F.default,{name:"edit",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("edit")})]}),(0,O.jsxs)(R.default,{style:[ot.button,(!r||"SYS"===r.sectionId||"A"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"SYS"===r.sectionId||"A"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("reserveTable")},children:[(0,O.jsx)(F.default,{name:"calendar",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("reserve")})]}),"SYS"!==(null==r?void 0:r.sectionId)&&"A"===(null==r?void 0:r.statusFlg)?(0,O.jsxs)(R.default,{style:[ot.button,(!r||"A"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"A"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("disableTable")},children:[(0,O.jsx)(fe.default,{name:"cancel",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("disable")})]}):(0,O.jsxs)(R.default,{style:[ot.button,(!r||"A"===r.statusFlg)&&{opacity:.2}],disabled:!r||"A"===r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("resetTable")},children:[(0,O.jsx)(F.default,{name:"reload1",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("reset")})]})]}),(0,O.jsxs)(f.default,{style:ot.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:[ot.button,(!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId))&&{opacity:.2}],disabled:!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("mergeTable")},children:[(0,O.jsx)(F.default,{name:"menufold",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("mergetable")})]}),(0,O.jsxs)(R.default,{style:[ot.button,(!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId))&&{opacity:.2}],disabled:!r||!("B"===r.statusFlg||"C"===r.statusFlg)||"SYS"===(null==r?void 0:r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("splitTable")},children:[(0,O.jsx)(F.default,{name:"menuunfold",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("splittable")})]}),(0,O.jsxs)(R.default,{style:[ot.button,(!r||"C"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"C"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("changeTable")},children:[(0,O.jsx)(F.default,{name:"swap",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("changetable")})]})]}),(0,O.jsxs)(f.default,{style:ot.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:[ot.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("viewResequence")},children:[(0,O.jsx)(F.default,{name:"bars",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("resequence")})]}),(0,O.jsxs)(R.default,{style:[ot.button,(!r||"C"!==r.statusFlg)&&{opacity:.2}],disabled:!r||"C"!==r.statusFlg,onPress:function(){return e.props.handleUpdateFromTableActions("viewTransfer")},children:[(0,O.jsx)(F.default,{name:"export",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("transferitems")})]}),(0,O.jsxs)(R.default,{style:[ot.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("headerDiscount")},children:[(0,O.jsx)(F.default,{name:"exception1",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("headerdisc")})]}),(0,O.jsxs)(R.default,{style:[ot.button,(!r||!("C"===r.statusFlg||"SYS"===r.sectionId))&&{opacity:.2}],disabled:!r||!("C"===r.statusFlg||"SYS"===r.sectionId),onPress:function(){return e.props.handleUpdateFromTableActions("printBill")},children:[(0,O.jsx)(F.default,{name:"book",color:"white",size:32}),(0,O.jsx)(A.default,{style:ot.buttonText,children:p.default.get("printbill")})]})]}),(0,O.jsx)(R.default,{style:[ot.overlayOption,{backgroundColor:L.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromTableActions("")},children:(0,O.jsx)(A.default,{style:ot.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),ot=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function it(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var st=function(e){(0,o.default)(r,e);var t=it(r);function r(e){return(0,l.default)(this,r),t.call(this,e)}return(0,a.default)(r,[{key:"render",value:function(){var e=this;return console.log("in overlayadditionalfunctions",this.props),(0,O.jsx)(f.default,{style:dt.overlay,children:(0,O.jsxs)(f.default,{style:dt.overlayContent,children:[(0,O.jsxs)(f.default,{style:dt.overlayHeader,children:[(0,O.jsx)(A.default,{style:dt.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:dt.overlaySubtitleText,children:p.default.get("additionalfunctions")})]}),(0,O.jsxs)(f.default,{style:dt.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewReprint")},children:[(0,O.jsx)(F.default,{name:"printer",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("reprint")})]}),(0,O.jsxs)(R.default,{style:[dt.button],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewVoid")},children:[(0,O.jsx)(F.default,{name:"exception1",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("voidreceipts")})]}),(0,O.jsxs)(R.default,{style:[dt.button],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewCollect")},children:[(0,O.jsx)(F.default,{name:"gift",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("collection")})]}),(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("openDrawer")},children:[(0,O.jsx)(F.default,{name:"laptop",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("opendrawer")})]})]}),(0,O.jsxs)(f.default,{style:dt.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:[dt.button,{backgroundColor:L.grey2}],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("logOut")},children:[(0,O.jsx)(F.default,{name:"doubleleft",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("logout")})]}),(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewTrace")},children:[(0,O.jsx)(F.default,{name:"eyeo",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("trace")})]}),(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewPrinters")},children:[(0,O.jsx)(F.default,{name:"fork",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("testprint")})]}),(0,O.jsxs)(R.default,{style:[dt.button,{backgroundColor:L.grey2}],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("syncMasters")},children:[(0,O.jsx)(F.default,{name:"retweet",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("syncmasters")})]})]}),(0,O.jsxs)(f.default,{style:dt.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewActivate")},children:[(0,O.jsx)(F.default,{name:"bulb1",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("activate")})]}),(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewLimit")},children:[(0,O.jsx)(F.default,{name:"staro",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("limited")})]}),(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewDayclose")},children:[(0,O.jsx)(F.default,{name:"isv",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("dayend")})]}),(0,O.jsxs)(R.default,{style:dt.button,onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("viewReports")},children:[(0,O.jsx)(F.default,{name:"solution1",color:"white",size:32}),(0,O.jsx)(A.default,{style:dt.buttonText,children:p.default.get("reports")})]})]}),(0,O.jsx)(R.default,{style:[dt.overlayOption,{backgroundColor:L.paid,marginTop:20}],onPress:function(){return e.props.handleUpdateFromAdditionalFunctions("")},children:(0,O.jsx)(A.default,{style:dt.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),dt=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{minWidth:"50%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var ut=function(e){(0,o.default)(r,e);var t=ct(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlaySearchText:"",printers:e.cashierPrinters,availablePrinters:e.cashierPrinters},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.printers,n=(t.availablePrinters,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",this.state.availablePrinters),n=r,e?(n=n.filter((function(e){return e.iomodelId.toUpperCase().includes(l)||e.name.toUpperCase().includes(l)})),this.setState({availablePrinters:n})):this.setState({availablePrinters:n})}},{key:"render",value:function(){var e=this,t=this.props.printPurpose,r=this.state,n=r.overlaySearchText,l=r.availablePrinters;r.printers;return console.log("in overlaychooseprinter, state",this.state),(0,O.jsx)(f.default,{style:ft.overlay,children:(0,O.jsxs)(f.default,{style:ft.overlayContent,children:[(0,O.jsxs)(f.default,{style:ft.overlayHeader,children:[(0,O.jsx)(A.default,{style:ft.overlayTitleText,children:t}),(0,O.jsxs)(A.default,{style:ft.overlaySubtitleText,children:[p.default.get("choose")," ",p.default.get("printer")]})]}),(0,O.jsxs)(f.default,{style:ft.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:ft.overlayBackButton,onPress:function(){return e.props.handleUpdateFromChoosePrinter("")},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:ft.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:ft.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:n}),(0,O.jsx)(R.default,{style:ft.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:ft.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:ft.searchBoxInfoText,children:[l.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],data:l,keyExtractor:function(e,t){return t},renderItem:function(r){var n=r.item;return(0,O.jsxs)(R.default,{style:[ft.overlayGrid,n.dummy?ft.hidden:null],onPress:function(){return e.props.handleUpdateFromChoosePrinter(n,t)},children:[(0,O.jsxs)(f.default,{style:ft.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:ft.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:ft.overlayGridFirstLeftText,children:n.iomodelId})}),(0,O.jsx)(f.default,{style:ft.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:ft.overlayGridFirstRightText})})]}),(0,O.jsx)(f.default,{style:ft.overlayGridSecond,children:(0,O.jsx)(A.default,{style:ft.overlayGridSecondText,children:n.name})}),(0,O.jsxs)(f.default,{style:ft.overlayGridThird,children:[(0,O.jsx)(f.default,{style:ft.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:ft.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:ft.overlayGridThirdRightText})})]})]})}})]})})}}]),r}(d.Component),ft=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5}});function ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var yt=(0,he.default)(),gt=function(e){(0,o.default)(i,e);var t=ht(i);function i(e){var r;return(0,l.default)(this,i),(r=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,serviceEntryObj:e.route.params.serviceEntryObj,home:e.route.params.home,preference:e.route.params.preference,masters:e.route.params.masters,settings:e.route.params.masters.settings,selectedTable:null,selectedTableItem:null,tableItems:[],printPurpose:"",requestedPrivilege:"",screen:"TABLE",refresh:null},r.handlePressTable=r.handlePressTable.bind((0,S.default)(r)),r.handleActionTable=r.handleActionTable.bind((0,S.default)(r)),r.handlePressMenu=r.handlePressMenu.bind((0,S.default)(r)),r.handlePressScan=r.handlePressScan.bind((0,S.default)(r)),r.handleUpdateFromProcedureMessage=r.handleUpdateFromProcedureMessage.bind((0,S.default)(r)),r.handleUpdateFromAlert=r.handleUpdateFromAlert.bind((0,S.default)(r)),r.handleUpdateFromAutoLogout=r.handleUpdateFromAutoLogout.bind((0,S.default)(r)),r.handleUpdateFromDeposit=r.handleUpdateFromDeposit.bind((0,S.default)(r)),r.handleUpdateFromScanBarcode=r.handleUpdateFromScanBarcode.bind((0,S.default)(r)),r.handleUpdateFromReviseItem=r.handleUpdateFromReviseItem.bind((0,S.default)(r)),r.handleUpdateFromTableActions=r.handleUpdateFromTableActions.bind((0,S.default)(r)),r.handleUpdateFromAdditionalFunctions=r.handleUpdateFromAdditionalFunctions.bind((0,S.default)(r)),r.handleUpdateFromRequestAccess=r.handleUpdateFromRequestAccess.bind((0,S.default)(r)),r.handleUpdateFromChoosePrinter=r.handleUpdateFromChoosePrinter.bind((0,S.default)(r)),r.handleUpdateFromHeaderDiscount=r.handleUpdateFromHeaderDiscount.bind((0,S.default)(r)),r.handleUpdateFromLineDiscount=r.handleUpdateFromLineDiscount.bind((0,S.default)(r)),r.handleUpdateFromChangePrice=r.handleUpdateFromChangePrice.bind((0,S.default)(r)),r.handleUpdateFromMergeTable=r.handleUpdateFromMergeTable.bind((0,S.default)(r)),r.handleUpdateFromSplitTable=r.handleUpdateFromSplitTable.bind((0,S.default)(r)),r.handleUpdateFromChangeTable=r.handleUpdateFromChangeTable.bind((0,S.default)(r)),r.handleUpdateFromVoid=r.handleUpdateFromVoid.bind((0,S.default)(r)),r.handleUpdateFromTable=r.handleUpdateFromTable.bind((0,S.default)(r)),r}return(0,a.default)(i,[{key:"componentDidMount",value:function(){var e=this.props.navigation,t=this.state,n=t.serviceEntryObj,l=t.preference,a=t.home;t.selectedTable,t.tableItems;null!=l&&l.usecondary&&(r.g.socket=(0,ye.default)(n.restServiceUrl.substring(0,n.restServiceUrl.lastIndexOf("/gateway"))+"/socket.io",{query:{userId:a.userId,serviceId:n.epbId}})),this.sub=e.addListener("focus",this.didFocus.bind(this)),this.doChooseDefaultPrinter()}},{key:"didFocus",value:function(){var e=this.state.selectedTable;e&&this.handlePressTable(e),this.setState({refresh:Y()().format("HH:mm:ss")}),console.log("focused")}},{key:"componentWillUnmount",value:function(){this.sub(),r.g.socket&&r.g.socket.close()}},{key:"doChooseDefaultPrinter",value:function(){var e=this.state,t=e.home,r=e.masters;if("web"===h.default.OS&&r.cashierPrinters.length>1)this.setState({overlayChoosePrinterVisible:!0,printPurpose:"DEFAULT PRINTER"});else if(1===r.cashierPrinters.length){var n,l=t;l.defaultPrinter=null==(n=r.cashierPrinters)?void 0:n[0],this.setState({home:l})}}},{key:"handlePressTable",value:function(){var e=(0,n.default)((function*(e){var t=this;if(null!=e&&e.recKey){this.props.navigation;var n=this.state,l=n.serviceEntry,a=n.preference,o=l+"api/tables/"+e.recKey;return fetch(o,{method:"GET"}).then((function(e){return e.json()})).then((function(e){if("SYS"===e.opentable.sectionId&&("A"===e.opentable.statusFlg||"D"===e.opentable.statusFlg))return t.doClearTable(),void t.doToggleScreen("MENU");"SYS"===e.opentable.sectionId&&t.doToggleScreen("TABLE"),r.g.socket&&r.g.socket.emit("participate-room",{home:t.state.home,selectedTable:e.opentable,tableItems:e.opentableItems,users:a.usecondary.split(",")}),t.setState({selectedTable:e.opentable,tableItems:e.opentableItems})}))}}));return function(t){return e.apply(this,arguments)}}()},{key:"handleActionTable",value:function(e,t){var r=this.props.navigation,n=this.state,l=n.serviceEntry,a=n.home,o=n.masters,i=n.selectedTable;"CREATE"===t?this.doCreateTable():"OPEN"===t?r.navigate("Table",{home:a,serviceEntry:l,masters:o,selectedTable:i,mode:"NEW",handleUpdateFromTable:this.handleUpdateFromTable}):"EDIT"===t&&r.navigate("Table",{home:a,serviceEntry:l,masters:o,selectedTable:i,mode:"EDIT"})}},{key:"handlePressMenu",value:function(e,t){var r,n=this,l=this.props.navigation,a=this.state,o=a.home,i=a.preference,s=a.serviceEntry,d=a.settings,c=a.masters,u=a.selectedTable,f=null==(r=d.find((function(e){return"POSMODE"===e.setId})))?void 0:r.setString;if(console.log(e),u||"A"!==f)if(u||"B"!==f)if("O"!==e.menuType)if(c.modBundles.some((function(e){return"Y"===e.modmas.mustFlg&&"Y"===e.modmas.globalFlg}))||c.mods.some((function(t){var r;return t.menuId===e.menuId&&"Y"===(null==(r=c.modBundles.find((function(e){return e.modmas.modId===t.modId})))?void 0:r.modmas.mustFlg)})))l.navigate("Menu",{home:o,serviceEntry:s,masters:c,selectedTable:u,selectedMenu:e});else if(t){var h=s+"api/tables/"+u.recKey+"/insert-item",y={userId:o.userId,opentableRecKey:u.recKey,restmenuRecKey:e.recKey,restmenuMod:"N"===e.serviceFlg||"SYS"===u.sectionId&&"A"===f?"*"+p.default.get("takeaway")+"  ":"",orderQty:"1",orderType:"N"===e.serviceFlg||"SYS"===u.sectionId?"B":"A"};fetch(h,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(y)}).then((function(e){return e.json()})).then((function(t){var r;"Y"===(null==(r=d.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(s,"Insert Item",o.userName,t.message,u.tableId,e.menuName,"1"),console.log("post insert-item successful",t),t.message?n.setState({overlayProcedureMessageVisible:t.message.toUpperCase(),loading:!1}):n.handlePressTable(u)}))}else l.navigate("Menu",{home:o,serviceEntry:s,masters:c,selectedTable:u,selectedMenu:e});else l.navigate("Combo",{home:o,serviceEntry:s,preference:i,masters:c,selectedTable:u,selectedMenu:e});else this.doCreateTableForPos(e);else"O"===e.menuType?l.navigate("Combo",{home:o,serviceEntry:s,preference:i,masters:c,selectedTable:u,selectedMenu:e}):l.navigate("Menu",{home:o,serviceEntry:s,masters:c,selectedTable:u,selectedMenu:e})}},{key:"handlePressScan",value:function(e){var t=this.props.navigation,r=this.state,n=r.home,l=r.serviceEntry,a=r.masters,o=r.selectedTable;o&&(e?"web"!==h.default.OS&&t.navigate("Scan",{home:n,serviceEntry:l,masters:a,selectedTable:o}):this.setState({overlayScanBarcodeVisible:!0}))}},{key:"doClearTable",value:function(){r.g.socket&&r.g.socket.emit("participate-room",{home:this.state.home,selectedTable:null,tableItems:[],users:this.state.preference.usecondary.split(",")}),this.setState({selectedTable:null,tableItems:[]})}},{key:"doCreateTable",value:function(e){var t=this,n=this.props.navigation,l=this.state,a=l.preference,o=l.serviceEntry,i=l.home,s=l.settings,d=o+"api/insert-opentable",c={userId:i.userId,orderType:"B"};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(l){var d,c;"Y"===(null==(d=s.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:d.setString)&&K(o,"Create Table",i.userName,l.message,null==(c=l.opentable)?void 0:c.tableId),l.message?t.setState({overlayProcedureMessageVisible:l.message.toUpperCase()}):(n.navigate("MainMenu"),r.g.socket&&r.g.socket.emit("participate-room",{home:t.state.home,selectedTable:l.opentable,tableItems:l.opentableItems,users:a.usecondary.split(",")}),t.setState({screen:"MENU",selectedTable:l.opentable,tableItems:l.opentableItems,refresh:Y()().format("HH:mm:ss")},(function(){e&&t.handlePressMenu(e,!0)})))}))}},{key:"doCreateTableForPos",value:function(e){var t=this,n=this.props.navigation,l=this.state,a=l.serviceEntry,o=l.home,i=l.preference,s=l.masters,d=(l.selectedTable,l.settings),c=a+"api/insert-opentable",u={userId:o.userId,orderType:"B"};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(l){var c,u;"Y"===(null==(c=d.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:c.setString)&&K(a,"Create Table",o.userName,l.message,null==(u=l.opentable)?void 0:u.tableId),l.message?t.setState({overlayProcedureMessageVisible:l.message.toUpperCase()}):(n.navigate("MainMenu"),r.g.socket&&r.g.socket.emit("participate-room",{home:t.state.home,selectedTable:l.opentable,tableItems:l.opentableItems,users:i.usecondary.split(",")}),t.setState({selectedTable:l.opentable,tableItems:l.opentableItems,refresh:Y()().format("HH:mm:ss")},(function(){"O"===e.menuType?n.navigate("Combo",{home:o,serviceEntry:a,preference:i,masters:s,selectedTable:l.opentable,selectedMenu:e}):n.navigate("Menu",{home:o,serviceEntry:a,masters:s,selectedTable:l.opentable,selectedMenu:e})})))}))}},{key:"doTranslateTableColor",value:function(e){return e?e.adhocItem?L.adhoc:"SYS"===e.sectionId?"D"===e.statusFlg?L.paid:"A"===e.transType?L.grey5:L.deposit:"A"===e.statusFlg?L.vacant:"B"===e.statusFlg?L.reserved:"C"===e.statusFlg?L.occupied:"D"===e.statusFlg?L.paid:"E"===e.statusFlg?L.unavailable:void 0:L.grey9}},{key:"doTranslateTableStatus",value:function(e){return"SYS"!==e.sectionId?p.default.get(""+e.statusFlg).d("Unknown"):"A"===e.transType?p.default.get("sales"):"G"===e.transType?"Y"===e.homeDelivery?p.default.get("deposit")+"DLY":p.default.get("deposit"):void 0}},{key:"doTranslateTableItemColor",value:function(e){return"Y"===e.fireFlg?L.reserved:"Y"===e.confirmFlg?L.occupied:L.vacant}},{key:"doToggleScreen",value:function(e){var t,r=this.props.navigation,n=this.state.settings;"MENU"===e&&"A"===(null==(t=n.find((function(e){return"POSMODE"===e.setId})))?void 0:t.setString)?(this.setState({screen:"TABLE",refresh:Y()().format("HH:mm:ss")}),r.navigate("MainTable")):(this.setState({screen:"MENU"}),r.navigate("MainMenu"))}},{key:"doPressItem",value:function(e){this.setState({selectedTableItem:e,overlayReviseItemVisible:!0})}},{key:"doStartDayclose",value:function(e){var t=this,r=this.props.navigation,n=this.state,l=n.serviceEntry,a=n.home,o=n.masters,i=n.settings;if("Y"===a.adminFlg||o.privileges.some((function(e){return"DAYCLOSE"===e.priId}))||e){var s=l+"api/start-dayclose",d={userId:a.userId,orgId:a.orgId,shopId:a.shopId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var n;console.log("post start-dayclose successful",e),"Y"===(null==(n=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(l,"Start Dayclose",a.userName,e.message),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.navigate("Dayclose",{home:a,serviceEntry:l,masters:o,dayclosePayments:e.posDayCloseAmt,daycloseSubPayments:e.posDayCloseAmtDtl})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"DAYCLOSE"})}},{key:"doPressTransType",value:function(){var e=this.state.selectedTable,t=[];t.push({text:p.default.get("sales"),handleText:"doTransTypeSales"}),t.push({text:p.default.get("deposit"),handleText:"doTransTypeDeposit"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Transaction Type",text:"Select transaction type for "+e.tableId,ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"doStartPayment",value:function(e,t){var r=this,n=this.props.navigation,l=this.state,a=l.serviceEntry,o=l.serviceEntryObj,i=l.home,s=l.masters,d=l.settings,c=l.selectedTable,u=l.tableItems;if(c)if("SYS"===c.sectionId||"C"===c.statusFlg)if(u&&0!==u.length)if(c.refTableId)this.setState({overlayProcedureMessageVisible:"TABLE ALREADY MERGED "+c.refTableId});else if("Y"===i.adminFlg||s.privileges.some((function(e){return"PAYMENT"===e.priId}))||t){var f=a+"api/tables/"+c.recKey+"/start-payment",h={userId:i.userId,opentableRecKey:c.recKey,iomodelId:i.defaultPrinter&&i.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(f,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(h)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post start-payment successful",e),"Y"===(null==(t=d.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(a,"Start Payment",i.userName,e.message,c.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({selectedTable:e.opentable,pospays:e.opentablePospays},(function(){return n.navigate("Pos",{home:i,serviceEntry:a,serviceEntryObj:o,masters:s,selectedTable:e.opentable,pospays:e.opentablePospays})}))}))}else this.setState({requestedPrivilege:"PAYMENT",overlayRequestAccessVisible:!0});else this.setState({overlayProcedureMessageVisible:"NO TABLE ITEMS"});else this.setState({overlayProcedureMessageVisible:"CHECK TABLE STATUS"});else this.setState({overlayProcedureMessageVisible:"SELECT AN ORDER"})}},{key:"doChangeTableStatus",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.selectedTable,o=(r.masters,r.settings),i=l+"api/tables/"+a.recKey+"/change-table-status",s={userId:n.userId,locId:n.locId,tableStatus:e,pax:"",vipId:"",vipName:"",phone:"",reservationTime:"",sourceId:""};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(r){var i;console.log("post change-table-status successful",r),"Y"===(null==(i=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(l,"Change Table Status",n.userName,r.message,a.tableId,"",e),r.message?"Table Not Found"===r.message?(t.doClearTable(),t.doToggleScreen("MENU")):t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):(t.setState({refresh:Y()().format("HH:mm:ss")}),t.handlePressTable(a))}))}},{key:"doRevertTableItem",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=(t.masters,t.settings),a=t.selectedTableItem,o=t.selectedTable;this.setState({overlayReviseItemVisible:!1});var i=r+"api/tables/"+o.recKey+"/revert-adhoc",s={userId:n.userId,opentableRecKey:o.recKey,opentableItemRecKey:a.recKey};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){var i;console.log("post revert-adhoc successful",t),"Y"===(null==(i=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(r,"Revert Adhoc",n.userName,t.message,o.tableId,a.menuName),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):(e.setState({selectedTableItem:"",refresh:Y()().format("HH:mm:ss")}),e.handlePressTable(o))}))}},{key:"doDuplicateTableItem",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=(t.masters,t.settings),a=t.selectedTableItem,o=t.selectedTable;this.setState({overlayReviseItemVisible:!1});var i=r+"api/tables/"+o.recKey+"/duplicate-item",s={userId:n.userId,opentableRecKey:o.recKey,opentableItemRecKey:a.recKey};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){var i;console.log("post duplicate-item successful",t),"Y"===(null==(i=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(r,"Duplicate Item",n.userName,t.message,o.tableId,a.menuName),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):(e.setState({selectedTableItem:""}),e.handlePressTable(o))}))}},{key:"doUpdateLineBreak",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=(t.masters,t.settings),a=t.selectedTable,o=t.selectedTableItem;this.setState({overlayReviseItemVisible:!1});var i="Y";"Y"===o.lineBreak&&(i="N");var s=r+"api/tables/"+a.recKey+"/update-line-break",d={userId:n.userId,opentableRecKey:a.recKey,opentableItemRecKey:o.recKey,lineBreak:i};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(t){var i;console.log("post update-line-break successful",t),"Y"===(null==(i=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(r,"Line Break",n.userName,t.message,a.tableId,o.menuName),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.handlePressTable(t.opentable)}))}},{key:"doPrintBill",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.masters,o=r.settings,i=r.selectedTable;if(i&&("C"===(null==i?void 0:i.statusFlg)||"SYS"===(null==i?void 0:i.sectionId)))if(a.cashierPrinters.length>1&&!e&&!n.defaultPrinter)this.setState({printPurpose:"PRINT BILL",overlayChoosePrinterVisible:!0});else{var s=l+"api/tables/"+i.recKey+"/print-bill",d={userId:n.userId,orgId:n.orgId,locId:n.locId,opentableRecKey:i.recKey,iomodelId:n.defaultPrinter&&n.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post print-bill successful",e),"Y"===(null==(r=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Print Bill",n.userName,e.message,i.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.handlePressTable(i)}))}}},{key:"doOpenDrawer",value:function(e,t){var r=this,n=this.state,l=n.home,a=n.serviceEntry,o=n.masters,i=n.settings;if(o.cashierPrinters.length>1&&!e&&!l.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0,printPurpose:"OPEN DRAWER"});else if("Y"===l.adminFlg||o.privileges.some((function(e){return"OPENDRAWER"===e.priId}))||t){var s=a+"api/open-cashdrawer",d={userId:l.userId,orgId:l.orgId,locId:l.locId,shopId:l.shopId,iomodelId:l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post open-cashdrawer successful",e),"Y"===(null==(t=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(a,"Open Cashdrawer",l.userName,e.message),e.message&&r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"OPENDRAWER"})}},{key:"doTransTypeSales",value:function(){var e=this.state.selectedTable;this.handleUpdateFromDeposit("A",e.vipName,e.vipPhone,e.homeDelivery,e.dlyDate?Y()(e.dlyDate).format("YYYY-MM-DD"):"",e.dpostalcode,e.daddress1,e.daddress2)}},{key:"doTransTypeDeposit",value:function(){this.setState({overlayDepositVisible:!0})}},{key:"doPressSend",value:function(){var e=this.state,t=(e.serviceEntry,e.home,e.masters,e.selectedTable);if(t&&"Y"===t.sendFlg){var r=[];r.push({text:"Yes",handleText:"doSendOrder"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Send Order",text:"Send order for Table "+t.tableId+" ?",ok:!1,cancel:!0,options:r},overlayAlertVisible:!0})}else console.log("no selectedTable or sendFlg is N")}},{key:"doSendOrder",value:function(e){var t,r=this,n=this.state,l=n.serviceEntry,a=n.home,o=n.selectedTable,i=n.masters,s=n.settings,d=!1;"SYS"!==o.sectionId&&(d="Y"===(null==(t=i.sections.find((function(e){return e.sectionId===o.sectionId})))?void 0:t.printOrderFlg));if(i.cashierPrinters.length>1&&!e&&!a.defaultPrinter&&d)this.setState({printPurpose:"SEND ORDER",overlayChoosePrinterVisible:!0});else{var c=l+"api/tables/"+o.recKey+"/send-order",u={userId:a.userId,orgId:a.orgId,locId:a.locId,opentableRecKey:o.recKey,iomodelId:d&&(a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId)};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post send-order successful",e),"Y"===(null==(t=s.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(l,"Send Order",a.userName,e.message,o.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({selectedTable:e.opentable,tableItems:e.opentableItems})}))}}},{key:"doEditTableItem",value:function(e){var t=this.props.navigation,r=this.state,n=r.home,l=r.serviceEntry,a=r.masters,o=r.preference,i=r.tableItems,s=r.selectedTable,d=r.selectedTableItem;this.setState({overlayReviseItemVisible:!1}),"Y"!==d.confirmFlg||"Y"===n.adminFlg||a.privileges.some((function(e){return"EDITITEM"===e.priId}))||e?"O"===(null==d?void 0:d.menuType)?t.navigate("Combo",{home:n,serviceEntry:l,masters:a,preference:o,selectedTable:s,selectedMenu:a.menus.find((function(e){return e.menuId===d.menuId})),selectedTableItem:d,tableItems:i}):t.navigate("Menu",{home:n,serviceEntry:l,masters:a,selectedTable:s,selectedMenu:a.menus.find((function(e){return e.menuId===d.menuId})),selectedTableItem:d}):this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"EDITITEM"})}},{key:"doDeleteTableItem",value:function(e){var t=this,r=this.state,n=r.serviceEntry,l=r.home,a=r.selectedTableItem,o=r.selectedTable,i=r.masters,s=r.settings;r.privileges;if("Y"!==a.confirmFlg||"Y"===l.adminFlg||i.privileges.some((function(e){return"VOIDITEM"===e.priId}))||e){var d=n+"api/tables/"+o.recKey+"/delete-item",c={userId:l.userId,orgId:l.orgId,locId:l.locId,opentableRecKey:o.recKey,opentableItemRecKey:a.recKey,superUserId:e};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post delete-item successful",e),"Y"===(null==(r=s.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(n,"Delete Item",l.userName,e.message,o.tableId,a.menuName),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.handlePressTable(e.opentable)}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"VOIDITEM"})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state,n=(r.selectedTable,r.home);if(e){if(this.setState({printPurpose:"",selectedPrinter:e,overlayChoosePrinterVisible:!1}),"SEND ORDER"===t)this.doSendOrder(e);else if("PRINT BILL"===t)this.doPrintBill(e);else if("START PAYMENT"===t)this.doStartPayment(e);else if("OPEN DRAWER"===t)this.doOpenDrawer(e);else if("DEFAULT PRINTER"===t){var l=n;l.defaultPrinter=e,this.setState({home:l})}}else this.setState({printPurpose:"",selectedPrinter:"",overlayChoosePrinterVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=(r.masters,r.settings),o=r.requestedPrivilege,i=r.selectedPrinter,s=r.selectedTable,d=r.selectedTableItem;if(e){var c=l+"api/super-user",u={locId:n.locId,accessCode:e,priId:o};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access "+o,n.userName,e.message,null==s?void 0:s.tableId,null==d?void 0:d.menuName,e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),"OPENDRAWER"===o?t.doOpenDrawer(i,e.userId):"PAYMENT"===o?t.doStartPayment(i,e.userId):"DAYCLOSE"===o?t.doStartDayclose(e.userId):"VOIDITEM"===o?t.doDeleteTableItem(e.userId):"EDITITEM"===o&&t.doEditTableItem(e.userId))}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromAdditionalFunctions",value:function(e){var t=this.props.navigation,r=this.state,n=r.serviceEntry,l=r.home,a=r.masters,o=r.selectedTable;r.tableItems;this.setState({overlayAdditionalFunctionsVisible:!1}),e&&("viewReprint"===e?t.navigate("Reprint",{home:l,serviceEntry:n,masters:a}):"viewVoid"===e?t.navigate("Void",{home:l,serviceEntry:n,masters:a,handleUpdateFromVoid:this.handleUpdateFromVoid}):"viewCollect"===e?t.navigate("Collect",{home:l,serviceEntry:n,masters:a}):"viewDayclose"===e?this.doStartDayclose():"viewReports"===e?t.navigate("Report",{home:l,serviceEntry:n,masters:a}):"openDrawer"===e?this.doOpenDrawer():"viewPrinters"===e?t.navigate("Printer",{home:l,serviceEntry:n}):"viewActivate"===e?t.navigate("Activate",{home:l,serviceEntry:n,masters:a}):"logOut"===e?t.goBack():"syncMasters"===e?t.navigate("Login",{sync:new Date}):"viewTrace"===e?t.navigate("Trace",{home:l,serviceEntry:n,selectedTable:o}):"viewLimit"===e&&t.navigate("Limit",{home:l,serviceEntry:n,masters:a}))}},{key:"handleUpdateFromTableActions",value:function(){var e=(0,n.default)((function*(e){var t=this.props.navigation,r=this.state,n=r.serviceEntry,l=r.home,a=r.masters,o=r.selectedTable,i=r.tableItems;this.setState({overlayTableActionsVisible:!1}),e&&("viewResequence"===e?t.navigate("Resequence",{home:l,serviceEntry:n,masters:a,tableItems:i,selectedTable:o}):"viewTransfer"===e?t.navigate("Transfer",{home:l,serviceEntry:n,masters:a,tableItems:i,selectedTable:o}):"headerDiscount"===e?this.setState({overlayHeaderDiscountVisible:!0}):"printBill"===e?this.doPrintBill():"openTable"===e?(yield this.handlePressTable(o),t.navigate("Table",{home:l,serviceEntry:n,masters:a,selectedTable:o,mode:"NEW",handleUpdateFromTable:this.handleUpdateFromTable})):"editTable"===e?t.navigate("Table",{home:l,serviceEntry:n,masters:a,selectedTable:o,mode:"EDIT"}):"resetTable"===e?this.doChangeTableStatus("A"):"reserveTable"===e?this.doChangeTableStatus("B"):"disableTable"===e?this.doChangeTableStatus("E"):"mergeTable"===e?this.setState({overlayMergeTableVisible:!0}):"splitTable"===e?this.setState({overlaySplitTableVisible:!0}):"changeTable"===e&&this.setState({overlayChangeTableVisible:!0}))}));return function(t){return e.apply(this,arguments)}}()},{key:"handleUpdateFromReviseItem",value:function(e){this.props.navigation;var t=this.state,r=(t.serviceEntry,t.home,t.settings,t.masters,t.selectedTable,t.selectedTableItem);if(e)if("voidItem"===e){var n=[];n.push({text:"Yes",handleText:"doDeleteTableItem"}),this.setState({overlayReviseItemVisible:!1,overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Remove Item",text:"Remove "+r.menuName+" ?",ok:!1,cancel:!0,options:n},overlayAlertVisible:!0})}else"editItem"===e?this.doEditTableItem():"revertItem"===e?this.doRevertTableItem():"changePrice"===e?this.setState({overlayChangePriceVisible:!0,overlayReviseItemVisible:!1}):"lineDiscount"===e?this.setState({overlayLineDiscountVisible:!0,overlayReviseItemVisible:!1}):"lineBreak"===e?this.doUpdateLineBreak():"duplicateItem"===e&&this.doDuplicateTableItem();else this.setState({overlayReviseItemVisible:!1})}},{key:"handleUpdateFromLineDiscount",value:function(e,t){var r=this;if(this.setState({overlayLineDiscountVisible:!1}),e){var n=this.state,l=n.serviceEntry,a=n.home,o=(n.masters,n.settings),i=n.selectedTable,s=n.selectedTableItem,d=l+"api/tables/"+i.recKey+"/line-discount",c={userId:a.userId,discId:e.discId,disc:e.discNum,opentableRecKey:i.recKey,opentableItemRecKey:s.recKey,superUserId:t,remarks:e.remarks};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){var n;console.log("post line-discount successful",t),"Y"===(null==(n=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(l,"Line Discount",a.userName,t.message,i.tableId,s.menuName,e.discId),t.message?r.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):r.handlePressTable(i)}))}}},{key:"handleUpdateFromHeaderDiscount",value:function(e,t){var r=this;if(this.setState({overlayHeaderDiscountVisible:!1}),e){var n=this.state,l=n.serviceEntry,a=n.home,o=(n.masters,n.settings),i=n.selectedTable,s=l+"api/tables/"+i.recKey+"/header-discount",d={userId:a.userId,discId:e.discId,disc:e.discNum,opentableRecKey:i.recKey,superUserId:t,remarks:e.remarks};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(t){var n;console.log("post header-discount successful",t),"Y"===(null==(n=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(l,"Header Discount",a.userName,t.message,i.tableId,"",e.discId),t.message?r.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):r.handlePressTable(i)}))}}},{key:"handleUpdateFromChangePrice",value:function(e,t,r){var n=this;if(this.setState({overlayChangePriceVisible:!1}),e||t){var l=this.state,a=l.serviceEntry,o=l.home,i=(l.masters,l.settings),s=l.selectedTable,d=l.selectedTableItem,c=a+"api/tables/"+s.recKey+"/change-price",u={userId:o.userId,price:e,discId:t.discId,opentableRecKey:s.recKey,opentableItemRecKey:d.recKey,superUserId:r};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(t){var r;console.log("post change-price successful",t),"Y"===(null==(r=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(a,"Change Price",o.userName,t.message,s.tableId,d.menuName,e),t.message?n.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):n.handlePressTable(s)}))}}},{key:"handleUpdateFromMergeTable",value:function(e){var t=this;if(this.setState({overlayMergeTableVisible:!1}),0!==e.length){var r=this.state,n=r.serviceEntry,l=r.home,a=(r.masters,r.settings),o=r.selectedTable,i=n+"api/tables/"+o.recKey+"/merge-table",s=e.map((function(e){return{mergedTableId:e.tableId}})),d={userId:l.userId,locId:l.locId,opentableRecKey:o.recKey,itemPayloads:s};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(r){var i;console.log("post merge-table successful",r),"Y"===(null==(i=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Merge Table",l.userName,r.message,o.tableId,"",e.map((function(e){return e.tableId})).join(",")),r.message?t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):(t.setState({refresh:Y()().format("HH:mm:ss")}),t.handlePressTable(o))}))}}},{key:"handleUpdateFromSplitTable",value:function(e){var t=this;if(this.setState({overlaySplitTableVisible:!1}),e){var r=this.state,n=r.serviceEntry,l=r.home,a=(r.masters,r.settings),o=r.selectedTable,i=n+"api/tables/"+o.recKey+"/split-table",s=e.map((function(e){return{opentableItemRecKey:e.recKey,opentableRecKey:o.recKey}})),d={userId:l.userId,itemPayloads:s};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var r,i;console.log("post split-table successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(n,"Split Table",l.userName,e.message,o.tableId,"",null==(i=e.opentable)?void 0:i.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({refresh:Y()().format("HH:mm:ss")}),t.handlePressTable(e.opentable||o))}))}}},{key:"handleUpdateFromChangeTable",value:function(e){var t=this;if(this.setState({overlayChangeTableVisible:!1}),e){var r=this.state,n=r.serviceEntry,l=r.home,a=(r.masters,r.settings),o=r.selectedTable,i=n+"api/tables/"+o.recKey+"/change-table",s={userId:l.userId,tableIdTo:e.tableId};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(r){var i;console.log("post change-table successful",r),"Y"===(null==(i=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Change Table",l.userName,r.message,o.tableId,"",e.tableId),r.message?t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):(t.setState({refresh:Y()().format("HH:mm:ss")}),t.handlePressTable(e))}))}}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.state;t.selectedTable,t.selectedTableItem;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&("doSendOrder"===e?this.doSendOrder():"doDeleteTableItem"===e?this.doDeleteTableItem():"doTransTypeSales"===e?this.doTransTypeSales():"doTransTypeDeposit"===e&&this.doTransTypeDeposit())}},{key:"handleUpdateFromAutoLogout",value:function(e){}},{key:"handleUpdateFromDeposit",value:function(e,t,r,n,l,a,o,i){var s=this;if(this.setState({overlayDepositVisible:!1}),e){var d=this.state,c=d.home,u=d.serviceEntry,f=(d.masters,d.settings),h=d.selectedTable,y=u+"api/tables/"+h.recKey+"/update-table-info",g={userId:c.userId,locId:c.locId,transType:e,vipName:t,phone:r,deliveryFlg:n,dlyDate:l,postalCode:a,addr1:o,addr2:i,addr3:"",addr4:""};fetch(y,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(g)}).then((function(e){return e.json()})).then((function(t){var r;console.log("post deposit successful",t),"Y"===(null==(r=f.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(u,"Update Transaction Type",c.userName,t.message,h.tableId,"",e+","+n),t.message?s.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):s.handlePressTable(h)}))}}},{key:"handleUpdateFromScanBarcode",value:function(e){var t=this;if(e){var r=this.state,n=r.serviceEntry,l=r.home,a=r.settings,o=r.selectedTable,i=n+"api/tables/"+o.recKey+"/scan-barcode",s={userId:l.userId,orgId:l.orgId,locId:l.locId,shopId:l.shopId,vipId:l.vipId,barcode:e,opentableRecKey:o.recKey};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(r){var i;console.log("post scan-barcode successful",r),"Y"===(null==(i=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Scan Barcode",l.userName,r.message,o.tableId,"",e),r.message?t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):t.handlePressTable(o)}))}else this.setState({overlayScanBarcodeVisible:!1})}},{key:"handleUpdateFromVoid",value:function(e){this.setState({selectedTable:e.opentable,tableItems:e.opentableItems})}},{key:"handleUpdateFromTable",value:function(){this.doToggleScreen("TABLE")}},{key:"render",value:function(){var e,t,r,n=this,l=this.props,a=(l.route,l.navigation),o=this.state,i=o.serviceEntryObj,s=o.serviceEntry,d=o.home,c=o.preference,u=o.masters,h=o.screen,y=o.refresh,g=o.selectedTable,m=o.selectedTableItem,x=o.tableItems,v=o.printPurpose,b=o.requestedPrivilege,j=o.overlayAutoLogoutVisible,T=o.overlayAlertVisible,S=o.overlayAlertInputValue,F=o.overlayReviseItemVisible,P=o.overlayTableActionsVisible,w=o.overlayAdditionalFunctionsVisible,k=o.overlayRequestAccessVisible,E=o.overlayHeaderDiscountVisible,B=o.overlayLineDiscountVisible,U=o.overlayChangePriceVisible,V=o.overlayChangeTableVisible,M=o.overlayMergeTableVisible,z=o.overlaySplitTableVisible,N=o.overlayDepositVisible,K=o.overlayScanBarcodeVisible,G=o.overlayProcedureMessageVisible,H=o.overlayChoosePrinterVisible,W=null==(e=u.settings.find((function(e){return"POSMODE"===e.setId})))?void 0:e.setString;return(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row"},children:[j&&(0,O.jsx)(Ce,{handleUpdateFromAutoLogout:this.handleUpdateFromAutoLogout}),N&&(0,O.jsx)(Pe,{serviceEntry:s,selectedTable:g,handleUpdateFromDeposit:this.handleUpdateFromDeposit}),T&&(0,O.jsx)(ee,{input:S,handleUpdateFromAlert:this.handleUpdateFromAlert}),G&&(0,O.jsx)(q,{text:G,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),K&&(0,O.jsx)(Ee,{handleUpdateFromScanBarcode:this.handleUpdateFromScanBarcode}),F&&(0,O.jsx)(rt,{home:d,privileges:u.privileges,selectedTable:g,selectedTableItem:m,tableItems:x,handleUpdateFromReviseItem:this.handleUpdateFromReviseItem}),P&&(0,O.jsx)(at,{selectedTable:g,tableItems:x,handleUpdateFromTableActions:this.handleUpdateFromTableActions}),w&&(0,O.jsx)(st,{selectedTable:g,tableItems:x,handleUpdateFromAdditionalFunctions:this.handleUpdateFromAdditionalFunctions}),k&&(0,O.jsx)(Ue,{home:d,requestedPrivilege:b,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),H&&(0,O.jsx)(ut,{printPurpose:v,cashierPrinters:u.cashierPrinters,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),U&&(0,O.jsx)(Ve,{home:d,serviceEntry:s,settings:u.settings,privileges:u.privileges,discounts:u.discounts,selectedTableItem:m,handleUpdateFromChangePrice:this.handleUpdateFromChangePrice}),B&&(0,O.jsx)(Ne,{home:d,serviceEntry:s,settings:u.settings,privileges:u.privileges,discounts:u.discounts,handleUpdateFromLineDiscount:this.handleUpdateFromLineDiscount}),E&&(0,O.jsx)(Ge,{home:d,serviceEntry:s,settings:u.settings,privileges:u.privileges,discounts:u.discounts,handleUpdateFromHeaderDiscount:this.handleUpdateFromHeaderDiscount}),M&&(0,O.jsx)(qe,{serviceEntry:s,home:d,selectedTable:g,handleUpdateFromMergeTable:this.handleUpdateFromMergeTable}),z&&(0,O.jsx)(Xe,{selectedTable:g,tableItems:x,handleUpdateFromSplitTable:this.handleUpdateFromSplitTable}),V&&(0,O.jsx)(Ze,{serviceEntry:s,home:d,selectedTable:g,handleUpdateFromChangeTable:this.handleUpdateFromChangeTable}),(0,O.jsx)(f.default,{style:{width:10,backgroundColor:L.grey8},children:(0,O.jsx)(f.default,{style:{marginTop:30,height:100,backgroundColor:this.doTranslateTableColor(g)}})}),(0,O.jsxs)(f.default,{style:{flex:1,backgroundColor:"white"},children:[(0,O.jsxs)(f.default,{style:{marginHorizontal:10,height:20,flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},children:[(0,O.jsx)(A.default,{style:mt.footerText,children:d.userName}),(0,O.jsx)(A.default,{style:mt.footerText,children:d.locName})]}),(0,O.jsxs)(f.default,{style:{margin:7,marginLeft:0,flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(f.default,{style:{margin:3,flex:1,flexDirection:"row"},children:g&&(0,O.jsxs)(R.default,{style:{marginLeft:0,aspectRatio:1,backgroundColor:this.doTranslateTableColor(g),justifyContent:"center",alignItems:"center"},onPress:function(){return n.setState({overlayTableActionsVisible:!0})},children:[(0,O.jsx)(A.default,{style:mt.tableUpperBand,numberOfLines:1,children:g.vipName||""}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.black8,fontSize:24,letterSpacing:1},numberOfLines:1,children:g.tableId}),(0,O.jsx)(A.default,{style:mt.tableLowerBand,numberOfLines:1,children:this.doTranslateTableStatus(g)})]})}),g&&"SYS"===g.sectionId?(0,O.jsxs)(f.default,{style:{flexDirection:"row"},children:[g.adhocItem>0&&(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Adhoc",{home:d,serviceEntry:s,masters:u,selectedTable:g})},children:[(0,O.jsx)(C.default,{name:"extension",size:28,color:L.adhoc,style:{height:28,width:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("adhoc")}),(0,O.jsx)(A.default,{style:{position:"absolute",fontFamily:"varela-round",top:10,right:10},children:g.adhocItem})]}),"A"===W&&(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},disabled:"Y"!==g.sendFlg,onPress:function(){return n.doPressSend()},children:[(0,O.jsx)(ce.default,{name:"send",size:24,color:"Y"!==g.sendFlg?L.grey5:L.occupied,style:{height:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("send")})]}),"A"===W&&(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Fire",{home:d,serviceEntry:s,masters:u,selectedTable:g,tableItems:x})},children:[(0,O.jsx)(ue.default,{name:"fire",size:24,color:L.reserved,style:{height:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("fire")})]}),"B"===W&&(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Table",{home:d,serviceEntry:s,masters:u,selectedTable:g,mode:"EDIT",tab:"VIP"})},children:[(0,O.jsx)(fe.default,{name:"account-circle",size:29,color:L.unavailable,style:{height:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:"VIP"})]})]}):g&&"A"===g.statusFlg?(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Table",{home:d,serviceEntry:s,masters:u,selectedTable:g,mode:"NEW",handleUpdateFromTable:n.handleUpdateFromTable})},children:[(0,O.jsx)(fe.default,{name:"checkbox-blank",size:26,color:L.occupied,style:{height:28,width:26}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("open")})]}):g&&"D"===g.statusFlg?(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return n.handleUpdateFromTableActions("resetTable")},children:[(0,O.jsx)(fe.default,{name:"checkbox-blank",size:26,color:L.vacant,style:{height:28,width:26}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("reset")})]}):g?(0,O.jsxs)(f.default,{style:{flexDirection:"row"},children:[g.adhocItem>0&&(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Adhoc",{home:d,serviceEntry:s,masters:u,selectedTable:g})},children:[(0,O.jsx)(C.default,{name:"extension",size:28,color:L.adhoc,style:{height:28,width:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("adhoc")}),(0,O.jsx)(A.default,{style:{position:"absolute",fontFamily:"varela-round",top:10,right:10},children:g.adhocItem})]}),(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},disabled:"Y"!==g.sendFlg,onPress:function(){return n.doPressSend()},children:[(0,O.jsx)(ce.default,{name:"send",size:24,color:"Y"!==g.sendFlg?L.grey5:L.occupied,style:{height:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("send")})]}),(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Fire",{home:d,serviceEntry:s,masters:u,selectedTable:g,tableItems:x})},children:[(0,O.jsx)(ue.default,{name:"fire",size:24,color:L.reserved,style:{height:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("fire")})]})]}):null,(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return n.setState({overlayAdditionalFunctionsVisible:!0})},children:[(0,O.jsx)(fe.default,{name:"clover",size:28,color:L.paid,style:{height:28,width:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("func")})]})]}),(0,O.jsxs)(f.default,{style:{flexDirection:"row",marginVertical:3,borderLeftWidth:5,borderLeftColor:"white"},children:[(0,O.jsx)(f.default,{style:{width:50,height:20,alignItems:"center",justifyContent:"center",borderRightColor:L.paid},children:(0,O.jsx)(A.default,{style:[mt.footerText,{fontSize:12}],children:p.default.get("qty")})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:[mt.footerText,{fontSize:12}],children:p.default.get("desc")})}),(0,O.jsx)(f.default,{style:{paddingRight:10,alignItems:"flex-end",justifyContent:"center"},children:(0,O.jsx)(A.default,{style:[mt.footerText,{fontSize:12}],children:p.default.get("total")})})]}),(0,O.jsx)(_.default,{style:{flex:1},ref:function(e){return n.scrollViewRef=e},onContentSizeChange:function(){return n.scrollViewRef.scrollToEnd()},showsVerticalScrollIndicator:!1,children:x.filter((function(e){return!e.refRecKey})).map((function(e){var t;return(0,O.jsxs)(f.default,{children:["Y"===e.lineBreak&&(0,O.jsxs)(f.default,{style:{alignItems:"center",flexDirection:"row",height:20},children:[(0,O.jsx)(f.default,{style:{flex:1,height:1,width:20,backgroundColor:L.grey5,marginHorizontal:20}}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.grey5,fontSize:12},children:"LINE BREAK"}),(0,O.jsx)(f.default,{style:{flex:1,height:1,width:20,backgroundColor:L.grey5,marginHorizontal:20}})]}),(0,O.jsxs)(R.default,{style:{flexDirection:"row",marginVertical:3,borderLeftWidth:5,borderLeftColor:n.doTranslateTableItemColor(e)},onPress:function(){return n.doPressItem(e)},children:[(0,O.jsx)(f.default,{style:{paddingVertical:10,width:50,alignItems:"center",borderRightColor:L.paid},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16},children:e.orderQty})}),(0,O.jsxs)(f.default,{style:{paddingVertical:10,flex:1},children:[(0,O.jsxs)(f.default,{style:{flexDirection:"row"},children:[(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16},children:e.menuName}),e.menuMod&&(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16,color:L.paid},children:e.menuMod})]}),(0,O.jsx)(f.default,{style:{paddingHorizontal:10,alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16},children:null==(t=e.lineTotal)?void 0:t.toFixed(2)})})]}),x.filter((function(t){return t.refRecKey===e.recKey})).map((function(e){var t;return(0,O.jsxs)(f.default,{style:{marginTop:5,flexDirection:"row"},children:[(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",fontSize:14,marginLeft:10},children:["- ",e.menuName]}),e.menuMod&&(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:14,color:L.paid},children:e.menuMod})]}),(0,O.jsx)(f.default,{style:{paddingHorizontal:10,alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:14},children:e.lineTotal?null==(t=e.lineTotal)?void 0:t.toFixed(2):""})})]},e.recKey.toString())}))]})]})]},e.recKey.toString())}))}),(0,O.jsxs)(f.default,{style:{margin:10,marginBottom:0,flexDirection:"row",justifyContent:"flex-end",alignItems:"baseline"},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:10}}),(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",fontSize:28},children:["$",(null==g||null==(t=g.grandTotal)?void 0:t.toFixed(2))||"0.00"]})]}),(0,O.jsxs)(f.default,{style:{margin:7,flexDirection:"row"},children:["A"===W&&(0,O.jsxs)(R.default,{style:{margin:3,height:100,flex:1,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return n.doToggleScreen(h)},children:["TABLE"===h?(0,O.jsx)(I.default,{name:"md-book",size:26,color:L.reserved,style:{height:28,width:26}}):(0,O.jsx)(fe.default,{name:"apps-box",size:28,color:L.vacant,style:{height:28,width:28}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:"TABLE"===h?p.default.get("menu"):p.default.get("table")})]}),(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return a.navigate("Trace",{home:d,serviceEntry:s,selectedTable:g})},children:[(0,O.jsx)(fe.default,{name:"navigation",size:28,color:L.adhoc,style:{height:28,width:28,transform:[{rotateZ:"180deg"}]}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("trace")})]}),(0,O.jsxs)(R.default,{style:{margin:3,height:100,width:50,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return n.doPrintBill()},children:[(0,O.jsx)(fe.default,{name:"book",size:26,color:L.occupied,style:{height:28,width:26}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("bill")})]}),(0,O.jsxs)(R.default,{style:{margin:3,height:100,flex:1,borderRadius:5,backgroundColor:L.grey9,alignItems:"center",justifyContent:"center"},onPress:function(){return n.doStartPayment()},children:[(0,O.jsx)(I.default,{name:"print-sharp",size:27,color:L.paid,style:{height:28,marginLeft:1}}),(0,O.jsx)(A.default,{style:mt.buttonText,children:p.default.get("payment")})]})]}),(0,O.jsxs)(f.default,{style:{marginHorizontal:10,height:20,flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(A.default,{style:mt.footerText,children:Y()().format("HH:mm")}),(0,O.jsxs)(A.default,{style:mt.footerText,children:["EPB BISTRO ",null==(r=D.default.manifest.version)?void 0:r.split(".")[0]]})]})]}),(0,O.jsx)(f.default,{style:{flex:2,backgroundColor:L.grey9},children:(0,O.jsxs)(yt.Navigator,{screenOptions:{headerShown:!1,animation:"none",gestureEnabled:!1,tabBarStyle:{display:"none"}},children:["A"===W&&(0,O.jsx)(yt.Screen,{name:"MainTable",children:function(){return(0,O.jsx)(xe,{refresh:y,home:d,serviceEntry:s,preference:c,masters:u,handlePressTable:n.handlePressTable,handleActionTable:n.handleActionTable})}}),(0,O.jsx)(yt.Screen,{name:"MainMenu",children:function(){return(0,O.jsx)(Te,{home:d,serviceEntry:s,serviceEntryObj:i,preference:c,settings:u.settings,foldergrps:u.foldergrps,folders:u.folders,menus:u.menus,modBundles:u.modBundles,handlePressMenu:n.handlePressMenu,handlePressScan:n.handlePressScan})}})]})})]})}}]),i}(d.Component),mt=u.default.create({footerText:{fontFamily:"varela-round",fontSize:10,textTransform:"uppercase"},tableUpperBand:{position:"absolute",top:10,left:0,fontFamily:"varela-round",width:"100%",paddingVertical:5,justifyContent:"center",alignItems:"center",color:"black",fontSize:12,textAlign:"center",textTransform:"uppercase"},tableLowerBand:{position:"absolute",bottom:0,left:0,fontFamily:"varela-round",width:"100%",paddingVertical:5,backgroundColor:L.black8,justifyContent:"center",alignItems:"center",color:"white",fontSize:12,textAlign:"center",textTransform:"uppercase"},buttonText:{marginTop:10,fontFamily:"varela-round",fontSize:10,color:L.grey5,textTransform:"uppercase"}});function pt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var xt=function(e){(0,o.default)(r,e);var t=pt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlayText:""},n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleSubmit",value:function(e){this.props.handleUpdateFromServiceEntry(e)}},{key:"render",value:function(){var e=this,t=this.state.overlayText;return console.log("in overlayserviceentry"),(0,O.jsx)(f.default,{style:vt.overlay,children:(0,O.jsxs)(f.default,{style:vt.overlayContent,children:[(0,O.jsxs)(f.default,{style:vt.overlayHeader,children:[(0,O.jsx)(A.default,{style:vt.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:vt.overlaySubtitleText,children:"Register"})]}),(0,O.jsx)(f.default,{style:vt.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:vt.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:vt.overlaySearchBoxInput,ref:function(t){e.scanTextInput=t},autoFocus:!0,placeholder:"EPB ID OR IP:PORT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},onSubmitEditing:function(){return e.handleSubmit(t)},value:t}),(0,O.jsx)(R.default,{style:vt.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),e.scanTextInput.focus()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(R.default,{style:vt.overlayOption,onPress:function(){return e.handleSubmit(t)},children:(0,O.jsx)(A.default,{style:vt.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[vt.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromServiceEntry("")},children:(0,O.jsx)(A.default,{style:vt.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),vt=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center",marginBottom:30},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var jt=function(e){(0,o.default)(r,e);var t=bt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={savedEntries:[],serviceEntry:"",overlayAlertVisible:!1,overlayAlertInputValue:"",overlayProcedureMessageVisible:!1},n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n.handleUpdateFromServiceEntry=n.handleUpdateFromServiceEntry.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=(0,n.default)((function*(){var e=yield x.default.getItem("serviceEntry"),t=yield x.default.getItem("savedEntries");t=t?JSON.parse(t):[],this.setState({serviceEntry:e,savedEntries:t})}));return function(){return e.apply(this,arguments)}}()},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.state.selectedItem;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&("doDeleteEntry"===e?this.doDeleteEntry(t):"doSetEntry"===e&&this.doSetEntry(t))}},{key:"handleUpdateFromServiceEntry",value:function(e){var t=this;if(this.setState({overlayServiceEntryVisible:!1}),e)if(e.includes(":8085")){var r={epbId:"IP:PORT",name:"IP:PORT",bistroServiceUrl:"http://"+e+"/"};this.doSaveEntry(r)}else fetch("http://203.208.248.199:9090/beacon/api/locate?epbId="+e,{headers:{"Content-Type":"application/json; charset=utf-8"}}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){console.log("response",e),t.doSaveEntry(e)})).catch((function(e){console.log("error",e),t.setState({overlayProcedureMessageVisible:"INVALID EPB ID"})}))}},{key:"doSaveEntry",value:function(e){var t=this.state.savedEntries;e.bistroServiceUrl?(t.some((function(t){return t.epbId===e.epbId}))&&(t=t.filter((function(t){return t.epbId!==e.epbId}))),t.unshift(e),this.setState({savedEntries:t,serviceEntry:e.bistroServiceUrl}),x.default.setItem("savedEntries",JSON.stringify(t)),x.default.setItem("serviceEntry",e.bistroServiceUrl),x.default.setItem("serviceEntryObj",JSON.stringify(e))):this.setState({overlayProcedureMessageVisible:"MISSING BISTRO SERVICE URL"})}},{key:"doPressAdd",value:function(){this.setState({overlayServiceEntryVisible:!0})}},{key:"doPressEntry",value:function(e){this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:e.name,text:"",ok:!1,cancel:!0,options:[{text:"SET ENTRY",handleText:"doSetEntry"},{text:"DELETE ENTRY",handleText:"doDeleteEntry"}]},overlayAlertVisible:!0,selectedItem:e})}},{key:"doDeleteEntry",value:function(e){var t=this.state.savedEntries;t=t.filter((function(t){return t.epbId!==e.epbId})),console.log(t),this.setState({savedEntries:t}),x.default.setItem("savedEntries",JSON.stringify(t))}},{key:"doSetEntry",value:function(e){this.setState({serviceEntry:e.bistroServiceUrl}),x.default.setItem("serviceEntry",e.bistroServiceUrl),x.default.setItem("serviceEntryObj",JSON.stringify(e))}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.preference,l=r.savedEntries,a=r.serviceEntry,o=r.overlayServiceEntryVisible,i=r.overlayProcedureMessageVisible,s=r.overlayAlertVisible,d=r.overlayAlertInputValue;return console.log("render register",l),(0,O.jsxs)(f.default,{style:Tt.container,children:[s&&(0,O.jsx)(ee,{input:d,handleUpdateFromAlert:this.handleUpdateFromAlert}),i&&(0,O.jsx)(q,{text:i,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),o&&(0,O.jsx)(xt,{handleUpdateFromServiceEntry:this.handleUpdateFromServiceEntry}),(0,O.jsxs)(f.default,{style:Tt.leftContainer,children:[(0,O.jsx)(f.default,{style:Tt.navigateContainer,children:(0,O.jsxs)(f.default,{style:Tt.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:Tt.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:Tt.buttonText,children:p.default.get("back")})]}),(0,O.jsx)(f.default,{style:Tt.selectionContainer})]})}),(0,O.jsx)(f.default,{style:Tt.displayContainer,children:(0,O.jsxs)(f.default,{style:[Tt.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:Tt.gap}),(0,O.jsxs)(f.default,{style:Tt.gridContainer,children:[(0,O.jsx)(f.default,{style:Tt.gap}),(0,O.jsx)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:l.map((function(t,r){return(0,O.jsxs)(R.default,{style:Tt.grid,onPress:function(){return e.doPressEntry(t)},children:[(0,O.jsxs)(f.default,{style:Tt.gridFirst,children:[(0,O.jsx)(A.default,{style:Tt.gridFirstLeftText,children:t.epbId||"-"}),(0,O.jsx)(A.default,{style:Tt.gridFirstRightText,children:t.bistroServiceUrl||"-"})]}),(0,O.jsxs)(f.default,{style:Tt.gridSecond,children:[(0,O.jsx)(A.default,{style:Tt.gridSecondText,children:t.name||"IP:PORT"}),(0,O.jsx)(A.default,{style:[Tt.gridSecondText,{color:L.reserved}],children:null==n?void 0:n.tcolsize})]}),(0,O.jsx)(f.default,{style:[Tt.gridFirst,{marginBottom:5}],children:(0,O.jsx)(A.default,{style:Tt.gridFirstLeftText,children:t.restServiceUrl||"-"})}),(0,O.jsxs)(f.default,{style:Tt.gridThird,children:[(0,O.jsx)(A.default,{style:[Tt.gridThirdRightText,{color:L.paid}]}),t.bistroServiceUrl===a?(0,O.jsx)(A.default,{style:[Tt.gridThirdRightText,{color:L.reserved}],children:p.default.get("active")}):(0,O.jsx)(A.default,{style:[Tt.gridThirdRightText,{color:L.paid}],children:p.default.get("inactive")})]})]},r.toString())}))})]}),(0,O.jsx)(f.default,{style:Tt.gap})]})})]}),(0,O.jsxs)(f.default,{style:Tt.rightContainer,children:[(0,O.jsx)(f.default,{style:Tt.displayContainer,children:(0,O.jsxs)(f.default,{style:[Tt.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:Tt.gap}),(0,O.jsxs)(f.default,{style:Tt.gridContainer,children:[(0,O.jsx)(f.default,{style:Tt.gap}),(0,O.jsx)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1})]}),(0,O.jsx)(f.default,{style:Tt.gap})]})}),(0,O.jsx)(f.default,{style:Tt.navigateContainer,children:(0,O.jsx)(f.default,{style:Tt.navigateWrapper,children:(0,O.jsxs)(R.default,{style:Tt.button,onPress:function(){return e.doPressAdd()},children:[(0,O.jsx)(F.default,{name:"pluscircleo",color:"white",size:36}),(0,O.jsx)(A.default,{style:Tt.buttonText,children:p.default.get("add")})]})})})]})]})}}]),r}(d.Component),Tt=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row",justifyContent:"space-between"},gridSecond:{marginVertical:5,flexDirection:"row",justifyContent:"space-between"},gridThird:{flexDirection:"row",justifyContent:"space-between"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round",textTransform:"uppercase"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function St(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var It=function(e){(0,o.default)(r,e);var t=St(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={receipts:e.receipts.map((function(t){return{docId:t.docId,percentage:(100/e.receipts.length).toFixed(0).toString()}}))},n.handleFillPercentagesEvenly=n.handleFillPercentagesEvenly.bind((0,S.default)(n)),n.handleSetPercentageForReceipt=n.handleSetPercentageForReceipt.bind((0,S.default)(n)),n.handleSetFullPercentageForReceipt=n.handleSetFullPercentageForReceipt.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"handleFillPercentagesEvenly",value:function(){var e=this,t=this.state.receipts,r=(100/t.length).toFixed(0).toString();t.forEach((function(t){return e.handleSetPercentageForReceipt(r,t.docId)}))}},{key:"handleSetFullPercentageForReceipt",value:function(e){var t=this;this.state.receipts.forEach((function(r){r.docId===e.docId?t.handleSetPercentageForReceipt("100",r.docId):t.handleSetPercentageForReceipt("0",r.docId)}))}},{key:"handleSetPercentageForReceipt",value:function(e,t){var r=this.state.receipts,n=r,l=r.findIndex((function(e){return e.docId===t}));Number(e)?n[l].percentage=Number(e).toFixed(0).toString():n[l].percentage="0",this.setState({receipts:n},(function(){return console.log("receiptsUpdate2",r)}))}},{key:"handleSubmit",value:function(){var e=this.state.receipts,t=e.reduce((function(e,t){return e+Number(t.percentage)}),0);console.log("agg",t),e.some((function(t){return e[0].percentage!==t.percentage}))&&100!==t?console.log("validation failed"):this.props.handleUpdateFromSplitItems(e)}},{key:"render",value:function(){var e=this,t=this.props.selectedTableItems,r=this.state.receipts;return console.log("in overlaysplititems"),(0,O.jsx)(f.default,{style:Ct.overlay,children:(0,O.jsxs)(f.default,{style:Ct.overlayContent,children:[(0,O.jsxs)(f.default,{style:Ct.overlayHeader,children:[(0,O.jsx)(A.default,{style:Ct.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Ct.overlaySubtitleText,children:"Split Item(s)"}),(0,O.jsxs)(A.default,{style:Ct.overlayText,children:["You are splitting ",t.length," item(s) for ",r.length," receipts"]})]}),(0,O.jsx)(_.default,{style:Ct.overlayScroll,children:r.map((function(t){return(0,O.jsxs)(f.default,{style:Ct.inputRow,children:[(0,O.jsxs)(R.default,{style:Ct.inputRowLeft,onPress:function(){return e.handleSetFullPercentageForReceipt(t)},children:[(0,O.jsx)(A.default,{style:Ct.inputRowTitleText,children:"RECEIPT"}),(0,O.jsx)(A.default,{style:Ct.inputRowSubtitleText,children:t.docId})]}),(0,O.jsxs)(f.default,{style:Ct.inputRowRight,children:[(0,O.jsx)(w.default,{style:Ct.textInput,keyboardType:"numeric",selectTextOnFocus:!0,value:r.find((function(e){return e.docId===t.docId})).percentage,onChangeText:function(r){return e.handleSetPercentageForReceipt(r,t.docId)}}),(0,O.jsx)(A.default,{style:Ct.percentageText,children:"%"})]})]},t.docId)}))}),(0,O.jsx)(R.default,{style:[Ct.overlayOption,{marginTop:20}],onPress:function(){return e.handleFillPercentagesEvenly()},children:(0,O.jsx)(A.default,{style:Ct.overlayOptionText,children:"Fill evenly"})}),(0,O.jsx)(R.default,{style:Ct.overlayOption,onPress:function(){return e.handleSubmit()},children:(0,O.jsx)(A.default,{style:Ct.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[Ct.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromSplitItems("")},children:(0,O.jsx)(A.default,{style:Ct.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),Ct=(E.default.get("window").height,u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayNumber:{fontFamily:"varela-round",color:"white",fontSize:32},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},overlayScroll:{height:280},inputRow:{height:60,marginVertical:5,marginHorizontal:40,flexDirection:"row"},inputRowLeft:{flex:1,justifyContent:"center"},inputRowRight:{flex:1,borderRadius:5,flexDirection:"row",backgroundColor:L.grey1,alignItems:"center",justifyContent:"flex-end"},inputRowTitleText:{fontFamily:"varela-round",fontSize:12,color:L.paid},inputRowSubtitleText:{fontFamily:"varela-round",fontSize:20,color:"white"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"right"},percentageText:{fontFamily:"varela-round",fontSize:20,color:"white",opacity:.6,paddingHorizontal:10}}));function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){(0,b.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var wt=function(e){(0,o.default)(r,e);var t=Pt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={receipts:n.props.availableReceipts.map((function(e){return{docId:e.docId,recKey:e.recKey,receiptItems:[]}})),selectedTableItems:[],overlaySplitItemsVisible:!1,overlayChoosePrinterVisible:!1},n.handleSelectTableItem=n.handleSelectTableItem.bind((0,S.default)(n)),n.handleSplitSelectedTableItems=n.handleSplitSelectedTableItems.bind((0,S.default)(n)),n.handleUndoAll=n.handleUndoAll.bind((0,S.default)(n)),n.handleSelectAllUnsplitTableItems=n.handleSelectAllUnsplitTableItems.bind((0,S.default)(n)),n.handleDeselectAllUnsplitTableItems=n.handleDeselectAllUnsplitTableItems.bind((0,S.default)(n)),n.handleUpdateFromSplitItems=n.handleUpdateFromSplitItems.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleSelectTableItem",value:function(e){var t=this.state,r=t.selectedTableItems,n=t.receipts,l=this.props.tableItems;if(!n[0].receiptItems.some((function(t){return t.recKey===e.recKey}))){var a=r;if(r.some((function(t){return t.recKey===e.recKey})))a=a.filter((function(t){return t.recKey!==e.recKey&&t.refRecKey!==e.recKey}));else{a.push(e);var o=[];o=l.filter((function(t){return t.refRecKey===e.recKey})),console.log("comboItems",o),o.forEach((function(e){return a.push(e)}))}this.setState({selectedTableItems:a})}}},{key:"handleSelectAllUnsplitTableItems",value:function(){var e=this.props.tableItems,t=this.state,r=t.selectedTableItems,n=t.receipts,l=r;e.forEach((function(e){n[0].receiptItems.some((function(t){return t.recKey===e.recKey}))||r.some((function(t){return t.recKey===e.recKey}))||l.push(e)})),this.setState({selectedTableItems:l})}},{key:"handleDeselectAllUnsplitTableItems",value:function(){this.setState({selectedTableItems:[]})}},{key:"handleSplitSelectedTableItems",value:function(){0!==this.state.selectedTableItems.length&&this.setState({overlaySplitItemsVisible:!0})}},{key:"handleUndoAll",value:function(){this.setState({receipts:this.props.availableReceipts.map((function(e){return{docId:e.docId,recKey:e.recKey,receiptItems:[]}}))})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handleSubmit(e)}},{key:"handleUpdateFromSplitItems",value:function(e){if(console.log("distribution",e),e){var t=this.state,r=t.receipts,n=t.selectedTableItems,l=r;l.forEach((function(t){n.forEach((function(r){t.receiptItems.push(Rt(Rt({},r),{},{percentage:e.find((function(e){return e.docId===t.docId})).percentage}))}))})),this.setState({overlaySplitItemsVisible:!1,selectedTableItems:[],receipts:l})}else this.setState({overlaySplitItemsVisible:!1,selectedTableItems:[]})}},{key:"handleSubmit",value:function(e){var t=this.props,r=t.cashierPrinters,n=t.home,l=this.state.receipts;r.length>1&&!e&&!n.defaultPrinter?this.setState({overlayChoosePrinterVisible:!0}):this.props.handleUpdateFromSplit(l,n.defaultPrinter||e)}},{key:"render",value:function(){var e=this,t=this.props,r=(t.serviceEntry,t.home,t.selectedTable),n=(t.availableReceipts,t.tableItems),l=t.cashierPrinters,a=this.state,o=a.receipts,i=a.selectedTableItems,s=a.overlaySplitItemsVisible,d=a.overlayChoosePrinterVisible;return console.log("in split"),(0,O.jsxs)(f.default,{style:Et.container,children:[s&&(0,O.jsx)(It,{receipts:o,selectedTableItems:i,handleUpdateFromSplitItems:this.handleUpdateFromSplitItems}),d&&(0,O.jsx)(ut,{printPurpose:"SPLIT BY ITEM",cashierPrinters:l,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),(0,O.jsx)(f.default,{style:Et.leftContainer,children:(0,O.jsxs)(f.default,{style:Et.wrapper,children:[(0,O.jsxs)(f.default,{style:Et.overlayHeader,children:[(0,O.jsx)(A.default,{style:Et.overlayTitleText,children:"TABLE"}),(0,O.jsx)(A.default,{style:Et.overlaySubtitleText,children:r.tableId}),(0,O.jsxs)(A.default,{style:Et.overlayTitleText,children:[n.length," ITEMS"]})]}),(0,O.jsxs)(f.default,{style:Et.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:Et.button,onPress:function(){return e.handleUndoAll()},children:[(0,O.jsx)(A.default,{style:Et.buttonText,children:"Undo"}),(0,O.jsx)(A.default,{style:Et.buttonText,children:"All"})]}),(0,O.jsxs)(R.default,{style:Et.button,onPress:function(){return e.handleDeselectAllUnsplitTableItems()},children:[(0,O.jsx)(A.default,{style:Et.buttonText,children:"Deselect"}),(0,O.jsx)(A.default,{style:Et.buttonText,children:"All"})]}),(0,O.jsxs)(R.default,{style:Et.button,onPress:function(){return e.handleSelectAllUnsplitTableItems()},children:[(0,O.jsx)(A.default,{style:Et.buttonText,children:"Select"}),(0,O.jsx)(A.default,{style:Et.buttonText,children:"All"})]})]}),(0,O.jsxs)(_.default,{style:[Et.itemsContainer],children:[(0,O.jsx)(f.default,{style:{paddingTop:5}}),n.map((function(t){return(0,O.jsxs)(R.default,{disabled:!(!o[0].receiptItems.some((function(e){return e.recKey===t.recKey}))&&!t.refRecKey),style:[Et.tableItemContainer,i.some((function(e){return e.recKey===t.recKey}))&&{backgroundColor:L.occupied},(o[0].receiptItems.some((function(e){return e.recKey===t.recKey}))||t.refRecKey)&&{opacity:.2}],onPress:function(){return e.handleSelectTableItem(t)},children:[(0,O.jsx)(f.default,{style:Et.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Et.tableItemText,children:t.orderQty})}),(0,O.jsxs)(f.default,{style:Et.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:Et.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?(0,O.jsx)(A.default,{style:Et.tableItemModText,children:t.menuMod}):null]}),(0,O.jsx)(f.default,{style:Et.tableItemThirdContainer,children:(0,O.jsx)(A.default,{style:Et.tableItemText})})]},t.recKey)}))]}),(0,O.jsx)(R.default,{style:[Et.actionButton,0!==i.length?{backgroundColor:L.occupied}:{opacity:.2}],disabled:0===i.length,onPress:function(){return e.handleSplitSelectedTableItems()},children:(0,O.jsx)(A.default,{style:Et.buttonText,children:"Split Selected"})}),o[0].receiptItems.length===n.length?(0,O.jsx)(R.default,{style:Et.actionButton,onPress:function(){return e.handleSubmit()},children:(0,O.jsx)(A.default,{style:[Et.buttonText,{color:L.reserved}],children:"Confirm Split"})}):(0,O.jsx)(R.default,{style:Et.actionButton,onPress:function(){return e.props.handleUpdateFromSplit("")},children:(0,O.jsx)(A.default,{style:[Et.buttonText,{color:L.paid}],children:"Quit"})})]})}),(0,O.jsx)(f.default,{style:Et.rightContainer,children:(0,O.jsx)(_.default,{style:Et.splitScroll,horizontal:!0,snapToInterval:kt,decelerationRate:"fast",children:o.map((function(e,t){return(0,O.jsxs)(f.default,{style:Et.wrapper,children:[(0,O.jsxs)(f.default,{style:Et.overlayHeader,children:[(0,O.jsxs)(A.default,{style:[Et.overlayTitleText,{color:L.paid,opacity:1}],children:["SPLIT ",t+1," OF ",o.length]}),(0,O.jsx)(A.default,{style:Et.overlaySubtitleText,children:e.docId}),(0,O.jsxs)(A.default,{style:Et.overlayTitleText,children:[e.receiptItems.length," ITEMS"]})]}),(0,O.jsxs)(_.default,{style:Et.itemsContainer,children:[(0,O.jsx)(f.default,{style:{paddingTop:5}}),e.receiptItems.map((function(e){return(0,O.jsxs)(R.default,{style:Et.tableItemContainer,children:[(0,O.jsx)(f.default,{style:Et.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Et.tableItemText,children:e.orderQty})}),(0,O.jsxs)(f.default,{style:Et.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:Et.tableItemText,children:[e.refRecKey?"- ":null,e.menuName]}),e.menuMod?(0,O.jsx)(A.default,{style:Et.tableItemModText,children:e.menuMod}):null]}),(0,O.jsx)(f.default,{style:Et.tableItemThirdContainer,children:(0,O.jsxs)(A.default,{style:Et.tableItemText,children:[(0,O.jsx)(A.default,{style:{color:L.reserved},children:e.percentage}),(0,O.jsx)(A.default,{style:{color:L.grey1},children:" %"})]})})]},e.recKey)}))]})]},e.docId)}))})})]})}}]),r}(d.Component),kt=E.default.get("window").width/3,Et=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1},rightContainer:{flex:2},wrapper:{flex:1,width:kt},splitScroll:{width:"100%",height:"100%"},itemsContainer:{flex:1,borderRadius:5,margin:5,backgroundColor:L.grey2},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},buttonsContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center"},button:{height:72,width:72,borderRadius:5,margin:5,backgroundColor:L.grey2,alignItems:"center",justifyContent:"center"},buttonText:{fontFamily:"varela-round",color:"white",fontSize:12,textTransform:"uppercase"},actionButton:{height:72,margin:5,backgroundColor:L.grey2,alignItems:"center",justifyContent:"center"},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:1,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{alignItems:"center",justifyContent:"center",width:50}});function Bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Dt=function(e){(0,o.default)(r,e);var t=Bt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlayText:""},n}return(0,a.default)(r,[{key:"render",value:function(){var e=this,t=this.state.overlayText;return console.log("in overlayinputreference"),(0,O.jsx)(f.default,{style:Ut.overlay,children:(0,O.jsxs)(f.default,{style:Ut.overlayContent,children:[(0,O.jsxs)(f.default,{style:Ut.overlayHeader,children:[(0,O.jsx)(A.default,{style:Ut.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Ut.overlaySubtitleText,children:"Input Reference"})]}),(0,O.jsx)(f.default,{style:Ut.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:Ut.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:Ut.overlaySearchBoxInput,autoFocus:!0,placeholder:"ENTER REFERENCE",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},onSubmitEditing:function(){return e.props.handleUpdateFromInputReference(t)},value:t}),(0,O.jsx)(R.default,{style:Ut.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(R.default,{style:Ut.overlayOption,onPress:function(){return e.props.handleUpdateFromInputReference(t)},children:(0,O.jsx)(A.default,{style:Ut.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[Ut.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromInputReference("")},children:(0,O.jsx)(A.default,{style:Ut.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),Ut=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center",marginBottom:30},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function At(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ot=function(e){(0,o.default)(r,e);var t=At(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlaySearchText:"",tables:"",availableTables:"",selectedTargetTable:"",overlayChoosePrinterVisible:!1},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.serviceEntry,n=t.home,l=t.selectedTable,a=r+"api/tables",o=new URLSearchParams;o.append("shopId",n.shopId),o.append("statusFlg","C"),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){var r=t.filter((function(e){return e.tableId!==l.tableId}));e.setState({tables:r,availableTables:r})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(l)||e.sectionId.toUpperCase().includes(l)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state.selectedTargetTable;e?(this.setState({overlayChoosePrinterVisible:!1}),this.handleSubmit(r,e)):this.setState({overlayChoosePrinterVisible:!1})}},{key:"handleSubmit",value:function(e,t){var r=this.props.home;this.setState({selectedTargetTable:e}),this.props.cashierPrinters.length>1&&!t&&!r.defaultPrinter?this.setState({overlayChoosePrinterVisible:!0}):this.props.handleUpdateFromMergeBill(e,r.defaultPrinter||t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.selectedTable,n=t.cashierPrinters,l=this.state,a=l.overlaySearchText,o=l.availableTables,i=(l.tables,l.overlayChoosePrinterVisible);return console.log("in overlaymergebill",r),(0,O.jsxs)(f.default,{style:Vt.overlay,children:[i&&(0,O.jsx)(ut,{printPurpose:"MERGE BILL",cashierPrinters:n,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),(0,O.jsxs)(f.default,{style:Vt.overlayContent,children:[(0,O.jsxs)(f.default,{style:Vt.overlayHeader,children:[(0,O.jsxs)(A.default,{style:Vt.overlayTitleText,children:["TABLE ",r.tableId]}),(0,O.jsx)(A.default,{style:Vt.overlaySubtitleText,children:"Merge Bill"})]}),(0,O.jsxs)(f.default,{style:Vt.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:Vt.overlayBackButton,onPress:function(){return e.props.handleUpdateFromMergeBill("")},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:Vt.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:Vt.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:a}),(0,O.jsx)(R.default,{style:Vt.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:Vt.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:Vt.searchBoxInfoText,children:[o.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Vt.overlayGrid,r.dummy?Vt.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[(0,O.jsxs)(f.default,{style:Vt.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:Vt.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:Vt.overlayGridFirstLeftText,children:r.sectionId})}),(0,O.jsx)(f.default,{style:Vt.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:Vt.overlayGridFirstRightText,children:"OCCUPIED"})})]}),(0,O.jsx)(f.default,{style:Vt.overlayGridSecond,children:(0,O.jsx)(A.default,{style:Vt.overlayGridSecondText,children:r.tableId})}),(0,O.jsxs)(f.default,{style:Vt.overlayGridThird,children:[(0,O.jsx)(f.default,{style:Vt.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:Vt.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:Vt.overlayGridThirdRightText})})]})]})}})]})]})}}]),r}(d.Component),Vt=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.occupied,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5}});function Mt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var zt=function(e){(0,o.default)(r,e);var t=Mt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlayNumber:2},n.handleQtyChange=n.handleQtyChange.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"handleQtyChange",value:function(e){if("PLUS"===e)this.setState((function(e,t){return{overlayNumber:e.overlayNumber+1}}));else if("MINUS"===e){if(2===this.state.overlayNumber)return;this.setState((function(e,t){return{overlayNumber:e.overlayNumber-1}}))}}},{key:"handleNumberChange",value:function(e){isNaN(e)?this.setState({overlayNumber:2}):this.setState({overlayNumber:Number(e)})}},{key:"render",value:function(){var e=this,t=this.state.overlayNumber;return console.log("in overlaysplitbill"),(0,O.jsx)(f.default,{style:Kt.overlay,children:(0,O.jsxs)(f.default,{style:Kt.overlayContent,children:[(0,O.jsxs)(f.default,{style:Kt.overlayHeader,children:[(0,O.jsx)(A.default,{style:Kt.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Kt.overlaySubtitleText,children:"Split Bill"}),(0,O.jsx)(A.default,{style:Kt.overlayText,children:"Enter the number of bills to split into"})]}),(0,O.jsxs)(f.default,{style:Kt.adjustContainer,children:[(0,O.jsx)(R.default,{style:Kt.adjustFirst,onPress:function(){return e.handleQtyChange("MINUS")},children:(0,O.jsx)(F.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),(0,O.jsx)(f.default,{style:Kt.adjustSecond,children:(0,O.jsx)(w.default,{style:Kt.overlayNumber,selectTextOnFocus:!0,keyboardType:"numeric",value:null==t?void 0:t.toString(),onChangeText:function(t){return e.handleNumberChange(t)}})}),(0,O.jsx)(R.default,{style:Kt.adjustThird,onPress:function(){return e.handleQtyChange("PLUS")},children:(0,O.jsx)(F.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),(0,O.jsxs)(f.default,{style:Kt.buttonsContainer,children:[(0,O.jsx)(R.default,{style:[Kt.button,2===t&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayNumber:2})},children:(0,O.jsx)(A.default,{style:Kt.buttonText,children:"2"})}),(0,O.jsx)(R.default,{style:[Kt.button,3===t&&{backgroundColor:L.reserved}],onPress:function(){return e.setState({overlayNumber:3})},children:(0,O.jsx)(A.default,{style:Kt.buttonText,children:"3"})}),(0,O.jsx)(R.default,{style:[Kt.button,4===t&&{backgroundColor:L.paid}],onPress:function(){return e.setState({overlayNumber:4})},children:(0,O.jsx)(A.default,{style:Kt.buttonText,children:"4"})})]}),(0,O.jsx)(R.default,{style:Kt.overlayOption,onPress:function(){return e.props.handleUpdateFromSplitBill(t,"ITEM")},children:(0,O.jsx)(A.default,{style:Kt.overlayOptionText,children:"Split By Item"})}),(0,O.jsx)(R.default,{style:Kt.overlayOption,onPress:function(){return e.props.handleUpdateFromSplitBill(t,"AMOUNT")},children:(0,O.jsx)(A.default,{style:Kt.overlayOptionText,children:"Split By Amount"})}),(0,O.jsx)(R.default,{style:[Kt.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromSplitBill("")},children:(0,O.jsx)(A.default,{style:Kt.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),Nt=E.default.get("window").height/8,Kt=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayNumber:{width:"100%",fontFamily:"varela-round",color:"white",fontSize:32,textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},buttonsContainer:{alignItems:"center",justifyContent:"center",flexDirection:"row",marginBottom:30},button:{height:Nt-10,width:Nt-10,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:24,textTransform:"uppercase"},adjustContainer:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},adjustFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},adjustSecond:{flex:1,justifyContent:"center",alignItems:"center",marginHorizontal:20},adjustThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}});function Lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Gt=function(e){(0,o.default)(r,e);var t=Lt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={receipts:e.receipts.map((function(e){return{docId:e.docId,recKey:e.recKey,amount:"0"}})),warning:"Total amount to split is "+e.selectedTable.grandTotal.toFixed(2),overlayChoosePrinterVisible:!1},n.handleFillRemainder=n.handleFillRemainder.bind((0,S.default)(n)),n.handleSetAmountForReceipt=n.handleSetAmountForReceipt.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"handleFillRemainder",value:function(e){var t=this.props.selectedTable,r=this.state.receipts,n=r,l=r.findIndex((function(t){return t.recKey===e.recKey})),a=r.filter((function(t){return t.recKey!==e.recKey})).reduce((function(e,t){return e+Number(t.amount)}),0);a<=Number(t.grandTotal)&&(n[l].amount=(Number(t.grandTotal)-a).toFixed(2).toString(),this.setState({receipts:n}))}},{key:"handleSetAmountForReceipt",value:function(e,t){var r=this.state.receipts,n=r;n[r.findIndex((function(e){return e.docId===t}))].amount=e,this.setState({receipts:n},(function(){return console.log("receiptsUpdated",r)}))}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handleSubmit(e)}},{key:"handleSubmit",value:function(e){var t=this.props,r=t.selectedTable,n=t.cashierPrinters,l=t.home,a=this.state.receipts,o=a.reduce((function(e,t){return e+Number(t.amount)}),0).toFixed(2);if(console.log("aggregate",o),a.some((function(e){return 0===Number(e.amount)}))||Number(o)!==Number(r.grandTotal))return console.log("validation failed"),void this.setState({warning:"Ensure numbers are valid and add up to "+r.grandTotal.toFixed(2)});n.length>1&&!e&&!l.defaultPrinter?this.setState({overlayChoosePrinterVisible:!0}):this.props.handleUpdateFromSplitAmount(a,l.defaultPrinter||e)}},{key:"doFillEvenly",value:function(){var e=this.props.selectedTable,t=this.state.receipts,r=t,n=Number(e.grandTotal/t.length).toFixed(2);r.forEach((function(t,l){l!==r.length-1?t.amount=Number(n).toFixed(2):t.amount=(e.grandTotal-n*(r.length-1)).toFixed(2)})),this.setState({receipts:r},(function(){return console.log("receiptsUpdated",t)}))}},{key:"render",value:function(){var e=this,t=this.props,r=(t.selectedTable,t.cashierPrinters),n=this.state,l=n.receipts,a=n.warning,o=n.overlayChoosePrinterVisible;return console.log("in overlaysplitamount"),(0,O.jsxs)(f.default,{style:Ht.overlay,children:[o&&(0,O.jsx)(ut,{printPurpose:"SPLIT BY AMOUNT",cashierPrinters:r,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),(0,O.jsxs)(f.default,{style:Ht.overlayContent,children:[(0,O.jsxs)(f.default,{style:Ht.overlayHeader,children:[(0,O.jsx)(A.default,{style:Ht.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Ht.overlaySubtitleText,children:"Split Amount"}),(0,O.jsx)(A.default,{style:Ht.overlayText,children:a})]}),(0,O.jsx)(_.default,{style:Ht.overlayScroll,children:l.map((function(t){return(0,O.jsxs)(f.default,{style:Ht.inputRow,children:[(0,O.jsxs)(R.default,{style:Ht.inputRowLeft,onPress:function(){return e.handleFillRemainder(t)},children:[(0,O.jsx)(A.default,{style:Ht.inputRowTitleText,children:"RECEIPT"}),(0,O.jsx)(A.default,{style:Ht.inputRowSubtitleText,children:t.docId})]}),(0,O.jsxs)(f.default,{style:Ht.inputRowRight,children:[(0,O.jsx)(w.default,{style:Ht.textInput,keyboardType:"numeric",selectTextOnFocus:!0,value:l.find((function(e){return e.docId===t.docId})).amount,onChangeText:function(r){return e.handleSetAmountForReceipt(r,t.docId)}}),(0,O.jsx)(A.default,{style:Ht.percentageText})]})]},t.docId)}))}),(0,O.jsx)(R.default,{style:[Ht.overlayOption,{marginTop:20}],onPress:function(){return e.doFillEvenly()},children:(0,O.jsx)(A.default,{style:Ht.overlayOptionText,children:"fill evenly"})}),(0,O.jsx)(R.default,{style:[Ht.overlayOption],onPress:function(){return e.handleSubmit()},children:(0,O.jsx)(A.default,{style:Ht.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[Ht.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromSplitAmount("")},children:(0,O.jsx)(A.default,{style:Ht.overlayOptionText,children:p.default.get("cancel")})})]})]})}}]),r}(d.Component),Ht=(E.default.get("window").height,u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayNumber:{fontFamily:"varela-round",color:"white",fontSize:32},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},overlayScroll:{height:280},inputRow:{height:60,marginVertical:5,marginHorizontal:40,flexDirection:"row"},inputRowLeft:{flex:1,justifyContent:"center"},inputRowRight:{flex:1,borderRadius:5,flexDirection:"row",backgroundColor:L.grey1,alignItems:"center",justifyContent:"flex-end"},inputRowTitleText:{fontFamily:"varela-round",fontSize:12,color:L.paid},inputRowSubtitleText:{fontFamily:"varela-round",fontSize:20,color:"white"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"right"},percentageText:{fontFamily:"varela-round",fontSize:20,color:"white",opacity:.6,paddingHorizontal:10}}));function Yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Wt=function(e){(0,o.default)(r,e);var t=Yt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlayText:"",overlaySearchText:"",paymentMethods:e.paymentMethods,availablePaymentMethods:e.paymentMethods,selectedPaymentMethod:null},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"handleOverlaySearchText",value:function(e){var t=this.state.paymentMethods,r=[];this.setState({overlaySearchText:e});var n=e.toUpperCase();console.log("caseText",n),r=t,e?(r=r.filter((function(e){return e.pmId.toUpperCase().includes(n)||e.name.toUpperCase().includes(n)})),this.setState({availablePaymentMethods:r})):this.setState({availablePaymentMethods:r})}},{key:"render",value:function(){var e=this,t=this.state,r=t.overlayText,n=t.selectedPaymentMethod,l=t.availablePaymentMethods,a=t.overlaySearchText;return console.log("in overlayupdatetips",l),(0,O.jsx)(f.default,{style:qt.overlay,children:(0,O.jsxs)(f.default,{style:qt.overlayContent,children:[(0,O.jsxs)(f.default,{style:qt.overlayHeader,children:[(0,O.jsx)(A.default,{style:qt.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:qt.overlaySubtitleText,children:"Update Tips"})]}),(0,O.jsx)(f.default,{style:qt.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:qt.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:qt.overlaySearchBoxInput,autoFocus:!0,keyboardType:"numeric",placeholder:"ENTER TIPS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({overlayText:t})},value:r}),(0,O.jsx)(R.default,{style:qt.overlaySearchBoxButton,onPress:function(){e.setState({overlayText:""}),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(f.default,{style:{paddingBottom:10}}),(0,O.jsxs)(f.default,{style:qt.selectWrapper,children:[(0,O.jsx)(f.default,{style:qt.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:[qt.overlaySearchBox,{marginHorizontal:0}],children:[(0,O.jsx)(w.default,{style:qt.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:a}),(0,O.jsx)(R.default,{style:qt.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(f.default,{style:qt.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:qt.searchBoxInfoText,children:[l.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],data:l,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[qt.overlayGrid,(null==n?void 0:n.pmId)===r.pmId&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({selectedPaymentMethod:r})},children:[(0,O.jsxs)(f.default,{style:qt.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:qt.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:qt.overlayGridFirstLeftText,children:r.pmId})}),(0,O.jsx)(f.default,{style:qt.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:qt.overlayGridFirstRightText})})]}),(0,O.jsx)(f.default,{style:qt.overlayGridSecond,children:(0,O.jsx)(A.default,{style:qt.overlayGridSecondText,children:r.name})}),(0,O.jsxs)(f.default,{style:qt.overlayGridThird,children:[(0,O.jsx)(f.default,{style:qt.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:qt.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:qt.overlayGridThirdRightText})})]})]})}})]}),(0,O.jsx)(R.default,{style:qt.overlayOption,onPress:function(){return e.props.handleUpdateFromUpdateTips(r,n)},children:(0,O.jsx)(A.default,{style:qt.overlayOptionText,children:p.default.get("submit")})}),(0,O.jsx)(R.default,{style:[qt.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromUpdateTips()},children:(0,O.jsx)(A.default,{style:qt.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),qt=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1,alignItems:"center",justifyContent:"center"},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},selectText:{fontFamily:"varela-round",color:"white",fontSize:16},selectWrapper:{flex:1,backgroundColor:L.grey1,borderRadius:5,marginHorizontal:5,marginBottom:5},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function Jt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Qt=function(e){(0,o.default)(r,e);var t=Jt(r);function r(e){return(0,l.default)(this,r),t.call(this,e)}return(0,a.default)(r,[{key:"render",value:function(){var e=this,t=this.props.receipts;return console.log("in overlayalert",this.props),(0,O.jsx)(f.default,{style:Xt.overlay,children:(0,O.jsxs)(f.default,{style:Xt.overlayContent,children:[(0,O.jsxs)(f.default,{style:Xt.overlayHeader,children:[(0,O.jsx)(A.default,{style:Xt.overlayTitleText,children:"VIEW"}),(0,O.jsx)(A.default,{style:Xt.overlaySubtitleText,children:"Splitted Receipts"}),(0,O.jsx)(A.default,{style:Xt.overlayText})]}),(0,O.jsx)(_.default,{style:Xt.overlayScroll,children:t.map((function(e){return(0,O.jsxs)(f.default,{style:Xt.inputRow,children:[(0,O.jsxs)(f.default,{style:Xt.inputRowLeft,children:[(0,O.jsx)(A.default,{style:Xt.inputRowTitleText,children:"RECEIPT"}),(0,O.jsx)(A.default,{style:Xt.inputRowSubtitleText,children:e.docId})]}),(0,O.jsxs)(f.default,{style:Xt.inputRowRight,children:[(0,O.jsx)(A.default,{style:Xt.textInput,children:e.grandTotal?e.grandTotal.toFixed(2):null}),(0,O.jsx)(A.default,{style:Xt.percentageText})]})]},e.recKey)}))}),(0,O.jsx)(R.default,{style:Xt.overlayOption,onPress:function(){return e.props.handleUpdateFromViewSplitted("")},children:(0,O.jsx)(A.default,{style:Xt.overlayOptionText,children:"OK"})})]})})}}]),r}(d.Component),Xt=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},overlayScroll:{height:280},inputRow:{height:60,marginVertical:5,marginHorizontal:40,flexDirection:"row"},inputRowLeft:{flex:1,justifyContent:"center"},inputRowRight:{flex:1,borderRadius:5,flexDirection:"row",backgroundColor:L.grey1,alignItems:"center",justifyContent:"flex-end"},inputRowTitleText:{fontFamily:"varela-round",fontSize:12,color:L.paid},inputRowSubtitleText:{fontFamily:"varela-round",fontSize:20,color:"white"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"right"},percentageText:{fontFamily:"varela-round",fontSize:20,color:"white",opacity:.6,paddingHorizontal:10}}),$t=r(4285);const _t=r.p+"static/media/paynow.c9b5960d0592dd95048e.png";function Zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var er=function(){function e(t){(0,l.default)(this,e),Object.defineProperty(this,"qrstring",{value:this.generate(t)})}return(0,a.default)(e,[{key:"output",value:function(){return this.qrstring}},{key:"padLeft",value:function(e,t,r){return t<String(e).length?e.toString():Array(t-String(e).length+1).join(r||"0")+e}},{key:"crc16",value:function(e){var t,r=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],n=65535;for(t=0;t<e.length;t++){var l=e.charCodeAt(t);if(l>255)throw new RangeError;n=r[255&(l^n>>8)]^n<<8}return(65535&(0^n)).toString(16).toUpperCase()}},{key:"generate",value:function(e){var t=this;for(var r in e)"string"==typeof e[r]&&(e[r]=e[r].trim());var n=[{id:"00",value:"01"},{id:"01",value:"12"},{id:"26",value:[{id:"00",value:"SG.PAYNOW"},{id:"01",value:"2"},{id:"02",value:String(e.uen)},{id:"03",value:String(!e.amount||e.editable?1:0)},{id:"04",value:String(e.expiry)}]},{id:"52",value:"0000"},{id:"53",value:"702"},{id:"54",value:String(e.amount||0)},{id:"58",value:"SG"},{id:"59",value:String(e.company||"COMPANY")},{id:"60",value:"Singapore"}],l={id:"62",value:[{id:"01",value:String(e.refNumber||"")}]};e.refNumber&&n.push(l);var a=n.reduce((function(e,r){return Array.isArray(r.value)&&(r.value=r.value.reduce((function(e,r){return e+=r.id+t.padLeft(r.value.length.toString(),2)+r.value}),"")),e+=r.id+t.padLeft(r.value.length.toString(),2)+r.value}),"");return a+="6304"+this.padLeft(this.crc16(a+"6304"),4)}}]),e}(),tr=function(e){(0,o.default)(r,e);var t=Zt(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={input:e.input},n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.home,t=new er({uen:e.uen,amount:Number(this.props.input.amount),editable:!1,expiry:Y()().format("YYYYMMDD"),refNumber:this.props.input.reference,company:e.orgName});this.setState({qrcodeString:t.output()})}},{key:"render",value:function(){var e=this,t=this.state,r=(t.input,t.qrcodeString);return console.log("in overlayalert",this.props),(0,O.jsx)(f.default,{style:rr.overlay,children:(0,O.jsxs)(f.default,{style:rr.overlayContent,children:[(0,O.jsxs)(f.default,{style:rr.overlayHeader,children:[(0,O.jsxs)(A.default,{style:rr.overlaySubtitleText,children:["$",this.props.input.amount]}),(0,O.jsx)(A.default,{style:[rr.overlayText,{marginTop:0}],children:this.props.home.orgName})]}),(0,O.jsx)($t.default,{size:300,value:r,color:"#761972",logo:_t,logoSize:80}),(0,O.jsx)(f.default,{style:rr.overlayHeader,children:(0,O.jsx)(A.default,{style:[rr.overlayText,{marginTop:5}],children:"Thank you!"})}),(0,O.jsx)(R.default,{style:[rr.overlayOption,{width:400}],onPress:function(){return e.props.handleUpdateFromPaynow("")},children:(0,O.jsx)(A.default,{style:rr.overlayOptionText,children:"CONTINUE"})})]})})}}]),r}(d.Component),rr=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{alignItems:"center",position:"relative"},overlayHeader:{margin:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"}});function nr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var lr=function(e){(0,o.default)(r,e);var t=nr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,serviceEntryObj:e.route.params.serviceEntryObj,home:e.route.params.home,paymentMethods:e.route.params.masters.paymentMethods,settings:e.route.params.masters.settings,cashierPrinters:e.route.params.masters.cashierPrinters,privileges:e.route.params.masters.privileges,selectedTable:e.route.params.selectedTable,payments:e.route.params.pospays,selectedPaymentMethod:null,selectedPaymentItem:"",numberString:"0",pay:e.route.params.selectedTable.balance,overlayPaynowVisible:!1,overlayInputReferenceVisible:!1,overlayMergeBillVisible:!1,overlaySplitBillVisible:!1,overlaySplitAmountVisible:!1,overlayUpdateTipsVisible:!1,overlayViewSplittedVisible:!1,requestedPrivilege:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:"",printPurpose:"",selectedPrinter:"",overlayChoosePrinterVisible:!1,splitting:!1,availableReceipts:[],splitReceipts:[],tableItems:[]},n.handleBuildNumberString=n.handleBuildNumberString.bind((0,S.default)(n)),n.handleSelectPaymentMethod=n.handleSelectPaymentMethod.bind((0,S.default)(n)),n.handleRounding=n.handleRounding.bind((0,S.default)(n)),n.handleEnterButton=n.handleEnterButton.bind((0,S.default)(n)),n.handleFinishButton=n.handleFinishButton.bind((0,S.default)(n)),n.handleAddPayment=n.handleAddPayment.bind((0,S.default)(n)),n.handleDeletePayment=n.handleDeletePayment.bind((0,S.default)(n)),n.handleFinishPayment=n.handleFinishPayment.bind((0,S.default)(n)),n.handleUnsplitBill=n.handleUnsplitBill.bind((0,S.default)(n)),n.handlePressPaymentItem=n.handlePressPaymentItem.bind((0,S.default)(n)),n.handlePressPaymentItemRef=n.handlePressPaymentItemRef.bind((0,S.default)(n)),n.handlePressMerge=n.handlePressMerge.bind((0,S.default)(n)),n.handlePressUnmerge=n.handlePressUnmerge.bind((0,S.default)(n)),n.handlePressTips=n.handlePressTips.bind((0,S.default)(n)),n.handlePressSplit=n.handlePressSplit.bind((0,S.default)(n)),n.handlePressUnsplit=n.handlePressUnsplit.bind((0,S.default)(n)),n.handleViewSplitted=n.handleViewSplitted.bind((0,S.default)(n)),n.handleUpdateFromInputReference=n.handleUpdateFromInputReference.bind((0,S.default)(n)),n.handleUpdateFromMergeBill=n.handleUpdateFromMergeBill.bind((0,S.default)(n)),n.handleUpdateFromSplitBill=n.handleUpdateFromSplitBill.bind((0,S.default)(n)),n.handleUpdateFromSplitAmount=n.handleUpdateFromSplitAmount.bind((0,S.default)(n)),n.handleUpdateFromSplit=n.handleUpdateFromSplit.bind((0,S.default)(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleUpdateFromUpdateTips=n.handleUpdateFromUpdateTips.bind((0,S.default)(n)),n.handleUpdateFromViewSplitted=n.handleUpdateFromViewSplitted.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleUpdateFromPaynow=n.handleUpdateFromPaynow.bind((0,S.default)(n)),n.handleOpenDrawer=n.handleOpenDrawer.bind((0,S.default)(n)),n.handleValidateAmount=n.handleValidateAmount.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){this.handleViewSplitted()}},{key:"handleBuildNumberString",value:function(e){var t=this.state.numberString;if("DEL"===e)if(1!==t.length){var r=t.slice(0,-1);this.setState({numberString:r})}else this.setState({numberString:"0"});else if("CLEAR"===e)"0"!==t&&this.setState({numberString:"0"});else if("."===e){if(t.length>5)return;if(t.indexOf(".")<"0"){var n=t+".";this.setState({numberString:n})}}else if("0"===e){if(t.length>7)return;if(t.indexOf(".")>"0"&&t.split(".")[1].length>1)return;if("0"!==t){var l=t+"0";this.setState({numberString:l})}}else if("00"===e){if(t.length>7)return;if(t.indexOf(".")>"0"&&t.split(".")[1].length>0)return;if("0"!==t){var a=t+"00";this.setState({numberString:a})}}else{if(t.length>7)return;if(t.indexOf(".")>"0"&&t.split(".")[1].length>1)return;if("0"!==t){var o=t+e;this.setState({numberString:o})}else this.setState({numberString:e})}}},{key:"handleSelectPaymentMethod",value:function(e){if("P"===e.refType){var t=this.state,r=(t.numberString,t.selectedTable),n="";return n=r.vipPtsMoney<r.balance?Math.floor(r.vipPtsMoney):Math.floor(r.balance),void this.setState({numberString:n,selectedPaymentMethod:e})}this.setState({selectedPaymentMethod:e}),console.log(e),this.handleRounding(e)}},{key:"handleEnterButton",value:function(){var e=this,t=this.state,r=t.numberString,n=t.selectedPaymentMethod;Number(r);n?("P"!==n.refType||this.handleValidateAmount())&&this.setState({loading:!0},(function(){return e.handleAddPayment()})):this.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Missing Payment Method",text:"Please select a payment method",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0})}},{key:"handleValidateAmount",value:function(){var e=this.state,t=e.numberString,r=e.selectedTable,n=Number(t),l=Number.isInteger(n);return console.log("isInteger",l,r.balance,r.vipPtsMoney),!(!Number.isInteger(n)||n>r.balance||n>r.vipPtsMoney)||(this.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Inappropriate Amount",text:"Enter an integer less than balance and redeemable",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0}),!1)}},{key:"handleFinishButton",value:function(){var e=this;this.setState({loading:!0},(function(){return e.handleFinishPayment()}))}},{key:"handleFinishPayment",value:function(e){var t=this,r=this.props.navigation,n=this.state,l=n.serviceEntry,a=n.home,o=n.cashierPrinters,i=n.settings,s=n.selectedTable;if(o.length>1&&!e&&!a.defaultPrinter)this.setState({printPurpose:"FINISH PAYMENT",overlayChoosePrinterVisible:!0});else{var d=l+"api/tables/"+s.recKey+"/finish-payment",c={userId:a.userId,orgId:a.orgId,locId:a.locId,opentableRecKey:s.recKey,iomodelId:a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){var n;console.log("post finish-payment successful",e),"Y"===(null==(n=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(l,"Finish Payment",a.userName,e.message,s.tableId),e.message?t.setState({loading:!1,overlayProcedureMessageVisible:e.message.toUpperCase()}):r.goBack()})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUnsplitBill",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.settings,a=t.selectedTable,o=r+"api/tables/"+a.recKey+"/unsplit-receipt",i={userId:n.userId,opentableRecKey:a.recKey};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(t){var o;console.log("post unsplit successful",t),"Y"===(null==(o=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(r,"Unsplit Bill",n.userName,t.message,a.tableId),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):(e.setState({selectedTable:t.opentable,payments:t.opentablePospays,pay:t.opentable.balance}),e.handleViewSplitted())})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePressPaymentItemRef",value:function(e){"PAYNOW"===e.pmId?this.setState({overlayPaynowVisible:!0}):this.setState({selectedPaymentItem:e,overlayInputReferenceVisible:!0})}},{key:"handlePressPaymentItem",value:function(e){this.setState({selectedPaymentItem:e});var t=[];t.push({text:"Yes",handleText:"handleDeletePayment"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:e.name,text:"Delete payment of "+Number(e.payMoney).toFixed(2)+"?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"handleDeletePayment",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.settings,a=t.selectedTable,o=t.selectedPaymentItem,i=r+"api/tables/"+a.recKey+"/delete-payment",s={userId:n.userId,opentableRecKey:a.recKey,opentablePospayRecKey:o.recKey};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){var o;console.log("post delete-payment successful",t),"Y"===(null==(o=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(r,"Delete Payment",n.userName,t.message,a.tableId),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({selectedTable:t.opentable,payments:t.opentablePospays,numberString:"0",pay:t.opentable.balance})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleAddPayment",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.settings,a=t.paymentMethods,o=t.selectedPaymentMethod,i=t.selectedTable,s=t.pay,d=t.numberString,c=r+"api/tables/"+i.recKey+"/add-payment";console.log("here debug",Number(d));var u={userId:n.userId,orgId:n.orgId,locId:n.locId,opentableRecKey:i.recKey,pmId:o.pmId,payAmt:Number(d),roundAmt:Number(i.balance-s).toFixed(2)};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(t){var s;console.log("post add-payment successful",t),"Y"===(null==(s=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:s.setString)&&K(r,"Add Payment",n.userName,t.message,i.tableId),t.message?e.setState({loading:!1,overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({loading:!1,selectedTable:t.opentable,selectedPaymentMethod:null,payments:t.opentablePospays,numberString:"0",pay:t.opentable.balance},(function(){e.handleRounding(a.find((function(e){return e.pmId===o.pmId}))),e.handleAfterAddPayment()}))})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleAfterAddPayment",value:function(){var e=this.state,t=e.home,r=e.selectedTable,n=e.payments.find((function(e){return"PAYNOW"===e.pmId}));n&&this.setState({overlayPaynowVisible:!0,overlayPaynowInput:{amount:n.payMoney.toFixed(2),reference:t.shopId+"-"+r.docNo}})}},{key:"handleRounding",value:function(e){console.log(e);var t=this.state.selectedTable,r=(this.state.numberString,Number(t.balance));if("N"!==e.roundingFlg)switch(e.roundType){case"0":console.log("case 0"),this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"1":console.log("case 1"),r=Math.ceil(10*r)/10,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"2":console.log("case 2"),r=Math.floor(20*r)/20,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"3":console.log("case 3"),r=Math.floor(10*r)/10,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"4":console.log("case 4"),r=Math.round(20*r)/20,this.setState({pay:r,numberString:r.toFixed(2).toString()});break;case"5":console.log("legacy case 5 not in use");break;case"6":console.log("legacy case 6 not in use")}else this.setState({pay:r,numberString:r.toFixed(2).toString()})}},{key:"handlePressTips",value:function(){this.setState({overlayUpdateTipsVisible:!0})}},{key:"handlePressSplit",value:function(){this.setState({overlaySplitBillVisible:!0})}},{key:"handlePressUnsplit",value:function(){var e=this.state.selectedTable,t=[];t.push({text:"Yes",handleText:"handleUnsplitBill"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Unsplit Bill",text:"Unsplit Bill for Table "+e.tableId+" ?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"handlePressMerge",value:function(){this.setState({overlayMergeBillVisible:!0})}},{key:"handlePressUnmerge",value:function(e){var t=this,r=this.state,n=r.serviceEntry,l=r.home,a=r.cashierPrinters,o=r.settings,i=r.selectedTable;if(a.length>1&&!e&!l.defaultPrinter)this.setState({printPurpose:"UNMERGE BILL",overlayChoosePrinterVisible:!0});else{var s=n+"api/tables/"+i.recKey+"/unmerge-bill",d={userId:l.userId,orgId:l.orgId,locId:l.locId,iomodelId:l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post unmerge-bill successful",e.opentable),"Y"===(null==(r=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(n,"Unmerge Bill",l.userName,e.message,i.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.setState({selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleViewSplitted",value:function(){var e=this,t=this.state,r=(t.home,t.serviceEntry+"api/tables/"+t.selectedTable.recKey+"/splitted-receipts");fetch(r).then((function(e){return e.json()})).then((function(t){console.log("get splitted-receipts successful",t),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({splitReceipts:null==t?void 0:t.filter((function(e){return e.recKey>0}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOpenDrawer",value:function(e,t){var r=this,n=this.state,l=n.home,a=n.serviceEntry,o=n.cashierPrinters,i=n.privileges,s=n.settings,d=n.selectedTable;if(o.length>1&&!e&!l.defaultPrinter)this.setState({printPurpose:"OPEN DRAWER",overlayChoosePrinterVisible:!0});else if("Y"===l.adminFlg||i.some((function(e){return"OPENDRAWER"===e.priId}))||t){var c=a+"api/open-cashdrawer",u={userId:l.userId,orgId:l.orgId,locId:l.locId,shopId:l.shopId,iomodelId:l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post open-cashdrawer successful",e),"Y"===(null==(t=s.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(a,"Open Cashdrawer",l.userName,e.message,d.tableId),e.message&&r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"OPENDRAWER"})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){e?"handleDeletePayment"===e?(this.handleDeletePayment(),this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})):"handleUnsplitBill"===e&&(this.handleUnsplitBill(),this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})):this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"handleUpdateFromPaynow",value:function(e){e||this.setState({overlayPaynowVisible:!1})}},{key:"handleUpdateFromInputReference",value:function(e){var t=this;if(this.setState({overlayInputReferenceVisible:!1}),e){var r=this.state,n=r.serviceEntry,l=r.home,a=r.settings,o=r.selectedTable,i=r.selectedPaymentItem,s=n+"api/tables/"+o.recKey+"/payment-reference",d={userId:l.userId,opentableRecKey:o.recKey,opentablePospayRecKey:i.recKey,ref:e};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post payment-reference successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(n,"Payment Reference",l.userName,e.message,o.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.setState({selectedTable:e.opentable,payments:e.opentablePospays,numberString:"0",pay:e.opentable.balance})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromSplitBill",value:function(e,t){var r=this;if(e){var n=this.state,l=n.selectedTable,a=n.serviceEntry,o=n.home,i=n.settings,s=a+"api/tables/"+l.recKey+"/start-split-receipt",d={userId:o.userId,opentableRecKey:l.recKey,splitCount:e};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var n;console.log("post start-split-receipt successful",e),"Y"===(null==(n=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(a,"Start Split Bill",o.userName,e.message,l.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):"ITEM"===t?r.setState({splitting:!0,selectedTable:e.opentable,tableItems:e.opentableItems,availableReceipts:e.receiptmases}):"AMOUNT"===t&&r.setState({overlaySplitAmountVisible:!0,overlaySplitBillVisible:!1,selectedTable:e.opentable,availableReceipts:e.receiptmases})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlaySplitBillVisible:!1})}},{key:"handleUpdateFromSplit",value:function(e,t){var r=this;if(console.log("receipts",e),e){var n=this.state,l=n.serviceEntry,a=n.home,o=n.settings,i=n.selectedTable,s=l+"api/tables/"+i.recKey+"/finish-split-receipt",d={userId:a.userId,orgId:a.orgId,locId:a.locId,opentableRecKey:i.recKey,splittedReceipts:e.map((function(e){return{receiptRecKey:e.recKey,itemPercentages:e.receiptItems.map((function(e){return{itemRecKey:e.recKey,percentage:e.percentage}}))}})),iomodelId:t&&t.iomodelId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post finish-split-receipt successful",e),"Y"===(null==(t=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(l,"Finish Split Bill",a.userName,e.message,i.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({splitting:!1,overlaySplitBillVisible:!1,selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else{var c=this.state,u=c.serviceEntry,f=c.home,h=c.settings,y=c.selectedTable,g=u+"api/tables/"+y.recKey+"/unsplit-receipt",m={userId:f.userId,opentableRecKey:y.recKey};fetch(g,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(m)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post unsplit successful",e),"Y"===(null==(t=h.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(u,"Unsplit Bill",f.userName,e.message,y.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({splitting:!1,selectedTable:e.opentable,overlaySplitBillVisible:!1}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromSplitAmount",value:function(e,t){var r=this;if(console.log("receipts",e),this.setState({overlaySplitAmountVisible:!1}),e){var n=this.state,l=n.serviceEntry,a=n.home,o=n.settings,i=n.selectedTable,s=l+"api/tables/"+i.recKey+"/finish-split-receipt-byamt",d={userId:a.userId,orgId:a.orgId,locId:a.locId,opentableRecKey:i.recKey,splittedReceiptsByamt:e.map((function(e){return{receiptRecKey:e.recKey,amt:e.amount}})),iomodelId:t&&t.iomodelId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post finish-split-receipt successful",e),"Y"===(null==(t=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(l,"Finish Split Bill",a.userName,e.message,i.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else{var c=this.state,u=c.serviceEntry,f=c.home,h=c.settings,y=c.selectedTable,g=u+"api/tables/"+y.recKey+"/unsplit-receipt",m={userId:f.userId,opentableRecKey:y.recKey};fetch(g,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(m)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post unsplit successful",e),"Y"===(null==(t=h.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(u,"Unsplit Bill",f.userName,e.message,y.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(r.setState({selectedTable:e.opentable}),r.handleViewSplitted())})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromMergeBill",value:function(e,t){var r=this;if(e){var n=this.state,l=n.selectedTable,a=n.serviceEntry,o=n.home,i=n.settings,s=a+"api/tables/"+l.recKey+"/merge-bill",d={userId:o.userId,orgId:o.orgId,locId:o.locId,shopId:o.shopId,tableIdGuest:e.tableId,iomodelId:t&&t.iomodelId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post merge-bill successful",e),"Y"===(null==(t=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(a,"Merge Bill",o.userName,e.message,l.tableId),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({selectedTable:e.opentable,payments:e.opentablePospays,pay:e.opentable.balance,overlayMergeBillVisible:!1})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlayMergeBillVisible:!1})}},{key:"handleUpdateFromUpdateTips",value:function(e,t){var r=this;if(this.setState({overlayUpdateTipsVisible:!1}),e){var n=this.state,l=n.serviceEntry,a=n.home,o=n.settings,i=n.selectedTable,s=l+"api/tables/"+i.recKey+"/update-tips",d={userId:a.userId,opentableRecKey:i.recKey,tips:Number(e).toFixed(2),pmId:(null==t?void 0:t.pmId)||""};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(n){var s;console.log("post update-tips successful",n),"Y"===(null==(s=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:s.setString)&&K(l,"Update Tips",a.userName,n.message,i.tableId,"",e+","+(null==t?void 0:t.pmId)),n.message?r.setState({overlayProcedureMessageVisible:n.message.toUpperCase()}):r.setState({selectedTable:n.opentable,payments:n.opentablePospays,numberString:"0",pay:n.opentable.balance})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromViewSplitted",value:function(e){e||this.setState({overlayViewSplittedVisible:!1})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.state.selectedTable;e?(this.setState({printPurpose:"",selectedPrinter:e,overlayChoosePrinterVisible:!1}),"UNMERGE BILL"===t?this.handlePressUnmerge(e):"FINISH PAYMENT"===t?this.handleFinishPayment(e):"OPEN DRAWER"===t&&this.handleOpenDrawer(e)):this.setState({printPurpose:"",selectedPrinter:"",overlayChoosePrinterVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.requestedPrivilege,o=r.settings,i=r.selectedPrinter,s=r.selectedTable;if(e){var d=l+"api/super-user",c={locId:n.locId,accessCode:e,priId:a};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access "+a,n.userName,e.message,s.tableId,"",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),"OPENDRAWER"===a&&t.handleOpenDrawer(i,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=(t.route,t.navigation),n=this.state,l=n.serviceEntry,a=n.serviceEntryObj,o=n.home,i=n.cashierPrinters,s=(n.settings,n.selectedTable),d=n.overlayInputReferenceVisible,c=n.overlayMergeBillVisible,u=n.overlaySplitBillVisible,h=n.overlayUpdateTipsVisible,y=n.overlaySplitAmountVisible,g=n.overlayViewSplittedVisible,m=n.overlayRequestAccessVisible,x=n.overlayAlertVisible,v=n.overlayAlertInputValue,b=n.overlayPaynowVisible,j=n.overlayPaynowInput,T=n.numberString,S=n.paymentMethods,I=n.payments,C=n.selectedPaymentMethod,w=n.pay,k=n.splitting,E=n.availableReceipts,B=n.splitReceipts,D=n.tableItems,U=n.requestedPrivilege,V=(n.selectedPrinter,n.printPurpose),M=n.overlayChoosePrinterVisible,z=n.overlayProcedureMessageVisible,N=n.loading;return console.log("in pos"),k?(0,O.jsx)(wt,{serviceEntry:l,home:o,selectedTable:s,availableReceipts:E,tableItems:D,cashierPrinters:i,handleUpdateFromSplit:this.handleUpdateFromSplit}):(0,O.jsxs)(f.default,{style:or.container,children:[x&&(0,O.jsx)(ee,{input:v,handleUpdateFromAlert:this.handleUpdateFromAlert}),z&&(0,O.jsx)(q,{text:z,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),d&&(0,O.jsx)(Dt,{handleUpdateFromInputReference:this.handleUpdateFromInputReference}),c&&(0,O.jsx)(Ot,{serviceEntry:l,home:o,cashierPrinters:i,selectedTable:s,handleUpdateFromMergeBill:this.handleUpdateFromMergeBill}),u&&(0,O.jsx)(zt,{handleUpdateFromSplitBill:this.handleUpdateFromSplitBill}),y&&(0,O.jsx)(Gt,{home:o,selectedTable:s,receipts:E,cashierPrinters:i,handleUpdateFromSplitAmount:this.handleUpdateFromSplitAmount}),g&&(0,O.jsx)(Qt,{selectedTable:s,receipts:E,handleUpdateFromViewSplitted:this.handleUpdateFromViewSplitted}),h&&(0,O.jsx)(Wt,{paymentMethods:S,handleUpdateFromUpdateTips:this.handleUpdateFromUpdateTips}),m&&(0,O.jsx)(Ue,{home:o,requestedPrivilege:U,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),M&&(0,O.jsx)(ut,{printPurpose:V,cashierPrinters:i,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),b&&(0,O.jsx)(tr,{home:o,input:j,handleUpdateFromPaynow:this.handleUpdateFromPaynow}),(0,O.jsxs)(f.default,{style:or.leftContainer,children:[(0,O.jsx)(f.default,{style:or.leftFirstContainer,children:(0,O.jsxs)(f.default,{style:or.rowOf5,children:[(0,O.jsxs)(R.default,{style:or.headerKeyContainer,onPress:function(){return r.goBack()},children:[(0,O.jsx)(A.default,{style:[or.headerKeyTextTableId],children:s.tableId}),(0,O.jsx)(A.default,{style:[or.headerKeyText,{marginTop:0}],children:p.default.get("back")})]}),(0,O.jsxs)(R.default,{style:[or.headerKeyContainer,"Y"===s.splitFlg&&{opacity:.2}],onPress:function(){return e.handlePressTips()},disabled:"Y"===s.splitFlg,children:[(0,O.jsx)(F.default,{name:"like2",size:24,color:"white",style:{height:30}}),(0,O.jsx)(A.default,{style:or.headerKeyText,children:p.default.get("tips")})]}),(0,O.jsxs)(R.default,{style:or.headerKeyContainer,onPress:function(){return e.handleOpenDrawer()},children:[(0,O.jsx)(F.default,{name:"laptop",size:24,color:"white",style:{height:30}}),(0,O.jsx)(A.default,{style:or.headerKeyText,children:p.default.get("drawer")})]}),"Y"===s.splitFlg?(0,O.jsxs)(R.default,{style:or.headerKeyContainer,onPress:function(){return e.handlePressUnsplit()},children:[(0,O.jsx)(F.default,{name:"switcher",size:24,color:"white",style:{height:30}}),(0,O.jsx)(A.default,{style:or.headerKeyText,children:p.default.get("unsplit")})]}):(0,O.jsxs)(R.default,{style:or.headerKeyContainer,onPress:function(){return e.handlePressSplit()},children:[(0,O.jsx)(F.default,{name:"switcher",size:24,color:"white",style:{height:30}}),(0,O.jsx)(A.default,{style:or.headerKeyText,children:p.default.get("splitbill")})]}),"Y"===s.hostFlg||s.refTableId?(0,O.jsxs)(R.default,{style:or.headerKeyContainer,onPress:function(){return e.handlePressUnmerge()},children:[(0,O.jsx)(F.default,{name:"menuunfold",size:24,color:"white",style:{height:30}}),(0,O.jsx)(A.default,{style:or.headerKeyText,children:p.default.get("unmerge")})]}):(0,O.jsxs)(R.default,{style:[or.headerKeyContainer,"Y"===s.splitFlg&&{opacity:.2}],disabled:"Y"===s.splitFlg,onPress:function(){return e.handlePressMerge()},children:[(0,O.jsx)(F.default,{name:"menufold",size:24,color:"white",style:{height:30}}),(0,O.jsx)(A.default,{style:or.headerKeyText,children:p.default.get("mergebill")})]})]})}),(0,O.jsxs)(f.default,{style:or.leftSecondContainer,children:[(0,O.jsxs)(f.default,{style:or.tableSummaryContainer,children:[(0,O.jsxs)(f.default,{style:or.tableSummaryTitleContainer,children:[(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:or.tableSummaryTitleText,children:p.default.get("beforedisc")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:or.tableSummaryTitleText,children:p.default.get("totaldisc")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:or.tableSummaryTitleText,children:p.default.get("servicecharge")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:or.tableSummaryTitleText,children:p.default.get("tax")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsxs)(A.default,{style:or.tableSummaryTitleText,children:[p.default.get("tips")," ",s.tipsPmId]})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:[or.tableSummaryTitleText,{color:L.reserved}],children:p.default.get("grandtotal")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:[or.tableSummaryTitleText,{color:L.paid}],children:p.default.get("pay")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:or.tableSummaryTitleText,children:p.default.get("balance")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:or.tableSummaryTitleText,children:p.default.get("tender")})}),(0,O.jsx)(f.default,{style:or.tableSummaryTitle,children:(0,O.jsx)(A.default,{style:or.tableSummaryTitleText,children:p.default.get("change")})})]}),(0,O.jsxs)(f.default,{style:or.tableSummaryValueContainer,children:[(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.beforeDisc?s.beforeDisc.toFixed(2):"0.00"})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.totalDisc?s.totalDisc.toFixed(2):"0.00"})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.serviceCharge?s.serviceCharge.toFixed(2):"0.00"})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.totalTax?s.totalTax.toFixed(2):"0.00"})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.tips?s.tips.toFixed(2):"0.00"})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:[or.tableSummaryValueText,{color:L.reserved}],children:s.grandTotal.toFixed(2)||0})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:[or.tableSummaryValueText,{color:L.paid}],children:w.toFixed(2)||0})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.balance.toFixed(2)||0})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.tender.toFixed(2)||0})}),(0,O.jsx)(f.default,{style:or.tableSummaryValue,children:(0,O.jsx)(A.default,{style:or.tableSummaryValueText,children:s.change.toFixed(2)||0})})]})]}),(0,O.jsxs)(_.default,{style:{maxHeight:30},horizontal:!0,showsHorizontalScrollIndicator:!1,children:[s.vipId&&(0,O.jsxs)(f.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.paid,marginLeft:20,marginRight:10},children:s.vipId||"-"}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.reserved},children:s.vipName||"-"})]}),B&&B.map((function(e){return(0,O.jsxs)(f.default,{style:{flexDirection:"row",flex:1,alignItems:"center"},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.paid,marginLeft:20,marginRight:10},children:e.docId}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"white"},children:e.grandTotal?e.grandTotal.toFixed(2):"-"})]},e.recKey.toString())}))]}),(0,O.jsxs)(f.default,{style:{flex:1,backgroundColor:L.grey2,borderRadius:5},children:[(0,O.jsxs)(f.default,{style:or.paymentsContainer,children:[(0,O.jsx)(f.default,{style:or.paymentsFirst,children:(0,O.jsx)(A.default,{style:or.paymentsTitleText,children:"No."})}),(0,O.jsx)(f.default,{style:or.paymentsSecond,children:(0,O.jsx)(A.default,{style:or.paymentsTitleText,children:"Payment ID"})}),(0,O.jsx)(f.default,{style:or.paymentsThird,children:(0,O.jsx)(A.default,{style:or.paymentsTitleText,children:"Ref"})}),(0,O.jsx)(f.default,{style:or.paymentsFourth,children:(0,O.jsx)(A.default,{style:or.paymentsTitleText,children:"Amount"})})]}),(0,O.jsx)(_.default,{style:{flex:1},ref:function(t){return e.posScrollView=t},onContentSizeChange:function(t,r){e.posScrollView.scrollToEnd({animated:!0})},showsVerticalScrollIndicator:!1,children:I.map((function(t,r){return(0,O.jsxs)(f.default,{style:or.datumContainer,children:[(0,O.jsx)(f.default,{style:or.datumFirst,children:(0,O.jsx)(A.default,{style:or.datumText,children:r+1})}),(0,O.jsx)(R.default,{style:or.datumSecond,onPress:function(){return e.handlePressPaymentItem(t)},children:(0,O.jsx)(A.default,{style:or.datumText,children:t.name})}),(0,O.jsx)(R.default,{style:or.datumThird,onPress:function(){return e.handlePressPaymentItemRef(t)},children:(0,O.jsx)(A.default,{style:or.datumText,children:t.payRef})}),(0,O.jsx)(f.default,{style:or.datumFourth,children:(0,O.jsx)(A.default,{style:or.datumText,children:t.payMoney.toFixed(2)})})]},r)}))})]})]}),(0,O.jsxs)(f.default,{style:or.rowOf5,children:[(0,O.jsx)(R.default,{disabled:!0,style:or.headerKeyContainer}),(0,O.jsx)(R.default,{disabled:!0,style:or.headerKeyContainer}),(0,O.jsx)(R.default,{disabled:!0,style:or.headerKeyContainer}),(0,O.jsx)(R.default,{disabled:!0,style:or.headerKeyContainer}),(0,O.jsx)(R.default,{disabled:!0,style:or.headerKeyContainer})]})]}),(0,O.jsxs)(f.default,{style:or.rightContainer,children:[(0,O.jsx)(f.default,{style:or.rightFirstContainer,children:(0,O.jsx)(me.default,{style:{flex:3},showsVerticalScrollIndicator:!1,numColumns:5,data:S,extraData:C,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return(0,O.jsx)(f.default,{style:{flex:.2,height:ar},children:(0,O.jsxs)(R.default,{style:[r.pmId===(null==C?void 0:C.pmId)?or.activeFunctionKeyContainer:or.functionKeyContainer,r.pmId?null:{opacity:.2}],onPress:function(){return e.handleSelectPaymentMethod(r)},children:[(0,O.jsx)(P.default,{style:{flex:1,aspectRatio:1},source:{uri:(null==a?void 0:a.restServiceUrl)+"epbm/api/image/stock?stkId="+r.pmId+"&t="+r.lastupdate}}),(0,O.jsx)(f.default,{style:{position:"absolute",top:0,left:0,right:0,bottom:0,alignItems:"center",justifyContent:"center"},children:(0,O.jsx)(A.default,{style:r.pmId===(null==C?void 0:C.pmId)?or.activeFunctionKeyText:or.functionKeyText,children:r.pmId})})]})})}})}),(0,O.jsx)(f.default,{style:or.rightFirstNumberContainer,children:(0,O.jsx)(A.default,{style:or.rightFirstNumberText,children:T})}),(0,O.jsxs)(f.default,{style:or.rightSecondContainer,children:[(0,O.jsx)(f.default,{style:or.rightSecondLeftContainer,children:(0,O.jsx)(R.default,{style:or.clearContainer,onPress:function(){return e.handleBuildNumberString("CLEAR")},children:(0,O.jsx)(A.default,{style:or.keyText,children:"CLEAR"})})}),(0,O.jsxs)(f.default,{style:or.rightSecondMiddleContainer,children:[(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("7")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"7"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("4")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"4"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("1")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"1"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("0")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"0"})})]}),(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("8")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"8"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("5")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"5"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("2")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"2"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString(".")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"."})})]}),(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("9")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"9"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("6")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"6"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("3")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"3"})}),(0,O.jsx)(R.default,{style:or.keyContainer,onPress:function(){return e.handleBuildNumberString("00")},children:(0,O.jsx)(A.default,{style:or.keyNumberText,children:"00"})})]})]}),(0,O.jsxs)(f.default,{style:or.rightSecondRightContainer,children:[(0,O.jsx)(R.default,{style:or.backspaceContainer,onPress:function(){return e.handleBuildNumberString("DEL")},children:(0,O.jsx)(A.default,{style:or.keyText,children:"DEL"})}),0!==s.balance||C?(0,O.jsx)(R.default,{style:[or.enterContainer,N&&{opacity:.2}],disabled:N,onPress:function(){return e.handleEnterButton()},children:(0,O.jsx)(A.default,{style:or.keyText,children:"ENTER"})}):(0,O.jsx)(R.default,{style:[or.finishContainer,N&&{opacity:.2}],disabled:N,onPress:function(){return e.handleFinishButton()},children:(0,O.jsx)(A.default,{style:or.keyText,children:"FINISH"})})]})]})]})]})}}]),r}(d.Component),ar=E.default.get("window").height/8,or=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1},rightContainer:{flex:1},leftFirstContainer:{flex:1},leftSecondContainer:{flex:6,margin:5},rightFirstContainer:{flex:3},rightSecondContainer:{flex:4,flexDirection:"row"},rightSecondLeftContainer:{flex:1},rightSecondMiddleContainer:{flex:3,flexDirection:"row"},rightSecondRightContainer:{flex:1},rowOf5:{flex:1,flexDirection:"row"},rightFirstNumberContainer:{flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},tableSummaryContainer:{justifyContent:"space-between",flexDirection:"row",marginHorizontal:60,marginTop:10,marginBottom:20},tableSummaryTitleContainer:{alignItems:"flex-start"},tableSummaryValueContainer:{alignItems:"flex-end"},tableSummaryTitle:{height:30,justifyContent:"flex-end"},tableSummaryValue:{height:30,justifyContent:"flex-end"},tableSummaryTitleText:{fontFamily:"varela-round",textTransform:"uppercase",color:"white"},tableSummaryValueText:{fontFamily:"varela-round",fontSize:20,color:"white"},keyContainer:{flex:1,margin:5,borderColor:"white",borderWidth:2,borderRadius:5,alignItems:"center",justifyContent:"center"},backspaceContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5,backgroundColor:L.grey4},enterContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5,backgroundColor:L.reserved},finishContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.occupied,borderRadius:5,borderWidth:2,borderColor:"white"},clearContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5,backgroundColor:L.paid},functionKeyContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",borderColor:"white",borderWidth:2,borderRadius:5},activeFunctionKeyContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:"white",borderColor:"white",borderWidth:2,borderRadius:5},headerKeyContainer:{flex:1,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey3,borderRadius:5},headerKeyTextTableId:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",fontSize:24},headerKeyText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",fontSize:12},keyText:{fontFamily:"varela-round",color:"white"},keyNumberText:{fontFamily:"varela-round",color:"white",fontSize:32},functionKeyText:{fontFamily:"varela-round",color:"white",textAlign:"center"},activeFunctionKeyText:{fontFamily:"varela-round",color:"black",textAlign:"center"},rightFirstNumberText:{fontFamily:"varela-round",color:"white",fontSize:64},paymentsContainer:{height:30,flexDirection:"row",marginHorizontal:5},dataContainer:{flex:1},paymentsFirst:{flex:1,justifyContent:"center",alignItems:"center",borderRightWidth:3,borderRightColor:L.grey2},paymentsSecond:{flex:3,justifyContent:"center",paddingLeft:10},paymentsThird:{flex:5,justifyContent:"center",paddingLeft:10},paymentsFourth:{flex:2,justifyContent:"center",alignItems:"flex-end",paddingRight:10},paymentsTitleText:{color:L.grey5,fontFamily:"varela-round"},datumFirst:{flex:1,justifyContent:"center",alignItems:"center",borderRightWidth:3,borderRightColor:"white"},datumSecond:{flex:3,justifyContent:"center",paddingLeft:10},datumThird:{flex:5,justifyContent:"center",paddingLeft:10},datumFourth:{flex:2,justifyContent:"center",alignItems:"flex-end",paddingRight:10},datumText:{color:"white",fontFamily:"varela-round",fontSize:16},datumContainer:{backgroundColor:L.grey4,flexDirection:"row",marginHorizontal:5,marginBottom:5,minHeight:50,paddingVertical:5}});function ir(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var sr=function(e){(0,o.default)(r,e);var t=ir(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,selectedTable:e.route.params.selectedTable,menus:e.route.params.masters.menus,settings:e.route.params.masters.settings,selectedAdhocItem:"",selectedMenu:"",adhocItems:[],searchText:"",availableMenus:e.route.params.masters.menus.filter((function(e){return"X"===e.menuType}))},n.handleSelectTableItem=n.handleSelectTableItem.bind((0,S.default)(n)),n.handleSelectAdhoc=n.handleSelectAdhoc.bind((0,S.default)(n)),n.handlePressSettleAsMenu=n.handlePressSettleAsMenu.bind((0,S.default)(n)),n.handlePressSettleAsRetail=n.handlePressSettleAsRetail.bind((0,S.default)(n)),n.handleSearchText=n.handleSearchText.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){this.doGet()}},{key:"doGet",value:function(){var e=this,t=this.state,r=(t.home,t.serviceEntry+"api/tables/"+t.selectedTable.recKey+"/opentable-adhocs");fetch(r).then((function(e){return e.json()})).then((function(t){console.log("get opentable-adhocs successful",t),e.setState({adhocItems:t})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleSelectTableItem",value:function(e){this.setState({selectedAdhocItem:e,selectedMenu:""})}},{key:"handleSelectAdhoc",value:function(e){this.state.selectedAdhocItem&&this.setState({selectedMenu:e})}},{key:"handlePressSettleAsMenu",value:function(){var e=this,t=(this.props.navigation,this.state),r=t.home,n=t.serviceEntry,l=t.settings,a=t.selectedTable,o=t.selectedAdhocItem,i=t.selectedMenu;if(o){var s=n+"api/tables/"+a.recKey+"/insert-item",d={userId:r.userId,opentableRecKey:a.recKey,restmenuRecKey:i.recKey,adhocRecKey:o.recKey,orderQty:"1"};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(t){var i;console.log("post insert-item successful",t),"Y"===(null==(i=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Adhoc Settle Menu",r.userName,t.message,a.tableId,"",o.recKey),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.doGet()})).catch((function(t){console.log(t),e.setState({loading:!1})}))}}},{key:"handlePressSettleAsRetail",value:function(){var e=this,t=(this.props.navigation,this.state),r=t.home,n=t.serviceEntry,l=t.settings,a=t.selectedTable,o=t.selectedAdhocItem;if(o){var i=n+"api/tables/"+a.recKey+"/insert-item",s={userId:r.userId,opentableRecKey:a.recKey,adhocRecKey:o.recKey,orderQty:o.orderQty};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){var i;console.log("post insert-item successful",t),"Y"===(null==(i=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Adhoc Settle Retail",r.userName,t.message,a.tableId,"",o.recKey),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.doGet()})).catch((function(t){console.log(t),e.setState({loading:!1})}))}}},{key:"handleSearchText",value:function(e){var t=this.state.menus,r=[];this.setState({searchText:e});var n=e.toUpperCase();r=t.filter((function(e){return"X"===e.menuType})),e?(r=r.filter((function(e){return e.menuName.toUpperCase().includes(n)||e.menuId.toUpperCase().includes(n)})),this.setState({availableMenus:r})):this.setState({availableMenus:r})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.selectedTable,l=r.adhocItems,a=r.selectedAdhocItem,o=r.selectedMenu,i=r.searchText,s=r.availableMenus,d=r.overlayProcedureMessageVisible;return console.log("in adhoc"),(0,O.jsxs)(f.default,{style:dr.container,children:[d&&(0,O.jsx)(q,{text:d,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsx)(f.default,{style:dr.leftContainer,children:(0,O.jsxs)(f.default,{style:dr.wrapper,children:[(0,O.jsxs)(f.default,{style:dr.overlayHeader,children:[(0,O.jsxs)(A.default,{style:dr.overlayTitleText,children:["TABLE ",n.tableId]}),(0,O.jsx)(A.default,{style:dr.overlaySubtitleText,children:"Ad Hoc"}),(0,O.jsxs)(A.default,{style:dr.overlayTitleText,children:[l.length," ITEMS"]})]}),(0,O.jsxs)(f.default,{style:dr.buttonsContainer,children:[(0,O.jsxs)(R.default,{style:[dr.button,{opacity:.2}],disabled:!0,onPress:function(){return e.handlePressSettleAsRetail()},children:[(0,O.jsx)(A.default,{style:dr.buttonText,children:"Settle"}),(0,O.jsx)(A.default,{style:dr.buttonText,children:"As"}),(0,O.jsx)(A.default,{style:dr.buttonText,children:"Retail"})]}),(0,O.jsxs)(R.default,{style:[dr.button,!o&&{opacity:.2}],disabled:!o,onPress:function(){return e.handlePressSettleAsMenu()},children:[(0,O.jsx)(A.default,{style:dr.buttonText,children:"Settle"}),(0,O.jsx)(A.default,{style:dr.buttonText,children:"As"}),(0,O.jsx)(A.default,{style:dr.buttonText,children:"Menu"})]})]}),(0,O.jsxs)(_.default,{style:[dr.itemsContainer],children:[(0,O.jsx)(f.default,{style:{paddingTop:5}}),l.map((function(t){return(0,O.jsxs)(R.default,{style:[dr.tableItemContainer,a.recKey===t.recKey&&{backgroundColor:L.occupied}],onPress:function(){return e.handleSelectTableItem(t)},children:[(0,O.jsx)(f.default,{style:dr.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:dr.tableItemText,children:t.orderQty})}),(0,O.jsxs)(f.default,{style:dr.tableItemSecondContainer,children:[(0,O.jsx)(A.default,{style:dr.tableItemText,children:t.name}),(0,O.jsx)(A.default,{style:dr.tableItemText,children:Y()(t.createDate).format("HH:mm")})]}),(0,O.jsx)(f.default,{style:dr.tableItemThirdContainer,children:(0,O.jsx)(A.default,{style:dr.tableItemText})})]},t.recKey)}))]}),(0,O.jsx)(R.default,{style:dr.actionButton,onPress:function(){return t.goBack()},children:(0,O.jsx)(A.default,{style:[dr.buttonText,{color:L.paid}],children:"QUIT"})})]})}),(0,O.jsx)(f.default,{style:dr.rightContainer,children:(0,O.jsxs)(f.default,{style:dr.rightWrapper,children:[(0,O.jsxs)(f.default,{style:dr.searchBox,children:[(0,O.jsx)(w.default,{style:dr.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:i,onChangeText:function(t){return e.handleSearchText(t)}}),(0,O.jsx)(R.default,{style:dr.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsx)(f.default,{style:dr.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:dr.searchBoxInfoText,children:[s.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:{flex:1},data:s,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[dr.grid,o.recKey===r.recKey&&{backgroundColor:L.occupied}],onPress:function(){return e.handleSelectAdhoc(r)},children:[(0,O.jsxs)(f.default,{style:dr.gridFirst,children:[(0,O.jsx)(f.default,{style:dr.gridFirstLeft,children:(0,O.jsx)(A.default,{style:dr.gridFirstLeftText,children:r.menuId})}),(0,O.jsx)(f.default,{style:dr.gridFirstRight})]}),(0,O.jsx)(f.default,{style:dr.gridSecond,children:(0,O.jsx)(A.default,{style:dr.gridSecondText,children:r.menuName})}),(0,O.jsx)(f.default,{style:dr.gridThird})]},r.recKey)}})]})})]})}}]),r}(d.Component),dr=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1},rightContainer:{flex:2,alignItems:"center",justifyContent:"center",margin:5},wrapper:{flex:1},splitScroll:{width:"100%",height:"100%"},itemsContainer:{flex:1,borderRadius:5,margin:5,backgroundColor:L.grey2},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},buttonsContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center"},actionButton:{height:72,margin:5,backgroundColor:L.grey2,alignItems:"center",justifyContent:"center"},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:1,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{alignItems:"center",justifyContent:"center",width:50},rightWrapper:{flex:1,borderRadius:5,width:"100%",alignItems:"center",justifyContent:"center",backgroundColor:L.grey2},button:{height:72,width:72,borderRadius:5,margin:5,backgroundColor:L.grey2,alignItems:"center",justifyContent:"center"},buttonText:{fontFamily:"varela-round",color:"white",fontSize:12,textTransform:"uppercase"},gap:{padding:5},searchBox:{backgroundColor:L.grey1,height:50,width:400,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{height:80,width:400,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:L.reserved,fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"}});function cr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var ur=function(e){(0,o.default)(r,e);var t=cr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,dayclosePayments:e.route.params.dayclosePayments,daycloseSubPayments:e.route.params.daycloseSubPayments,cashierPrinters:e.route.params.masters.cashierPrinters,settings:e.route.params.masters.settings,overlayChoosePrinterVisible:!1,total:e.route.params.dayclosePayments.reduce((function(e,t){return e+t.systemAmt}),0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),focused:null},n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleFinishDayclose=n.handleFinishDayclose.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){e?(this.setState({overlayChoosePrinterVisible:!1}),this.handleFinishDayclose(e)):this.setState({overlayChoosePrinterVisible:!1})}},{key:"handleFinishDayclose",value:function(e){var t=this,r=this.props.navigation,n=this.state,l=n.serviceEntry,a=n.home,o=n.settings,i=n.dayclosePayments,s=n.daycloseSubPayments,d=n.cashierPrinters;if(0!==i.length)if(d.length>1&&!e&&!a.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{var c=l+"api/finish-dayclose",u={userId:a.userId,orgId:a.orgId,locId:a.locId,shopId:a.shopId,daycloseRecKey:i[0].masRecKey,iomodelId:a.defaultPrinter&&a.defaultPrinter.iomodelId||e&&e.iomodelId,verify:i.map((function(e){return e.recKey.toString()+","+(t.state[e.recKey]||"0")})).join(","),subVerify:s.map((function(e){return e.recKey.toString()+","+(t.state[e.recKey]||"0")})).join(",")};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){var n;console.log("post finish-dayclose successful",e),"Y"===(null==(n=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(l,"Finish Dayclose",a.userName,e.message,"","",""),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.goBack()}))}}},{key:"doChangeText",value:function(e,t){var r,n=this,l=this.state,a=l.dayclosePayments,o=l.daycloseSubPayments,i=a.find((function(t){return t.pmId===e.pmId}));this.setState((r={},(0,b.default)(r,e.recKey,t),(0,b.default)(r,i.recKey,o.filter((function(t){return t.pmId===e.pmId&&t.recKey!==e.recKey})).reduce((function(e,t){return e+(n.state[t.recKey]||0)*t.pmValue}),Number(t)*e.pmValue)),r))}},{key:"doPressKey",value:function(e){var t=this.state,r=t.focused,n=(t.dayclosePayments,t.daycloseSubPayments.find((function(e){return e.recKey===r})));"CLEAR"===e?this.doChangeText(n,"0"):0===Number(this.state[r])?(this.setState((0,b.default)({},r,e)),this.doChangeText(n,e)):this.doChangeText(n,(this.state[r]||"")+e)}},{key:"render",value:function(){var e,t=this,r=this.props.navigation,n=this.state,l=n.settings,a=n.dayclosePayments,o=n.daycloseSubPayments,i=n.cashierPrinters,s=n.overlayChoosePrinterVisible,d=n.overlayProcedureMessageVisible,c=n.total,u=n.focused,h=null==(e=l.find((function(e){return"DAYCLOSEVERIFY"===e.setId})))?void 0:e.setString;return console.log("in dayclose",u),(0,O.jsxs)(f.default,{style:fr.container,children:[d&&(0,O.jsx)(q,{text:d,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),s&&(0,O.jsx)(ut,{printPurpose:"DAY-END CLOSE",cashierPrinters:i,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),(0,O.jsx)(f.default,{style:fr.containerFirst,children:(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsxs)(R.default,{style:fr.button,onPress:function(){return r.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:fr.buttonText,children:"BACK"})]})})}),(0,O.jsxs)(f.default,{style:fr.containerSecond,children:[(0,O.jsxs)(f.default,{style:fr.overlayHeader,children:[(0,O.jsx)(A.default,{style:fr.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:fr.overlaySubtitleText,children:"Day-end Closing"}),(0,O.jsxs)(A.default,{style:fr.overlayTitleText,children:[a.length," PAYMENT METHODS"]})]}),"N"===h&&(0,O.jsxs)(f.default,{style:fr.summary,children:[(0,O.jsx)(A.default,{style:fr.summaryText,children:"TOTAL"}),(0,O.jsx)(A.default,{style:fr.summaryTotalText,children:c})]}),(0,O.jsxs)(f.default,{style:fr.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:fr.titleFirstContainer,children:(0,O.jsx)(A.default,{style:fr.titleText,children:"Line No."})}),(0,O.jsx)(f.default,{style:fr.titleSecondContainer,children:(0,O.jsx)(A.default,{style:fr.titleText,children:"Payment ID"})}),(0,O.jsx)(f.default,{style:fr.titleThirdContainer,children:(0,O.jsx)(A.default,{style:fr.titleText,children:"Payment Name"})}),(0,O.jsx)(f.default,{style:fr.titleFourthContainer,children:(0,O.jsx)(A.default,{style:fr.titleText,children:"Amount"})})]}),(0,O.jsx)(me.default,{style:{flex:1},data:a,showsVerticalScrollIndicator:!1,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var r=e.item;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(f.default,{style:[fr.tableItemContainer,Number(t.state[r.recKey]||0).toFixed(2)!==(r.systemAmt+r.floatAmt).toFixed(2)&&o.some((function(e){return e.pmId===r.pmId}))&&"Y"===h&&{backgroundColor:L.paid}],children:[(0,O.jsx)(f.default,{style:fr.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:fr.tableItemText,children:r.lineNo})}),(0,O.jsx)(f.default,{style:fr.tableItemSecondContainer,children:(0,O.jsx)(A.default,{style:fr.tableItemText,children:r.pmId})}),(0,O.jsx)(f.default,{style:fr.tableItemThirdContainer,children:(0,O.jsx)(A.default,{style:fr.tableItemText,children:r.name})}),(0,O.jsx)(f.default,{style:fr.tableItemFourthContainer,children:"Y"===h&&o.some((function(e){return e.pmId===r.pmId}))?(0,O.jsx)(A.default,{style:[fr.tableItemText,{paddingRight:10}],children:(t.state[r.recKey]||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}):(0,O.jsx)(A.default,{style:[fr.tableItemText,{paddingRight:10}],children:r.systemAmt.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})})]}),o.filter((function(e){return e.pmId===r.pmId})).map((function(e){return(0,O.jsxs)(f.default,{style:[fr.tableItemContainer],children:[(0,O.jsx)(f.default,{style:fr.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:fr.tableItemText})}),(0,O.jsx)(f.default,{style:fr.tableItemSecondContainer,children:(0,O.jsx)(A.default,{style:fr.tableItemText})}),(0,O.jsx)(f.default,{style:{flex:.5,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:fr.tableItemText,children:e.subPmId})}),(0,O.jsx)(f.default,{style:{flex:.5},children:(0,O.jsx)(f.default,{style:[fr.inputRowRight,{marginRight:10},u===e.recKey&&{backgroundColor:L.reserved}],children:(0,O.jsx)(w.default,{style:[fr.textInput,u===e.recKey&&{color:"black"}],keyboardType:"numeric",selectTextOnFocus:!0,value:t.state[e.recKey]||"0",onChangeText:function(r){return t.doChangeText(e,r)},onFocus:function(){return t.setState({focused:e.recKey})}})})}),(0,O.jsx)(f.default,{style:fr.tableItemFourthContainer,children:(0,O.jsx)(A.default,{style:[fr.tableItemText,{paddingRight:10}],children:(e.pmValue*Number(t.state[e.recKey]||0)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})})]},e.recKey.toString())}))]})}})]}),(0,O.jsxs)(f.default,{style:[fr.containerThird],children:[(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsxs)(R.default,{style:fr.button,onPress:function(){return t.handleFinishDayclose()},children:[(0,O.jsx)(F.default,{name:"isv",color:"white",size:36}),(0,O.jsx)(A.default,{style:fr.buttonText,children:"DAY CLOSE"})]})}),(0,O.jsx)(f.default,{children:u&&(0,O.jsx)(me.default,{data:["1","2","3","4","5","6","7","8","9","CLEAR","0"],scrollEnabled:!1,showsVerticalScrollIndicator:!1,numColumns:3,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var r=e.item;return(0,O.jsx)(f.default,{style:{flex:1/3,aspectRatio:1},children:(0,O.jsx)(R.default,{style:{margin:2.5,flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"black",borderRadius:5},onPress:function(){return t.doPressKey(r)},children:"CLEAR"===r?(0,O.jsx)(F.default,{name:"close",color:"white",size:18}):(0,O.jsx)(A.default,{style:{color:"white",fontFamily:"varela-round",fontSize:18},children:r})})})}})})]})]})}}]),r}(d.Component),fr=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:L.grey3},containerThird:{flex:1,padding:10},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},titleFirstContainer:{width:100,alignItems:"center",justifyContent:"center"},titleSecondContainer:{flex:1,justifyContent:"center"},titleThirdContainer:{flex:1,justifyContent:"center"},titleFourthContainer:{width:150,alignItems:"flex-end",justifyContent:"center",paddingRight:20},titleText:{fontFamily:"varela-round",color:L.grey5},tableItemText:{fontFamily:"varela-round",color:"white"},inputRowRight:{flex:1,backgroundColor:L.grey1,borderRadius:5,justifyContent:"center",alignItems:"flex-end"},textInput:{paddingHorizontal:10,flex:1,width:"100%",textAlign:"right",color:"white",fontFamily:"varela-round"},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:100,alignItems:"center",justifyContent:"center"},tableItemSecondContainer:{flex:1,justifyContent:"center"},tableItemThirdContainer:{flex:1,justifyContent:"center"},tableItemFourthContainer:{width:150,alignItems:"flex-end",justifyContent:"center",paddingRight:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},summary:{marginVertical:15,alignItems:"center",justifyContent:"center"},summaryTotalText:{fontFamily:"varela-round",fontSize:32,color:L.reserved,textAlign:"center"},summaryText:{fontFamily:"varela-round",fontSize:12,color:L.paid,textAlign:"center"}});function hr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var yr=function(e){(0,o.default)(r,e);var t=hr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:"",printers:[],loading:!1},n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.home,n=t.serviceEntry+"api/iomodels",l=new URLSearchParams;l.append("posNo",r.shopId),fetch(n+="?"+l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("iomodels",t),t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({printers:t},(function(){return e.handlePingAll()}))})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePingPrinter",value:function(e){var t=this,r=this.state,n=r.serviceEntry,l=r.printers,a=l;a.find((function(t){return t.recKey===e.recKey})).statusFlg="PING...",this.setState({printers:a});var o=n+"api/iomodels/"+e.recKey;fetch(o,{method:"GET"}).then((function(e){return e.json()})).then((function(r){if(console.log("ping iomodel",r),r.message)t.setState({overlayProcedureMessageVisible:r.message.toUpperCase()});else{var n=l;"OK"===r.msgId?n.find((function(t){return t.recKey===e.recKey})).statusFlg="ONLINE":n.find((function(t){return t.recKey===e.recKey})).statusFlg="OFFLINE",t.setState({printers:n})}})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handlePressPingAll",value:function(){var e=[];e.push({text:"Yes",handleText:"handlePingAll"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Ping All Printers",text:"Send ping to all printers?",ok:!1,cancel:!0,options:e},overlayAlertVisible:!0})}},{key:"handlePressTestAll",value:function(){var e=[];e.push({text:"Yes",handleText:"handleTestAll"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Test All Printers",text:"Send test command to all printers?",ok:!1,cancel:!0,options:e},overlayAlertVisible:!0})}},{key:"handleTestAll",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=r+"api/test-printer",a=new URLSearchParams;a.append("userId",n.userId),a.append("orgId",n.orgId),a.append("locId",n.locId),a.append("shopId",n.shopId),fetch(l+="?"+a,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("post test-printer successful",t),t.message&&e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePingAll",value:function(){var e=this;this.state.printers.forEach((function(t){return e.handlePingPrinter(t)}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&("handleTestAll"===e?this.handleTestAll():"handlePingAll"===e&&this.handlePingAll())}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.printers,l=(r.loading,r.overlayProcedureMessageVisible),a=r.overlayAlertVisible,o=r.overlayAlertInputValue;return console.log("in printers"),(0,O.jsxs)(f.default,{style:gr.container,children:[a&&(0,O.jsx)(ee,{input:o,handleUpdateFromAlert:this.handleUpdateFromAlert}),l&&(0,O.jsx)(q,{text:l,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsxs)(f.default,{style:gr.leftContainer,children:[(0,O.jsx)(f.default,{style:gr.navigateContainer,children:(0,O.jsxs)(f.default,{style:gr.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:gr.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:gr.buttonText,children:p.default.get("back")})]}),(0,O.jsx)(f.default,{style:gr.selectionContainer})]})}),(0,O.jsx)(f.default,{style:gr.displayContainer,children:(0,O.jsxs)(f.default,{style:[gr.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:gr.gap}),(0,O.jsxs)(f.default,{style:gr.gridContainer,children:[(0,O.jsx)(f.default,{style:gr.gap}),(0,O.jsx)(me.default,{style:{flex:1,width:"100%"},data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;if(t.index%2===0)return(0,O.jsxs)(R.default,{style:gr.grid,onPress:function(){return e.handlePingPrinter(r)},children:[(0,O.jsxs)(f.default,{style:gr.gridFirst,children:[(0,O.jsx)(f.default,{style:gr.gridFirstLeft,children:(0,O.jsx)(A.default,{style:gr.gridFirstLeftText,children:r.iomodelId})}),(0,O.jsx)(f.default,{style:gr.gridFirstRight,children:(0,O.jsx)(A.default,{style:[gr.gridFirstRightText,{color:"PING..."===r.statusFlg?L.reserved:"ONLINE"===r.statusFlg?L.vacant:L.paid}],children:"ONLINE"===r.statusFlg?p.default.get("online"):"OFFLINE"===r.statusFlg?p.default.get("offline"):r.statusFlg})})]}),(0,O.jsx)(f.default,{style:gr.gridSecond,children:(0,O.jsx)(A.default,{style:gr.gridSecondText,children:r.name})}),(0,O.jsxs)(f.default,{style:gr.gridThird,children:[(0,O.jsx)(f.default,{style:gr.gridThirdLeft}),(0,O.jsx)(f.default,{style:gr.gridThirdRight,children:(0,O.jsx)(A.default,{style:gr.gridThirdRightText,children:r.printPort})})]})]})}})]}),(0,O.jsx)(f.default,{style:gr.gap})]})})]}),(0,O.jsxs)(f.default,{style:gr.rightContainer,children:[(0,O.jsx)(f.default,{style:gr.displayContainer,children:(0,O.jsxs)(f.default,{style:[gr.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:gr.gap}),(0,O.jsxs)(f.default,{style:gr.gridContainer,children:[(0,O.jsx)(f.default,{style:gr.gap}),(0,O.jsx)(me.default,{style:{flex:1,width:"100%"},data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;if(t.index%2)return(0,O.jsxs)(R.default,{style:gr.grid,onPress:function(){return e.handlePingPrinter(r)},children:[(0,O.jsxs)(f.default,{style:gr.gridFirst,children:[(0,O.jsx)(f.default,{style:gr.gridFirstLeft,children:(0,O.jsx)(A.default,{style:gr.gridFirstLeftText,children:r.iomodelId})}),(0,O.jsx)(f.default,{style:gr.gridFirstRight,children:(0,O.jsx)(A.default,{style:[gr.gridFirstRightText,{color:"PING..."===r.statusFlg?L.reserved:"ONLINE"===r.statusFlg?L.vacant:L.paid}],children:"ONLINE"===r.statusFlg?p.default.get("online"):"OFFLINE"===r.statusFlg?p.default.get("offline"):r.statusFlg})})]}),(0,O.jsx)(f.default,{style:gr.gridSecond,children:(0,O.jsx)(A.default,{style:gr.gridSecondText,children:r.name})}),(0,O.jsxs)(f.default,{style:gr.gridThird,children:[(0,O.jsx)(f.default,{style:gr.gridThirdLeft}),(0,O.jsx)(f.default,{style:gr.gridThirdRight,children:(0,O.jsx)(A.default,{style:gr.gridThirdRightText,children:r.printPort})})]})]},r.recKey)}})]}),(0,O.jsx)(f.default,{style:gr.gap})]})}),(0,O.jsx)(f.default,{style:gr.navigateContainer,children:(0,O.jsxs)(f.default,{style:gr.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:gr.button,onPress:function(){return e.handlePressPingAll()},children:[(0,O.jsx)(F.default,{name:"fork",color:"white",size:36}),(0,O.jsxs)(A.default,{style:gr.buttonText,children:["PING ",p.default.get("all")]})]}),(0,O.jsxs)(R.default,{style:gr.button,onPress:function(){return e.handlePressTestAll()},children:[(0,O.jsx)(F.default,{name:"printer",color:"white",size:36}),(0,O.jsxs)(A.default,{style:gr.buttonText,children:[p.default.get("test")," ",p.default.get("all")]})]})]})})]})]})}}]),r}(d.Component),gr=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round",textTransform:"uppercase"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function mr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var pr=function(e){(0,o.default)(r,e);var t=mr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={dateString:e.dateString?Y()(e.dateString).format("YYYY-MM-DD"):Y()(new Date).format("YYYY-MM-DD"),valid:!0},n.handleValidate=n.handleValidate.bind((0,S.default)(n)),n.handleQtyChange=n.handleQtyChange.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"handleValidate",value:function(e){this.setState({dateString:e,valid:Y()(e,"YYYY-MM-DD",!0).isValid()})}},{key:"handleQtyChange",value:function(e){var t=this.state.dateString;if("PLUS"===e){var r=Y()(t).add(1,"days").format("YYYY-MM-DD");this.setState({dateString:r,valid:Y()(r,"YYYY-MM-DD",!0).isValid()})}else if("MINUS"===e){var n=Y()(t).subtract(1,"days").format("YYYY-MM-DD");this.setState({dateString:n,valid:Y()(n,"YYYY-MM-DD",!0).isValid()})}}},{key:"render",value:function(){var e=this,t=this.state,r=t.dateString,n=t.valid;return console.log("in overlayenterdate",this.props),(0,O.jsx)(f.default,{style:xr.overlay,children:(0,O.jsxs)(f.default,{style:xr.overlayContent,children:[(0,O.jsxs)(f.default,{style:xr.overlayHeader,children:[(0,O.jsx)(A.default,{style:xr.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:xr.overlaySubtitleText,children:"Enter Date"})]}),(0,O.jsxs)(f.default,{style:xr.inputRow,children:[(0,O.jsx)(R.default,{style:xr.inputRowFirst,onPress:function(){return e.handleQtyChange("MINUS")},children:(0,O.jsx)(F.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),(0,O.jsx)(f.default,{style:xr.inputRowSecond,children:(0,O.jsx)(w.default,{style:[xr.textInput,!n&&{color:L.paid}],keyboardType:"numeric",value:r,onChangeText:function(t){return e.handleValidate(t)}})}),(0,O.jsx)(R.default,{style:xr.inputRowThird,onPress:function(){return e.handleQtyChange("PLUS")},children:(0,O.jsx)(F.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),(0,O.jsx)(R.default,{onPress:function(){return e.setState({dateString:Y()().format("YYYY-MM-DD"),valid:!0})},children:(0,O.jsx)(A.default,{style:xr.overlayText,children:"YYYY-MM-DD"})}),(0,O.jsx)(R.default,{style:[xr.overlayOption,{marginTop:20},!n&&{opacity:.2}],disabled:!n,onPress:function(){return e.props.handleUpdateFromEnterDate(r,e.props.dateType)},children:(0,O.jsx)(A.default,{style:xr.overlayOptionText,children:"OK"})}),(0,O.jsx)(R.default,{style:[xr.overlayOption,{backgroundColor:L.paid}],onPress:function(){return e.props.handleUpdateFromEnterDate("")},children:(0,O.jsx)(A.default,{style:xr.overlayOptionText,children:p.default.get("cancel")})})]})})}}]),r}(d.Component),xr=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayOption:{height:60,backgroundColor:L.grey4,alignItems:"center",justifyContent:"center",margin:5},overlayOptionText:{fontFamily:"varela-round",color:"white",textTransform:"uppercase",textAlign:"center"},inputRow:{height:60,width:"100%",marginVertical:5,flexDirection:"row",justifyContent:"center"},inputRowFirst:{width:100,height:60,alignItems:"center",justifyContent:"center"},inputRowSecond:{flex:1,minWidth:80,width:150,borderRadius:5,backgroundColor:L.grey1,alignItems:"center",justifyContent:"center"},inputRowThird:{width:100,height:60,alignItems:"center",justifyContent:"center"},textInput:{width:"75%",fontFamily:"varela-round",fontSize:20,color:"white",textAlign:"center"}});function vr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var br=function(e){(0,o.default)(r,e);var t=vr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,cashierPrinters:e.route.params.masters.cashierPrinters,privileges:e.route.params.masters.privileges,selectedButton:"",fromDateString:Y()().format("YYYY-MM-DD"),toDateString:Y()().format("YYYY-MM-DD"),reportDetails:"",requestedPrivilege:"",overlayRequestAccessVisible:!1,overlayChoosePrinterVisible:!1,overlayEnterDateVisible:!1,overlayProcedureMessageVisible:!1},n.handlePressDate=n.handlePressDate.bind((0,S.default)(n)),n.handleSelectReport=n.handleSelectReport.bind((0,S.default)(n)),n.handlePrintReport=n.handlePrintReport.bind((0,S.default)(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handlePressDate",value:function(e){var t=this.state,r=t.fromDateString,n=t.toDateString;this.setState({overlayEnterDateVisible:!0,selectedDateType:e,selectedDateString:"FROMDATE"===e?r:n})}},{key:"handleSelectReport",value:function(e,t){var r=this,n=this.state,l=n.serviceEntry,a=n.home,o=n.privileges,i=n.fromDateString,s=n.toDateString;if("Y"===a.adminFlg||o.some((function(t){return t.priId===e}))||t){this.setState({selectedButton:e}),console.log("report");var d=l+"api/bistro-report",c={userId:a.userId,orgId:a.orgId,locId:a.locId,shopId:a.shopId,reportCode:e,fromDateString:i,toDateString:s};console.log("body",c,d),fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post bistro-report successful",e),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({reportDetails:e})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:e})}},{key:"handlePrintReport",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.cashierPrinters,o=r.selectedButton,i=r.fromDateString,s=r.toDateString;if(o)if(a.length>1&&!e&!n.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{var d=l+"api/print-bistro-report",c={userId:n.userId,orgId:n.orgId,locId:n.locId,shopId:n.shopId,reportCode:o,iomodelId:n.defaultPrinter&&n.defaultPrinter.iomodelId||e&&e.iomodelId,fromDateString:i,toDateString:s};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("post print-bistro-report successful",e),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):t.setState({reportDetails:e})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromEnterDate",value:function(e,t){var r=this;if(this.setState({overlayEnterDateVisible:!1}),e){var n=this.state,l=n.serviceEntry,a=n.home,o=n.selectedButton,i=n.fromDateString,s=n.toDateString;"TODATE"===t?s=Y()(e).format("YYYY-MM-DD"):i=Y()(e).format("YYYY-MM-DD"),this.setState({fromDateString:i,toDateString:s});var d=l+"api/bistro-report",c={userId:a.userId,orgId:a.orgId,locId:a.locId,shopId:a.shopId,reportCode:o,fromDateString:i,toDateString:s};console.log("body",c,d),fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log("receipts",e),e.message?r.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.setState({reportDetails:e})})).catch((function(e){console.log(e),r.setState({loading:!1})}))}}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handlePrintReport(e)}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.requestedPrivilege;if(e){var o=l+"api/super-user",i={locId:n.locId,accessCode:e,priId:a};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){console.log("post super-user successful",e),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSelectReport(a,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,l=r.cashierPrinters,a=r.selectedButton,o=r.reportDetails,i=r.requestedPrivilege,s=r.fromDateString,d=r.toDateString,c=r.selectedDateString,u=r.selectedDateType,h=r.overlayProcedureMessageVisible,y=r.overlayEnterDateVisible,g=r.overlayChoosePrinterVisible,m=r.overlayRequestAccessVisible;return console.log("in reports"),(0,O.jsxs)(f.default,{style:jr.container,children:[h&&(0,O.jsx)(q,{text:h,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),y&&(0,O.jsx)(pr,{dateString:c,dateType:u,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),g&&(0,O.jsx)(ut,{printPurpose:"PRINT REPORT",cashierPrinters:l,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),m&&(0,O.jsx)(Ue,{home:n,requestedPrivilege:i,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),(0,O.jsx)(f.default,{style:jr.containerFirst,children:(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsxs)(R.default,{style:jr.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:jr.buttonText,children:p.default.get("back")})]}),(0,O.jsxs)(R.default,{style:[jr.selection,"REVENUESUM"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectReport("REVENUESUM")},children:[(0,O.jsx)(A.default,{style:[jr.selectionText,"REVENUESUM"===a&&{color:L.grey1}],children:"REVENUE"}),(0,O.jsx)(A.default,{style:[jr.selectionText,"REVENUESUM"===a&&{color:L.grey1}],children:"SUMMARY"})]}),(0,O.jsx)(f.default,{style:jr.gap}),(0,O.jsxs)(R.default,{style:[jr.selection,"REVENUEDTL"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectReport("REVENUEDTL")},children:[(0,O.jsx)(A.default,{style:[jr.selectionText,,"REVENUEDTL"===a&&{color:L.grey1}],children:"REVENUE"}),(0,O.jsx)(A.default,{style:[jr.selectionText,,"REVENUEDTL"===a&&{color:L.grey1}],children:"DETAIL"})]}),(0,O.jsx)(f.default,{style:jr.gap}),(0,O.jsxs)(R.default,{style:[jr.selection,"COLLECTION"===a&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectReport("COLLECTION")},children:[(0,O.jsx)(A.default,{style:[jr.selectionText,"COLLECTION"===a&&{color:L.grey1}],children:"PAYMENT"}),(0,O.jsx)(A.default,{style:[jr.selectionText,"COLLECTION"===a&&{color:L.grey1}],children:"COLLECTION"})]}),(0,O.jsx)(f.default,{style:jr.gap})]})}),(0,O.jsxs)(f.default,{style:jr.containerSecond,children:[(0,O.jsxs)(f.default,{style:jr.overlayHeader,children:[(0,O.jsx)(A.default,{style:jr.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:jr.overlaySubtitleText,children:p.default.get("reports")}),(0,O.jsx)(f.default,{style:jr.gap}),(0,O.jsxs)(f.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,O.jsx)(R.default,{style:{height:30,justifyContent:"center",backgroundColor:"none"},onPress:function(){return e.handlePressDate("FROMDATE")},children:(0,O.jsx)(A.default,{style:jr.overlayTitleText,children:s})}),(0,O.jsx)(A.default,{style:jr.overlayTitleText,children:"    /    "}),(0,O.jsx)(R.default,{style:{height:30,justifyContent:"center",backgroundColor:"none"},onPress:function(){return e.handlePressDate("TODATE")},children:(0,O.jsx)(A.default,{style:jr.overlayTitleText,children:d})})]}),(0,O.jsx)(A.default,{style:[jr.overlayTitleText,{color:L.paid,opacity:1}],children:"REVENUESUM"===a?"REVENUE SUMMARY":"REVENUEDTL"===a?"REVENUE DETAIL":"COLLECTION"===a?"PAYMENT COLLECTION":null})]}),o?(0,O.jsx)(_.default,{style:jr.reportContainer,showsVerticalScrollIndicator:!1,children:o.map((function(e,t){return(0,O.jsxs)(f.default,{style:jr.reportLineContainer,children:[(0,O.jsx)(f.default,{style:jr.reportLineFirst,children:(0,O.jsx)(A.default,{style:jr.reportLineFirstText,children:e.description})}),(0,O.jsx)(f.default,{style:jr.reportLineSecond,children:(0,O.jsx)(A.default,{style:jr.reportLineSecondText,children:e.qty})}),(0,O.jsx)(f.default,{style:jr.reportLineThird,children:(0,O.jsx)(A.default,{style:jr.reportLineThirdText,children:e.val?e.val.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):null})})]},e.recKey)}))}):null]}),(0,O.jsx)(f.default,{style:jr.containerThird,children:(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsxs)(R.default,{style:[jr.button,!a&&{opacity:.2}],disabled:!a,onPress:function(){return e.handlePrintReport()},children:[(0,O.jsx)(F.default,{name:"printer",color:"white",size:36}),(0,O.jsx)(A.default,{style:jr.buttonText,children:p.default.get("print")})]})})})]})}}]),r}(d.Component),jr=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:L.grey3,alignItems:"center"},containerThird:{flex:1,flexDirection:"row",padding:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},selection:{width:"100%",backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",height:70},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},reportContainer:{flex:1,width:440,borderTopLeftRadius:5,borderTopRightRadius:5,backgroundColor:L.grey2,padding:20},reportLineContainer:{height:50,flexDirection:"row"},reportLineFirst:{width:240},reportLineSecond:{width:60},reportLineThird:{width:100,alignItems:"flex-end"},reportLineFirstText:{fontFamily:"varela-round",color:L.grey5},reportLineSecondText:{fontFamily:"varela-round",color:L.grey5},reportLineThirdText:{fontFamily:"varela-round",color:L.grey5}});function Tr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Sr=function(e){(0,o.default)(r,e);var t=Tr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,home:e.route.params.home,cashierPrinters:e.route.params.masters.cashierPrinters,selectedButton:"ORDERS",masters:[],availableMasters:[],searches:[],selectedMaster:"",details:[],searchText:"",receiptsxText:"",headers:"",pays:"",selectedDateString:Y()(new Date).format("YYYY-MM-DD"),overlayChoosePrinterVisible:!1},n.handlePressDate=n.handlePressDate.bind((0,S.default)(n)),n.handlePressSearch=n.handlePressSearch.bind((0,S.default)(n)),n.handleSelectButton=n.handleSelectButton.bind((0,S.default)(n)),n.handleSelectMaster=n.handleSelectMaster.bind((0,S.default)(n)),n.handleReprint=n.handleReprint.bind((0,S.default)(n)),n.handleSearchText=n.handleSearchText.bind((0,S.default)(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.selectedDateString,a=r+"api/orders",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("docDateString",l),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("orders",t),e.setState({masters:t,availableMasters:t})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handlePressDate",value:function(){this.setState({overlayEnterDateVisible:!0})}},{key:"handlePressSearch",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.receiptsxText;if(this.setState({selectedMaster:"",details:[],pays:"",headers:""}),l){var a=r+"api/receipts-search",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("searchInput",l),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("masters",t),e.setState({masters:t.receiptmas,availableMasters:t.receiptmas,searches:t.receiptpaydtl,details:[]})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}}},{key:"handleUpdateFromEnterDate",value:function(e){var t=this;if(this.setState({overlayEnterDateVisible:!1,selectedMaster:"",details:[],pays:"",headers:""}),e){var r=this.state,n=r.serviceEntry,l=r.home,a=r.selectedButton,o=n;o+="ORDERS"===a?"api/orders":"KOTS"===a?"api/kots":"RECEIPTS"===a?"api/receipts":"api/daycloses";var i=new URLSearchParams,s=Y()(e).format("YYYY-MM-DD");i.append("orgId",l.orgId),i.append("shopId",l.shopId),i.append("docDateString",s),o+="?"+i,fetch(o,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("masters",e),"RECEIPTS"===a?t.setState({masters:e.receiptmas,availableMasters:e.receiptmas,searches:e.receiptpaydtl,selectedDateString:s,details:[]}):t.setState({masters:e,availableMasters:e,searches:[],selectedDateString:s,details:[]})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleSelectButton",value:function(e){var t=this,r=this.state,n=r.serviceEntry,l=r.home,a=r.selectedDateString;if(this.setState({details:[],selectedMaster:"",selectedButton:e,pays:"",headers:""}),"RECEIPTSX"!==e){var o=n;o+="ORDERS"===e?"api/orders":"KOTS"===e?"api/kots":"RECEIPTS"===e?"api/receipts":"api/daycloses";var i=new URLSearchParams;i.append("orgId",l.orgId),i.append("shopId",l.shopId),i.append("docDateString",a),o+="?"+i,fetch(o,{method:"GET"}).then((function(e){return e.json()})).then((function(r){console.log("masters",r),r.message?console.log(r.message):"RECEIPTS"===e?t.setState({masters:r.receiptmas,availableMasters:r.receiptmas,searches:r.receiptpaydtl}):t.setState({masters:r,availableMasters:r,searches:[]})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({masters:[],availableMasters:[]})}},{key:"handleSelectMaster",value:function(e){var t=this,r=this.state,n=r.serviceEntry,l=r.selectedButton;this.setState({selectedMaster:e});var a=n;console.log("item",l,e),a+="ORDERS"===l?"api/orders/"+e.recKey+"/items":"KOTS"===l?"api/kots/"+e.recKey+"/items":"RECEIPTS"===l||"RECEIPTSX"===l?"api/receipts/"+e.recKey+"/bundle":"api/daycloses/"+e.recKey+"/amts",fetch(a,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("details",e),"RECEIPTS"===l||"RECEIPTSX"===l?t.setState({details:e.receiptitems,pays:e.receiptpays,headers:e.receiptmas}):t.setState({details:e})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleReprint",value:function(e){var t=this,r=this.state,n=r.serviceEntry,l=r.home,a=r.cashierPrinters,o=r.selectedMaster,i=r.selectedButton;if(o)if(a.length>1&&!e&&!l.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{var s=n;s+="ORDERS"===i?"api/orders/"+o.recKey+"/reprint":"KOTS"===i?"api/kots/"+o.recKey+"/reprint":"RECEIPTS"===i||"RECEIPTSX"===i?"api/receipts/"+o.recKey+"/reprint":"api/daycloses/"+o.recKey+"/reprint",console.log("debug",l.defaultPrinter);var d={userId:l.userId,orgId:l.orgId,locId:l.locId,iomodelId:l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId};fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){console.log("post reprint successful",e)})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.masters,n=(t.availableMasters,t.searchText,t.searches),l=[];this.setState({searchText:e,selectedMaster:"",details:[],pays:"",headers:""});var a=e.toUpperCase();console.log("caseText",a),l=r,e?(l=l.filter((function(e){var t=n.filter((function(e){return e.payMoney===Number(a)})),r=n.filter((function(e){return e.pmId.toUpperCase().includes(a)}));return e.docId.toUpperCase().includes(a)||e.tableId.toUpperCase().includes(a)||e.createUserId.toUpperCase().includes(a)||t.some((function(t){return t.docId===e.docId}))||r.some((function(t){return t.docId===e.docId}))})),this.setState({availableMasters:l})):this.setState({availableMasters:l})}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){this.setState({overlayChoosePrinterVisible:!1}),e&&this.handleReprint(e)}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.cashierPrinters,l=r.selectedButton,a=(r.masters,r.availableMasters),o=r.details,i=r.searchText,s=r.receiptsxText,d=r.selectedMaster,c=r.selectedDateString,u=r.pays,h=r.headers,y=r.overlayChoosePrinterVisible,g=r.overlayEnterDateVisible;return console.log("in reprint"),(0,O.jsxs)(f.default,{style:Ir.container,children:[g&&(0,O.jsx)(pr,{dateString:c,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),y&&(0,O.jsx)(ut,{printPurpose:"REPRINT",cashierPrinters:n,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),(0,O.jsxs)(f.default,{style:Ir.leftContainer,children:[(0,O.jsx)(f.default,{style:Ir.navigateContainer,children:(0,O.jsxs)(f.default,{style:Ir.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:Ir.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:Ir.buttonText,children:p.default.get("back")})]}),(0,O.jsxs)(_.default,{style:Ir.selectionContainer,alwaysBounceVertical:!1,showsVerticalScrollIndicator:!1,children:[(0,O.jsx)(R.default,{style:[Ir.selection,"ORDERS"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("ORDERS")},children:(0,O.jsx)(A.default,{style:[Ir.selectionText,"ORDERS"===l&&{color:L.grey1}],children:"ORDERS"})}),(0,O.jsx)(f.default,{style:Ir.gap}),(0,O.jsx)(R.default,{style:[Ir.selection,"KOTS"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("KOTS")},children:(0,O.jsx)(A.default,{style:[Ir.selectionText,"KOTS"===l&&{color:L.grey1}],children:"KOTS"})}),(0,O.jsx)(f.default,{style:Ir.gap}),(0,O.jsx)(R.default,{style:[Ir.selection,"RECEIPTS"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("RECEIPTS")},children:(0,O.jsx)(A.default,{style:[Ir.selectionText,"RECEIPTS"===l&&{color:L.grey1}],children:"RECEIPTS"})}),(0,O.jsx)(f.default,{style:Ir.gap}),(0,O.jsxs)(R.default,{style:[Ir.selection,"RECEIPTSX"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("RECEIPTSX")},children:[(0,O.jsx)(A.default,{style:[Ir.selectionText,"RECEIPTSX"===l&&{color:L.grey1}],children:"RECEIPTS"}),(0,O.jsx)(A.default,{style:[Ir.selectionText,{color:L.paid}],children:"UNKNOWN DATE"})]}),(0,O.jsx)(f.default,{style:Ir.gap}),(0,O.jsx)(R.default,{style:[Ir.selection,"DAYCLOSES"===l&&{backgroundColor:"white"}],onPress:function(){return e.handleSelectButton("DAYCLOSES")},children:(0,O.jsx)(A.default,{style:[Ir.selectionText,"DAYCLOSES"===l&&{color:L.grey1}],children:"DAY CLOSES"})}),(0,O.jsx)(f.default,{style:Ir.gap})]})]})}),(0,O.jsx)(f.default,{style:Ir.displayContainer,children:(0,O.jsxs)(f.default,{style:[Ir.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:Ir.gap}),(0,O.jsxs)(f.default,{style:Ir.gridContainer,children:["RECEIPTSX"!==l?(0,O.jsxs)(f.default,{style:Ir.searchBox,children:[(0,O.jsx)(w.default,{style:Ir.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:i,onChangeText:function(t){return e.handleSearchText(t)}}),(0,O.jsx)(R.default,{style:Ir.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}):(0,O.jsxs)(f.default,{style:Ir.searchBox,children:[(0,O.jsx)(w.default,{style:Ir.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:s,onChangeText:function(t){return e.setState({receiptsxText:t})}}),(0,O.jsx)(R.default,{style:Ir.searchBoxButton,onPress:function(){e.handlePressSearch(),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"search1",size:24,color:L.grey4})})]}),(0,O.jsxs)(f.default,{style:Ir.searchBoxInfo,children:["RECEIPTSX"!==l&&(0,O.jsx)(R.default,{style:Ir.searchBoxInfoLeft,onPress:function(){return e.handlePressDate()},children:(0,O.jsx)(A.default,{style:Ir.searchBoxInfoText,children:c})}),(0,O.jsx)(f.default,{style:Ir.searchBoxInfoRight,children:(0,O.jsxs)(A.default,{style:Ir.searchBoxInfoText,children:[a.length," DOCS"]})})]}),(0,O.jsx)(me.default,{style:{flex:1},data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Ir.grid,d.recKey===r.recKey&&{backgroundColor:L.occupied}],onPress:function(){return e.handleSelectMaster(r)},children:[(0,O.jsxs)(f.default,{style:Ir.gridFirst,children:[(0,O.jsx)(f.default,{style:Ir.gridFirstLeft,children:(0,O.jsx)(A.default,{style:Ir.gridFirstLeftText,children:r.tableId})}),(0,O.jsx)(f.default,{style:Ir.gridFirstRight,children:(0,O.jsx)(A.default,{style:Ir.gridFirstRightText,children:r.createUserId})})]}),(0,O.jsx)(f.default,{style:Ir.gridSecond,children:(0,O.jsx)(A.default,{style:Ir.gridSecondText,children:r.docId})}),(0,O.jsxs)(f.default,{style:Ir.gridThird,children:[(0,O.jsx)(f.default,{style:Ir.gridThirdLeft}),(0,O.jsx)(f.default,{style:Ir.gridThirdRight,children:(0,O.jsxs)(A.default,{style:Ir.gridThirdRightText,children:["RECEIPTSX"===l&&Y()(r.createDate).format("YYYY-MM-DD "),Y()(r.createDate).format("HH:mm")]})})]})]})}})]}),(0,O.jsx)(f.default,{style:Ir.gap})]})})]}),(0,O.jsxs)(f.default,{style:Ir.rightContainer,children:[(0,O.jsx)(f.default,{style:Ir.displayContainer,children:(0,O.jsxs)(f.default,{style:[Ir.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:Ir.gap}),"RECEIPTS"===l||"RECEIPTSX"===l?(0,O.jsxs)(f.default,{style:Ir.gridContainer,children:[(0,O.jsxs)(f.default,{style:Ir.overlayHeader,children:[(0,O.jsx)(A.default,{style:Ir.overlayTitleText,children:d&&d.tableId||" "}),(0,O.jsx)(A.default,{style:Ir.overlaySubtitleText,children:d?d.docId:" "})]}),(0,O.jsxs)(f.default,{style:Ir.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:Ir.titleFirstContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Qty"})}),(0,O.jsx)(f.default,{style:Ir.titleSecondContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Desc"})}),(0,O.jsx)(f.default,{style:Ir.titleThirdContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Price"})}),(0,O.jsx)(f.default,{style:Ir.titleFourthContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Total"})})]}),(0,O.jsx)(me.default,{style:{flex:1},data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return(0,O.jsxs)(R.default,{style:[Ir.tableItemContainer],children:[(0,O.jsx)(f.default,{style:Ir.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Ir.tableItemText,children:t.orderQty})}),(0,O.jsxs)(R.default,{style:Ir.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:Ir.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?(0,O.jsx)(A.default,{style:Ir.tableItemModText,children:t.menuMod}):null]}),(0,O.jsx)(f.default,{style:Ir.tableItemThirdContainer,children:(0,O.jsx)(A.default,{style:Ir.tableItemText,children:t.netPrice&&t.netPrice.toFixed(2)})}),(0,O.jsx)(f.default,{style:Ir.tableItemFourthContainer,children:(0,O.jsx)(A.default,{style:Ir.tableItemText,children:t.lineTotal&&t.lineTotal.toFixed(2)})})]})}}),(0,O.jsxs)(f.default,{style:Ir.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:Ir.titleFirstContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"No."})}),(0,O.jsx)(f.default,{style:[Ir.titleSecondContainer,{flex:10}],children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"PM ID"})}),(0,O.jsx)(f.default,{style:Ir.titleFourthContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Amount"})})]}),(0,O.jsx)(me.default,{style:{flex:1},data:u,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item,r=e.index;return(0,O.jsxs)(R.default,{style:[Ir.tableItemContainer],children:[(0,O.jsx)(f.default,{style:Ir.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Ir.tableItemText,children:r+1})}),(0,O.jsxs)(R.default,{style:[Ir.tableItemSecondContainer,{flex:10}],children:[(0,O.jsx)(A.default,{style:Ir.tableItemText,children:t.pmId}),t.payRef&&(0,O.jsx)(A.default,{style:[Ir.tableItemText,{color:L.reserved}],children:t.payRef})]}),(0,O.jsx)(f.default,{style:Ir.tableItemFourthContainer,children:(0,O.jsx)(A.default,{style:Ir.tableItemText,children:t.payMoney&&"$"+t.payMoney.toFixed(2)})})]})}}),(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"SUBTOTAL"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:Ir.titleText,children:h.beforeDisc&&h.beforeDisc.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"DISCOUNT"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:Ir.titleText,children:h.totalDisc&&h.totalDisc.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"SVC CHARGE"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:Ir.titleText,children:h.serviceCharge&&h.serviceCharge.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:[Ir.titleText,{color:"white"}],children:"TOTAL"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:[Ir.titleText,{color:"white"}],children:h.grandTotal&&h.grandTotal.toFixed(2)})})]})]})]}):(0,O.jsxs)(f.default,{style:Ir.gridContainer,children:[(0,O.jsxs)(R.default,{style:Ir.overlayHeader,onPress:function(){return e.setState({selectedMaster:"",details:[]})},children:[(0,O.jsx)(A.default,{style:Ir.overlayTitleText,children:d&&d.tableId||" "}),(0,O.jsx)(A.default,{style:Ir.overlaySubtitleText,children:d?d.docId:" "})]}),"DAYCLOSES"===l?(0,O.jsxs)(f.default,{style:Ir.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:[Ir.titleSecondContainer,{flex:3}],children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Payment Method"})}),(0,O.jsx)(f.default,{style:[Ir.titleFourthContainer,{flex:1}],children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Amount"})})]}):(0,O.jsxs)(f.default,{style:Ir.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:Ir.titleFirstContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Qty"})}),(0,O.jsx)(f.default,{style:Ir.titleSecondContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"Desc"})}),(0,O.jsx)(f.default,{style:Ir.titleThirdContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"KOTS"!==l&&"Price"})}),(0,O.jsx)(f.default,{style:Ir.titleFourthContainer,children:(0,O.jsx)(A.default,{style:Ir.titleText,children:"KOTS"!==l&&"Total"})})]}),"DAYCLOSES"===l?(0,O.jsx)(me.default,{style:{flex:1},data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return(0,O.jsxs)(R.default,{style:[Ir.tableItemContainer],children:[(0,O.jsx)(R.default,{style:Ir.tableItemSecondContainer,children:(0,O.jsx)(A.default,{style:Ir.tableItemText,children:t.pmId})}),(0,O.jsx)(f.default,{style:Ir.tableItemFourthContainer,children:(0,O.jsxs)(A.default,{style:Ir.tableItemText,children:["$",t.systemAmt&&t.systemAmt.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})})]})}}):(0,O.jsx)(me.default,{style:{flex:1},data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return(0,O.jsxs)(R.default,{style:[Ir.tableItemContainer],children:[(0,O.jsx)(f.default,{style:Ir.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Ir.tableItemText,children:t.orderQty})}),(0,O.jsxs)(R.default,{style:Ir.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:Ir.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?(0,O.jsx)(A.default,{style:Ir.tableItemModText,children:t.menuMod}):null]}),(0,O.jsx)(f.default,{style:Ir.tableItemThirdContainer,children:(0,O.jsxs)(A.default,{style:Ir.tableItemText,children:["KOTS"!==l&&"$",t.netPrice&&t.netPrice.toFixed(2)]})}),(0,O.jsx)(f.default,{style:Ir.tableItemFourthContainer,children:(0,O.jsxs)(A.default,{style:Ir.tableItemText,children:["KOTS"!==l&&"$",t.lineTotal&&t.lineTotal.toFixed(2)]})})]})}})]}),(0,O.jsx)(f.default,{style:Ir.gap})]})}),(0,O.jsx)(f.default,{style:Ir.navigateContainer,children:(0,O.jsx)(f.default,{style:Ir.navigateWrapper,children:(0,O.jsxs)(R.default,{style:[Ir.button,!d&&{opacity:.2}],onPress:function(){return e.handleReprint()},disabled:!d,children:[(0,O.jsx)(F.default,{name:"printer",color:"white",size:36}),(0,O.jsx)(A.default,{style:Ir.buttonText,children:p.default.get("reprint")})]})})})]})]})}}]),r}(d.Component),Ir=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",height:70},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function Cr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Fr=function(e){(0,o.default)(r,e);var t=Cr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,settings:e.route.params.masters.settings,selectedTable:e.route.params.selectedTable,tableItems:e.route.params.tableItems,selectedTableItems:[],arrangedItems:e.route.params.tableItems.filter((function(e){return"N"===e.confirmFlg})),overlayProcedureMessageVisible:!1},n.handleSelectTableItem=n.handleSelectTableItem.bind((0,S.default)(n)),n.handleReset=n.handleReset.bind((0,S.default)(n)),n.handleAddLineBreak=n.handleAddLineBreak.bind((0,S.default)(n)),n.handleRemoveLineBreak=n.handleRemoveLineBreak.bind((0,S.default)(n)),n.handleResequence=n.handleResequence.bind((0,S.default)(n)),n.handleShiftTop=n.handleShiftTop.bind((0,S.default)(n)),n.handleShiftUp=n.handleShiftUp.bind((0,S.default)(n)),n.handleShiftDown=n.handleShiftDown.bind((0,S.default)(n)),n.handleShiftBottom=n.handleShiftBottom.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"handleSelectTableItem",value:function(e){console.log("menu selected",e);var t=this.state,r=(t.selectedTableItems,t.arrangedItems,t.tableItems),n=[];n.push(e);var l=[];l=r.filter((function(t){return t.refRecKey===e.recKey})),console.log("comboItems",l),l.forEach((function(e){return n.push(e)})),this.setState({selectedTableItems:n})}},{key:"handleReset",value:function(){this.setState({arrangedItems:this.state.tableItems.filter((function(e){return"N"===e.confirmFlg})),selectedTableItems:[]})}},{key:"handleAddLineBreak",value:function(){var e=this.state,t=e.arrangedItems,r=e.selectedTableItems;if(0!==r.length){var n=t,l=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));n[l].lineBreak="Y",this.setState({arrangedItems:n})}}},{key:"handleRemoveLineBreak",value:function(){var e=this.state,t=e.arrangedItems,r=e.selectedTableItems;if(0!==r.length){var n=t,l=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));n[l].lineBreak="N",this.setState({arrangedItems:n})}}},{key:"handleShiftTop",value:function(){var e,t=this,r=this.state,n=r.selectedTableItems,l=r.arrangedItems;n.forEach((function(e){l=l.filter((function(t){return t.recKey!==e.recKey}))})),(e=l).unshift.apply(e,(0,j.default)(n)),this.setState({arrangedItems:l},(function(){return t.scrollViewRef.scrollToOffset({animated:!0,offset:0})}))}},{key:"handleShiftUp",value:function(){var e,t=this.state,r=t.selectedTableItems,n=t.arrangedItems,l=n,a=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));if(0!==a){r.forEach((function(e){l=l.filter((function(t){return t.recKey!==e.recKey}))}));var o=a-1;n[o].refRecKey&&(o=n.indexOf(n.find((function(e){return e.recKey===n[a-1].refRecKey})))),(e=l).splice.apply(e,[o,0].concat((0,j.default)(r))),this.setState({arrangedItems:l})}}},{key:"handleShiftDown",value:function(){var e,t=this.state,r=t.selectedTableItems,n=t.arrangedItems,l=n,a=n.indexOf(n.find((function(e){return e.recKey===r[0].recKey})));if(a!==n.length-r.length){r.forEach((function(e){l=l.filter((function(t){return t.recKey!==e.recKey}))}));var o=a+1;if(l.some((function(e){return e.refRecKey===l[a].recKey}))){var i=n.filter((function(e){return e.refRecKey===l[a].recKey})).length;console.log("skip",i),o+=i}(e=l).splice.apply(e,[o,0].concat((0,j.default)(r))),this.setState({arrangedItems:l})}}},{key:"handleShiftBottom",value:function(){var e,t=this,r=this.state,n=r.selectedTableItems,l=r.arrangedItems;n.forEach((function(e){l=l.filter((function(t){return t.recKey!==e.recKey}))})),(e=l).push.apply(e,(0,j.default)(n)),this.setState({arrangedItems:l},(function(){return t.scrollViewRef.scrollToEnd()}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleResequence",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,l=r.home,a=r.settings,o=r.selectedTable,i=r.tableItems,s=r.arrangedItems,d=i.filter((function(e){return"Y"===e.confirmFlg})).length;console.log("skip",d);var c=n+"api/tables/"+o.recKey+"/resequence",u=s.map((function(e,t){return{opentableItemRecKey:e.recKey,lineNo:e.lineNo,newLineNo:t+1+d,lineBreak:e.lineBreak}})),f={userId:l.userId,opentableRecKey:o.recKey,itemPayloads:u};fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(r){var i;console.log("post resequence successful",r),"Y"===(null==(i=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Resequence Items",l.userName,r.message,o.tableId,"",""),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):t.goBack()}))}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.selectedTable,l=(r.tableItems,r.arrangedItems),a=r.selectedTableItems,o=r.overlayProcedureMessageVisible;return console.log("in resequence",a,l),(0,O.jsxs)(f.default,{style:Rr.container,children:[o&&(0,O.jsx)(q,{text:o,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsx)(f.default,{style:Rr.containerFirst,children:(0,O.jsxs)(_.default,{style:{flex:1},alwaysBounceVertical:!1,showsVerticalScrollIndicator:!1,children:[(0,O.jsxs)(R.default,{style:Rr.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:p.default.get("back")})]}),(0,O.jsxs)(R.default,{style:Rr.button,onPress:function(){return e.handleReset()},children:[(0,O.jsx)(F.default,{name:"reload1",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"Reset"})]}),a[0]?"Y"===a[0].lineBreak?(0,O.jsxs)(R.default,{style:Rr.button,onPress:function(){return e.handleRemoveLineBreak()},children:[(0,O.jsx)(F.default,{name:"minus",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"Remove Break"})]}):(0,O.jsxs)(R.default,{style:Rr.button,onPress:function(){return e.handleAddLineBreak()},children:[(0,O.jsx)(F.default,{name:"minus",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"Add Break"})]}):(0,O.jsxs)(f.default,{style:[Rr.button,{opacity:.2}],children:[(0,O.jsx)(F.default,{name:"minus",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"Add Break"})]}),(0,O.jsxs)(R.default,{style:Rr.button,onPress:function(){return e.handleResequence()},children:[(0,O.jsx)(F.default,{name:"bars",size:36,color:L.reserved}),(0,O.jsx)(A.default,{style:[Rr.buttonText,{color:L.reserved}],children:"Confirm"})]})]})}),(0,O.jsxs)(f.default,{style:Rr.containerSecond,children:[(0,O.jsxs)(f.default,{style:Rr.overlayHeader,children:[(0,O.jsxs)(A.default,{style:Rr.overlayTitleText,children:[p.default.get("table")," ",n.tableId]}),(0,O.jsx)(A.default,{style:Rr.overlaySubtitleText,children:p.default.get("resequence")})]}),(0,O.jsx)(me.default,{style:{flex:1},ref:function(t){return e.scrollViewRef=t},showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;t.index;return(0,O.jsxs)(f.default,{children:["Y"===r.lineBreak&&(0,O.jsx)(f.default,{style:Rr.lineBreakContainer,children:(0,O.jsx)(A.default,{style:[Rr.tableItemText,{color:L.paid}],children:"- Line Break -"})}),(0,O.jsxs)(R.default,{disabled:!!r.refRecKey,style:[Rr.tableItemContainer,a.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:L.occupied},r.refRecKey&&{opacity:.2}],onPress:function(){return e.handleSelectTableItem(r)},children:[(0,O.jsx)(f.default,{style:Rr.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Rr.tableItemText,children:r.orderQty})}),(0,O.jsxs)(f.default,{style:Rr.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:Rr.tableItemText,children:[r.refRecKey&&"- ",r.menuName]}),r.menuMod&&(0,O.jsx)(A.default,{style:Rr.tableItemModText,children:r.menuMod})]}),(0,O.jsx)(f.default,{style:Rr.tableItemThirdContainer,children:(0,O.jsx)(A.default,{style:Rr.tableItemText})})]})]})}})]}),(0,O.jsx)(f.default,{style:Rr.containerThird,children:(0,O.jsxs)(_.default,{style:{flex:1},alwaysBounceVertical:!1,showsVerticalScrollIndicator:!1,children:[(0,O.jsxs)(R.default,{style:[Rr.button,0!==a.length?null:{opacity:.2}],disabled:0===a.length,onPress:function(){return e.handleShiftTop()},children:[(0,O.jsx)(F.default,{name:"arrowup",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"TOP"})]}),(0,O.jsxs)(R.default,{style:[Rr.button,0!==a.length?null:{opacity:.2}],disabled:0===a.length,onPress:function(){return e.handleShiftUp()},children:[(0,O.jsx)(F.default,{name:"up",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"SHIFT"})]}),(0,O.jsxs)(R.default,{style:[Rr.button,0!==a.length?null:{opacity:.2}],disabled:0===a.length,onPress:function(){return e.handleShiftDown()},children:[(0,O.jsx)(F.default,{name:"down",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"SHIFT"})]}),(0,O.jsxs)(R.default,{style:[Rr.button,0!==a.length?null:{opacity:.2}],disabled:0===a.length,onPress:function(){return e.handleShiftBottom()},children:[(0,O.jsx)(F.default,{name:"arrowdown",size:36,color:"white"}),(0,O.jsx)(A.default,{style:Rr.buttonText,children:"BOTTOM"})]})]})})]})}}]),r}(d.Component),Rr=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:L.grey3},containerThird:{flex:1,flexDirection:"row",padding:10},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:1,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{alignItems:"center",justifyContent:"center",width:50},lineBreakContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,alignItems:"center",justifyContent:"center"}});function Pr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var wr=function(e){(0,o.default)(r,e);var t=Pr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,tableItems:e.route.params.tableItems,selectedTable:e.route.params.selectedTable,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,tables:[],availableTables:[],selectedTargetTable:"",selectedTableItems:[],searchText:"",overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1},n.handleSelectTargetTable=n.handleSelectTargetTable.bind((0,S.default)(n)),n.handlePressSelectAll=n.handlePressSelectAll.bind((0,S.default)(n)),n.handleSelectTableItem=n.handleSelectTableItem.bind((0,S.default)(n)),n.handleSearchText=n.handleSearchText.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.selectedTable,a=r+"api/tables",o=new URLSearchParams;o.append("shopId",n.shopId),o.append("statusFlg","C"),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({tables:t.filter((function(e){return e.tableId!==l.tableId})),availableTables:t.filter((function(e){return e.tableId!==l.tableId}))})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"generateTextForSelectAll",value:function(){return 0===this.state.selectedTableItems.length?"SELECT ALL":"DESELECT ALL"}},{key:"handlePressSelectAll",value:function(){var e=this.state,t=e.selectedTableItems,r=e.tableItems;0===t.length?this.setState({selectedTableItems:r}):this.setState({selectedTableItems:[]})}},{key:"handleSelectTargetTable",value:function(e){this.setState({selectedTargetTable:e})}},{key:"handleSelectTableItem",value:function(e){console.log("tableitem selected",e);var t=this.state,r=t.selectedTableItems,n=t.tableItems,l=r;if(r.some((function(t){return t.recKey===e.recKey})))l=l.filter((function(t){return t.recKey!==e.recKey&&t.refRecKey!==e.recKey}));else{l.push(e);var a=[];a=n.filter((function(t){return t.refRecKey===e.recKey})),console.log("comboItems",a),a.forEach((function(e){return l.push(e)}))}this.setState({selectedTableItems:l})}},{key:"handleSubmit",value:function(e){var t=this,r=this.props.navigation,n=this.state,l=n.selectedTable,a=n.selectedTableItems,o=n.selectedTargetTable,i=n.home,s=n.serviceEntry,d=n.privileges,c=n.settings;if(0!==a.length&&o)if("Y"===i.adminFlg||d.some((function(e){return"TRANSFERITEMS"===e.priId}))||e){var u=a.filter((function(e){return!e.refRecKey})).map((function(e){return e.recKey})).reduce((function(e,t){return e+t+","}),"");console.log("converted",u);var f=s+"api/tables/"+l.recKey+"/transfer-items",h={userId:i.userId,opentableRecKeyFrom:l.recKey,opentableRecKeyTo:o.recKey,opentableItemRecKeys:u,superUserId:e};fetch(f,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(h)}).then((function(e){return e.json()})).then((function(e){var n;console.log("post transfer-items successful",e),"Y"===(null==(n=c.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(s,"Transfer Items",i.userName,e.message,l.tableId,"",o.tableId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):r.goBack()}))}else this.setState({overlayRequestAccessVisible:!0})}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.tables,n=(t.availableTables,t.searchText,[]);this.setState({searchText:e});var l=e.toUpperCase();console.log("caseText",l),n=r,e?(n=n.filter((function(e){return e.tableId.toUpperCase().includes(l)||e.sectionId.toUpperCase().includes(l)})),this.setState({availableTables:n})):this.setState({availableTables:n})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.settings,o=r.selectedTable;r.selectedTargetTable;if(e){var i=l+"api/super-user",s={locId:n.locId,accessCode:e,priId:"TRANSFERITEMS"};fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access TRANSFERITEMS",n.userName,e.message,o.tableId,"",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleSubmit(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.tableItems,l=r.home,a=r.selectedTargetTable,o=r.availableTables,i=r.searchText,s=r.selectedTableItems,d=r.overlayRequestAccessVisible,c=r.overlayProcedureMessageVisible;return console.log("in transfer"),(0,O.jsxs)(f.default,{style:kr.container,children:[d&&(0,O.jsx)(Ue,{home:l,requestedPrivilege:"TRANSFERITEM",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),c&&(0,O.jsx)(q,{text:c,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsxs)(f.default,{style:kr.leftContainer,children:[(0,O.jsx)(f.default,{style:kr.navigateContainer,children:(0,O.jsx)(f.default,{style:kr.navigateWrapper,children:(0,O.jsxs)(R.default,{style:kr.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:kr.buttonText,children:p.default.get("back")})]})})}),(0,O.jsx)(f.default,{style:kr.displayContainer,children:(0,O.jsxs)(f.default,{style:[kr.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:kr.gap}),(0,O.jsxs)(f.default,{style:kr.gridContainer,children:[(0,O.jsx)(f.default,{style:[kr.searchBox,{backgroundColor:L.grey3,alignItems:"center",justifyContent:"center"}],children:(0,O.jsx)(R.default,{onPress:function(){return e.handlePressSelectAll()},children:(0,O.jsx)(A.default,{style:kr.titleText,children:this.generateTextForSelectAll()})})}),(0,O.jsxs)(f.default,{style:kr.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:kr.titleFirstContainer,children:(0,O.jsx)(A.default,{style:kr.titleText,children:"Qty"})}),(0,O.jsx)(f.default,{style:kr.titleSecondContainer,children:(0,O.jsx)(A.default,{style:kr.titleText,children:"Desc"})}),(0,O.jsx)(f.default,{style:kr.titleThirdContainer,children:(0,O.jsx)(A.default,{style:kr.titleText,children:"Price"})}),(0,O.jsx)(f.default,{style:kr.titleFourthContainer,children:(0,O.jsx)(A.default,{style:kr.titleText,children:"Total"})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[kr.tableItemContainer,s.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:L.occupied},r.refRecKey&&{opacity:.2}],onPress:function(){return e.handleSelectTableItem(r)},disabled:!!r.refRecKey,children:[(0,O.jsx)(f.default,{style:kr.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:kr.tableItemText,children:r.orderQty})}),(0,O.jsxs)(f.default,{style:kr.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:kr.tableItemText,children:[r.refRecKey?"- ":null,r.menuName]}),r.menuMod?(0,O.jsx)(A.default,{style:kr.tableItemModText,children:r.menuMod}):null]}),(0,O.jsx)(f.default,{style:kr.tableItemThirdContainer,children:(0,O.jsx)(A.default,{style:kr.tableItemText,children:r.netPrice&&r.netPrice.toFixed(2)})}),(0,O.jsx)(f.default,{style:kr.tableItemFourthContainer,children:(0,O.jsx)(A.default,{style:kr.tableItemText,children:r.lineTotal&&r.lineTotal.toFixed(2)})})]})}})]}),(0,O.jsx)(f.default,{style:kr.gap})]})})]}),(0,O.jsxs)(f.default,{style:kr.rightContainer,children:[(0,O.jsx)(f.default,{style:kr.displayContainer,children:(0,O.jsxs)(f.default,{style:[kr.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:kr.gap}),(0,O.jsxs)(f.default,{style:kr.gridContainer,children:[(0,O.jsxs)(f.default,{style:kr.searchBox,children:[(0,O.jsx)(w.default,{style:kr.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:i,onChangeText:function(t){return e.handleSearchText(t)}}),(0,O.jsx)(R.default,{style:kr.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsx)(f.default,{style:[kr.searchBoxInfo,{justifyContent:"center"}],children:(0,O.jsxs)(A.default,{style:kr.searchBoxInfoText,children:[o.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[kr.grid,a.tableId===r.tableId&&{backgroundColor:L.occupied}],onPress:function(){return e.handleSelectTargetTable(r)},children:[(0,O.jsxs)(f.default,{style:kr.gridFirst,children:[(0,O.jsx)(f.default,{style:kr.gridFirstLeft,children:(0,O.jsx)(A.default,{style:kr.gridFirstLeftText,children:r.sectionId})}),(0,O.jsx)(f.default,{style:kr.gridFirstRight,children:(0,O.jsx)(A.default,{style:[kr.gridFirstRightText,a.tableId===r.tableId?{color:"white"}:{color:L.occupied}],children:"OCCUPIED"})})]}),(0,O.jsx)(f.default,{style:kr.gridSecond,children:(0,O.jsx)(A.default,{style:kr.gridSecondText,children:r.tableId})}),(0,O.jsxs)(f.default,{style:kr.gridThird,children:[(0,O.jsx)(f.default,{style:kr.gridThirdLeft}),(0,O.jsx)(f.default,{style:kr.gridThirdRight})]})]})}})]}),(0,O.jsx)(f.default,{style:kr.gap})]})}),(0,O.jsx)(f.default,{style:kr.navigateContainer,children:(0,O.jsx)(f.default,{style:kr.navigateWrapper,children:(0,O.jsxs)(R.default,{style:[kr.button,(!a||0===s.length)&&{opacity:.2}],onPress:function(){return e.handleSubmit()},disabled:!a||0===s.length,children:[(0,O.jsx)(F.default,{name:"export",color:"white",size:36}),(0,O.jsx)(A.default,{style:kr.buttonText,children:p.default.get("transfer")})]})})})]})]})}}]),r}(d.Component),kr=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:L.reserved,fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5}});function Er(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Br=function(e){(0,o.default)(r,e);var t=Er(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={overlaySearchText:"",returns:e.returns,availableReturns:e.returns,selectedReturn:"",remarks:""},n.handleOverlaySearchText=n.handleOverlaySearchText.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.returns,n=(t.availableReturns,[]);this.setState({overlaySearchText:e});var l=e.toUpperCase();console.log("caseText",l),console.log("available",this.state.availableReturns),n=r,e?(n=n.filter((function(e){return e.returnId.toUpperCase().includes(l)||e.name.toUpperCase().includes(l)})),this.setState({availableReturns:n})):this.setState({availableReturns:n})}},{key:"handleSubmit",value:function(e){var t=this.state.remarks,r=e;r.remarks=t,this.props.handleUpdateFromVoidReceipt(r)}},{key:"render",value:function(){var e=this,t=this.state,r=t.overlaySearchText,n=t.availableReturns,l=t.remarks;return console.log("in overlayvoidreceipt, state",this.state),(0,O.jsx)(f.default,{style:Dr.overlay,children:(0,O.jsxs)(f.default,{style:Dr.overlayContent,children:[(0,O.jsxs)(f.default,{style:Dr.overlayHeader,children:[(0,O.jsx)(A.default,{style:Dr.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:Dr.overlaySubtitleText,children:"Void Receipt"})]}),(0,O.jsx)(f.default,{style:[Dr.searchBoxWrapper,{marginBottom:10}],children:(0,O.jsx)(f.default,{style:Dr.overlaySearchBox,children:(0,O.jsx)(w.default,{style:Dr.overlaySearchBoxInput,placeholder:"ENTER REMARKS",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.setState({remarks:t})},value:l})})}),(0,O.jsxs)(f.default,{style:Dr.searchBoxWrapper,children:[(0,O.jsx)(R.default,{style:Dr.overlayBackButton,onPress:function(){return e.props.handleUpdateFromVoidReceipt("")},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})}),(0,O.jsxs)(f.default,{style:Dr.overlaySearchBox,children:[(0,O.jsx)(w.default,{style:Dr.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:r}),(0,O.jsx)(R.default,{style:Dr.overlaySearchBoxButton,onPress:function(){e.setState({overlaySearchText:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})]}),(0,O.jsx)(f.default,{style:Dr.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:Dr.searchBoxInfoText,children:[n.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Dr.overlayGrid,r.dummy?Dr.hidden:null],onPress:function(){return e.handleSubmit(r)},children:[(0,O.jsxs)(f.default,{style:Dr.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:Dr.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:Dr.overlayGridFirstLeftText,children:r.returnId})}),(0,O.jsx)(f.default,{style:Dr.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:Dr.overlayGridFirstRightText})})]}),(0,O.jsx)(f.default,{style:Dr.overlayGridSecond,children:(0,O.jsx)(A.default,{style:Dr.overlayGridSecondText,children:r.name})}),(0,O.jsxs)(f.default,{style:Dr.overlayGridThird,children:[(0,O.jsx)(f.default,{style:Dr.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:Dr.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:Dr.overlayGridThirdRightText})})]})]})}})]})})}}]),r}(d.Component),Dr=u.default.create({overlay:{backgroundColor:"rgba(0,0,0,0.9)",position:"absolute",zIndex:1,top:0,left:0,right:0,bottom:0,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{width:"40%",height:"80%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,marginHorizontal:5,flexDirection:"row",flex:1},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlayBackButton:{width:50,height:50,borderRadius:50,marginHorizontal:5,alignItems:"center",justifyContent:"center"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.vacant,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5}});function Ur(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Ar=function(e){(0,o.default)(r,e);var t=Ur(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,settings:e.route.params.masters.settings,masters:[],availableMasters:[],searches:[],selectedMaster:"",details:[],headers:[],searchText:"",selectedDateString:Y()(new Date).format("YYYY-MM-DD"),overlayVoidReceiptVisible:!1,overlayEnterDateVisible:!1,overlayChoosePrinterVisible:!1,overlayRequestAccessVisible:!1,overlayProcedureMessageVisible:!1,loading:!1,mode:"VOID",reopenResponse:""},n.handleSelectMaster=n.handleSelectMaster.bind((0,S.default)(n)),n.handleVoid=n.handleVoid.bind((0,S.default)(n)),n.handlePressVoid=n.handlePressVoid.bind((0,S.default)(n)),n.handlePressReopen=n.handlePressReopen.bind((0,S.default)(n)),n.handleSearchText=n.handleSearchText.bind((0,S.default)(n)),n.handlePressDate=n.handlePressDate.bind((0,S.default)(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind((0,S.default)(n)),n.handleUpdateFromVoidReceipt=n.handleUpdateFromVoidReceipt.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.selectedDateString,a=r+"api/receipts",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("docDateString",l),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("receipts",t),e.setState({masters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:t.receiptpaydtl})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleSelectMaster",value:function(e){var t=this,r=this.state.serviceEntry;this.setState({selectedMaster:e});var n=r+"api/receipts/"+e.recKey+"/bundle";console.log("item",e),fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("details",e),t.setState({details:e.receiptitems,pays:e.receiptpays,headers:e.receiptmas})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.masters,n=(t.availableMasters,t.searchText,t.searches),l=[];this.setState({searchText:e});var a=e.toUpperCase();console.log("caseText",a),l=r,e?(l=l.filter((function(e){var t=n.filter((function(e){return e.payMoney===Number(a)})),r=n.filter((function(e){return e.pmId.toUpperCase().includes(a)}));return e.docId.toUpperCase().includes(a)||e.tableId.toUpperCase().includes(a)||t.some((function(t){return t.docId===e.docId}))||r.some((function(t){return t.docId===e.docId}))})),this.setState({availableMasters:l})):this.setState({availableMasters:l})}},{key:"handlePressDate",value:function(){this.setState({overlayEnterDateVisible:!0})}},{key:"handleUpdateFromEnterDate",value:function(e){var t=this;if(this.setState({overlayEnterDateVisible:!1,selectedMaster:"",headers:"",details:"",pays:""}),e){var r=this.state,n=r.serviceEntry,l=r.home,a=Y()(e).format("YYYY-MM-DD"),o=n+"api/receipts",i=new URLSearchParams;i.append("orgId",l.orgId),i.append("shopId",l.shopId),i.append("docDateString",a),fetch(o+="?"+i,{method:"GET"}).then((function(e){return e.json()})).then((function(r){console.log("receipts",r),r.message?console.log(r.message):t.setState({masters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:r.receiptpaydtl,selectedDateString:Y()(e).format("YYYY-MM-DD")})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state.selectedReturn;this.setState({overlayChoosePrinterVisible:!1,selectedPrinter:e}),e&&this.handleVoid(r,e)}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.settings,o=r.requestedPrivilege,i=r.selectedPrinter,s=r.selectedReturn;if(e){var d=l+"api/super-user",c={locId:n.locId,accessCode:e,priId:o};fetch(d,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access "+o,n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleVoid(s,i,e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.props.navigation;this.state.reopenResponse;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"handleReopen"===e&&t.goBack()}},{key:"handleUpdateFromVoidReceipt",value:function(e){this.setState({overlayVoidReceiptVisible:!1}),e&&(this.setState({selectedReturn:e}),this.handleVoid(e))}},{key:"handlePressReopen",value:function(){this.setState({mode:"REOPEN"}),this.handleVoid()}},{key:"handlePressVoid",value:function(){this.setState({mode:"VOID"}),this.handleVoid()}},{key:"handleVoid",value:function(e,t,r){var n=this,l=this.state,a=l.serviceEntry,o=l.home,i=l.settings,s=l.selectedMaster,d=l.selectedDateString,c=l.mode;if(s)if(e)if(this.props.route.params.masters.cashierPrinters.length>1&&!t&&!o.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else if(r){this.setState({loading:!0});var u="",f="";"REOPEN"===c?(u=a+"api/void-receipt-reopen",f={userId:o.userId,orgId:o.orgId,locId:o.locId,receiptRecKey:s.recKey,returnId:e.returnId,superUserId:r,iomodelId:o.defaultPrinter&&o.defaultPrinter.iomodelId||t&&t.iomodelId,docDateString:d,remarks:e.remarks},console.log("body",f)):(u=a+"api/void-receipt",f={userId:o.userId,orgId:o.orgId,locId:o.locId,receiptRecKey:s.recKey,returnId:e.returnId,superUserId:r,iomodelId:o.defaultPrinter&&o.defaultPrinter.iomodelId||t&&t.iomodelId,docDateString:d,remarks:e.remarks},console.log("body",f)),fetch(u,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(e){var t;console.log("post void-receipt successful",e),"Y"===(null==(t=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(a,"REOPEN"===c?"Reopen Receipt":"Void Receipt",o.userName,e.message,"REOPEN"!==c||e.message?"":e.opentable.tableId,"",s.recKey+","+s.tableId),e.message?n.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):"REOPEN"===c?(n.props.route.params.handleUpdateFromVoid(e),n.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Procedure Reply",text:"Receipt voided successfully, reopened Table "+e.opentable.tableId,ok:!1,cancel:!1,options:[{text:"Ok",handleText:"handleReopen"}]},overlayAlertVisible:!0,reopenResponse:e,loading:!1})):n.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Procedure Reply",text:"Receipt voided successfully",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0,masters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:e.receiptpaydtl,selectedMaster:"",headers:"",details:"",pays:"",loading:!1})})).catch((function(e){console.log(e),n.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0,requestedPrivilege:"VOIDRECEIPT"});else this.setState({overlayVoidReceiptVisible:!0})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,l=(r.masters,r.availableMasters),a=r.details,o=r.pays,i=r.headers,s=r.searchText,d=r.selectedMaster,c=r.selectedDateString,u=r.overlayEnterDateVisible,h=r.overlayChoosePrinterVisible,y=r.overlayRequestAccessVisible,g=r.overlayProcedureMessageVisible,m=r.overlayVoidReceiptVisible,x=r.overlayAlertVisible,v=r.overlayAlertInputValue,b=r.requestedPrivilege,j=r.loading;return console.log("in reprint"),(0,O.jsxs)(f.default,{style:Or.container,children:[x&&(0,O.jsx)(ee,{input:v,handleUpdateFromAlert:this.handleUpdateFromAlert}),m&&(0,O.jsx)(Br,{returns:this.props.route.params.masters.returns,handleUpdateFromVoidReceipt:this.handleUpdateFromVoidReceipt}),h&&(0,O.jsx)(ut,{printPurpose:"VOID RECEIPT",cashierPrinters:this.props.route.params.masters.cashierPrinters,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),u&&(0,O.jsx)(pr,{dateString:c,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),g&&(0,O.jsx)(q,{text:g,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),y&&(0,O.jsx)(Ue,{home:n,requestedPrivilege:b,handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),(0,O.jsxs)(f.default,{style:Or.leftContainer,children:[(0,O.jsx)(f.default,{style:Or.navigateContainer,children:(0,O.jsx)(f.default,{style:Or.navigateWrapper,children:(0,O.jsxs)(R.default,{style:Or.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:Or.buttonText,children:p.default.get("back")})]})})}),(0,O.jsx)(f.default,{style:Or.displayContainer,children:(0,O.jsxs)(f.default,{style:[Or.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:Or.gap}),(0,O.jsxs)(f.default,{style:Or.gridContainer,children:[(0,O.jsxs)(f.default,{style:Or.searchBox,children:[(0,O.jsx)(w.default,{style:Or.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:s,onChangeText:function(t){return e.handleSearchText(t)}}),(0,O.jsx)(R.default,{style:Or.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsxs)(R.default,{style:Or.searchBoxInfo,onPress:function(){return e.handlePressDate()},children:[(0,O.jsx)(f.default,{style:Or.searchBoxInfoLeft,children:(0,O.jsx)(A.default,{style:Or.searchBoxInfoText,children:c})}),(0,O.jsx)(f.default,{style:Or.searchBoxInfoRight,children:(0,O.jsxs)(A.default,{style:Or.searchBoxInfoText,children:[l.length," DOCS"]})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Or.grid,d.recKey===r.recKey&&{backgroundColor:L.occupied}],onPress:function(){return e.handleSelectMaster(r)},children:[(0,O.jsxs)(f.default,{style:Or.gridFirst,children:[(0,O.jsx)(f.default,{style:Or.gridFirstLeft,children:(0,O.jsx)(A.default,{style:Or.gridFirstLeftText,children:r.tableId})}),(0,O.jsx)(f.default,{style:Or.gridFirstRight,children:(0,O.jsx)(A.default,{style:Or.gridFirstRightText,children:r.createUserId})})]}),(0,O.jsx)(f.default,{style:Or.gridSecond,children:(0,O.jsx)(A.default,{style:Or.gridSecondText,children:r.docId})}),(0,O.jsxs)(f.default,{style:Or.gridThird,children:[(0,O.jsx)(f.default,{style:Or.gridThirdLeft}),(0,O.jsx)(f.default,{style:Or.gridThirdRight,children:(0,O.jsx)(A.default,{style:Or.gridThirdRightText,children:Y()(r.createDate).format("HH:mm")})})]})]})}})]}),(0,O.jsx)(f.default,{style:Or.gap})]})})]}),(0,O.jsxs)(f.default,{style:Or.rightContainer,children:[(0,O.jsx)(f.default,{style:Or.displayContainer,children:(0,O.jsxs)(f.default,{style:[Or.displayWrapper,{paddingLeft:5}],children:[(0,O.jsxs)(f.default,{style:Or.overlayHeader,children:[(0,O.jsx)(A.default,{style:Or.overlayTitleText,children:d?d.tableId:" "}),(0,O.jsx)(A.default,{style:Or.overlaySubtitleText,children:d?d.docId:" "})]}),(0,O.jsx)(f.default,{style:Or.gap}),(0,O.jsxs)(f.default,{style:[Or.gridContainer,{flex:3}],children:[(0,O.jsxs)(f.default,{style:Or.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:Or.titleFirstContainer,children:(0,O.jsx)(A.default,{style:Or.titleText,children:"Qty"})}),(0,O.jsx)(f.default,{style:Or.titleSecondContainer,children:(0,O.jsx)(A.default,{style:Or.titleText,children:"Desc"})}),(0,O.jsx)(f.default,{style:Or.titleThirdContainer,children:(0,O.jsx)(A.default,{style:Or.titleText,children:"Price"})}),(0,O.jsx)(f.default,{style:Or.titleFourthContainer,children:(0,O.jsx)(A.default,{style:Or.titleText,children:"Total"})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return(0,O.jsxs)(R.default,{style:[Or.tableItemContainer],children:[(0,O.jsx)(f.default,{style:Or.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Or.tableItemText,children:t.orderQty})}),(0,O.jsxs)(R.default,{style:Or.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:Or.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?(0,O.jsx)(A.default,{style:Or.tableItemModText,children:t.menuMod}):null]}),(0,O.jsx)(f.default,{style:Or.tableItemThirdContainer,children:(0,O.jsxs)(A.default,{style:Or.tableItemText,children:["$",t.netPrice&&t.netPrice.toFixed(2)]})}),(0,O.jsx)(f.default,{style:Or.tableItemFourthContainer,children:(0,O.jsxs)(A.default,{style:Or.tableItemText,children:["$",t.lineTotal&&t.lineTotal.toFixed(2)]})})]})}})]}),(0,O.jsx)(f.default,{style:Or.gap}),(0,O.jsxs)(f.default,{style:Or.gridContainer,children:[(0,O.jsxs)(f.default,{style:Or.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:Or.titleFirstContainer,children:(0,O.jsx)(A.default,{style:Or.titleText,children:"No."})}),(0,O.jsx)(f.default,{style:[Or.titleSecondContainer,{flex:10}],children:(0,O.jsx)(A.default,{style:Or.titleText,children:"PM ID"})}),(0,O.jsx)(f.default,{style:Or.titleFourthContainer,children:(0,O.jsx)(A.default,{style:Or.titleText,children:"Amount"})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:o,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item,r=e.index;return(0,O.jsxs)(R.default,{style:[Or.tableItemContainer],children:[(0,O.jsx)(f.default,{style:Or.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:Or.tableItemText,children:r+1})}),(0,O.jsxs)(R.default,{style:[Or.tableItemSecondContainer,{flex:10}],children:[(0,O.jsx)(A.default,{style:Or.tableItemText,children:t.pmId}),t.payRef&&(0,O.jsx)(A.default,{style:[Or.tableItemText,{color:L.reserved}],children:t.payRef})]}),(0,O.jsx)(f.default,{style:Or.tableItemFourthContainer,children:(0,O.jsx)(A.default,{style:Or.tableItemText,children:t.payMoney&&"$"+t.payMoney.toFixed(2)})})]})}})]}),(0,O.jsx)(f.default,{style:Or.gap}),(0,O.jsx)(f.default,{style:[Or.gridContainer,{flex:2,backgroundColor:"none"}],children:(0,O.jsxs)(f.default,{style:{flex:1,width:"100%"},children:[(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:Or.titleText,children:"SUBTOTAL"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:Or.titleText,children:i.beforeDisc&&i.beforeDisc.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:Or.titleText,children:"DISCOUNT"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:Or.titleText,children:i.totalDisc&&i.totalDisc.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:Or.titleText,children:"SVC CHARGE"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:Or.titleText,children:i.serviceCharge&&i.serviceCharge.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:[Or.titleText,{color:"white"}],children:"TOTAL"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:[Or.titleText,{color:"white"}],children:i.grandTotal&&i.grandTotal.toFixed(2)})})]})]})}),(0,O.jsx)(f.default,{style:Or.gap})]})}),(0,O.jsx)(f.default,{style:Or.navigateContainer,children:(0,O.jsxs)(f.default,{style:Or.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:[Or.button,(!d||j)&&{opacity:.2}],onPress:function(){return e.handlePressVoid()},disabled:!d||j,children:[(0,O.jsx)(F.default,{name:"exception1",color:L.paid,size:36}),(0,O.jsx)(A.default,{style:[Or.buttonText,{color:L.paid}],children:p.default.get("void")})]}),(0,O.jsxs)(R.default,{style:[Or.button,(!d||j)&&{opacity:.2}],onPress:function(){return e.handlePressReopen()},disabled:!d||j,children:[(0,O.jsx)(F.default,{name:"exception1",color:L.reserved,size:36}),(0,O.jsx)(A.default,{style:[Or.buttonText,{color:L.reserved}],children:p.default.get("reopen")})]})]})})]})]})}}]),r}(d.Component),Or=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginTop:10,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function Vr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Mr=function(e){(0,o.default)(r,e);var t=Vr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,settings:e.route.params.masters.settings,masters:[],availableMasters:[],searches:[],selectedMaster:"",details:[],headers:[],searchText:"",selectedDateString:Y()(new Date).format("YYYY-MM-DD"),overlayEnterDateVisible:!1,overlayChoosePrinterVisible:!1,overlayProcedureMessageVisible:!1,loading:!1,reopenResponse:""},n.handleSelectMaster=n.handleSelectMaster.bind((0,S.default)(n)),n.handleSearchText=n.handleSearchText.bind((0,S.default)(n)),n.handlePressDate=n.handlePressDate.bind((0,S.default)(n)),n.handleUpdateFromEnterDate=n.handleUpdateFromEnterDate.bind((0,S.default)(n)),n.handleUpdateFromChoosePrinter=n.handleUpdateFromChoosePrinter.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.selectedDateString,a=r+"api/deposit-receipts",o=new URLSearchParams;o.append("orgId",n.orgId),o.append("shopId",n.shopId),o.append("docDateString",l),fetch(a+="?"+o,{method:"GET"}).then((function(e){return e.json()})).then((function(t){console.log("receipts",t),e.setState({masters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:t.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:t.receiptpaydtl})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleSelectMaster",value:function(e){var t=this,r=this.state.serviceEntry;this.setState({selectedMaster:e});var n=r+"api/receipts/"+e.recKey+"/bundle";fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){t.setState({details:e.receiptitems,pays:e.receiptpays,headers:e.receiptmas})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.masters,n=(t.availableMasters,t.searchText,t.searches),l=[];this.setState({searchText:e});var a=e.toUpperCase();console.log("caseText",a),l=r,e?(l=l.filter((function(e){var t=n.filter((function(e){return e.payMoney===Number(a)})),r=n.filter((function(e){return e.pmId.toUpperCase().includes(a)}));return e.docId.toUpperCase().includes(a)||e.tableId.toUpperCase().includes(a)||t.some((function(t){return t.docId===e.docId}))||r.some((function(t){return t.docId===e.docId}))})),this.setState({availableMasters:l})):this.setState({availableMasters:l})}},{key:"handlePressDate",value:function(){this.setState({overlayEnterDateVisible:!0})}},{key:"handleUpdateFromEnterDate",value:function(e){var t=this;if(this.setState({overlayEnterDateVisible:!1,selectedMaster:"",headers:"",details:"",pays:""}),e){var r=this.state,n=r.serviceEntry,l=r.home,a=Y()(e).format("YYYY-MM-DD"),o=n+"api/deposit-receipts",i=new URLSearchParams;i.append("orgId",l.orgId),i.append("shopId",l.shopId),i.append("docDateString",a),fetch(o+="?"+i,{method:"GET"}).then((function(e){return e.json()})).then((function(r){console.log("receipts",r),r.message?console.log(r.message):t.setState({masters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:r.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:r.receiptpaydtl,selectedDateString:Y()(e).format("YYYY-MM-DD")})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"handleUpdateFromChoosePrinter",value:function(e,t){var r=this.state.selectedReturn;this.setState({overlayChoosePrinterVisible:!1,selectedPrinter:e}),e&&this.handleVoid(r,e)}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.props.navigation,this.state.reopenResponse;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"handlePressCollect",value:function(e){var t=this,r=this.state,n=r.serviceEntry,l=r.home,a=r.settings,o=r.selectedMaster,i=r.selectedDateString;if(o)if(this.props.route.params.masters.cashierPrinters.length>1&&!e&&!l.defaultPrinter)this.setState({overlayChoosePrinterVisible:!0});else{this.setState({loading:!0});var s,d;s=n+"api/collection-receipt",d={userId:l.userId,orgId:l.orgId,locId:l.locId,receiptRecKey:o.recKey,iomodelId:l.defaultPrinter&&l.defaultPrinter.iomodelId||e&&e.iomodelId,docDateString:i},console.log("body",d),fetch(s,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post collect-receipt successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(n,"Collect Receipt",l.userName,e.message,"","",o.recKey),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):t.setState({overlayAlertInputValue:{title:"ALERT",subtitle:"Procedure Reply",text:"Receipt collected successfully",ok:!0,cancel:!1,options:[]},overlayAlertVisible:!0,masters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),availableMasters:e.receiptmas.filter((function(e){return"E"===e.statusFlg})),searches:e.receiptpaydtl,selectedMaster:"",headers:"",details:"",pays:"",loading:!1})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=(r.home,r.masters,r.availableMasters),l=r.details,a=r.pays,o=r.headers,i=r.searchText,s=r.selectedMaster,d=r.selectedDateString,c=r.overlayEnterDateVisible,u=r.overlayChoosePrinterVisible,h=r.overlayProcedureMessageVisible,y=r.overlayAlertVisible,g=r.overlayAlertInputValue,m=r.loading;return console.log("in reprint"),(0,O.jsxs)(f.default,{style:zr.container,children:[y&&(0,O.jsx)(ee,{input:g,handleUpdateFromAlert:this.handleUpdateFromAlert}),u&&(0,O.jsx)(ut,{printPurpose:"VOID RECEIPT",cashierPrinters:this.props.route.params.masters.cashierPrinters,handleUpdateFromChoosePrinter:this.handleUpdateFromChoosePrinter}),c&&(0,O.jsx)(pr,{dateString:d,handleUpdateFromEnterDate:this.handleUpdateFromEnterDate}),h&&(0,O.jsx)(q,{text:h,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsxs)(f.default,{style:zr.leftContainer,children:[(0,O.jsx)(f.default,{style:zr.navigateContainer,children:(0,O.jsx)(f.default,{style:zr.navigateWrapper,children:(0,O.jsxs)(R.default,{style:zr.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:zr.buttonText,children:p.default.get("back")})]})})}),(0,O.jsx)(f.default,{style:zr.displayContainer,children:(0,O.jsxs)(f.default,{style:[zr.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:zr.gap}),(0,O.jsxs)(f.default,{style:zr.gridContainer,children:[(0,O.jsxs)(f.default,{style:zr.searchBox,children:[(0,O.jsx)(w.default,{style:zr.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:i,onChangeText:function(t){return e.handleSearchText(t)}}),(0,O.jsx)(R.default,{style:zr.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsxs)(R.default,{style:zr.searchBoxInfo,onPress:function(){return e.handlePressDate()},children:[(0,O.jsx)(f.default,{style:zr.searchBoxInfoLeft,children:(0,O.jsx)(A.default,{style:zr.searchBoxInfoText,children:d})}),(0,O.jsx)(f.default,{style:zr.searchBoxInfoRight,children:(0,O.jsxs)(A.default,{style:zr.searchBoxInfoText,children:[n.length," DOCS"]})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:n,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[zr.grid,s.recKey===r.recKey&&{backgroundColor:L.occupied}],onPress:function(){return e.handleSelectMaster(r)},children:[(0,O.jsxs)(f.default,{style:zr.gridFirst,children:[(0,O.jsx)(f.default,{style:zr.gridFirstLeft,children:(0,O.jsx)(A.default,{style:zr.gridFirstLeftText,children:r.tableId})}),(0,O.jsx)(f.default,{style:zr.gridFirstRight,children:(0,O.jsx)(A.default,{style:zr.gridFirstRightText,children:r.createUserId})})]}),(0,O.jsx)(f.default,{style:zr.gridSecond,children:(0,O.jsx)(A.default,{style:zr.gridSecondText,children:r.docId})}),(0,O.jsxs)(f.default,{style:zr.gridThird,children:[(0,O.jsx)(f.default,{style:zr.gridThirdLeft}),(0,O.jsx)(f.default,{style:zr.gridThirdRight,children:(0,O.jsx)(A.default,{style:zr.gridThirdRightText,children:Y()(r.createDate).format("HH:mm")})})]})]})}})]}),(0,O.jsx)(f.default,{style:zr.gap})]})})]}),(0,O.jsxs)(f.default,{style:zr.rightContainer,children:[(0,O.jsx)(f.default,{style:zr.displayContainer,children:(0,O.jsxs)(f.default,{style:[zr.displayWrapper,{paddingLeft:5}],children:[(0,O.jsxs)(f.default,{style:zr.overlayHeader,children:[(0,O.jsx)(A.default,{style:zr.overlayTitleText,children:s?s.tableId:" "}),(0,O.jsx)(A.default,{style:zr.overlaySubtitleText,children:s?s.docId:" "})]}),(0,O.jsx)(f.default,{style:zr.gap}),(0,O.jsxs)(f.default,{style:[zr.gridContainer,{flex:3}],children:[(0,O.jsxs)(f.default,{style:zr.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:zr.titleFirstContainer,children:(0,O.jsx)(A.default,{style:zr.titleText,children:"Qty"})}),(0,O.jsx)(f.default,{style:zr.titleSecondContainer,children:(0,O.jsx)(A.default,{style:zr.titleText,children:"Desc"})}),(0,O.jsx)(f.default,{style:zr.titleThirdContainer,children:(0,O.jsx)(A.default,{style:zr.titleText,children:"Price"})}),(0,O.jsx)(f.default,{style:zr.titleFourthContainer,children:(0,O.jsx)(A.default,{style:zr.titleText,children:"Total"})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:l,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;return(0,O.jsxs)(R.default,{style:[zr.tableItemContainer],children:[(0,O.jsx)(f.default,{style:zr.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:zr.tableItemText,children:t.orderQty})}),(0,O.jsxs)(R.default,{style:zr.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:zr.tableItemText,children:[t.refRecKey?"- ":null,t.menuName]}),t.menuMod?(0,O.jsx)(A.default,{style:zr.tableItemModText,children:t.menuMod}):null]}),(0,O.jsx)(f.default,{style:zr.tableItemThirdContainer,children:(0,O.jsxs)(A.default,{style:zr.tableItemText,children:["$",t.netPrice&&t.netPrice.toFixed(2)]})}),(0,O.jsx)(f.default,{style:zr.tableItemFourthContainer,children:(0,O.jsxs)(A.default,{style:zr.tableItemText,children:["$",t.lineTotal&&t.lineTotal.toFixed(2)]})})]})}})]}),(0,O.jsx)(f.default,{style:zr.gap}),(0,O.jsxs)(f.default,{style:zr.gridContainer,children:[(0,O.jsxs)(f.default,{style:zr.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:zr.titleFirstContainer,children:(0,O.jsx)(A.default,{style:zr.titleText,children:"No."})}),(0,O.jsx)(f.default,{style:[zr.titleSecondContainer,{flex:10}],children:(0,O.jsx)(A.default,{style:zr.titleText,children:"PM ID"})}),(0,O.jsx)(f.default,{style:zr.titleFourthContainer,children:(0,O.jsx)(A.default,{style:zr.titleText,children:"Amount"})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item,r=e.index;return(0,O.jsxs)(R.default,{style:[zr.tableItemContainer],children:[(0,O.jsx)(f.default,{style:zr.tableItemFirstContainer,children:(0,O.jsx)(A.default,{style:zr.tableItemText,children:r+1})}),(0,O.jsxs)(R.default,{style:[zr.tableItemSecondContainer,{flex:10}],children:[(0,O.jsx)(A.default,{style:zr.tableItemText,children:t.pmId}),t.payRef&&(0,O.jsx)(A.default,{style:[zr.tableItemText,{color:L.reserved}],children:t.payRef})]}),(0,O.jsx)(f.default,{style:zr.tableItemFourthContainer,children:(0,O.jsx)(A.default,{style:zr.tableItemText,children:t.payMoney&&"$"+t.payMoney.toFixed(2)})})]})}})]}),(0,O.jsx)(f.default,{style:zr.gap}),(0,O.jsx)(f.default,{style:[zr.gridContainer,{flex:2,backgroundColor:"none"}],children:(0,O.jsxs)(f.default,{style:{flex:1,width:"100%"},children:[(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:zr.titleText,children:"SUBTOTAL"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:zr.titleText,children:o.beforeDisc&&o.beforeDisc.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:zr.titleText,children:"DISCOUNT"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:zr.titleText,children:o.totalDisc&&o.totalDisc.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:zr.titleText,children:"SVC CHARGE"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:zr.titleText,children:o.serviceCharge&&o.serviceCharge.toFixed(2)})})]}),(0,O.jsxs)(f.default,{style:{flex:1,marginHorizontal:60,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:[zr.titleText,{color:"white"}],children:"TOTAL"})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center",alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:[zr.titleText,{color:"white"}],children:o.grandTotal&&o.grandTotal.toFixed(2)})})]})]})}),(0,O.jsx)(f.default,{style:zr.gap})]})}),(0,O.jsx)(f.default,{style:zr.navigateContainer,children:(0,O.jsx)(f.default,{style:zr.navigateWrapper,children:(0,O.jsxs)(R.default,{style:[zr.button,(!s||m)&&{opacity:.2}],disabled:!s||m,onPress:function(){return e.handlePressCollect()},children:[(0,O.jsx)(F.default,{name:"gift",color:L.reserved,size:36}),(0,O.jsx)(A.default,{style:[zr.buttonText,{color:L.reserved}],children:p.default.get("collect")})]})})})]})]})}}]),r}(d.Component),zr=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginTop:10,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function Nr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Kr=function(e){(0,o.default)(r,e);var t=Nr(r);function r(e){var n,a,o;return(0,l.default)(this,r),(o=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,selectedTable:e.route.params.selectedTable,mode:e.route.params.mode,masters:e.route.params.masters,settings:e.route.params.masters.settings,vipSources:e.route.params.masters.vipSources,availableVipSources:e.route.params.masters.vipSources,overlayPax:"NEW"===e.route.params.mode?(null==(n=e.route.params.masters.tablemas)||null==(a=n.find((function(t){return t.tableId===e.route.params.selectedTable.tableId})))?void 0:a.capacity)||2:e.route.params.selectedTable.pax||0,overlayVip:"NEW"===e.route.params.mode?null:{vipId:e.route.params.selectedTable.vipId||"",vipName:e.route.params.selectedTable.vipName||"",vipDisc:e.route.params.selectedTable.vipDisc||"",vipPhone:e.route.params.selectedTable.vipPhone||"",cumPts:e.route.params.selectedTable.cumPts||"",vipPtsMoney:e.route.params.selectedTable.vipPtsMoney||"",classId:e.route.params.selectedTable.classId||""},overlayValidateVipId:"",overlayValidateCardNumber:"",overlayValidateNric:"",overlayValidateVipName:"",overlayValidateVipPhone:"",overlayValidateVipPhoneCountryCode:"",overlayValidateEmailAddress:"",vipResults:"",selectedVipResult:"",overlaySource:"NEW"===e.route.params.mode?"":{sourceId:e.route.params.selectedTable.sourceId||""},overlaySourceSearch:"",overlayDeliveryFlg:"NEW"===e.route.params.mode?"N":e.route.params.selectedTable.homeDelivery||"",overlayPostalCode:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.dpostalcode||"",overlayAddr1:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress1||"",overlayAddr2:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress2||"",overlayAddr3:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress3||"",overlayAddr4:"NEW"===e.route.params.mode?"":e.route.params.selectedTable.daddress4||"",activeTab:e.route.params.tab||"PAX",warning:""},o.handleQtyChange=o.handleQtyChange.bind((0,S.default)(o)),o.handlePressTab=o.handlePressTab.bind((0,S.default)(o)),o.handleSearchVip=o.handleSearchVip.bind((0,S.default)(o)),o.handleEnterVip=o.handleEnterVip.bind((0,S.default)(o)),o.handleClearVip=o.handleClearVip.bind((0,S.default)(o)),o.handlePressNext=o.handlePressNext.bind((0,S.default)(o)),o.handlePressPrev=o.handlePressPrev.bind((0,S.default)(o)),o.handleOverlaySearchText=o.handleOverlaySearchText.bind((0,S.default)(o)),o.handleAddressChange=o.handleAddressChange.bind((0,S.default)(o)),o.handleCheckDeliveryFlg=o.handleCheckDeliveryFlg.bind((0,S.default)(o)),o.handleSubmit=o.handleSubmit.bind((0,S.default)(o)),o.handleUpdateFromProcedureMessage=o.handleUpdateFromProcedureMessage.bind((0,S.default)(o)),o}return(0,a.default)(r,[{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.mode,l=r.home,a=r.serviceEntry,o=r.selectedTable,i=r.settings,s=r.overlayPax,d=r.overlayVip,c=r.overlaySource,u=r.overlayValidateVipName,f=r.overlayDeliveryFlg,h=r.overlayPostalCode,y=r.overlayAddr1,g=r.overlayAddr2,m=r.overlayAddr3,p=r.overlayAddr4;if(s||0===s){var x=a+"api/tables/"+o.recKey+("NEW"===n?"/change-table-status":"/update-table-info"),v={userId:l.userId,locId:l.locId,tableStatus:"C",pax:s,vipName:null!=d&&d.vipId?null==d?void 0:d.vipName:u,phone:null==d?void 0:d.vipPhone,reservationTime:"",sourceId:c.sourceId,deliveryFlg:f,postalCode:h,addr1:y,addr2:g,addr3:m,addr4:p};fetch(x,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(v)}).then((function(e){return e.json()})).then((function(r){var s;console.log("post table-edit-open successful",r),"Y"===(null==(s=i.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:s.setString)&&K(a,"NEW"===n?"Open Table":"Edit Table",l.userName,r.message,o.tableId,"",null!=d&&d.vipId?null==d?void 0:d.vipName:u),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):"NEW"===n?e.props.route.params.handleUpdateFromTable():t.goBack()}))}}},{key:"handleAddressChange",value:function(e,t){var r=this;"POSTALCODE"===e?this.setState({overlayPostalCode:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR1"===e?this.setState({overlayAddr1:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR2"===e?this.setState({overlayAddr2:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR3"===e?this.setState({overlayAddr3:t},(function(){return r.handleCheckDeliveryFlg()})):"ADDR4"===e&&this.setState({overlayAddr4:t},(function(){return r.handleCheckDeliveryFlg()}))}},{key:"handleCheckDeliveryFlg",value:function(){var e=this.state,t=e.overlayPostalCode,r=e.overlayAddr1,n=e.overlayAddr2,l=e.overlayAddr3,a=e.overlayAddr4;t||r||n||l||a?this.setState({overlayDeliveryFlg:"Y"}):this.setState({overlayDeliveryFlg:"N"})}},{key:"handleQtyChange",value:function(e){if("PLUS"===e)this.setState((function(e,t){return{overlayPax:e.overlayPax+1}}));else if("MINUS"===e){if(0===this.state.overlayPax)return;this.setState((function(e,t){return{overlayPax:e.overlayPax-1}}))}}},{key:"handlePaxChange",value:function(e){isNaN(e)?this.setState({overlayPax:0}):this.setState({overlayPax:Number(e)})}},{key:"handlePressTab",value:function(e){E.default.get("window").width;"VIP"===e?this.setState({activeTab:"VIP"}):"PAX"===e?this.setState({activeTab:"PAX"}):"SOURCE"===e?this.setState({activeTab:"SOURCE"}):"DELIVERY"===e&&this.setState({activeTab:"DELIVERY"})}},{key:"handlePressNext",value:function(){var e=this.state.activeTab;E.default.get("window").width;if("PAX"===e)this.setState({activeTab:"VIP"});else if("VIP"===e)this.setState({activeTab:"SOURCE"});else if("SOURCE"===e)this.setState({activeTab:"DELIVERY"});else if("DELIVERY"===e)return}},{key:"handlePressPrev",value:function(){var e=this.state.activeTab;E.default.get("window").width;"PAX"!==e&&("VIP"===e?this.setState({activeTab:"PAX"}):"SOURCE"===e?this.setState({activeTab:"VIP"}):"DELIVERY"===e&&this.setState({activeTab:"SOURCE"}))}},{key:"handleSearchVip",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=(t.masters,t.settings),a=t.selectedTable,o=(t.overlayVip,t.overlayValidateVipId),i=t.overlayValidateCardNumber,s=t.overlayValidateVipName,d=t.overlayValidateNric,c=t.overlayValidateEmailAddress,u=t.overlayValidateVipPhone,f=t.overlayValidateVipPhoneCountryCode,h=r+"api/tables/"+a.recKey+"/search-vip",y={opentableRecKey:a.recKey};o&&(y.vipId=o),i&&(y.cardNumber=i),s&&(y.vipName=s),d&&(y.nric=d),c&&(y.emailAddress=c),u&&(y.vipPhone=u,y.vipPhoneCountryCode=f),console.log("before searching vip",y),fetch(h,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(y)}).then((function(e){return e.json()})).then((function(t){var o;console.log("post successful",t),"Y"===(null==(o=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(r,"Search Vip",n.userName,t.message,a.tableId),t.message?e.setState({warning:"Invalid VIP search"}):e.setState({warning:t.length+" VIP result(s) found",vipResults:t})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleEnterVip",value:function(e){var t=this;this.setState({selectedVipResult:e});var r=this.state,n=r.serviceEntry,l=r.home,a=(r.masters,r.settings),o=r.selectedTable,i=n+"api/tables/"+o.recKey+"/enter-vip",s={opentableRecKey:o.recKey,customerNumber:e.customerNumber,name:e.name,mobileNumber:e.mobileNumber,emailAddress:e.emailaddress,customerSource:e.customerSource};console.log("before entering vip",e),fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(r){var i;console.log("post successful",r),"Y"===(null==(i=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Input Vip",l.userName,r.message,o.tableId,"",e.customerNumber+","+e.name),r.message?t.setState({warning:"VIP input unsuccessful"}):t.setState({overlayVip:{vipId:r.opentable.vipId||"",vipName:r.opentable.vipName||"",vipPhone:r.opentable.vipPhone||"",vipPtsMoney:r.opentable.vipPtsMoney||"",cumPts:r.opentable.cumPts||"",vipDisc:r.opentable.vipDisc||"",classId:r.opentable.classId||""},warning:"VIP input successful"})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleClearVip",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=(t.masters,t.settings),a=t.selectedTable,o=r+"api/tables/"+a.recKey+"/update-table-vip-info";fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({vipId:"",vipName:"",classId:"",vipDisc:"",cumPts:"",pts:"",money:"",cardNo:"",birthday:"",qrcode:"",phone:""})}).then((function(e){return e.json()})).then((function(t){var o;console.log("post successful",t),"Y"===(null==(o=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(r,"Clear Vip",n.userName,t.message,a.tableId,"",""),t.message?e.setState({warning:t.message}):e.setState({overlayVip:{vipId:t.opentable.vipId||"",vipName:t.opentable.vipName||"",vipPhone:t.opentable.vipPhone||"",vipPtsMoney:t.opentable.vipPtsMoney||"",cumPts:t.opentable.cumPts||"",vipDisc:t.opentable.vipDisc||"",classId:t.opentable.classId||""},warning:"VIP cleared"})})).catch((function(t){console.log(t),e.setState({loading:!1})}))}},{key:"handleOverlaySearchText",value:function(e){var t=this.state,r=t.vipSources,n=t.availableVipSources,l=[];this.setState({overlaySourceSearch:e});var a=e.toUpperCase();console.log("caseText",a),console.log("available",n),l=r,e?(l=l.filter((function(e){return e.sourceId.toUpperCase().includes(a)||e.name.toUpperCase().includes(a)})),this.setState({availableVipSources:l})):this.setState({availableVipSources:l})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.mode,l=r.selectedTable,a=r.overlayProcedureMessageVisible,o=r.overlayPax,i=r.overlayVip,s=r.overlayValidateVipId,d=r.overlayValidateCardNumber,c=r.overlayValidateEmailAddress,u=r.overlayValidateVipPhone,h=r.overlayValidateVipPhoneCountryCode,y=r.overlayValidateVipName,g=(r.overlayValidateNric,r.overlaySource),m=r.overlaySourceSearch,x=r.vipResults,v=r.selectedVipResult,b=r.overlayDeliveryFlg,j=r.overlayPostalCode,T=r.overlayAddr1,S=r.overlayAddr2,I=r.overlayAddr3,C=r.overlayAddr4,P=r.warning,k=r.activeTab,B=r.availableVipSources;console.log("in overlayopentable");var D=E.default.get("window").width/5*3;return(0,O.jsxs)(f.default,{style:Gr.overlay,children:[a&&(0,O.jsx)(q,{text:a,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsxs)(f.default,{style:Gr.overlayContent,children:[(0,O.jsxs)(f.default,{style:Gr.overlayHeader,children:[(0,O.jsxs)(A.default,{style:Gr.overlayTitleText,children:[p.default.get("table")," ",l.tableId]}),(0,O.jsx)(A.default,{style:Gr.overlaySubtitleText,children:"NEW"===n?p.default.get("open"):p.default.get("edit")}),(0,O.jsx)(A.default,{style:Gr.overlayText,children:P||"Enter Pax, VIP & Source"})]}),(0,O.jsxs)(f.default,{style:Gr.tabsContainer,children:[(0,O.jsxs)(R.default,{style:[Gr.tabContainer,"PAX"===k&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("PAX")},children:[null!==o?(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"PAX"===k&&{color:L.grey1}],children:o}):(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"PAX"===k&&{color:L.grey1}],children:"TBD"}),(0,O.jsx)(A.default,{style:[Gr.tabText,"PAX"===k&&{color:L.grey1}],children:"PAX"})]}),(0,O.jsxs)(R.default,{style:[Gr.tabContainer,"VIP"===k&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("VIP")},children:[null!=i&&i.vipId?(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"VIP"===k&&{color:L.grey1}],children:null==i?void 0:i.vipId}):(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"VIP"===k&&{color:L.grey1}],children:"TBD"}),(0,O.jsx)(A.default,{style:[Gr.tabText,"VIP"===k&&{color:L.grey1}],children:"VIP"})]}),(0,O.jsxs)(R.default,{style:[Gr.tabContainer,"SOURCE"===k&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("SOURCE")},children:[g.sourceId?(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"SOURCE"===k&&{color:L.grey1}],children:g.sourceId}):(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"SOURCE"===k&&{color:L.grey1}],children:"TBD"}),(0,O.jsx)(A.default,{style:[Gr.tabText,"SOURCE"===k&&{color:L.grey1}],children:"SOURCE"})]}),(0,O.jsxs)(R.default,{style:[Gr.tabContainer,"DELIVERY"===k&&{backgroundColor:"white"}],onPress:function(){return e.handlePressTab("DELIVERY")},children:["Y"===b?(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"DELIVERY"===k&&{color:L.grey1}],children:"YES"}):(0,O.jsx)(A.default,{style:[Gr.tabFocusText,"DELIVERY"===k&&{color:L.grey1}],children:"NO"}),(0,O.jsx)(A.default,{style:[Gr.tabText,"DELIVERY"===k&&{color:L.grey1}],children:"DELIVERY"})]})]}),"PAX"===k?(0,O.jsxs)(f.default,{style:[Gr.overlayTab,{width:D}],children:[(0,O.jsxs)(f.default,{style:Gr.adjustContainer,children:[(0,O.jsx)(R.default,{style:Gr.adjustFirst,onPress:function(){return e.handleQtyChange("MINUS")},children:(0,O.jsx)(F.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),(0,O.jsx)(f.default,{style:Gr.adjustSecond,children:(0,O.jsx)(w.default,{style:Gr.overlayPax,selectTextOnFocus:!0,keyboardType:"numeric",value:null==o?void 0:o.toString(),onChangeText:function(t){return e.handlePaxChange(t)}})}),(0,O.jsx)(R.default,{style:Gr.adjustThird,onPress:function(){return e.handleQtyChange("PLUS")},children:(0,O.jsx)(F.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),(0,O.jsxs)(f.default,{style:Gr.buttonsContainer,children:[(0,O.jsx)(R.default,{style:[Gr.button,1===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:1})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"1"})}),(0,O.jsx)(R.default,{style:[Gr.button,2===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:2})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"2"})}),(0,O.jsx)(R.default,{style:[Gr.button,3===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:3})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"3"})}),(0,O.jsx)(R.default,{style:[Gr.button,4===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:4})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"4"})})]}),(0,O.jsxs)(f.default,{style:Gr.buttonsContainer,children:[(0,O.jsx)(R.default,{style:[Gr.button,5===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:5})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"5"})}),(0,O.jsx)(R.default,{style:[Gr.button,6===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:6})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"6"})}),(0,O.jsx)(R.default,{style:[Gr.button,7===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:7})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"7"})}),(0,O.jsx)(R.default,{style:[Gr.button,8===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:8})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"8"})})]}),(0,O.jsxs)(f.default,{style:Gr.buttonsContainer,children:[(0,O.jsx)(R.default,{style:[Gr.button,9===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:9})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"9"})}),(0,O.jsx)(R.default,{style:[Gr.button,10===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:10})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"10"})}),(0,O.jsx)(R.default,{style:[Gr.button,11===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:11})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"11"})}),(0,O.jsx)(R.default,{style:[Gr.button,12===o&&{backgroundColor:L.occupied}],onPress:function(){return e.setState({overlayPax:12})},children:(0,O.jsx)(A.default,{style:Gr.buttonText,children:"12"})})]})]}):"VIP"===k?(0,O.jsx)(f.default,{style:[Gr.overlayTab,{width:D}],children:x&&0!==x.length?(0,O.jsxs)(f.default,{style:Gr.selectWrapper,children:[(0,O.jsx)(f.default,{style:Gr.searchBoxWrapper,children:(0,O.jsx)(f.default,{style:[Gr.overlaySearchBox,{marginHorizontal:0,justifyContent:"space-between"}],children:(0,O.jsx)(R.default,{style:Gr.overlaySearchBoxButton,onPress:function(){return e.setState({vipResults:""})},children:(0,O.jsx)(F.default,{name:"close",size:24,color:"white"})})})}),(0,O.jsx)(f.default,{style:Gr.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:Gr.searchBoxInfoText,children:[x.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:x,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Gr.overlayGrid,r.customerNumber===v.customerNumber&&{backgroundColor:L.occupied}],onPress:function(){return e.handleEnterVip(r)},children:[(0,O.jsxs)(f.default,{style:Gr.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:Gr.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:Gr.overlayGridFirstLeftText,children:r.customerNumber})}),(0,O.jsx)(f.default,{style:Gr.overlayGridFirstRight,children:(0,O.jsxs)(A.default,{style:[Gr.overlayGridFirstRightText,r.customerNumber===v.customerNumber&&{color:"white"}],children:[r.hasActiveMembership," ",r.customerSource]})})]}),(0,O.jsx)(f.default,{style:Gr.overlayGridSecond,children:(0,O.jsx)(A.default,{style:Gr.overlayGridSecondText,children:r.name})}),(0,O.jsxs)(f.default,{style:Gr.overlayGridThird,children:[(0,O.jsx)(f.default,{style:Gr.overlayGridThirdLeft,children:(0,O.jsx)(A.default,{style:Gr.overlayGridThirdLeftText,children:r.emailaddress})}),(0,O.jsx)(f.default,{style:Gr.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:Gr.overlayGridThirdRightText,children:r.mobileNumber?r.mobileNumber:" "})})]})]})}})]}):(0,O.jsxs)(f.default,{style:Gr.vipInputsContainer,children:[(0,O.jsxs)(f.default,{style:Gr.vipInputsRow,children:[(0,O.jsx)(w.default,{style:Gr.vipInput,placeholder:"VIP ID",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipId:t})},value:s,onSubmitEditing:function(){return e.handleSearchVip()}}),(0,O.jsx)(w.default,{style:Gr.vipInput,placeholder:"CARD NO.",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateCardNumber:t})},value:d,onSubmitEditing:function(){return e.handleSearchVip()}})]}),(0,O.jsxs)(f.default,{style:Gr.vipInputsRow,children:[(0,O.jsx)(w.default,{style:Gr.vipInput,placeholder:"VIP NAME",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipName:t})},value:y,onSubmitEditing:function(){return e.handleSearchVip()}}),(0,O.jsx)(w.default,{style:[Gr.vipInput,{width:50}],placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipPhoneCountryCode:t})},value:h}),(0,O.jsx)(w.default,{style:[Gr.vipInput,{width:130}],placeholder:"VIP PHONE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateVipPhone:t})},value:u,onSubmitEditing:function(){return e.handleSearchVip()}})]}),(0,O.jsxs)(f.default,{style:Gr.vipInputsRow,children:[(0,O.jsx)(w.default,{style:Gr.vipInput,placeholder:"VIP EMAIL",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.setState({overlayValidateEmailAddress:t})},value:c,onSubmitEditing:function(){return e.handleSearchVip()}}),(0,O.jsx)(f.default,{style:{flex:1,alignItems:"flex-end",justifyContent:"center"},children:(0,O.jsx)(R.default,{style:{paddingHorizontal:10,height:20,margin:5,borderRadius:40,backgroundColor:L.paid,alignItems:"center",justifyContent:"center"},onPress:function(){return e.handleClearVip()},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:10,textTransform:"uppercase",color:"white"},children:p.default.get("remove")})})})]}),(0,O.jsxs)(f.default,{style:Gr.vipInputsRow,children:[(0,O.jsxs)(f.default,{style:[Gr.detailWrapper,{alignItems:"flex-start"}],children:[(0,O.jsx)(A.default,{style:Gr.detailTitle,children:"VIP ID"}),(0,O.jsx)(A.default,{style:Gr.detailText,children:(null==i?void 0:i.vipId)||"-"})]}),(0,O.jsxs)(f.default,{style:Gr.detailWrapper,children:[(0,O.jsx)(A.default,{style:Gr.detailTitle,children:"VIP CLASS"}),(0,O.jsx)(A.default,{style:Gr.detailText,children:(null==i?void 0:i.classId)||"-"})]}),(0,O.jsxs)(f.default,{style:Gr.detailWrapper,children:[(0,O.jsx)(A.default,{style:Gr.detailTitle,children:"VIP DISC"}),(0,O.jsx)(A.default,{style:Gr.detailText,children:(null==i?void 0:i.vipDisc)||"-"})]})]}),(0,O.jsxs)(f.default,{style:Gr.vipInputsRow,children:[(0,O.jsxs)(f.default,{style:[Gr.detailWrapper,{alignItems:"flex-start"}],children:[(0,O.jsx)(A.default,{style:Gr.detailTitle,children:"VIP NAME"}),(0,O.jsx)(A.default,{style:Gr.detailText,children:(null==i?void 0:i.vipName)||"-"})]}),(0,O.jsxs)(f.default,{style:Gr.detailWrapper,children:[(0,O.jsx)(A.default,{style:Gr.detailTitle,children:"CUMULATIVE PTS"}),(0,O.jsx)(A.default,{style:Gr.detailText,children:(null==i?void 0:i.cumPts)||"-"})]}),(0,O.jsxs)(f.default,{style:Gr.detailWrapper,children:[(0,O.jsx)(A.default,{style:Gr.detailTitle,children:"REDEEMABLE"}),(0,O.jsx)(A.default,{style:Gr.detailText,children:(null==i?void 0:i.vipPtsMoney)||"-"})]})]})]})}):"SOURCE"===k?(0,O.jsx)(f.default,{style:[Gr.overlayTab,{width:D}],children:(0,O.jsxs)(f.default,{style:Gr.selectWrapper,children:[(0,O.jsx)(f.default,{style:Gr.searchBoxWrapper,children:(0,O.jsxs)(f.default,{style:[Gr.overlaySearchBox,{marginHorizontal:0}],children:[(0,O.jsx)(w.default,{style:Gr.overlaySearchBoxInput,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",onChangeText:function(t){return e.handleOverlaySearchText(t)},value:m}),(0,O.jsx)(R.default,{style:Gr.overlaySearchBoxButton,onPress:function(){e.setState({overlaySourceSearch:"",overlaySource:""},(function(){return e.handleOverlaySearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]})}),(0,O.jsx)(f.default,{style:Gr.searchBoxInfo,children:(0,O.jsxs)(A.default,{style:Gr.searchBoxInfoText,children:[B.length," ITEMS"]})}),(0,O.jsx)(me.default,{style:[{flex:1}],showsVerticalScrollIndicator:!1,data:B,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(t){var r=t.item;return(0,O.jsxs)(R.default,{style:[Gr.overlayGrid,r.dummy?Gr.hidden:null],onPress:function(){return e.setState({overlaySource:r,overlaySourceSearch:r.sourceId})},children:[(0,O.jsxs)(f.default,{style:Gr.overlayGridFirst,children:[(0,O.jsx)(f.default,{style:Gr.overlayGridFirstLeft,children:(0,O.jsx)(A.default,{style:Gr.overlayGridFirstLeftText,children:r.sourceId})}),(0,O.jsx)(f.default,{style:Gr.overlayGridFirstRight,children:(0,O.jsx)(A.default,{style:Gr.overlayGridFirstRightText})})]}),(0,O.jsx)(f.default,{style:Gr.overlayGridSecond,children:(0,O.jsx)(A.default,{style:Gr.overlayGridSecondText,children:r.name})}),(0,O.jsxs)(f.default,{style:Gr.overlayGridThird,children:[(0,O.jsx)(f.default,{style:Gr.overlayGridThirdLeft}),(0,O.jsx)(f.default,{style:Gr.overlayGridThirdRight,children:(0,O.jsx)(A.default,{style:Gr.overlayGridThirdRightText})})]})]})}})]})}):(0,O.jsx)(f.default,{style:[Gr.overlayTab,{width:D}],children:(0,O.jsxs)(f.default,{style:Gr.vipInputsContainer,children:[(0,O.jsx)(f.default,{style:Gr.vipInputsRow,children:(0,O.jsx)(w.default,{style:Gr.vipInput,placeholder:"POSTAL CODE",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("POSTALCODE",t)},value:j})}),(0,O.jsx)(f.default,{style:Gr.vipInputsRow,children:(0,O.jsx)(w.default,{style:[Gr.vipInput,{width:390}],placeholder:"ADDR1",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR1",t)},value:T})}),(0,O.jsx)(f.default,{style:Gr.vipInputsRow,children:(0,O.jsx)(w.default,{style:[Gr.vipInput,{width:390}],placeholder:"ADDR2",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR2",t)},value:S})}),(0,O.jsx)(f.default,{style:Gr.vipInputsRow,children:(0,O.jsx)(w.default,{style:[Gr.vipInput,{width:390}],placeholder:"ADDR3",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR3",t)},value:I})}),(0,O.jsx)(f.default,{style:Gr.vipInputsRow,children:(0,O.jsx)(w.default,{style:[Gr.vipInput,{width:390}],placeholder:"ADDR4",placeholderTextColor:"rgba(255,255,255,0.2)",textContentType:"none",autoComplete:"off",autoCorrect:!1,onChangeText:function(t){return e.handleAddressChange("ADDR4",t)},value:C})})]})}),(0,O.jsxs)(f.default,{style:Gr.overlayOptionsContainer,children:[(0,O.jsxs)(R.default,{style:Gr.overlayOptionContainer,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"close",size:32,color:"white"}),(0,O.jsx)(A.default,{style:Gr.overlayOptionText,children:p.default.get("close")})]}),(0,O.jsxs)(R.default,{style:Gr.overlayOptionContainer,onPress:function(){return e.handlePressPrev()},children:[(0,O.jsx)(F.default,{name:"left",size:32,color:"white"}),(0,O.jsx)(A.default,{style:Gr.overlayOptionText,children:"PREV"})]}),(0,O.jsxs)(R.default,{style:Gr.overlayOptionContainer,onPress:function(){return e.handlePressNext()},children:[(0,O.jsx)(F.default,{name:"right",size:32,color:"white"}),(0,O.jsx)(A.default,{style:Gr.overlayOptionText,children:"NEXT"})]}),(0,O.jsxs)(R.default,{style:Gr.overlayOptionContainer,onPress:function(){return e.handleSubmit()},children:[(0,O.jsx)(F.default,{name:"NEW"===n?"appstore-o":"edit",size:32,color:"white"}),(0,O.jsx)(A.default,{style:Gr.overlayOptionText,children:"NEW"===n?p.default.get("open"):p.default.get("edit")})]})]})]})]})}}]),r}(d.Component),Lr=E.default.get("window").height/8,Gr=u.default.create({overlay:{backgroundColor:L.grey2,flex:1,alignItems:"center",justifyContent:"center"},overlayContent:{flex:1,width:"60%",backgroundColor:L.grey2,borderRadius:5,overflow:"hidden",position:"relative"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},overlayText:{marginTop:15,fontFamily:"varela-round",color:"white",textAlign:"center"},overlayPax:{width:"100%",fontFamily:"varela-round",color:"white",fontSize:32,textAlign:"center"},buttonsContainer:{alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:Lr-10,width:Lr-10,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:24,textTransform:"uppercase"},adjustContainer:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},adjustFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginRight:50},adjustSecond:{flex:1,justifyContent:"center",alignItems:"center"},adjustThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:50},overlayOptionContainer:{flex:1,alignItems:"center",justifyContent:"center"},overlayOptionsContainer:{height:100,marginTop:20,backgroundColor:L.grey3,flexDirection:"row",margin:5},overlayOptionText:{fontFamily:"varela-round",fontSize:10,color:"white",marginTop:5,textTransform:"uppercase"},overlayTab:{flex:1,justifyContent:"center",alignItems:"center"},tabsContainer:{height:40,flexDirection:"row",alignItems:"center",justifyContent:"center"},tabContainer:{backgroundColor:L.grey1,width:120,alignItems:"center",justifyContent:"center",borderRadius:20,height:40,marginHorizontal:5},tabText:{fontSize:10,fontFamily:"varela-round",color:"white"},tabFocusText:{fontSize:16,fontFamily:"varela-round",color:"white"},searchBoxInfo:{height:20,margin:5,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},searchBoxWrapper:{height:50,flexDirection:"row",alignItems:"center"},vipInputsContainer:{marginTop:20,width:400,alignItems:"center"},vipInputsRow:{height:50,width:400,flexDirection:"row"},vipInput:{backgroundColor:L.grey1,borderRadius:5,color:"white",fontFamily:"varela-round",fontSize:16,margin:5,paddingHorizontal:10,width:190},overlaySearchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:50,flexDirection:"row",flex:1,alignItems:"center"},overlaySearchBoxInput:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},overlaySearchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},overlaySearchBoxButtonText:{fontSize:14,fontFamily:"varela-round",color:"white",textTransform:"uppercase"},overlaySearchVipButton:{alignItems:"center",justifyContent:"center",height:110},detailWrapper:{alignItems:"flex-end",margin:5,width:370/3},detailText:{fontSize:16,fontFamily:"varela-round",color:"white"},detailTitle:{opacity:.6,fontSize:10,fontFamily:"varela-round",color:"white"},overlayGrid:{flex:1,margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},overlayGridFirst:{flexDirection:"row"},overlayGridSecond:{marginVertical:5},overlayGridThird:{flexDirection:"row"},overlayGridFirstLeft:{flex:1},overlayGridFirstRight:{flex:1,alignItems:"flex-end"},overlayGridThirdLeft:{flex:1},overlayGridThirdRight:{flex:1,alignItems:"flex-end"},overlayGridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridFirstRightText:{color:L.occupied,fontSize:12,fontFamily:"varela-round"},overlayGridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},overlayGridThirdLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},overlayGridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},selectWrapper:{flex:1,marginTop:50,width:400,backgroundColor:L.grey1,borderRadius:5}});function Hr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Yr=function(e){(0,o.default)(r,e);var t=Hr(r);function r(e){var n,a,o,i,s,d,c,u,f,h,y;return(0,l.default)(this,r),(y=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,settings:e.route.params.masters.settings,modBundles:e.route.params.masters.modBundles,mods:e.route.params.masters.mods,selectedTable:e.route.params.selectedTable,selectedMenu:e.route.params.selectedMenu,selectedTableItem:e.route.params.selectedTableItem,loading:!1,menuName:e.route.params.selectedTableItem?null==(n=e.route.params.selectedTableItem)?void 0:n.menuName:e.route.params.selectedMenu.menuName,qtyInput:(null==(a=e.route.params.selectedTableItem)||null==(o=a.orderQty)?void 0:o.toString())||"1",orderType:"N"===e.route.params.selectedMenu.serviceFlg?"B":e.route.params.selectedTableItem?(null==(i=e.route.params.selectedTableItem)?void 0:i.orderType)||"A":"SYS"===(null==(s=e.route.params.selectedTable)?void 0:s.sectionId)?"B":"A",lineBreak:e.route.params.selectedTableItem?e.route.params.selectedTableItem.lineBreak:"N",modInput:e.route.params.selectedTableItem?(null==(d=e.route.params.selectedTableItem)?void 0:d.menuMod)||"":"N"===e.route.params.selectedMenu.serviceFlg||"SYS"===(null==(c=e.route.params.selectedTable)?void 0:c.sectionId)&&"A"===(null==(u=e.route.params.masters.settings.find((function(e){return"POSMODE"===e.setId})))?void 0:u.setString)?"*"+p.default.get("takeaway")+"  ":"",modRecKeys:(null==(f=e.route.params.selectedTableItem)||null==(h=f.modRecKeys)?void 0:h.split(","))||[]},y.handleUpdateFromProcedureMessage=y.handleUpdateFromProcedureMessage.bind((0,S.default)(y)),y.handleUpdateFromAlert=y.handleUpdateFromAlert.bind((0,S.default)(y)),y}return(0,a.default)(r,[{key:"componentDidMount",value:function(){console.log("mount menu",this.state.selectedMenu,this.state.selectedTableItem)}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.state;t.selectedTable,t.selectedTableItem;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"doValidateQty",value:function(e){!e||isNaN(e)?this.setState({qtyInput:"0"}):this.setState({qtyInput:e})}},{key:"doChangeQty",value:function(e){var t=this.state.qtyInput,r=Number(t);if("PLUS"===e)this.setState({qtyInput:(r+1).toString()});else if("MINUS"===e){if(r<=1)return;this.setState({qtyInput:(r-1).toString()})}}},{key:"doToggleOrderType",value:function(){var e=this.state,t=e.orderType,r=e.modInput;"A"===t?(r=r.replace("*"+p.default.get("takeaway")+"  ",""),r="*"+p.default.get("takeaway")+"  "+r,this.setState({orderType:"B",modInput:r})):(r=r.replace("*"+p.default.get("takeaway")+"  ",""),this.setState({orderType:"A",modInput:r}))}},{key:"doToggleLineBreak",value:function(){var e=this.state.lineBreak;this.setState({lineBreak:"Y"===e?"N":"Y"})}},{key:"doPressModBundle",value:function(e){this.setState({selectedModBundle:e})}},{key:"doPressMod",value:function(e){var t=this.state,r=t.modInput,n=t.selectedModBundle,l=t.modRecKeys,a=r,o=l;"A"===n.modmas.modType?l.some((function(t){return t===e.recKey.toString()}))?(a=a.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))):(a+="*"+e.name+"  ",o.push(e.recKey.toString())):(n.moditems.forEach((function(e){a=a.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))})),l.some((function(t){return t===e.recKey.toString()}))||(a+="*"+e.name+"  ",o.push(e.recKey.toString()))),this.setState({modInput:a,modRecKeys:o})}},{key:"doSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,l=r.home,a=r.selectedTable,o=r.selectedMenu,i=r.selectedTableItem,s=r.mods,d=(r.masters,r.settings),c=r.modBundles,u=r.menuName,f=r.modInput,h=r.qtyInput,y=r.orderType,g=r.lineBreak,m=r.modRecKeys;if(a)if("SYS"===a.sectionId||"C"===a.statusFlg)if(c.filter((function(e){return"Y"===e.modmas.mustFlg&&("Y"===e.modmas.globalFlg||s.some((function(t){return t.menuId===o.menuId&&t.modId===e.modmas.modId})))})).some((function(e){return!e.moditems.some((function(e){return m.some((function(t){return t===e.recKey.toString()}))}))})))this.setState({overlayProcedureMessageVisible:"CHECK COMPULSORY MODIFIERS",loading:!1});else if(i){var p=n+"api/tables/"+a.recKey+"/update-item",x={userId:l.userId,opentableRecKey:a.recKey,opentableItemRecKey:i.recKey,restmenuMod:f,orderQty:h,orderType:y,modRecKeys:m.join(","),menuName:u,lineBreak:g};fetch(p,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(r){var o;"Y"===(null==(o=d.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(n,"Update Item",l.userName,r.message,a.tableId,u),console.log("post update-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else{var v=n+"api/tables/"+a.recKey+"/insert-item",b={userId:l.userId,opentableRecKey:a.recKey,restmenuRecKey:o.recKey,restmenuMod:f,orderQty:h,orderType:y,modRecKeys:m.join(","),menuName:u,lineBreak:g};fetch(v,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(b)}).then((function(e){return e.json()})).then((function(r){var o;"Y"===(null==(o=d.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(n,"Insert Item",l.userName,r.message,a.tableId,u,h),console.log("post insert-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else this.setState({overlayProcedureMessageVisible:"CHECK TABLE STATUS",loading:!1});else this.setState({overlayProcedureMessageVisible:"MISSING TABLE",loading:!1})}},{key:"render",value:function(){var e,t,r,n,l,a=this,o=this.props,i=o.navigation,s=(o.route,this.state),d=s.loading,c=s.home,u=s.settings,h=s.selectedMenu,y=(s.selectedTable,s.selectedTableItem),g=s.masters,m=s.mods,x=s.modBundles,v=s.selectedModBundle,b=s.menuName,j=s.modInput,T=s.qtyInput,S=s.orderType,I=s.lineBreak,C=s.modRecKeys,P=s.overlayProcedureMessageVisible,k=s.overlayAlertVisible,E=s.overlayAlertInputValue;return(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row",backgroundColor:"rgba(0,0,0,0.9)"},children:[k&&(0,O.jsx)(ee,{input:E,handleUpdateFromAlert:this.handleUpdateFromAlert}),P&&(0,O.jsx)(q,{text:P,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsx)(f.default,{style:{width:10}}),(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsx)(_.default,{contentContainerStyle:{flexGrow:1,alignItems:"flex-end",justifyContent:"center"},showsVerticalScrollIndicator:!1,children:null==v?void 0:v.moditems.map((function(e){var t;return(0,O.jsxs)(R.default,{style:[Wr.modButton,{margin:10},C.some((function(t){return t===e.recKey.toString()}))&&{backgroundColor:L.occupied}],onPress:function(){return a.doPressMod(e)},children:[(0,O.jsx)(A.default,{style:Wr.modText,children:e.name}),0!==e.listPrice&&(0,O.jsxs)(A.default,{style:{position:"absolute",top:-15,right:10,fontFamily:"varela-round",color:L.reserved,fontSize:20},children:[e.listPrice<0?"":"+",null==(t=e.listPrice)?void 0:t.toFixed(2)]})]},e.recKey.toString())}))})}),(0,O.jsx)(f.default,{style:{flex:2},children:(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row",padding:5},children:[(0,O.jsxs)(f.default,{style:{flex:1,margin:5,backgroundColor:L.grey2,borderRadius:5},children:[(0,O.jsxs)(f.default,{style:{flex:1,margin:5,marginBottom:0,backgroundColor:L.grey4},children:[(0,O.jsxs)(f.default,{style:{alignItems:"center",marginTop:10},children:[(0,O.jsxs)(f.default,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",color:L.paid,fontSize:16},children:[h.menuId," "]}),(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",color:L.reserved,fontSize:16},children:[" $",(null==y||null==(e=y.listPrice)?void 0:e.toFixed(2))||(null==(t=h.listPrice)?void 0:t.toFixed(2))]})]}),(0,O.jsx)(w.default,{style:{height:50,width:"90%",fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},editable:"Y"===c.adminFlg||g.privileges.some((function(e){return"EDITITEM"===e.priId}))||0===h.listPrice,multiline:!0,blurOnSubmit:!0,value:b,onChangeText:function(e){return a.setState({menuName:e})}})]}),(0,O.jsxs)(f.default,{style:Wr.menuQtyRow,children:[(0,O.jsx)(R.default,{style:Wr.menuQtyRowFirst,onPress:function(){return a.doChangeQty("MINUS")},children:(0,O.jsx)(F.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),(0,O.jsx)(f.default,{style:Wr.menuQtyRowSecond,children:(0,O.jsx)(w.default,{style:Wr.qtyTextInput,value:T,keyboardType:"numeric",onChangeText:function(e){return a.doValidateQty(e)}})}),(0,O.jsx)(R.default,{style:Wr.menuQtyRowThird,onPress:function(){return a.doChangeQty("PLUS")},children:(0,O.jsx)(F.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),(0,O.jsx)(w.default,{style:Wr.modifierTextInput,multiline:!0,placeholder:"CHOOSE FROM PREDEFINED MODIFIERS OR ENTER TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:j,onChangeText:function(e){return a.setState({modInput:e})}}),(0,O.jsxs)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:[(null==m?void 0:m.filter((function(e){return e.menuId===h.menuId})).length)>0&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(f.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:L.grey2},children:(0,O.jsx)(A.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:L.grey7},children:"MENU SPECIFIC MODIFIER"})}),(0,O.jsx)(f.default,{style:Wr.modContainer,children:null==m||null==(r=m.filter((function(e){return e.menuId===h.menuId})))||null==(n=r.map((function(e){return x.find((function(t){return t.modmas.modId===e.modId}))})))?void 0:n.map((function(e){return(0,O.jsx)(R.default,{style:[Wr.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:L.paid}],onPress:function(){return a.doPressModBundle(e)},children:(0,O.jsx)(A.default,{style:Wr.modText,children:e.modmas.name})},e.modmas.recKey.toString())}))})]}),(0,O.jsx)(f.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:L.grey2},children:(0,O.jsx)(A.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:L.grey7},children:"GLOBAL MODIFIER"})}),(0,O.jsx)(f.default,{style:Wr.modContainer,children:null==x?void 0:x.filter((function(e){return"Y"===e.modmas.globalFlg})).map((function(e){return(0,O.jsx)(R.default,{style:[Wr.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:L.paid}],onPress:function(){return a.doPressModBundle(e)},children:(0,O.jsx)(A.default,{style:Wr.modText,children:e.modmas.name})},e.modmas.recKey.toString())}))})]})]}),(0,O.jsxs)(f.default,{style:{height:100,margin:5,marginTop:0,flexDirection:"row",backgroundColor:"white"},children:[(0,O.jsxs)(R.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},disabled:d,onPress:function(){return i.goBack()},children:[(0,O.jsx)(F.default,{name:"close",size:48,color:L.grey4}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:12,color:L.grey4,textTransform:"uppercase"},children:p.default.get("close")})]}),(0,O.jsxs)(R.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},disabled:d,onPress:function(){return a.setState({loading:!0},(function(){return a.doSubmit()}))},children:[(0,O.jsx)(F.default,{name:"check",size:48,color:L.grey4}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:12,color:L.grey4},children:"OK"})]})]})]}),(0,O.jsx)(f.default,{style:{margin:5,width:120},children:(0,O.jsxs)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,alwaysBounceVertical:!1,children:[(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:80,marginVertical:5}}),(0,O.jsxs)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"A"===S?L.grey3:L.paid,borderRadius:5,marginVertical:5},disabled:"N"===h.serviceFlg,onPress:function(){return a.doToggleOrderType()},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:"A"===S?p.default.get("dinein"):p.default.get("takeaway")}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",fontSize:10},children:"ORDER TYPE"})]}),"Y"===(null==(l=u.find((function(e){return"MARKFIRE"===e.setId})))?void 0:l.setString)?(0,O.jsxs)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"N"===I?L.grey3:L.occupied,borderRadius:5,marginVertical:5},disabled:"Y"===(null==y?void 0:y.confirmFlg),onPress:function(){return a.doToggleLineBreak()},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase",fontSize:10},children:"N"===I?p.default.get("no"):p.default.get("add")}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white"},children:"LINE BREAK"})]}):(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:d,onPress:function(){return a.setState({loading:!0},(function(){return a.doSubmit()}))},children:(0,O.jsx)(F.default,{name:"check",size:28,color:L.grey4})}),(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:L.grey3,borderRadius:5,marginVertical:5},onPress:function(){return a.doChangeQty("PLUS")},children:(0,O.jsx)(F.default,{name:"plus",size:26,color:"white"})}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:L.grey3,borderRadius:5,marginVertical:5},onPress:function(){return a.doChangeQty("MINUS")},children:(0,O.jsx)(F.default,{name:"minus",size:32,color:"white"})}),(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:d,onPress:function(){return i.goBack()},children:(0,O.jsx)(F.default,{name:"close",size:26,color:L.grey4})})]})})]})})]})}}]),r}(d.Component),Wr=u.default.create({modifierTextInput:{fontFamily:"varela-round",fontSize:20,color:"white",paddingHorizontal:20,height:120,backgroundColor:L.grey3},menuQtyRow:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},menuQtyRowFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginRight:10},menuQtyRowSecond:{flex:1,justifyContent:"center",alignItems:"center"},menuQtyRowThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:10},qtyTextInput:{fontFamily:"varela-round",fontSize:32,width:"100%",color:"white",textAlign:"center"},modContainer:{padding:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center",backgroundColor:L.grey4},modButton:{paddingHorizontal:20,minHeight:32,justifyContent:"center",borderRadius:16,backgroundColor:L.grey2,margin:5},modText:{fontFamily:"varela-round",color:"white",fontSize:20}});function qr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Jr=function(e){(0,o.default)(r,e);var t=qr(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={serviceEntry:e.route.params.serviceEntry,home:e.route.params.home,selectedTable:e.route.params.selectedTable,settings:e.route.params.masters.settings,hasCameraPermission:null,detected:!1},n.handleBarCodeScanned=n.handleBarCodeScanned.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){var e=(0,n.default)((function*(){var e=(yield v.BarCodeScanner.requestPermissionsAsync()).status;this.setState({hasCameraPermission:"granted"===e})}));return function(){return e.apply(this,arguments)}}()},{key:"handleBarCodeScanned",value:function(e){var t=this,r=e.type,n=e.data,l=this.props.navigation,a=this.state,o=a.serviceEntry,i=a.home,s=a.settings,d=a.selectedTable,c=(a.detected,n);"ios"===h.default.OS&&"org.gs1.EAN-13"===r&&"0"===n.charAt(0)&&(c=n.slice(1)),this.setState({detected:!0},(function(){var e=o+"api/tables/"+d.recKey+"/scan-barcode",r={userId:i.userId,orgId:i.orgId,locId:i.locId,shopId:i.shopId,vipId:i.vipId,barcode:c,opentableRecKey:d.recKey};fetch(e,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r)}).then((function(e){if(e.ok)return e.json();throw t.setState({detected:!1}),e})).then((function(e){var t;console.log("post scan-barcode successful",e),"Y"===(null==(t=s.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:t.setString)&&K(o,"Scan Barcode",i.userName,e.message,null==d?void 0:d.tableId,"",c),l.goBack()})).catch((function(e){console.log("error: ",JSON.stringify(e))}))}))}},{key:"render",value:function(){var e=this.props,t=e.navigation,r=(e.route,this.state),n=(r.hasCameraPermission,r.detected);return(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(v.BarCodeScanner,{onBarCodeScanned:n?null:this.handleBarCodeScanned,style:{flex:1}}),(0,O.jsxs)(R.default,{style:$r.backButton,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",size:48,color:"white"}),(0,O.jsx)(A.default,{style:$r.buttonText,children:p.default.get("back")})]}),(0,O.jsx)(f.default,{style:$r.iconContainer,children:(0,O.jsx)(I.default,{name:"ios-barcode",color:n?"red":"white",size:400})})]})}}]),r}(d.Component),Qr=E.default.get("window").width,Xr=E.default.get("window").height,$r=u.default.create({iconContainer:{position:"absolute",right:Qr/2-200,top:Xr/2-200,opacity:.5,width:400,height:400,alignItems:"center",justifyContent:"center"},backButton:{position:"absolute",left:50,top:50,width:100,height:100,alignItems:"center",justifyContent:"center",borderRadius:10},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"}});function _r(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var Zr=function(e){(0,o.default)(r,e);var t=_r(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,selectedTable:e.route.params.selectedTable,maps:[],thisTable:!!e.route.params.selectedTable,thisUser:!1,overlayChoosePrinterVisible:!1},n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){this.doReload()}},{key:"doReload",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.selectedTable,a=t.thisTable,o=t.thisUser,i=r+"api/debuglogs",s=new URLSearchParams;o&&s.append("msg2",n.userName),a&&s.append("msg4",l.tableId),fetch(i+="?"+s,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({maps:t})}))}},{key:"doLoad",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=t.selectedTable,a=t.thisTable,o=t.thisUser,i=t.maps;if(!(i.length<40)){var s=r+"api/debuglogs",d=new URLSearchParams;d.append("recKey",i[i.length-1].recKey),o&&d.append("msg2",n.userName),a&&d.append("msg4",l.tableId),fetch(s+="?"+d,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?e.setState({overlayProcedureMessageVisible:t.message.toUpperCase()}):e.setState({maps:[].concat((0,j.default)(i),(0,j.default)(t))})}))}}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"doToggleTable",value:function(){var e=this,t=this.state.thisTable;this.setState({thisTable:!t},(function(){return e.doReload()}))}},{key:"doToggleUser",value:function(){var e=this,t=this.state.thisUser;this.setState({thisUser:!t},(function(){return e.doReload()}))}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,l=r.selectedTable,a=r.maps,o=r.thisUser,i=r.thisTable,s=r.overlayProcedureMessageVisible;return console.log("in trace"),(0,O.jsxs)(f.default,{style:en.container,children:[s&&(0,O.jsx)(q,{text:s,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsx)(f.default,{style:en.containerFirst,children:(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsxs)(R.default,{style:en.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:en.buttonText,children:p.default.get("back")})]})})}),(0,O.jsxs)(f.default,{style:en.containerSecond,children:[(0,O.jsxs)(R.default,{style:en.overlayHeader,onPress:function(){return e.traceRef.scrollToOffset({animated:!0,offset:0})},children:[(0,O.jsx)(A.default,{style:en.overlayTitleText,children:p.default.get("action")}),(0,O.jsx)(A.default,{style:en.overlaySubtitleText,children:p.default.get("trace")}),(0,O.jsx)(A.default,{style:en.overlayTitleText})]}),(0,O.jsx)(me.default,{style:{flex:1},ref:function(t){return e.traceRef=t},showsVerticalScrollIndicator:!1,data:a,onEndReachedThreshold:.4,onEndReached:function(){return e.doLoad()},keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var t=e.item;e.index;return(0,O.jsxs)(_.default,{style:{minHeight:40,paddingVertical:5},contentContainerStyle:{alignItems:"center"},horizontal:!0,alwaysBounceHorizontal:!1,showsHorizontalScrollIndicator:!1,children:[(0,O.jsx)(A.default,{style:[en.traceText,{textAlign:"right",width:40,color:L.grey5}],children:Y()(t.createDate).format("ddd")}),(0,O.jsx)(A.default,{style:[en.traceText,{marginLeft:10}],children:Y()(t.createDate).format("HH:mm")}),(0,O.jsxs)(f.default,{style:{width:30,marginHorizontal:5,alignItems:"center"},children:["Fire Course"===t.msg1&&(0,O.jsx)(ue.default,{name:"fire",size:20,color:L.reserved,style:{marginLeft:1}}),"Send Order"===t.msg1&&(0,O.jsx)(ce.default,{name:"send",size:18,color:L.occupied,style:{}}),"Finish Payment"===t.msg1&&(0,O.jsx)(fe.default,{name:"checkbox-blank",size:22,color:L.paid,style:{}}),"Finish Dayclose"===t.msg1&&(0,O.jsx)(fe.default,{name:"moon-full",size:22,color:L.reserved,style:{}}),("Open Table"===t.msg1||"Create Table"===t.msg1||"Reopen Receipt"===t.msg1&&!t.msg3)&&(0,O.jsx)(fe.default,{name:"checkbox-blank",size:22,color:L.occupied,style:{}})]}),(0,O.jsxs)(A.default,{style:[en.traceText,{color:L.grey5}],children:[t.msg2," "]}),(0,O.jsx)(A.default,{style:[en.traceText,{marginLeft:5,color:L.paid}],children:t.msg1}),t.msg5&&(0,O.jsxs)(A.default,{style:[en.traceText,{marginLeft:5,color:L.reserved}],children:['"',t.msg5,'"']}),t.msg6&&(0,O.jsxs)(A.default,{style:[en.traceText,{marginLeft:5,color:L.vacant}],children:["<",t.msg6,">"]}),t.msg4&&(0,O.jsxs)(A.default,{style:[en.traceText,{marginLeft:5,color:L.occupied}],children:["#",t.msg4]}),t.msg3&&(0,O.jsxs)(A.default,{style:[en.traceText,{marginLeft:5,color:L.adhoc}],children:["[",t.msg3,"]"]})]})}})]}),(0,O.jsx)(f.default,{style:en.containerThird,children:(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsxs)(R.default,{style:[en.button],onPress:function(){return e.doToggleUser()},children:[(0,O.jsx)(F.default,{name:"woman",color:"white",size:36}),(0,O.jsx)(A.default,{style:en.buttonText,numberOfLines:1,children:o?n.userName:p.default.get("all")+" "+p.default.get("user")})]}),(0,O.jsxs)(R.default,{style:[en.button],disabled:!l,onPress:function(){return e.doToggleTable()},children:[(0,O.jsx)(F.default,{name:"appstore-o",color:"white",size:36}),(0,O.jsx)(A.default,{style:en.buttonText,children:i?p.default.get("table")+" "+l.tableId:p.default.get("all")+" "+p.default.get("table")})]})]})})]})}}]),r}(d.Component),en=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},containerFirst:{flex:1,flexDirection:"row",padding:10},containerSecond:{flex:6,marginVertical:10,borderRadius:5,backgroundColor:L.grey3},containerThird:{flex:1,flexDirection:"row",padding:10},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},overlayHeader:{marginVertical:15,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6,textAlign:"center"},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white",textAlign:"center"},traceText:{fontFamily:"varela-round",color:"white",fontSize:12}});function tn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var rn=function(e){(0,o.default)(r,e);var t=tn(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,menus:[],availableMenus:[],limiteds:[],updateds:[],searchText:"",displayMode:"ALL",overlayRequestPrivilegeVisible:!1,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:"",loading:!1},n.handleSelectMenu=n.handleSelectMenu.bind((0,S.default)(n)),n.handleSelectUpdated=n.handleSelectUpdated.bind((0,S.default)(n)),n.handlePressDisplayMode=n.handlePressDisplayMode.bind((0,S.default)(n)),n.handleSubmit=n.handleSubmit.bind((0,S.default)(n)),n.handleUpdateMenu=n.handleUpdateMenu.bind((0,S.default)(n)),n.handleSearchText=n.handleSearchText.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){this.doGet(),this.doGetMenu()}},{key:"doGet",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=r+"api/restmenu-serve",a=new URLSearchParams;a.append("shopId",n.shopId),l+="?"+a,console.log(l),fetch(l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?console.log(t.message):e.setState({limiteds:t})}))}},{key:"doGetMenu",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=r+"api/menus",a=new URLSearchParams;a.append("orgId",n.orgId),a.append("shopId",n.shopId),l+="?"+a,console.log(l),fetch(l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?console.log(t.message):e.setState({menus:(0,j.default)(new Map(t.map((function(e){return[e.menuId,e]}))).values()),availableMenus:(0,j.default)(new Map(t.map((function(e){return[e.menuId,e]}))).values())})}))}},{key:"handleSelectMenu",value:function(e){var t=this.state,r=(t.menus,t.updateds),n=t.limiteds;if(!r.some((function(t){return t.recKey===e.recKey}))){var l=r,a=e,o=null==n?void 0:n.find((function(t){return t.restmenuRecKey===e.recKey}));a.statusFlg=(null==o?void 0:o.statusFlg)||"A",l.push(a),this.setState({updateds:l})}}},{key:"handleSelectUpdated",value:function(e){var t=this.state,r=(t.menus,t.updateds);r=r.filter((function(t){return t.recKey!==e.recKey})),this.setState({updateds:r})}},{key:"handleSubmit",value:function(){var e=this.state.updateds,t=[];t.push({text:"Yes",handleText:"handleUpdateMenu"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Update Menu",text:"Update "+e.length+" menus?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"handleUpdateMenu",value:function(e){var t=this,r=this.props.navigation,n=this.state,l=n.home,a=n.settings,o=n.privileges,i=n.serviceEntry,s=n.updateds;if("Y"===l.adminFlg||o.some((function(e){return"UPDATEMENU"===e.priId}))||e){var d=s.map((function(e){return{recKey:e.recKey,newStatusFlg:"A"===e.statusFlg?"B":"A"}})).reduce((function(e,t){return e+t.recKey+","+t.newStatusFlg+","}),""),c=i+"api/update-restmenu",u={userId:l.userId,orgId:l.orgId,shopId:l.shopId,restmenuRecKeys:d};this.setState({loading:!0}),fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){var n;console.log("post update-restmenu successful"),"Y"===(null==(n=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:n.setString)&&K(i,"Update Menu",l.userName,e.message,"","",s.map((function(e){return{menuId:e.menuId,newStatusFlg:"A"===e.statusFlg?"B":"A"}})).reduce((function(e,t){return e+t.menuId+","+t.newStatusFlg+","}),"")),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):r.navigate("Login",{sync:new Date})})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!0})}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.menus,n=(t.availableMenus,t.searchText,[]);this.setState({searchText:e,displayMode:"ALL"});var l=e.toUpperCase();n=r,e?(n=n.filter((function(e){return e.menuName.toUpperCase().includes(l)||e.menuId.toUpperCase().includes(l)})),this.setState({availableMenus:n})):this.setState({availableMenus:n})}},{key:"handlePressDisplayMode",value:function(){var e=this.state,t=e.displayMode,r=e.menus,n=e.limiteds;"INACTIVE ONLY"===t?this.setState({availableMenus:r,searchText:"",displayMode:"ALL"}):"ALL"===t&&this.setState({availableMenus:r.filter((function(e){return n.some((function(t){return t.restmenuRecKey===e.recKey&&"B"===t.statusFlg}))})),searchText:"",displayMode:"INACTIVE ONLY"})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.settings;if(e){var o=l+"api/super-user",i={locId:n.locId,accessCode:e,priId:"UPDATEMENU"};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access UPDATEMENU",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.handleUpdateMenu(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"handleUpdateMenu"===e&&this.handleUpdateMenu()}},{key:"renderItem",value:function(e){var t=this,r=this.state.limiteds,n=null==r?void 0:r.find((function(t){return t.restmenuRecKey===e.recKey}));return(0,O.jsxs)(R.default,{style:nn.grid,onPress:function(){return t.handleSelectMenu(e)},children:[(0,O.jsxs)(f.default,{style:nn.gridFirst,children:[(0,O.jsx)(f.default,{style:nn.gridFirstLeft,children:(0,O.jsx)(A.default,{style:nn.gridFirstLeftText,children:e.menuId})}),(0,O.jsx)(f.default,{style:nn.gridFirstRight,children:"B"===(null==n?void 0:n.statusFlg)?(0,O.jsx)(A.default,{style:[nn.gridFirstRightText,{color:L.paid}],children:"INACTIVE"}):(0,O.jsx)(A.default,{style:[nn.gridFirstRightText,{color:L.reserved}],children:"ACTIVE"})})]}),(0,O.jsx)(f.default,{style:nn.gridSecond,children:(0,O.jsx)(A.default,{style:nn.gridSecondText,children:e.menuName})}),(0,O.jsxs)(f.default,{style:nn.gridThird,children:[(0,O.jsx)(f.default,{style:nn.gridThirdLeft,children:(0,O.jsxs)(A.default,{style:[nn.gridThirdRightText,{color:L.reserved}],children:["KOT ",e.kotType||"-"]})}),(0,O.jsx)(f.default,{style:nn.gridThirdRight,children:(0,O.jsxs)(A.default,{style:nn.gridThirdRightText,children:["$",e.listPrice.toFixed(2)]})})]})]})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,l=r.availableMenus,a=r.updateds,o=r.searchText,i=r.displayMode,s=r.overlayRequestAccessVisible,d=r.overlayProcedureMessageVisible,c=r.overlayAlertVisible,u=r.overlayAlertInputValue,h=r.loading;return console.log("in activate"),(0,O.jsxs)(f.default,{style:nn.container,children:[c&&(0,O.jsx)(ee,{input:u,handleUpdateFromAlert:this.handleUpdateFromAlert}),d&&(0,O.jsx)(q,{text:d,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),s&&(0,O.jsx)(Ue,{home:n,requestedPrivilege:"UPDATEMENU",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),(0,O.jsxs)(f.default,{style:nn.leftContainer,children:[(0,O.jsx)(f.default,{style:nn.navigateContainer,children:(0,O.jsxs)(f.default,{style:nn.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:nn.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:nn.buttonText,children:p.default.get("back")})]}),(0,O.jsx)(f.default,{style:nn.selectionContainer})]})}),(0,O.jsx)(f.default,{style:nn.displayContainer,children:(0,O.jsxs)(f.default,{style:[nn.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:nn.gap}),(0,O.jsxs)(f.default,{style:nn.gridContainer,children:[(0,O.jsxs)(f.default,{style:nn.searchBox,children:[(0,O.jsx)(w.default,{style:nn.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:o,onChangeText:function(t){return e.handleSearchText(t)}}),(0,O.jsx)(R.default,{style:nn.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsxs)(f.default,{style:nn.searchBoxInfo,children:[(0,O.jsx)(R.default,{style:nn.searchBoxInfoLeft,onPress:function(){return e.handlePressDisplayMode()},children:(0,O.jsx)(A.default,{style:nn.searchBoxInfoText,children:i})}),(0,O.jsx)(f.default,{style:nn.searchBoxInfoRight,children:(0,O.jsxs)(A.default,{style:nn.searchBoxInfoText,children:[l.length," ITEMS"]})})]}),(0,O.jsx)(me.default,{style:{flex:1},data:l,showsVerticalScrollIndicator:!1,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return e.renderItem(r)}})]}),(0,O.jsx)(f.default,{style:nn.gap})]})})]}),(0,O.jsxs)(f.default,{style:nn.rightContainer,children:[(0,O.jsx)(f.default,{style:nn.displayContainer,children:(0,O.jsxs)(f.default,{style:[nn.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:nn.gap}),(0,O.jsxs)(f.default,{style:nn.gridContainer,children:[(0,O.jsx)(f.default,{style:[nn.searchBox,{backgroundColor:L.grey3}]}),(0,O.jsxs)(f.default,{style:nn.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:[nn.titleSecondContainer,{flex:3}],children:(0,O.jsxs)(A.default,{style:nn.titleText,children:[a.length," Changes"]})}),(0,O.jsx)(f.default,{style:[nn.titleFourthContainer,{flex:1}],children:(0,O.jsx)(A.default,{style:nn.titleText,children:"New Status"})})]}),(0,O.jsx)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:a?a.map((function(t,r){return(0,O.jsxs)(R.default,{style:nn.grid,onPress:function(){return e.handleSelectUpdated(t)},children:[(0,O.jsxs)(f.default,{style:nn.gridFirst,children:[(0,O.jsx)(f.default,{style:nn.gridFirstLeft,children:(0,O.jsx)(A.default,{style:nn.gridFirstLeftText,children:t.menuId})}),(0,O.jsx)(f.default,{style:nn.gridFirstRight,children:"B"===t.statusFlg?(0,O.jsx)(A.default,{style:[nn.gridFirstRightText,{color:L.reserved}],children:"ACTIVE"}):(0,O.jsx)(A.default,{style:[nn.gridFirstRightText,{color:L.paid}],children:"INACTIVE"})})]}),(0,O.jsx)(f.default,{style:nn.gridSecond,children:(0,O.jsx)(A.default,{style:nn.gridSecondText,children:t.menuName})}),(0,O.jsxs)(f.default,{style:nn.gridThird,children:[(0,O.jsx)(f.default,{style:nn.gridThirdLeft,children:(0,O.jsxs)(A.default,{style:[nn.gridThirdRightText,{color:L.reserved}],children:["KOT ",t.kotType||"-"]})}),(0,O.jsx)(f.default,{style:nn.gridThirdRight,children:(0,O.jsxs)(A.default,{style:nn.gridThirdRightText,children:["$",t.listPrice.toFixed(2)]})})]})]},r)})):null})]}),(0,O.jsx)(f.default,{style:nn.gap})]})}),(0,O.jsx)(f.default,{style:nn.navigateContainer,children:(0,O.jsx)(f.default,{style:nn.navigateWrapper,children:(0,O.jsxs)(R.default,{style:[nn.button,(h||0===a.length)&&{opacity:.2}],disabled:h||0===a.length,onPress:function(){return e.handleSubmit()},children:[(0,O.jsx)(F.default,{name:"bulb1",color:"white",size:36}),(0,O.jsx)(A.default,{style:nn.buttonText,children:p.default.get("update")})]})})})]})]})}}]),r}(d.Component),nn=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function ln(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var an=function(e){(0,o.default)(r,e);var t=ln(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,menus:[],availableMenus:[],limiteds:[],searchText:"",displayMode:"ALL",selectedMenu:null,statusFlg:"",onlineStatusFlg:"",serveLimit:"",loading:!1},n.handlePressDisplayMode=n.handlePressDisplayMode.bind((0,S.default)(n)),n.handleSearchText=n.handleSearchText.bind((0,S.default)(n)),n.handleUpdateFromRequestAccess=n.handleUpdateFromRequestAccess.bind((0,S.default)(n)),n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){this.doGet(),this.doGetMenu()}},{key:"doGet",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=r+"api/restmenu-serve",a=new URLSearchParams;a.append("shopId",n.shopId),l+="?"+a,console.log(l),fetch(l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?console.log(t.message):e.setState({limiteds:t})}))}},{key:"doGetMenu",value:function(){var e=this,t=this.state,r=t.serviceEntry,n=t.home,l=r+"api/menus",a=new URLSearchParams;a.append("orgId",n.orgId),a.append("shopId",n.shopId),l+="?"+a,console.log(l),fetch(l,{method:"GET"}).then((function(e){return e.json()})).then((function(t){t.message?console.log(t.message):e.setState({menus:(0,j.default)(new Map(t.map((function(e){return[e.menuId,e]}))).values()),availableMenus:(0,j.default)(new Map(t.map((function(e){return[e.menuId,e]}))).values())})}))}},{key:"doSelectMenu",value:function(e){var t,r,n,l=this.state.limiteds;this.setState({selectedMenu:e,statusFlg:(null==l||null==(t=l.find((function(t){return t.restmenuRecKey===e.recKey})))?void 0:t.statusFlg)||"A",onlineStatusFlg:(null==l||null==(r=l.find((function(t){return t.restmenuRecKey===e.recKey})))?void 0:r.onlineStatusFlg)||"A",serveLimit:(null==l||null==(n=l.find((function(t){return t.restmenuRecKey===e.recKey})))?void 0:n.serveLimit.toString())||"0"})}},{key:"doToggleStatus",value:function(){"A"===this.state.statusFlg?this.setState({statusFlg:"B"}):this.setState({statusFlg:"A"})}},{key:"doToggleOnlineStatus",value:function(){"A"===this.state.onlineStatusFlg?this.setState({onlineStatusFlg:"B"}):this.setState({onlineStatusFlg:"A"})}},{key:"doSubmit",value:function(){var e=this.state.selectedMenu,t=[];t.push({text:"Yes",handleText:"doLimitMenu"}),this.setState({overlayAlertInputValue:{title:p.default.get("action"),subtitle:"Limit Menu",text:"Limit "+e.menuName+"?",ok:!1,cancel:!0,options:t},overlayAlertVisible:!0})}},{key:"doLimitMenu",value:function(e){var t=this,r=(this.props.navigation,this.state),n=r.home,l=r.settings,a=(r.privileges,r.serviceEntry),o=r.selectedMenu,i=r.statusFlg,s=r.serveLimit,d=r.onlineStatusFlg,c=a+"api/update-restmenu-serve",u={userId:n.userId,orgId:n.orgId,shopId:n.shopId,restmenuRecKey:o.recKey,statusFlg:i,onlineStatusFlg:d,serveLimit:s};this.setState({loading:!0}),fetch(c,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post update-restmenu-serve"),"Y"===(null==(r=l.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(a,"Limit Menu",n.userName,e.message,"",o.menuName,s+","+i+","+d),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase(),loading:!1}):t.setState({loading:!1,displayMode:"ALL",menus:(0,j.default)(new Map(e.map((function(e){return[e.menuId,e]}))).values()),availableMenus:(0,j.default)(new Map(e.map((function(e){return[e.menuId,e]}))).values())},(function(){return t.doGet()}))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}},{key:"handleSearchText",value:function(e){var t=this.state,r=t.menus,n=(t.availableMenus,t.searchText,[]);this.setState({searchText:e,displayMode:"ALL"});var l=e.toUpperCase();n=r,e?(n=n.filter((function(e){return e.menuName.toUpperCase().includes(l)||e.menuId.toUpperCase().includes(l)})),this.setState({availableMenus:n})):this.setState({availableMenus:n})}},{key:"handlePressDisplayMode",value:function(){var e=this.state,t=e.displayMode,r=e.menus,n=(e.availableMenus,e.limiteds);"LIMITED ONLY"===t?this.setState({availableMenus:r,searchText:"",displayMode:"ALL"}):"ALL"===t&&this.setState({availableMenus:r.filter((function(e){return null==n?void 0:n.some((function(t){return t.restmenuRecKey===e.recKey}))})),searchText:"",displayMode:"LIMITED ONLY"})}},{key:"handleUpdateFromRequestAccess",value:function(e){var t=this,r=this.state,n=r.home,l=r.serviceEntry,a=r.settings;if(e){var o=l+"api/super-user",i={locId:n.locId,accessCode:e,priId:"UPDATEMENU"};fetch(o,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){var r;console.log("post super-user successful",e),"Y"===(null==(r=a.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:r.setString)&&K(l,"Request Access UPDATEMENU",n.userName,e.message,"","",e.userId),e.message?t.setState({overlayProcedureMessageVisible:e.message.toUpperCase()}):(t.setState({overlayRequestAccessVisible:!1}),t.doLimitMenu(e.userId))})).catch((function(e){console.log(e),t.setState({loading:!1})}))}else this.setState({overlayRequestAccessVisible:!1})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"doLimitMenu"===e&&this.doLimitMenu()}},{key:"renderItem",value:function(e){var t=this,r=this.state.limiteds,n=null==r?void 0:r.find((function(t){return t.restmenuRecKey===e.recKey}));return(0,O.jsxs)(R.default,{style:on.grid,onPress:function(){return t.doSelectMenu(e)},children:[(0,O.jsxs)(f.default,{style:on.gridFirst,children:[(0,O.jsx)(f.default,{style:on.gridFirstLeft,children:(0,O.jsx)(A.default,{style:on.gridFirstLeftText,children:e.menuId})}),(0,O.jsx)(f.default,{style:on.gridFirstRight,children:"B"===(null==n?void 0:n.statusFlg)?(0,O.jsx)(A.default,{style:[on.gridFirstRightText,{color:L.paid}],children:"INACTIVE"}):(0,O.jsx)(A.default,{style:[on.gridFirstRightText,{color:L.reserved}],children:"ACTIVE"})})]}),(0,O.jsx)(f.default,{style:on.gridSecond,children:(0,O.jsx)(A.default,{style:on.gridSecondText,children:e.menuName})}),(0,O.jsxs)(f.default,{style:on.gridThird,children:[(0,O.jsx)(f.default,{style:on.gridThirdLeft,children:(0,O.jsxs)(A.default,{style:[on.gridThirdRightText,{color:L.reserved}],children:["KOT ",e.kotType||"-"]})}),(0,O.jsx)(f.default,{style:on.gridThirdRight,children:(0,O.jsxs)(A.default,{style:on.gridThirdRightText,children:["$",e.listPrice.toFixed(2)]})})]}),(0,O.jsxs)(f.default,{style:on.gridThird,children:[(0,O.jsx)(f.default,{style:on.gridThirdLeft,children:n&&0!==(null==n?void 0:n.serveLimit)&&(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",color:L.vacant,fontSize:12},children:["LIMIT ",n.serveLimit," SERVED ",n.serveCount]})}),(0,O.jsx)(f.default,{style:on.gridThirdRight,children:n&&"B"===(null==n?void 0:n.onlineStatusFlg)?(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",color:L.grey7,fontSize:12},children:["ONLINE ORDER ",(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.paid,fontSize:12},children:"OFF"})]}):(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.grey7,fontSize:12},children:"  "})})]})]})}},{key:"render",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.home,l=r.availableMenus,a=r.selectedMenu,o=r.searchText,i=r.displayMode,s=r.overlayRequestAccessVisible,d=r.overlayProcedureMessageVisible,c=r.overlayAlertVisible,u=r.overlayAlertInputValue,h=r.loading,y=r.statusFlg,g=r.onlineStatusFlg,m=r.serveLimit;return console.log("in activate"),(0,O.jsxs)(f.default,{style:on.container,children:[c&&(0,O.jsx)(ee,{input:u,handleUpdateFromAlert:this.handleUpdateFromAlert}),d&&(0,O.jsx)(q,{text:d,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),s&&(0,O.jsx)(Ue,{home:n,requestedPrivilege:"UPDATEMENU",handleUpdateFromRequestAccess:this.handleUpdateFromRequestAccess}),(0,O.jsxs)(f.default,{style:on.leftContainer,children:[(0,O.jsx)(f.default,{style:on.navigateContainer,children:(0,O.jsxs)(f.default,{style:on.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:on.button,onPress:function(){return t.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:on.buttonText,children:p.default.get("back")})]}),(0,O.jsx)(f.default,{style:on.selectionContainer})]})}),(0,O.jsx)(f.default,{style:on.displayContainer,children:(0,O.jsxs)(f.default,{style:[on.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:on.gap}),(0,O.jsxs)(f.default,{style:on.gridContainer,children:[(0,O.jsxs)(f.default,{style:on.searchBox,children:[(0,O.jsx)(w.default,{style:on.searchBoxInputValue,placeholder:"ENTER SEARCH TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:o,onChangeText:function(t){return e.handleSearchText(t)}}),(0,O.jsx)(R.default,{style:on.searchBoxButton,onPress:function(){e.setState({searchText:""},(function(){return e.handleSearchText("")})),be.default.dismiss()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsxs)(f.default,{style:on.searchBoxInfo,children:[(0,O.jsx)(R.default,{style:on.searchBoxInfoLeft,onPress:function(){return e.handlePressDisplayMode()},children:(0,O.jsx)(A.default,{style:on.searchBoxInfoText,children:i})}),(0,O.jsx)(f.default,{style:on.searchBoxInfoRight,children:(0,O.jsxs)(A.default,{style:on.searchBoxInfoText,children:[l.length," ITEMS"]})})]}),(0,O.jsx)(me.default,{style:{flex:1},data:l,showsVerticalScrollIndicator:!1,keyExtractor:function(e,t){return t.toString()},renderItem:function(t){var r=t.item;return e.renderItem(r)}})]}),(0,O.jsx)(f.default,{style:on.gap})]})})]}),(0,O.jsxs)(f.default,{style:on.rightContainer,children:[(0,O.jsx)(f.default,{style:on.displayContainer,children:(0,O.jsxs)(f.default,{style:[on.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:on.gap}),a&&(0,O.jsxs)(f.default,{style:{flex:1,backgroundColor:L.grey3,borderRadius:5},children:[(0,O.jsxs)(f.default,{style:{alignItems:"center",marginTop:10},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.paid,fontSize:16},children:a.menuId}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},children:a.menuName})]}),(0,O.jsxs)(f.default,{style:on.inputContainer,children:[(0,O.jsxs)(f.default,{style:on.inputRow,children:[(0,O.jsx)(f.default,{style:on.inputRowLeft,children:(0,O.jsx)(A.default,{style:on.inputRowLeftText,children:"Status"})}),(0,O.jsx)(R.default,{style:on.inputRowRight,onPress:function(){return e.doToggleStatus()},children:(0,O.jsx)(A.default,{style:[on.inputRowRightText,{color:"A"===y?L.reserved:L.paid}],children:"A"===y?"Active":"Inactive"})})]}),(0,O.jsxs)(f.default,{style:on.inputRow,children:[(0,O.jsx)(f.default,{style:on.inputRowLeft,children:(0,O.jsx)(A.default,{style:on.inputRowLeftText,children:"Online Order"})}),(0,O.jsx)(R.default,{style:on.inputRowRight,onPress:function(){return e.doToggleOnlineStatus()},children:(0,O.jsx)(A.default,{style:[on.inputRowRightText,{color:"A"===g?L.reserved:L.paid}],children:"A"===g?"On":"Off"})})]}),(0,O.jsxs)(f.default,{style:on.inputRow,children:[(0,O.jsx)(f.default,{style:on.inputRowLeft,children:(0,O.jsx)(A.default,{style:on.inputRowLeftText,children:"Limit"})}),(0,O.jsx)(f.default,{style:on.inputRowRight,children:(0,O.jsx)(w.default,{style:on.textInput,keyboardType:"numeric",selectTextOnFocus:!0,value:m,onChangeText:function(t){return e.setState({serveLimit:t})}})})]})]})]}),(0,O.jsx)(f.default,{style:on.gap})]})}),(0,O.jsx)(f.default,{style:on.navigateContainer,children:(0,O.jsx)(f.default,{style:on.navigateWrapper,children:(0,O.jsxs)(R.default,{style:[on.button,!a&&{opacity:.2}],disabled:h||!a,onPress:function(){return e.doSubmit()},children:[(0,O.jsx)(F.default,{name:"staro",color:"white",size:36}),(0,O.jsx)(A.default,{style:on.buttonText,children:p.default.get("update")})]})})})]})]})}}]),r}(d.Component),on=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},button:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"},inputContainer:{marginTop:30,marginHorizontal:5},inputRow:{flexDirection:"row",height:40,margin:5},inputRowLeft:{flex:1,paddingLeft:10,justifyContent:"center"},inputRowRight:{flex:1,backgroundColor:L.grey1,borderRadius:5,justifyContent:"center",alignItems:"flex-end"},inputRowLeftText:{color:"white",fontFamily:"varela-round",fontSize:16},inputRowRightText:{paddingHorizontal:10,color:"white",fontFamily:"varela-round",fontSize:16},textInput:{paddingHorizontal:10,flex:1,width:"100%",textAlign:"right",color:"white",fontFamily:"varela-round",fontSize:16}});function sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var dn=function(e){(0,o.default)(r,e);var t=sn(r);function r(e){var n;return(0,l.default)(this,r),(n=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,masters:e.route.params.masters,selectedTable:e.route.params.selectedTable,tableItems:e.route.params.tableItems,kitchenmsgs:e.route.params.masters.kitchenmsgs,kottypes:e.route.params.masters.kottypes,privileges:e.route.params.masters.privileges,settings:e.route.params.masters.settings,remark:"",selectedTableItems:[],selectedKottypes:[],selectedKitchenmsg:null,overlayRequestPrivilegeVisible:!1,overlayProcedureMessageVisible:!1,overlayAlertVisible:!1,overlayAlertInputValue:""},n.handleUpdateFromAlert=n.handleUpdateFromAlert.bind((0,S.default)(n)),n.handleUpdateFromProcedureMessage=n.handleUpdateFromProcedureMessage.bind((0,S.default)(n)),n}return(0,a.default)(r,[{key:"componentDidMount",value:function(){}},{key:"doReset",value:function(){be.default.dismiss(),this.setState({selectedKitchenmsg:null,selectedKottypes:[],selectedTableItems:[],remark:""})}},{key:"doPressFire",value:function(){var e=this.state;e.selectedKottypes,e.selectedTableItems,e.remark;this.doSubmit()}},{key:"doPressKitchenmsg",value:function(e){var t,r=this.state,n=r.selectedKitchenmsg,l=r.kottypes;(null==n?void 0:n.recKey)===(null==e?void 0:e.recKey)?this.setState({selectedKitchenmsg:null,remark:"",selectedKottypes:[]}):this.setState({selectedKitchenmsg:e,remark:e.name,selectedKottypes:(null==(t=e.kotTypes)?void 0:t.split(",").map((function(e){return l.find((function(t){return t.kotType===e}))})))||[]})}},{key:"doPressTableItem",value:function(e){var t=this.state.selectedTableItems,r=t;t.some((function(t){return t.recKey===e.recKey}))?r=t.filter((function(t){return t.recKey!==e.recKey})):r.push(e),this.setState({selectedTableItems:r})}},{key:"doPressKottype",value:function(e){var t=this.state.selectedKottypes,r=t;t.some((function(t){return t.recKey===e.recKey}))?r=t.filter((function(t){return t.recKey!==e.recKey})):r.push(e),this.setState({selectedKottypes:r})}},{key:"doPressAllKottype",value:function(){var e=this.state,t=e.selectedKottypes,r=e.kottypes;r.some((function(e){return!t.some((function(t){return t.recKey===e.recKey}))}))?this.setState({selectedKottypes:r}):this.setState({selectedKottypes:[]})}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""}),e&&"doSubmit"===e&&this.doSubmit()}},{key:"doSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,l=r.home,a=r.selectedTable,o=(r.masters,r.settings),i=r.selectedKitchenmsg,s=r.selectedTableItems,d=r.selectedKottypes,c=r.remark,u=n+"api/tables/"+a.recKey+"/fire-kot",f={userId:l.userId,orgId:l.orgId,locId:l.locId,opentableRecKey:a.recKey,remark:c,kotTypes:d.map((function(e){return e.kotType})).join(","),opentableItemRecKeys:s.map((function(e){return e.recKey})).join(","),msgId:null==i?void 0:i.msgId};console.log(f),fetch(u,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(f)}).then((function(e){return e.json()})).then((function(r){var i;console.log("post fire-kot successful",r),"Y"===(null==(i=o.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:i.setString)&&K(n,"Fire Course",l.userName,r.message,a.tableId,"",c+" ("+s.map((function(e){return e.menuId})).join(",")+") ("+d.map((function(e){return e.kotType})).join(",")+")"),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase()}):t.goBack()}))}},{key:"render",value:function(){var e,t=this,r=this.props.navigation,n=this.state,l=(n.home,n.remark),a=n.kottypes,o=n.kitchenmsgs,i=n.tableItems,s=n.selectedKitchenmsg,d=n.selectedTableItems,c=n.selectedKottypes,u=n.overlayProcedureMessageVisible,h=n.overlayAlertVisible,y=n.overlayAlertInputValue;return(0,O.jsxs)(f.default,{style:cn.container,children:[h&&(0,O.jsx)(ee,{input:y,handleUpdateFromAlert:this.handleUpdateFromAlert}),u&&(0,O.jsx)(q,{text:u,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsxs)(f.default,{style:cn.leftContainer,children:[(0,O.jsx)(f.default,{style:cn.navigateContainer,children:(0,O.jsxs)(f.default,{style:cn.navigateWrapper,children:[(0,O.jsxs)(R.default,{style:cn.navigateButton,onPress:function(){return r.goBack()},children:[(0,O.jsx)(F.default,{name:"left",color:"white",size:36}),(0,O.jsx)(A.default,{style:cn.navigateButtonText,children:p.default.get("back")})]}),(0,O.jsx)(f.default,{style:cn.selectionContainer})]})}),(0,O.jsx)(f.default,{style:cn.displayContainer,children:(0,O.jsxs)(f.default,{style:[cn.displayWrapper,{paddingRight:5}],children:[(0,O.jsx)(f.default,{style:cn.gap}),(0,O.jsxs)(f.default,{style:cn.gridContainer,children:[(0,O.jsxs)(f.default,{style:cn.searchBox,children:[(0,O.jsx)(w.default,{style:cn.searchBoxInputValue,placeholder:"ENTER MESSAGE",placeholderTextColor:"rgba(255,255,255,0.2)",value:l,onChangeText:function(e){return t.setState({remark:e})}}),(0,O.jsx)(R.default,{style:cn.searchBoxButton,onPress:function(){return t.doReset()},children:(0,O.jsx)(F.default,{name:"close",size:24,color:L.grey4})})]}),(0,O.jsx)(f.default,{style:cn.searchBoxInfo,children:(0,O.jsx)(f.default,{style:cn.titleSecondContainer,children:(0,O.jsx)(A.default,{style:cn.titleText,children:"Desc"})})}),(0,O.jsx)(me.default,{style:{flex:1,marginHorizontal:2.5},showsVerticalScrollIndicator:!1,data:o,numColumns:2,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var r=e.item;return(0,O.jsx)(R.default,{style:[cn.tableItemContainer,{marginHorizontal:2.5},(null==s?void 0:s.recKey)===(null==r?void 0:r.recKey)&&{backgroundColor:L.occupied}],onPress:function(){return t.doPressKitchenmsg(r)},children:(0,O.jsx)(f.default,{style:cn.tableItemSecondContainer,children:(0,O.jsx)(A.default,{style:cn.tableItemText,children:r.name})})})}})]}),(0,O.jsx)(f.default,{style:cn.gap})]})})]}),(0,O.jsxs)(f.default,{style:cn.rightContainer,children:[(0,O.jsx)(f.default,{style:cn.displayContainer,children:(0,O.jsxs)(f.default,{style:[cn.displayWrapper,{paddingLeft:5}],children:[(0,O.jsx)(f.default,{style:cn.gap}),(0,O.jsxs)(f.default,{style:cn.gridContainer,children:[(0,O.jsxs)(f.default,{style:cn.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:cn.titleFirstContainer,children:(0,O.jsx)(A.default,{style:cn.titleText,children:"Qty"})}),(0,O.jsx)(f.default,{style:cn.titleSecondContainer,children:(0,O.jsx)(A.default,{style:cn.titleText,children:"Desc"})}),(0,O.jsx)(f.default,{style:cn.titleThirdContainer,children:(0,O.jsx)(A.default,{style:cn.titleText,children:"Price"})}),(0,O.jsx)(f.default,{style:cn.titleFourthContainer,children:(0,O.jsx)(A.default,{style:cn.titleText,children:"Total"})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:i,keyExtractor:function(e){return e.recKey.toString()},renderItem:function(e){var r=e.item;return(0,O.jsxs)(R.default,{style:[cn.tableItemContainer,d.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:L.occupied},r.refRecKey&&{opacity:.2}],disabled:!!r.refRecKey,onPress:function(){return t.doPressTableItem(r)},children:[(0,O.jsx)(f.default,{style:[cn.tableItemFirstContainer,"Y"===r.fireFlg&&{borderRightColor:L.reserved}],children:(0,O.jsx)(A.default,{style:cn.tableItemText,children:r.orderQty})}),(0,O.jsxs)(f.default,{style:cn.tableItemSecondContainer,children:[(0,O.jsxs)(A.default,{style:cn.tableItemText,children:[r.refRecKey?"- ":null,r.menuName]}),r.menuMod?(0,O.jsx)(A.default,{style:cn.tableItemModText,children:r.menuMod}):null]}),(0,O.jsx)(f.default,{style:cn.tableItemThirdContainer,children:(0,O.jsx)(A.default,{style:cn.tableItemText,children:r.netPrice&&r.netPrice.toFixed(2)})}),(0,O.jsx)(f.default,{style:cn.tableItemFourthContainer,children:(0,O.jsx)(A.default,{style:cn.tableItemText,children:r.lineTotal&&r.lineTotal.toFixed(2)})})]})}})]}),(0,O.jsx)(f.default,{style:cn.gap}),(0,O.jsxs)(f.default,{style:cn.gridContainer,children:[(0,O.jsxs)(f.default,{style:cn.searchBoxInfo,children:[(0,O.jsx)(f.default,{style:{paddingLeft:10,alignItems:"center",justifyContent:"center"},children:(0,O.jsx)(A.default,{style:cn.titleText,children:"Destination"})}),(0,O.jsx)(f.default,{style:cn.titleFourthContainer,children:c.length>1?(0,O.jsx)(A.default,{style:[cn.titleText,{color:"white"}],children:"Various"}):1===c.length?(0,O.jsx)(A.default,{style:[cn.titleText,{color:"white"}],children:null==a||null==(e=a.find((function(e){return e.kotType===c[0].kotType})))?void 0:e.kotName}):(0,O.jsx)(A.default,{style:[cn.titleText,{color:"white"}],children:"-"})})]}),(0,O.jsx)(me.default,{style:{flex:1},showsVerticalScrollIndicator:!1,data:a,keyExtractor:function(e){return e.recKey.toString()},ListHeaderComponent:(0,O.jsx)(R.default,{style:[cn.tableItemContainer,!a.some((function(e){return!c.some((function(t){return t.recKey===e.recKey}))}))&&{backgroundColor:L.occupied}],onPress:function(){return t.doPressAllKottype()},children:(0,O.jsx)(f.default,{style:cn.tableItemSecondContainer,children:(0,O.jsx)(A.default,{style:cn.tableItemText,children:"ALL KOT PRINTERS"})})}),renderItem:function(e){var r=e.item;return(0,O.jsx)(R.default,{style:[cn.tableItemContainer,c.some((function(e){return e.recKey===r.recKey}))&&{backgroundColor:L.occupied}],onPress:function(){return t.doPressKottype(r)},children:(0,O.jsxs)(f.default,{style:[cn.tableItemSecondContainer,{flexDirection:"row",justifyContent:"space-between",paddingRight:10,alignItems:"center"}],children:[(0,O.jsx)(A.default,{style:cn.tableItemText,children:r.kotName}),(0,O.jsx)(A.default,{style:cn.tableItemText,children:r.kotType})]})})}})]}),(0,O.jsx)(f.default,{style:cn.gap})]})}),(0,O.jsx)(f.default,{style:cn.navigateContainer,children:(0,O.jsx)(f.default,{style:cn.navigateWrapper,children:(0,O.jsxs)(R.default,{style:[cn.navigateButton,(0===d.length&&0===c.length||!l)&&{opacity:.2}],disabled:0===d.length&&0===c.length||!l,onPress:function(){return t.doPressFire()},children:[(0,O.jsx)(F.default,{name:"customerservice",color:"white",size:36}),(0,O.jsx)(A.default,{style:cn.navigateButtonText,children:p.default.get("fire")})]})})})]})]})}}]),r}(d.Component),cn=u.default.create({container:{flex:1,flexDirection:"row",backgroundColor:L.grey1},leftContainer:{flex:1,flexDirection:"row"},rightContainer:{flex:1,flexDirection:"row"},displayContainer:{flex:3,backgroundColor:L.grey1},displayWrapper:{flex:1},gridContainer:{flex:1,backgroundColor:L.grey3,borderRadius:5,flexDirection:"column",flexWrap:"wrap",alignItems:"stretch",justifyContent:"center",overflow:"hidden"},searchBox:{backgroundColor:L.grey1,height:50,borderRadius:100,margin:5,marginTop:10,marginBottom:0,flexDirection:"row"},searchBoxInputValue:{flex:1,fontFamily:"varela-round",fontSize:16,color:"white",paddingHorizontal:20,height:50},searchBoxButton:{height:50,width:50,alignItems:"center",justifyContent:"center",borderRadius:50},searchBoxInfo:{height:20,margin:5,flexDirection:"row"},searchBoxInfoLeft:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoRight:{flex:1,alignItems:"center",justifyContent:"center"},searchBoxInfoText:{fontFamily:"varela-round",color:L.grey5},grid:{margin:5,marginTop:0,marginBottom:10,backgroundColor:L.grey4,flexDirection:"column",padding:10},gridFirst:{flexDirection:"row"},gridSecond:{marginVertical:5},gridThird:{flexDirection:"row"},gridFirstLeft:{flex:1},gridFirstRight:{flex:1,alignItems:"flex-end"},gridThirdLeft:{flex:1},gridThirdRight:{flex:1,alignItems:"flex-end"},gridFirstLeftText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridFirstRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},gridSecondText:{color:"white",fontSize:16,fontFamily:"varela-round",opacity:.8},gridThirdRightText:{color:"white",fontSize:12,fontFamily:"varela-round"},navigateContainer:{flex:1,backgroundColor:L.grey1,flexDirection:"column"},navigateWrapper:{flex:1,paddingHorizontal:10,paddingTop:10},navigateButton:{backgroundColor:"transparent",borderRadius:10,aspectRatio:1,alignItems:"center",justifyContent:"center"},navigateButtonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},buttonsContainer:{paddingHorizontal:10,alignItems:"center",justifyContent:"center",flexDirection:"row"},button:{height:100,width:100,margin:5,alignItems:"center",justifyContent:"center",backgroundColor:L.grey1,borderRadius:5},buttonText:{color:"white",fontFamily:"varela-round",fontSize:10,marginTop:10,textTransform:"uppercase"},selectionContainer:{marginTop:10},selection:{backgroundColor:L.grey3,borderRadius:5,alignItems:"center",justifyContent:"center",paddingVertical:30},selectionText:{fontFamily:"varela-round",color:"white",fontSize:12,textAlign:"center"},gap:{padding:5},tableItemText:{fontFamily:"varela-round",color:"white"},tableItemModText:{fontFamily:"varela-round",fontSize:12,color:L.reserved},tableItemContainer:{flex:1,flexDirection:"row",minHeight:50,paddingVertical:5,marginHorizontal:5,marginBottom:5,backgroundColor:L.grey4},tableItemFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:"white"},tableItemSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},tableItemThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},tableItemFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleFirstContainer:{width:50,alignItems:"center",justifyContent:"center",borderRightWidth:3,borderRightColor:L.grey3},titleSecondContainer:{flex:8,justifyContent:"center",paddingLeft:10},titleThirdContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64},titleFourthContainer:{flex:2,alignItems:"flex-end",justifyContent:"center",minWidth:64,paddingRight:10},titleText:{fontFamily:"varela-round",color:L.grey5},overlayHeader:{height:50,marginVertical:5,alignItems:"center",justifyContent:"center"},overlayTitleText:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white",opacity:.6},overlaySubtitleText:{fontFamily:"varela-round",fontSize:24,color:"white"}});function un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?un(Object(r),!0).forEach((function(t){(0,b.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var yn=function(e){(0,o.default)(r,e);var t=hn(r);function r(e){var n,a,o,i,s,d;return(0,l.default)(this,r),(d=t.call(this,e)).state={home:e.route.params.home,serviceEntry:e.route.params.serviceEntry,preference:e.route.params.preference,masters:e.route.params.masters,settings:e.route.params.masters.settings,modBundles:e.route.params.masters.modBundles,mods:e.route.params.masters.mods,selectedTable:e.route.params.selectedTable,selectedMenu:e.route.params.selectedMenu,selectedTableItem:e.route.params.selectedTableItem,tableItems:e.route.params.tableItems,comboGroups:e.route.params.masters.comboGroups.filter((function(t){return t.refMenuId===e.route.params.selectedMenu.menuId})),comboItems:e.route.params.masters.comboItems.filter((function(t){return t.refMenuId===e.route.params.selectedMenu.menuId})),selectedComboItems:[],selectedComboItem:null,loading:!1,menuName:e.route.params.selectedTableItem?null==(n=e.route.params.selectedTableItem)?void 0:n.menuName:e.route.params.selectedMenu.menuName,qtyInput:(null==(a=e.route.params.selectedTableItem)||null==(o=a.orderQty)?void 0:o.toString())||"1",orderType:e.route.params.selectedTableItem?(null==(i=e.route.params.selectedTableItem)?void 0:i.orderType)||"A":"SYS"===(null==(s=e.route.params.selectedTable)?void 0:s.sectionId)?"B":"A"},d.handleUpdateFromProcedureMessage=d.handleUpdateFromProcedureMessage.bind((0,S.default)(d)),d.handleUpdateFromAlert=d.handleUpdateFromAlert.bind((0,S.default)(d)),d}return(0,a.default)(r,[{key:"componentDidMount",value:function(){console.log("mount combo",this.state.comboItems,this.state.selectedComboItems),this.doPrepareComboItems()}},{key:"doPrepareComboItems",value:function(){var e=this.state,t=e.comboItems,r=e.tableItems,n=e.selectedTableItem,l=n?null==r?void 0:r.filter((function(e){return e.refRecKey===n.recKey})):[],a=t.map((function(e){var t,n,l;return fn(fn({},e),{},{modInput:(null==r||null==(t=r.find((function(t){return t.comboitemRecKey===e.recKey})))?void 0:t.menuMod)||"",modRecKeys:(null==r||null==(n=r.find((function(t){return t.comboitemRecKey===e.recKey})))||null==(l=n.modRecKeys)?void 0:l.split(","))||[]})})),o=a.filter((function(e){return l.some((function(t){return t.comboitemRecKey===e.recKey}))}));this.setState({comboItems:a,selectedComboItems:o})}},{key:"doComboItemModInput",value:function(e){var t=this.state,r=t.comboItems,n=t.selectedComboItem,l=r;l.find((function(e){return e.recKey===n.recKey})).modInput=e,this.setState({comboItems:l})}},{key:"doPressComboItem",value:function(e){var t=this.state.selectedComboItems,r=t;t.some((function(t){return t.recKey===e.recKey}))?(r=t.filter((function(t){return t.recKey!==e.recKey})),this.setState({selectedComboItems:r,selectedComboItem:null,selectedModBundle:null})):(r.push(e),this.setState({selectedComboItems:r,selectedComboItem:e,selectedModBundle:null}))}},{key:"handleUpdateFromProcedureMessage",value:function(e){e||this.setState({overlayProcedureMessageVisible:!1})}},{key:"handleUpdateFromAlert",value:function(e){var t=this.state;t.selectedTable,t.selectedTableItem;this.setState({overlayAlertVisible:!1,overlayAlertInputValue:""})}},{key:"doValidateQty",value:function(e){!e||isNaN(e)?this.setState({qtyInput:"0"}):this.setState({qtyInput:e})}},{key:"doChangeQty",value:function(e){var t=this.state.qtyInput,r=Number(t);if("PLUS"===e)this.setState({qtyInput:(r+1).toString()});else if("MINUS"===e){if(r<=1)return;this.setState({qtyInput:(r-1).toString()})}}},{key:"doToggleOrderType",value:function(){var e=this.state,t=e.orderType,r=e.comboItems;"A"===t?(r.forEach((function(e){e.modInput=e.modInput.replace("*"+p.default.get("takeaway")+"  ",""),e.modInput="*"+p.default.get("takeaway")+"  "+e.modInput})),this.setState({orderType:"B",comboItems:r})):(r.forEach((function(e){e.modInput=e.modInput.replace("*"+p.default.get("takeaway")+"  ","")})),this.setState({orderType:"A",comboItems:r}))}},{key:"doPressModBundle",value:function(e){this.setState({selectedModBundle:e})}},{key:"doPressMod",value:function(e){var t=this.state,r=t.selectedModBundle,n=t.selectedComboItem,l=t.comboItems,a=l.find((function(e){return e.recKey===n.recKey})).modInput,o=l.find((function(e){return e.recKey===n.recKey})).modRecKeys;"A"===r.modmas.modType?l.find((function(e){return e.recKey===n.recKey})).modRecKeys.some((function(t){return t===e.recKey.toString()}))?(a=a.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))):(a+="*"+e.name+"  ",o.push(e.recKey.toString())):(r.moditems.forEach((function(e){a=a.replace("*"+e.name+"  ",""),o=o.filter((function(t){return t!==e.recKey.toString()}))})),l.find((function(e){return e.recKey===n.recKey})).modRecKeys.some((function(t){return t===e.recKey.toString()}))||(a+="*"+e.name+"  ",o.push(e.recKey.toString())));var i=l;i.find((function(e){return e.recKey===n.recKey})).modInput=a,i.find((function(e){return e.recKey===n.recKey})).modRecKeys=o,this.setState({comboItems:i})}},{key:"doSubmit",value:function(){var e=this,t=this.props.navigation,r=this.state,n=r.serviceEntry,l=r.home,a=r.selectedTable,o=r.selectedMenu,i=r.selectedTableItem,s=r.mods,d=(r.masters,r.settings),c=r.modBundles,u=r.comboGroups,f=r.comboItems,h=r.selectedComboItems,y=r.menuName,g=r.qtyInput,m=r.orderType;if(a)if("SYS"===a.sectionId||"C"===a.statusFlg)if(u.some((function(e){return h.filter((function(t){return t.groupNo===e.groupNo})).length>e.maxSelectItem||h.filter((function(t){return t.groupNo===e.groupNo})).length<e.minSelectItem})))this.setState({overlayProcedureMessageVisible:"CHECK MIN MAX",loading:!1});else if(h.some((function(e){return c.filter((function(t){return"Y"===t.modmas.mustFlg&&("Y"===t.modmas.globalFlg||s.some((function(r){return r.menuId===e.menuId&&r.modId===t.modmas.modId})))})).some((function(t){return!t.moditems.some((function(t){return e.modRecKeys.some((function(e){return e===t.recKey.toString()}))}))}))})))this.setState({overlayProcedureMessageVisible:"CHECK COMPULSORY MODIFIERS",loading:!1});else if(i){var p=n+"api/tables/"+a.recKey+"/update-combo",x={opentableRecKey:a.recKey,opentableItemRecKey:i.recKey,userId:l.userId,restmenuRecKey:o.recKey,orderQty:g,orderType:m,menuName:y,itemPayloads:h.map((function(e){return{combogroupRecKey:u.find((function(t){return t.groupNo===e.groupNo})).recKey,comboitemRecKey:e.recKey,restmenuMod:f.find((function(t){return t.recKey===e.recKey})).modInput,modRecKeys:f.find((function(t){return t.recKey===e.recKey})).modRecKeys.join(","),orderQty:g,orderType:m}}))};fetch(p,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(r){var o;"Y"===(null==(o=d.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(n,"Update Item",l.userName,r.message,a.tableId,y),console.log("post update-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else{var v=n+"api/tables/"+a.recKey+"/insert-combo",b={opentableRecKey:a.recKey,userId:l.userId,restmenuRecKey:o.recKey,orderQty:g,orderType:m,menuName:y,itemPayloads:h.map((function(e){return{combogroupRecKey:u.find((function(t){return t.groupNo===e.groupNo})).recKey,comboitemRecKey:e.recKey,restmenuMod:f.find((function(t){return t.recKey===e.recKey})).modInput,modRecKeys:f.find((function(t){return t.recKey===e.recKey})).modRecKeys.join(","),orderQty:g,orderType:m}}))};fetch(v,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(b)}).then((function(e){return e.json()})).then((function(r){var o;"Y"===(null==(o=d.find((function(e){return"BISTRODEBUG"===e.setId})))?void 0:o.setString)&&K(n,"Insert Item",l.userName,r.message,a.tableId,y),console.log("post insert-item successful",r),r.message?e.setState({overlayProcedureMessageVisible:r.message.toUpperCase(),loading:!1}):t.goBack()}))}else this.setState({overlayProcedureMessageVisible:"CHECK TABLE STATUS",loading:!1});else this.setState({overlayProcedureMessageVisible:"MISSING TABLE",loading:!1})}},{key:"render",value:function(){var e,t,r=this,n=this.props,l=n.navigation,a=(n.route,this.state),o=a.loading,i=a.preference,s=a.home,d=a.selectedMenu,c=(a.selectedTableItem,a.masters),u=a.mods,h=a.modBundles,y=a.selectedModBundle,g=a.menuName,m=a.qtyInput,x=a.orderType,v=a.comboGroups,b=a.comboItems,j=(a.selectedComboItems,a.selectedComboItem),T=a.overlayProcedureMessageVisible,S=a.overlayAlertVisible,I=a.overlayAlertInputValue;return(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row",backgroundColor:"rgba(0,0,0,0.9)"},children:[S&&(0,O.jsx)(ee,{input:I,handleUpdateFromAlert:this.handleUpdateFromAlert}),T&&(0,O.jsx)(q,{text:T,handleUpdateFromProcedureMessage:this.handleUpdateFromProcedureMessage}),(0,O.jsx)(f.default,{style:{width:10}}),(0,O.jsx)(f.default,{style:{flex:1},children:j&&(0,O.jsx)(f.default,{style:{flex:1,marginVertical:10,marginLeft:0,backgroundColor:L.grey2,borderRadius:5},children:(0,O.jsxs)(f.default,{style:{flex:1,margin:5,backgroundColor:L.grey4},children:[(0,O.jsxs)(f.default,{style:{alignItems:"center",marginVertical:10},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.paid,fontSize:16},children:j.menuId}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},numberOfLines:2,children:j.menuName})]}),(0,O.jsx)(w.default,{style:gn.modifierTextInput,multiline:!0,placeholder:"CHOOSE FROM PREDEFINED MODIFIERS OR ENTER TEXT",placeholderTextColor:"rgba(255,255,255,0.2)",value:b.find((function(e){return e.recKey===j.recKey})).modInput,onChangeText:function(e){return r.doComboItemModInput(e)}}),(0,O.jsx)(f.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:L.grey2},children:(0,O.jsx)(A.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:L.grey7},children:"MODIFIER"})}),(0,O.jsx)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,children:(0,O.jsxs)(f.default,{style:gn.modContainer,children:[null==u||null==(e=u.filter((function(e){return e.menuId===d.menuId||e.menuId===(null==j?void 0:j.menuId)})))||null==(t=e.map((function(e){return h.find((function(t){return t.modmas.modId===e.modId}))})))?void 0:t.map((function(e){return(0,O.jsx)(R.default,{style:[gn.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:L.paid}],onPress:function(){return r.doPressModBundle(e)},children:(0,O.jsx)(A.default,{style:gn.modText,children:e.modmas.name})},e.modmas.recKey.toString())})),null==h?void 0:h.filter((function(e){return"Y"===e.modmas.globalFlg})).map((function(e){return(0,O.jsx)(R.default,{style:[gn.modButton,"Y"===e.modmas.mustFlg&&{backgroundColor:L.paid}],onPress:function(){return r.doPressModBundle(e)},children:(0,O.jsx)(A.default,{style:gn.modText,children:e.modmas.name})},e.modmas.recKey.toString())}))]})}),(0,O.jsx)(f.default,{style:{height:20,justifyContent:"center",alignItems:"center",backgroundColor:L.grey2},children:(0,O.jsx)(A.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:L.grey7},children:"MODIFIER OPTIONS"})}),(0,O.jsx)(f.default,{style:{flex:1,backgroundColor:L.grey4},children:(0,O.jsx)(_.default,{contentContainerStyle:{flexGrow:1,alignItems:"flex-end",justifyContent:"center"},showsVerticalScrollIndicator:!1,children:null==y?void 0:y.moditems.map((function(e){var t,n;return(0,O.jsxs)(R.default,{style:[gn.modButton,{margin:10},(null==(t=b.find((function(e){return e.recKey===j.recKey})))?void 0:t.modRecKeys.some((function(t){return t===e.recKey.toString()})))&&{backgroundColor:L.occupied}],onPress:function(){return r.doPressMod(e)},children:[(0,O.jsx)(A.default,{style:gn.modText,children:e.name}),0!==e.listPrice&&(0,O.jsxs)(A.default,{style:{position:"absolute",top:-15,right:10,fontFamily:"varela-round",color:L.reserved,fontSize:20},children:[e.listPrice<0?"":"+",null==(n=e.listPrice)?void 0:n.toFixed(2)]})]},e.recKey.toString())}))})})]})})}),(0,O.jsx)(f.default,{style:{flex:2},children:(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row",padding:5},children:[(0,O.jsx)(f.default,{style:{flex:1,margin:5,backgroundColor:L.grey2,borderRadius:5},children:(0,O.jsxs)(f.default,{style:{flex:1,margin:5,marginBottom:0,backgroundColor:L.grey4},children:[(0,O.jsxs)(f.default,{style:{alignItems:"center",marginTop:10},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.paid,fontSize:16},children:d.menuId}),(0,O.jsx)(w.default,{style:{height:50,width:"90%",fontFamily:"varela-round",color:"white",fontSize:20,textAlign:"center",paddingHorizontal:20},editable:"Y"===s.adminFlg||c.privileges.some((function(e){return"EDITITEM"===e.priId})),multiline:!0,blurOnSubmit:!0,value:g,onChangeText:function(e){return r.setState({menuName:e})}})]}),(0,O.jsxs)(f.default,{style:gn.menuQtyRow,children:[(0,O.jsx)(R.default,{style:gn.menuQtyRowFirst,onPress:function(){return r.doChangeQty("MINUS")},children:(0,O.jsx)(F.default,{name:"minus",size:32,color:"rgba(0,0,0,0.85)"})}),(0,O.jsx)(f.default,{style:gn.menuQtyRowSecond,children:(0,O.jsx)(w.default,{style:gn.qtyTextInput,value:m,keyboardType:"numeric",onChangeText:function(e){return r.doValidateQty(e)}})}),(0,O.jsx)(R.default,{style:gn.menuQtyRowThird,onPress:function(){return r.doChangeQty("PLUS")},children:(0,O.jsx)(F.default,{name:"plus",size:32,color:"rgba(0,0,0,0.85)"})})]}),(0,O.jsx)(_.default,{style:{flex:1,backgroundColor:L.grey2,paddingBottom:5},showsVerticalScrollIndicator:!1,children:v.map((function(e){return(0,O.jsxs)(f.default,{children:[(0,O.jsx)(f.default,{style:{height:20,justifyContent:"center",alignItems:"center"},children:(0,O.jsxs)(A.default,{style:{textTransform:"uppercase",fontFamily:"varela-round",fontSize:12,color:"white"},children:[e.groupName," ",(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:12,color:L.paid},children:"MIN"})," ",e.minSelectItem," ",(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:12,color:L.paid},children:"MAX"})," ",e.maxSelectItem]})}),(0,O.jsx)(me.default,{style:{margin:-2.5},showsVerticalScrollIndicator:!1,data:b.filter((function(t){return t.groupNo===e.groupNo})),numColumns:i.pcolsize,keyExtractor:function(e,t){return e.recKey.toString()},renderItem:function(e){var t=e.item;return r.renderComboItem(t)}})]},e.recKey.toString())}))})]})}),(0,O.jsx)(f.default,{style:{margin:5,width:120},children:(0,O.jsxs)(_.default,{style:{flex:1},showsVerticalScrollIndicator:!1,alwaysBounceVertical:!1,children:[(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:80,marginVertical:5}}),(0,O.jsxs)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"A"===x?L.grey3:L.paid,borderRadius:5,marginVertical:5},onPress:function(){return r.doToggleOrderType()},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",textTransform:"uppercase"},children:"A"===x?p.default.get("dinein"):p.default.get("takeaway")}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",textAlign:"center",color:"white",fontSize:10},children:"ORDER TYPE"})]}),(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:o,onPress:function(){return r.setState({loading:!0},(function(){return r.doSubmit()}))},children:(0,O.jsx)(F.default,{name:"check",size:28,color:L.grey4})}),(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:L.grey3,borderRadius:5,marginVertical:5},onPress:function(){return r.doChangeQty("PLUS")},children:(0,O.jsx)(F.default,{name:"plus",size:26,color:"white"})}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:L.grey3,borderRadius:5,marginVertical:5},onPress:function(){return r.doChangeQty("MINUS")},children:(0,O.jsx)(F.default,{name:"minus",size:32,color:"white"})}),(0,O.jsx)(f.default,{style:{paddingHorizontal:5,height:50,marginVertical:5}}),(0,O.jsx)(R.default,{style:{alignItems:"center",paddingHorizontal:5,justifyContent:"center",height:50,backgroundColor:"white",borderRadius:5,marginVertical:5},disabled:o,onPress:function(){return l.goBack()},children:(0,O.jsx)(F.default,{name:"close",size:26,color:L.grey4})})]})})]})})]})}},{key:"renderComboItem",value:function(e){var t,r=this,n=this.state,l=n.preference,a=n.selectedComboItems.some((function(t){return t.recKey===e.recKey}));return(0,O.jsx)(f.default,{style:{flex:1/l.pcolsize},children:(0,O.jsxs)(R.default,{style:{height:70,padding:10,margin:2.5,backgroundColor:a?L.occupied:L.grey4},onPress:function(){return r.doPressComboItem(e)},children:[(0,O.jsx)(f.default,{style:{flex:1},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"white"},numberOfLines:2,children:e.menuName})}),(0,O.jsxs)(f.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:"white",fontSize:12}}),(0,O.jsxs)(A.default,{style:[{fontFamily:"varela-round",fontSize:12,color:0===Number(e.addonPrice)?"transparent":a?"white":L.reserved}],children:["+",null==(t=e.addonPrice)?void 0:t.toFixed(2)]})]})]})})}}]),r}(d.Component),gn=u.default.create({modifierTextInput:{fontFamily:"varela-round",fontSize:20,color:"white",paddingHorizontal:20,height:120,backgroundColor:L.grey3},menuQtyRow:{height:80,flexDirection:"row",justifyContent:"center",alignItems:"center"},menuQtyRowFirst:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center",marginRight:10},menuQtyRowSecond:{flex:1,justifyContent:"center",alignItems:"center"},menuQtyRowThird:{flex:1,flexDirection:"row",justifyContent:"flex-start",alignItems:"center",marginLeft:10},qtyTextInput:{fontFamily:"varela-round",fontSize:32,width:"100%",color:"white",textAlign:"center"},modContainer:{padding:5,flexDirection:"row",flexWrap:"wrap",justifyContent:"center",backgroundColor:L.grey4},modButton:{paddingHorizontal:20,minHeight:32,justifyContent:"center",borderRadius:16,backgroundColor:L.grey2,margin:5},modText:{fontFamily:"varela-round",color:"white",fontSize:20}});function mn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var pn=function(e){(0,o.default)(n,e);var t=mn(n);function n(e){var r;return(0,l.default)(this,n),(r=t.call(this,e)).doRoomParticipate=function(e){console.log("chatbox room-participate",e),r.setState({home:e.home,selectedTable:e.selectedTable,tableItems:e.tableItems})},r.state={serviceEntry:e.route.params.serviceEntry,serviceEntryObj:e.route.params.serviceEntryObj,preference:e.route.params.preference,refresh:Y()().format("HH:mm:ss"),home:null,selectedTable:null,tableItems:[]},r}return(0,a.default)(n,[{key:"componentDidMount",value:function(){var e=this.state,t=e.serviceEntryObj,n=e.preference;null!=n&&n.usecondary&&(r.g.socket=(0,ye.default)(t.restServiceUrl.substring(0,t.restServiceUrl.lastIndexOf("/gateway"))+"/socket.io",{query:{userId:n.usecondary,serviceId:t.epbId}}),r.g.socket.on("room-participate",this.doRoomParticipate))}},{key:"componentWillUnmount",value:function(){r.g.socket&&(r.g.socket.off("room-participate",this.doRoomParticipate),r.g.socket.close())}},{key:"doTranslateTableColor",value:function(e){return e?e.adhocItem?L.adhoc:"SYS"===e.sectionId?"D"===e.statusFlg?L.paid:"A"===e.transType?L.grey5:L.deposit:"A"===e.statusFlg?L.vacant:"B"===e.statusFlg?L.reserved:"C"===e.statusFlg?L.occupied:"D"===e.statusFlg?L.paid:"E"===e.statusFlg?L.unavailable:void 0:L.grey9}},{key:"doTranslateTableStatus",value:function(e){return"SYS"!==e.sectionId?p.default.get(""+e.statusFlg).d("Unknown"):"A"===e.transType?p.default.get("sales"):"G"===e.transType?"Y"===e.homeDelivery?p.default.get("deposit")+"DLY":p.default.get("deposit"):void 0}},{key:"doTranslateTableItemColor",value:function(e){return"Y"===e.fireFlg?L.reserved:"Y"===e.confirmFlg?L.occupied:L.vacant}},{key:"render",value:function(){var e,t,r=this,n=this.props,l=(n.route,n.navigation),a=this.state,o=a.serviceEntryObj,i=a.refresh,s=a.home,d=a.selectedTable,c=a.tableItems;return(0,O.jsxs)(f.default,{style:{flex:1,flexDirection:"row"},children:[(0,O.jsx)(f.default,{style:{width:10,backgroundColor:L.grey8},children:(0,O.jsx)(f.default,{style:{marginTop:30,height:100,backgroundColor:this.doTranslateTableColor(d)}})}),(0,O.jsxs)(f.default,{style:{flex:1,backgroundColor:"white"},children:[(0,O.jsxs)(R.default,{style:{marginHorizontal:10,height:20,flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"},onPress:function(){return l.goBack()},children:[(0,O.jsx)(A.default,{style:xn.footerText,children:null==s?void 0:s.userName}),(0,O.jsx)(A.default,{style:xn.footerText,children:null==s?void 0:s.locName})]}),(0,O.jsxs)(f.default,{style:{margin:7,marginLeft:0,flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(f.default,{style:{margin:3,flex:1,flexDirection:"row"},children:d&&(0,O.jsxs)(f.default,{style:{marginLeft:0,aspectRatio:1,backgroundColor:this.doTranslateTableColor(d),justifyContent:"center",alignItems:"center"},children:[(0,O.jsx)(A.default,{style:xn.tableUpperBand,numberOfLines:1,children:d.vipName||""}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.black8,fontSize:24,letterSpacing:1},numberOfLines:1,children:d.tableId}),(0,O.jsx)(A.default,{style:xn.tableLowerBand,numberOfLines:1,children:this.doTranslateTableStatus(d)})]})}),(0,O.jsx)(f.default,{style:{margin:3,height:100}})]}),(0,O.jsxs)(f.default,{style:{flexDirection:"row",marginVertical:3,borderLeftWidth:5,borderLeftColor:"white"},children:[(0,O.jsx)(f.default,{style:{width:50,height:20,alignItems:"center",justifyContent:"center",borderRightColor:L.paid},children:(0,O.jsx)(A.default,{style:[xn.footerText,{fontSize:12}],children:p.default.get("qty")})}),(0,O.jsx)(f.default,{style:{flex:1,justifyContent:"center"},children:(0,O.jsx)(A.default,{style:[xn.footerText,{fontSize:12}],children:p.default.get("desc")})}),(0,O.jsx)(f.default,{style:{paddingRight:10,alignItems:"flex-end",justifyContent:"center"},children:(0,O.jsx)(A.default,{style:[xn.footerText,{fontSize:12}],children:p.default.get("total")})})]}),(0,O.jsx)(_.default,{style:{flex:1},ref:function(e){return r.scrollViewRef=e},onContentSizeChange:function(){return r.scrollViewRef.scrollToEnd()},showsVerticalScrollIndicator:!1,children:c.filter((function(e){return!e.refRecKey})).map((function(e){var t;return(0,O.jsxs)(f.default,{children:["Y"===e.lineBreak&&(0,O.jsxs)(f.default,{style:{alignItems:"center",flexDirection:"row",height:20},children:[(0,O.jsx)(f.default,{style:{flex:1,height:1,width:20,backgroundColor:L.grey5,marginHorizontal:20}}),(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",color:L.grey5,fontSize:12},children:"LINE BREAK"}),(0,O.jsx)(f.default,{style:{flex:1,height:1,width:20,backgroundColor:L.grey5,marginHorizontal:20}})]}),(0,O.jsxs)(R.default,{style:{flexDirection:"row",marginVertical:3,borderLeftWidth:5,borderLeftColor:r.doTranslateTableItemColor(e)},children:[(0,O.jsx)(f.default,{style:{paddingVertical:10,width:50,alignItems:"center",borderRightColor:L.paid},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16},children:e.orderQty})}),(0,O.jsxs)(f.default,{style:{paddingVertical:10,flex:1},children:[(0,O.jsxs)(f.default,{style:{flexDirection:"row"},children:[(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16},children:e.menuName}),e.menuMod&&(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16,color:L.paid},children:e.menuMod})]}),(0,O.jsx)(f.default,{style:{paddingHorizontal:10,alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:16},children:null==(t=e.lineTotal)?void 0:t.toFixed(2)})})]}),c.filter((function(t){return t.refRecKey===e.recKey})).map((function(e){var t;return(0,O.jsxs)(f.default,{style:{marginTop:5,flexDirection:"row"},children:[(0,O.jsxs)(f.default,{style:{flex:1},children:[(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",fontSize:14,marginLeft:10},children:["- ",e.menuName]}),e.menuMod&&(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:14,color:L.paid},children:e.menuMod})]}),(0,O.jsx)(f.default,{style:{paddingHorizontal:10,alignItems:"flex-end"},children:(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:14},children:e.lineTotal?null==(t=e.lineTotal)?void 0:t.toFixed(2):""})})]},e.recKey.toString())}))]})]})]},e.recKey.toString())}))}),(0,O.jsxs)(f.default,{style:{margin:10,marginBottom:0,flexDirection:"row",justifyContent:"flex-end",alignItems:"baseline"},children:[(0,O.jsx)(A.default,{style:{fontFamily:"varela-round",fontSize:10}}),(0,O.jsxs)(A.default,{style:{fontFamily:"varela-round",fontSize:28},children:["$",(null==d||null==(e=d.grandTotal)?void 0:e.toFixed(2))||"0.00"]})]}),(0,O.jsx)(f.default,{style:{margin:7,flexDirection:"row"}}),(0,O.jsxs)(f.default,{style:{marginHorizontal:10,height:20,flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsx)(A.default,{style:xn.footerText,children:Y()().format("HH:mm")}),(0,O.jsxs)(A.default,{style:xn.footerText,children:["EPB BISTRO ",null==(t=D.default.manifest.version)?void 0:t.split(".")[0]]})]})]}),(0,O.jsx)(f.default,{style:{flex:1,backgroundColor:L.grey1},children:(0,O.jsx)(P.default,{style:{flex:1},source:{uri:o.restServiceUrl+"epbm/api/image/stock?stkId=BISTRO-SECONDARY-"+o.epbId+"&isResourceId=true&skuId=&t="+i},resizeMode:"cover"})})]})}}]),n}(d.Component),xn=u.default.create({footerText:{fontFamily:"varela-round",fontSize:10,textTransform:"uppercase"},tableUpperBand:{position:"absolute",top:10,left:0,fontFamily:"varela-round",width:"100%",paddingVertical:5,justifyContent:"center",alignItems:"center",color:"black",fontSize:12,textAlign:"center",textTransform:"uppercase"},tableLowerBand:{position:"absolute",bottom:0,left:0,fontFamily:"varela-round",width:"100%",paddingVertical:5,backgroundColor:L.black8,justifyContent:"center",alignItems:"center",color:"white",fontSize:12,textAlign:"center",textTransform:"uppercase"},buttonText:{marginTop:10,fontFamily:"varela-round",fontSize:10,color:L.grey5,textTransform:"uppercase"}});function vn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,s.default)(e);if(t){var l=(0,s.default)(this).constructor;r=Reflect.construct(n,arguments,l)}else r=n.apply(this,arguments);return(0,i.default)(this,r)}}var bn=(0,g.default)(),jn=function(e){(0,o.default)(i,e);var t=vn(i);function i(){var e;(0,l.default)(this,i);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={loading:!0},e}return(0,a.default)(i,[{key:"componentDidMount",value:function(){var e=(0,n.default)((function*(){var e={zhs:r(2122),zht:r(1868),en:r(8181),ja:r(3275)},t=yield x.default.getItem("language");yield p.default.init({currentLocale:t||"en",locales:e}),yield m.loadAsync({"varela-round":r(5262)}),"web"!==h.default.OS&&v.BarCodeScanner.getPermissionsAsync().then((function(e){return"granted"!==e.status?v.BarCodeScanner.requestPermissionsAsync():Promise.resolve(e)})),this.setState({loading:!1})}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?(0,O.jsx)(f.default,{}):(0,O.jsxs)(y.default,{children:[(0,O.jsx)(c.default,{hidden:!0}),(0,O.jsxs)(bn.Navigator,{screenOptions:{headerShown:!1,animation:"none",gestureEnabled:!1},children:[(0,O.jsx)(bn.Screen,{name:"Login",component:se,options:se.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Register",component:jt,options:jt.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Preference",component:ne,options:ne.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Secondary",component:pn,options:pn.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Main",component:gt,options:gt.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Pos",component:lr,options:lr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Split",component:wt,options:wt.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Void",component:Ar,options:Ar.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Collect",component:Mr,options:Mr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Transfer",component:wr,options:wr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Resequence",component:Fr,options:Fr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Reprint",component:Sr,options:Sr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Report",component:br,options:br.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Printer",component:yr,options:yr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Dayclose",component:ur,options:ur.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Adhoc",component:sr,options:sr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Scan",component:Jr,options:Jr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Trace",component:Zr,options:Zr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Activate",component:rn,options:rn.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Limit",component:an,options:an.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Table",component:Kr,options:Kr.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Fire",component:dn,options:dn.navigationOptions}),(0,O.jsx)(bn.Screen,{name:"Menu",component:Yr,options:{presentation:"transparentModal"}}),(0,O.jsx)(bn.Screen,{name:"Combo",component:yn,options:{presentation:"transparentModal"}})]})]})}}]),i}(d.Component);u.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},6700:(e,t,r)=>{var n={"./af":4506,"./af.js":4506,"./ar":9687,"./ar-dz":2887,"./ar-dz.js":2887,"./ar-kw":6307,"./ar-kw.js":6307,"./ar-ly":1664,"./ar-ly.js":1664,"./ar-ma":9926,"./ar-ma.js":9926,"./ar-sa":5207,"./ar-sa.js":5207,"./ar-tn":2912,"./ar-tn.js":2912,"./ar.js":9687,"./az":5011,"./az.js":5011,"./be":5997,"./be.js":5997,"./bg":4427,"./bg.js":4427,"./bm":5385,"./bm.js":5385,"./bn":7703,"./bn-bd":7002,"./bn-bd.js":7002,"./bn.js":7703,"./bo":9841,"./bo.js":9841,"./br":5642,"./br.js":5642,"./bs":4707,"./bs.js":4707,"./ca":3512,"./ca.js":3512,"./cs":9497,"./cs.js":9497,"./cv":6479,"./cv.js":6479,"./cy":9318,"./cy.js":9318,"./da":7229,"./da.js":7229,"./de":3460,"./de-at":1044,"./de-at.js":1044,"./de-ch":6445,"./de-ch.js":6445,"./de.js":3460,"./dv":2096,"./dv.js":2096,"./el":6048,"./el.js":6048,"./en-au":4301,"./en-au.js":4301,"./en-ca":6855,"./en-ca.js":6855,"./en-gb":761,"./en-gb.js":761,"./en-ie":6127,"./en-ie.js":6127,"./en-il":9157,"./en-il.js":9157,"./en-in":7199,"./en-in.js":7199,"./en-nz":1511,"./en-nz.js":1511,"./en-sg":7309,"./en-sg.js":7309,"./eo":2160,"./eo.js":2160,"./es":8582,"./es-do":1885,"./es-do.js":1885,"./es-mx":8131,"./es-mx.js":8131,"./es-us":6962,"./es-us.js":6962,"./es.js":8582,"./et":8890,"./et.js":8890,"./eu":7704,"./eu.js":7704,"./fa":2562,"./fa.js":2562,"./fi":877,"./fi.js":877,"./fil":4246,"./fil.js":4246,"./fo":8341,"./fo.js":8341,"./fr":9867,"./fr-ca":2347,"./fr-ca.js":2347,"./fr-ch":7683,"./fr-ch.js":7683,"./fr.js":9867,"./fy":1982,"./fy.js":1982,"./ga":3905,"./ga.js":3905,"./gd":3443,"./gd.js":3443,"./gl":6905,"./gl.js":6905,"./gom-deva":1324,"./gom-deva.js":1324,"./gom-latn":1890,"./gom-latn.js":1890,"./gu":7134,"./gu.js":7134,"./he":6835,"./he.js":6835,"./hi":1394,"./hi.js":1394,"./hr":3564,"./hr.js":3564,"./hu":6269,"./hu.js":6269,"./hy-am":7269,"./hy-am.js":7269,"./id":4254,"./id.js":4254,"./is":8699,"./is.js":8699,"./it":8301,"./it-ch":5060,"./it-ch.js":5060,"./it.js":8301,"./ja":4642,"./ja.js":4642,"./jv":2168,"./jv.js":2168,"./ka":4501,"./ka.js":4501,"./kk":9537,"./kk.js":9537,"./km":5808,"./km.js":5808,"./kn":4881,"./kn.js":4881,"./ko":2951,"./ko.js":2951,"./ku":2452,"./ku.js":2452,"./ky":1853,"./ky.js":1853,"./lb":7639,"./lb.js":7639,"./lo":4502,"./lo.js":4502,"./lt":874,"./lt.js":874,"./lv":8237,"./lv.js":8237,"./me":7878,"./me.js":7878,"./mi":4234,"./mi.js":4234,"./mk":7535,"./mk.js":7535,"./ml":3896,"./ml.js":3896,"./mn":3046,"./mn.js":3046,"./mr":927,"./mr.js":927,"./ms":7224,"./ms-my":6332,"./ms-my.js":6332,"./ms.js":7224,"./mt":4866,"./mt.js":4866,"./my":4206,"./my.js":4206,"./nb":6723,"./nb.js":6723,"./ne":5097,"./ne.js":5097,"./nl":7529,"./nl-be":1355,"./nl-be.js":1355,"./nl.js":7529,"./nn":296,"./nn.js":296,"./oc-lnc":4802,"./oc-lnc.js":4802,"./pa-in":7057,"./pa-in.js":7057,"./pl":9850,"./pl.js":9850,"./pt":5552,"./pt-br":3726,"./pt-br.js":3726,"./pt.js":5552,"./ro":1717,"./ro.js":1717,"./ru":9117,"./ru.js":9117,"./sd":1742,"./sd.js":1742,"./se":2049,"./se.js":2049,"./si":3329,"./si.js":3329,"./sk":7619,"./sk.js":7619,"./sl":6707,"./sl.js":6707,"./sq":9051,"./sq.js":9051,"./sr":436,"./sr-cyrl":3408,"./sr-cyrl.js":3408,"./sr.js":436,"./ss":7500,"./ss.js":7500,"./sv":6950,"./sv.js":6950,"./sw":4222,"./sw.js":4222,"./ta":3746,"./ta.js":3746,"./te":1130,"./te.js":1130,"./tet":4740,"./tet.js":4740,"./tg":3378,"./tg.js":3378,"./th":628,"./th.js":628,"./tk":2622,"./tk.js":2622,"./tl-ph":100,"./tl-ph.js":100,"./tlh":2871,"./tlh.js":2871,"./tr":3600,"./tr.js":3600,"./tzl":8985,"./tzl.js":8985,"./tzm":3627,"./tzm-latn":1145,"./tzm-latn.js":1145,"./tzm.js":3627,"./ug-cn":4790,"./ug-cn.js":4790,"./uk":7712,"./uk.js":7712,"./ur":9529,"./ur.js":9529,"./uz":9141,"./uz-latn":1737,"./uz-latn.js":1737,"./uz.js":9141,"./vi":8205,"./vi.js":8205,"./x-pseudo":697,"./x-pseudo.js":697,"./yo":7826,"./yo.js":7826,"./zh-cn":3994,"./zh-cn.js":3994,"./zh-hk":6892,"./zh-hk.js":6892,"./zh-mo":3884,"./zh-mo.js":3884,"./zh-tw":5136,"./zh-tw.js":5136};function l(e){var t=a(e);return r(t)}function a(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=a,e.exports=l,l.id=6700},5262:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/VarelaRound-Regular.6cfe696a1cfb40dea260.woff"},2482:()=>{},4654:()=>{},8181:e=>{"use strict";e.exports=JSON.parse('{"accesscode":"Access Code","A":"Vacant","B":"Reserved","C":"Occupied","D":"Paid","E":"Unavailable","action":"Action","cancel":"Cancel","qty":"Qty","desc":"Desc","price":"Price","total":"Total","back":"Back","retail":"Retail","takeaway":"Take Away","dinein":"Dine In","menu":"Menu","payment":"Payment","floorplan":"Floor Plan","func":"Func","send":"Send","fire":"Fire","adhoc":"Adhoc","type":"Type","scan":"Scan","barcode":"Barcode","submit":"Submit","bill":"Bill","firecourse":"Fire Course","course":"Course","beverage":"Beverage","soup":"Soup","appetizer":"Appetizer","main":"Main","dessert":"Dessert","sales":"Sales","deposit":"Deposit","choose":"Choose","select":"Select","printer":"Printer","left":"Left","press":"Press","default":"Default","all":"All","void":"Void","reopen":"Reopen","test":"Test","collect":"Collect","update":"Update","preference":"Preference","yes":"Yes","transfer":"Transfer","online":"Online","offline":"Offline","user":"User","combo":"Combo","print":"Print","active":"Active","inactive":"Inactive","enter":"Enter","search":"Search","text":"Text","add":"Add","no":"No","table":"Table","open":"Open","edit":"Edit","close":"Close","reset":"Reset","reserve":"Reserve","disable":"Disable","mergetable":"Merge Table","splittable":"Split Table","changetable":"Change Table","printbill":"Print Bill","resequence":"Resequence","transferitems":"Transfer Items","headerdisc":"Header Disc","item":"Item","reviseitem":"Revise Item","remove":"Remove","duplicate":"Duplicate","changeprice":"Change Price","linedisc":"Line Disc","revert":"Revert","linebreak":"Line Break","tips":"Tips","drawer":"Drawer","splitbill":"Split Bill","mergebill":"Merge Bill","unsplit":"Undo Split","unmerge":"Undo Merge","beforedisc":"Before Disc","totaldisc":"Total Disc","servicecharge":"Service Charge","grandtotal":"Grand Total","tax":"Tax","pay":"Pay","balance":"Balance","tender":"Tender","change":"Change","additionalfunctions":"Additional Functions","reprint":"Reprint","voidreceipts":"Void Receipts","collection":"Collection","opendrawer":"Open Drawer","testprint":"Test Printer","dayend":"Day-end","reports":"Reports","activate":"Activate","syncmasters":"Sync Masters","logout":"Log Out","trace":"Trace","limited":"Limited"}')},3275:e=>{"use strict";e.exports=JSON.parse('{"accesscode":"\u30d1\u30b9","A":"\u7a7a\u5ba4","B":"\u4e88\u7d04\u3057\u305f","C":"\u6709\u4eba","D":"\u6709\u7d66\u306e","E":"\u7121\u52b9","action":"\u64cd\u4f5c","cancel":"\u53d6\u6d88","qty":"\u6570\u91cf","desc":"\u53d9\u8ff0","price":"\u4fa1\u683c","total":"\u5408\u8a08","back":"\u8fd4\u3059","retail":"\u5c0f\u58f2","takeaway":"\u6301\u3061\u53bb\u308b","dinein":"\u3067\u98df\u3079\u308b","menu":"\u30e1\u30cb\u30e5\u30fc","payment":"\u652f\u6255","floorplan":"\u9593\u53d6\u308a","func":"\u50cd\u304d","send":"\u51fa\u3059","fire":"\u4fc3\u3059","adhoc":"\u81e8\u6642","type":"\u7a2e\u985e","scan":"\u30b9\u30ad\u30e3\u30f3","barcode":"\u30d0\u30fc\u30b3\u30fc\u30c9","submit":"\u78ba\u8a8d","bill":"\u4ed8\u3051","firecourse":"\u30d5\u30a1\u30a4\u30e4\u30fc\u30b3\u30fc\u30b9","course":"\u30b3\u30fc\u30b9","beverage":"\u98f2\u6599","soup":"\u30b9\u30fc\u30d7","appetizer":"\u524d\u83dc","main":"\u4e3b\u83dc","dessert":"\u751c\u54c1","sales":"\u9500\u552e","deposit":"\u5b9a\u91d1","choose":"\u9078\u3076","select":"\u9078\u3076","printer":"\u30d7\u30ea\u30f3\u30bf\u30fc","left":"\u5269","press":"\u62bc\u3059","default":"\u65e2\u5b9a","all":"\u5168","void":"\u53d6\u6d88","reopen":"\u518d\u958b","test":"\u30c6\u30b9\u30c8","collect":"\u63d0\u53d6","update":"\u66f4\u65b0","preference":"\u597d\u307f","yes":"\u306f\u3044","transfer":"\u79fb\u884c","online":"\u30aa\u30f3\u30e9\u30a4\u30f3","offline":"\u30aa\u30d5\u30e9\u30a4\u30f3","user":"\u4f7f\u7528\u8005","combo":"\u5957\u9910","print":"\u5370\u5237","active":"\u6d3b\u6027\u306a","inactive":"\u975e\u6d3b\u6027","enter":"\u30a8\u30f3\u30bf\u30fc","search":"\u63a2\u3059","text":"\u672c\u6587","add":"Add","no":"No","table":"\u5353","open":"\u958b\u3044\u305f","edit":"\u7de8\u96c6","close":"\u9078\u3076","reset":"\u30ea\u30bb\u30c3\u30c8","reserve":"\u4e88\u7d04","disable":"\u3067\u304d\u306a\u304f\u3059\u308b","mergetable":"\u5e76\u684c","splittable":"\u62c6\u684c","changetable":"\u6362\u684c","printbill":"\u4ed8\u3051","resequence":"\u9806\u5e8f","transferitems":"\u79fb\u884c","headerdisc":"\u6574\u5355\u5272\u5f15","item":"\u9805\u76ee","reviseitem":"\u7de8\u96c6\u9805\u76ee","remove":"\u9664\u304f","duplicate":"\u8907\u88fd","changeprice":"\u4fa1\u683c\u5909\u66f4","linedisc":"\u9805\u76ee\u5272\u5f15","revert":"\u623b\u3059","linebreak":"\u6539\u884c","tips":"\u30c1\u30c3\u30d7","drawer":"\u92ad\u7bb1","splitbill":"\u5206\u5f00\u7ed3\u8d26","mergebill":"\u5408\u5e76\u7ed3\u8d26","unsplit":"\u64a4\u6d88\u62c6\u5206","unmerge":"\u64a4\u6d88\u5408\u5e76","beforedisc":"\u5c0f\u8ba1","totaldisc":"\u5272\u5f15","servicecharge":"\u30b5\u30fc\u30d3\u30b9\u6599","grandtotal":"\u7dcf\u8a08","tax":"\u7a0e","pay":"\u5165\u91d1","balance":"\u6b8b\u9ad8","tender":"\u5165\u672d","change":"\u5c0f\u92ad","additionalfunctions":"\u8ffd\u52a0\u6a5f\u80fd","reprint":"\u8ee2\u8f09","voidreceipts":"\u5220\u5355","collection":"\u63d0\u53d6","opendrawer":"\u92ad\u7bb1","testprint":"\u6d4b\u8bd5\u6253\u5370","dayend":"\u65e5\u5e30\u308a","reports":"\u30ec\u30dd\u30fc\u30c8","activate":"\u6d3b\u6027\u5316","syncmasters":"\u540c\u671f\u3059\u308b","logout":"\u767b\u51fa","trace":"\u75d5\u8de1","limited":"\u9650\u5b9a\u30e1\u30cb\u30e5\u30fc"}')},2122:e=>{"use strict";e.exports=JSON.parse('{"accesscode":"\u767b\u5f55\u4ee3\u7801","A":"\u7a7a\u684c","B":"\u5df2\u4fdd\u7559","C":"\u7528\u9910\u4e2d","D":"\u5df2\u7ed3\u8d26","E":"\u505c\u7528","action":"\u52a8\u4f5c","cancel":"\u53d6\u6d88","qty":"\u6570\u91cf","desc":"\u63cf\u8ff0","price":"\u5355\u4ef7","total":"\u5c0f\u8ba1","back":"\u8fd4\u56de","retail":"\u96f6\u552e","takeaway":"\u5e26\u8d70","dinein":"\u5802\u98df","menu":"\u83dc\u5355","payment":"\u4ed8\u6b3e","floorplan":"\u5e73\u9762\u56fe","func":"\u529f\u80fd","send":"\u53d1\u9001","fire":"\u50ac\u5355","adhoc":"\u7279\u8bbe","type":"\u7c7b\u578b","scan":"\u626b\u63cf","barcode":"\u6761\u7801","submit":"\u63d0\u4ea4","bill":"\u8d26\u5355","firecourse":"\u901a\u544a\u53a8\u5e08","course":"\u81b3\u9053","beverage":"\u996e\u6599","soup":"\u6c64","appetizer":"\u5f00\u80c3\u83dc","main":"\u4e3b\u83dc","dessert":"\u751c\u54c1","sales":"\u9500\u552e","deposit":"\u5b9a\u91d1","choose":"\u9009\u62e9","select":"\u9009\u62e9","printer":"\u6253\u5370\u673a","left":"\u5269","press":"\u70b9\u51fb","default":"\u9ed8\u8ba4","all":"\u5168\u90e8","void":"\u5220\u5355","reopen":"\u91cd\u5f00","test":"\u6d4b\u8bd5","collect":"\u63d0\u53d6","update":"\u66f4\u65b0","preference":"\u503e\u5411","yes":"\u662f","transfer":"\u8f6c\u79fb","online":"\u5728\u7ebf","offline":"\u4e0b\u7ebf","user":"\u7528\u6237","combo":"\u5957\u9910","print":"\u6253\u5370","active":"\u6d3b\u8dc3","inactive":"\u975e\u6d3b\u8dc3","enter":"\u8f93\u5165","search":"\u641c\u7d22","text":"\u5b57\u6bb5","add":"Add","no":"No","table":"\u684c\u53f7","open":"\u5f00\u684c","edit":"\u7f16\u8f91","close":"\u5173\u95ed","reset":"\u91cd\u7f6e","reserve":"\u4fdd\u7559","disable":"\u505c\u7528","mergetable":"\u5e76\u684c","splittable":"\u62c6\u684c","changetable":"\u6362\u684c","printbill":"\u8d26\u5355","resequence":"\u6392\u5e8f","transferitems":"\u8f6c\u79fb\u9879\u76ee","headerdisc":"\u6574\u5355\u6298\u6263","item":"\u9879\u76ee","reviseitem":"\u7f16\u8f91\u9879\u76ee","remove":"\u79fb\u9664","duplicate":"\u590d\u5236","changeprice":"\u4fee\u6539\u5355\u4ef7","linedisc":"\u6298\u6263","revert":"\u5f52\u8fd8","linebreak":"\u5212\u7ebf\u5206\u5272","tips":"\u5c0f\u8d39","drawer":"\u6536\u94f6\u673a","splitbill":"\u5206\u5f00\u7ed3\u8d26","mergebill":"\u5408\u5e76\u7ed3\u8d26","unsplit":"\u64a4\u6d88\u62c6\u5206","unmerge":"\u64a4\u6d88\u5408\u5e76","beforedisc":"\u5c0f\u8ba1","totaldisc":"\u6298\u6263","servicecharge":"\u670d\u52a1\u8d39","grandtotal":"\u603b\u8ba1","tax":"\u6d88\u8d39\u7a0e","pay":"\u5e94\u4ed8\u91d1\u989d","balance":"\u4f59\u989d","tender":"\u5b9e\u6536\u91d1\u989d","change":"\u627e\u96f6","additionalfunctions":"\u989d\u5916\u529f\u80fd","reprint":"\u91cd\u5370","voidreceipts":"\u5220\u5355","collection":"\u63d0\u53d6","opendrawer":"\u6253\u5f00\u6536\u94f6\u673a","testprint":"\u6d4b\u8bd5\u6253\u5370","dayend":"\u65e5\u7ed3","reports":"\u62a5\u8868","activate":"\u542f\u52a8\u83dc\u5355","syncmasters":"\u540c\u6b65\u6570\u636e","logout":"\u767b\u51fa","trace":"\u8ffd\u8e2a","limited":"\u9650\u5b9a\u83dc\u5355"}')},1868:e=>{"use strict";e.exports=JSON.parse('{"accesscode":"\u767b\u9304\u865f\u78bc","A":"\u7a7a\u684c","B":"\u5df2\u4fdd\u7559","C":"\u7528\u9910\u4e2d","D":"\u5df2\u7d50\u8cec","E":"\u505c\u7528","action":"\u52d5\u4f5c","cancel":"\u53d6\u6d88","qty":"\u6578\u91cf","desc":"\u63cf\u8ff0","price":"\u55ae\u50f9","total":"\u5c0f\u8a08","back":"\u8fd4\u56de","retail":"\u96f6\u552e","takeaway":"\u5e26\u8d70","dinein":"\u5802\u98df","menu":"\u83dc\u55ae","payment":"\u4ed8\u6b3e","floorplan":"\u5e73\u9762\u5716","func":"\u529f\u80fd","send":"\u767c\u9001","fire":"\u50ac\u55ae","adhoc":"\u7279\u8a2d","type":"\u985e\u578b","scan":"\u6383\u63cf","barcode":"\u689d\u78bc","submit":"\u63d0\u4ea4","bill":"\u8cec\u55ae","firecourse":"\u901a\u544a\u5eda\u5e2b","course":"\u81b3\u9053","beverage":"\u98f2\u6599","soup":"\u6e6f","appetizer":"\u958b\u80c3\u83dc","main":"\u4e3b\u83dc","dessert":"\u751c\u54c1","sales":"\u92b7\u552e","deposit":"\u8a02\u91d1","choose":"\u9078\u64c7","select":"\u9078\u64c7","printer":"\u6253\u5370\u6a5f","left":"\u5269","press":"\u9ede\u64ca","default":"\u9ed8\u8a8d","all":"\u5168\u90e8","void":"\u5220\u55ae","reopen":"\u91cd\u958b","test":"\u6e2c\u8a66","collect":"\u63d0\u53d6","update":"\u66f4\u65b0","preference":"\u50be\u5411","yes":"\u662f","transfer":"\u8f49\u79fb","online":"\u5728\u7dab","offline":"\u4e0b\u7dab","user":"\u7528\u6237","combo":"\u5957\u9910","print":"\u6253\u5370","active":"\u6d3b\u8e8d","inactive":"\u975e\u6d3b\u8e8d","enter":"\u8f38\u5165","search":"\u641c\u7d22","text":"\u5b57\u6bb5","add":"Add","no":"No","table":"\u684c\u865f","open":"\u958b\u684c","edit":"\u7de8\u8f2f","close":"\u95dc\u9589","reset":"\u91cd\u7f6e","reserve":"\u4fdd\u7559","disable":"\u505c\u7528","mergetable":"\u62fc\u684c","splittable":"\u62c6\u684c","changetable":"\u8f49\u684c","printbill":"\u8cec\u55ae","resequence":"\u6392\u5e8f","transferitems":"\u8f49\u79fb\u9805\u76ee","headerdisc":"\u6574\u55ae\u6298\u6263","item":"\u9805\u76ee","reviseitem":"\u7de8\u5236\u9805\u76ee","remove":"\u79fb\u9664","duplicate":"\u8907\u88fd","changeprice":"\u4fee\u6539\u55ae\u50f9","linedisc":"\u6298\u6263","revert":"\u6b78\u9084","linebreak":"","tips":"\u5c0f\u8cbb","drawer":"\u6536\u9280\u6a5f","splitbill":"\u5206\u958b\u7d50\u8cec","mergebill":"\u5408\u62fc\u7d50\u8cec","unsplit":"\u64a4\u6d88\u62c6\u5206","unmerge":"\u64a4\u6d88\u5408\u62fc","beforedisc":"\u5c0f\u8a08","totaldisc":"\u6298\u6263","servicecharge":"\u670d\u52d9\u8cbb","grandtotal":"\u7e3d\u8a08","tax":"\u6d88\u8cbb\u7a05","pay":"\u61c9\u4ed8\u91d1\u984d","balance":"\u9918\u984d","tender":"\u5be6\u6536\u91d1\u984d","change":"\u627e\u96f6","additionalfunctions":"\u984d\u5916\u529f\u80fd","reprint":"\u91cd\u5370","voidreceipts":"\u5220\u55ae","collection":"\u63d0\u53d6","opendrawer":"\u6253\u958b\u6536\u9280\u6a5f","testprint":"\u6e2c\u8a66\u6253\u5370","dayend":"\u65e5\u7ed3","reports":"\u5831\u8868","activate":"\u5553\u52d5\u83dc\u55ae","syncmasters":"\u540c\u6b65\u6578\u64da","logout":"\u767b\u51fa","trace":"\u8ffd\u8e2a","limited":"\u9650\u5b9a\u83dc\u55ae"}')}},t={};function r(n){var l=t[n];if(void 0!==l)return l.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,(()=>{var e=[];r.O=(t,n,l,a)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,l,a]=e[c],i=!0,s=0;s<n.length;s++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(i=!1,a<o&&(o=a));if(i){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,l,a]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,l){if(1&l&&(n=this(n)),8&l)return n;if("object"===typeof n&&n){if(4&l&&n.__esModule)return n;if(16&l&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&l&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,r.d(a,o),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.p="./",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var l,a,[o,i,s]=n,d=0;if(o.some((t=>0!==e[t]))){for(l in i)r.o(i,l)&&(r.m[l]=i[l]);if(s)var c=s(r)}for(t&&t(n);d<o.length;d++)a=o[d],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[556],(()=>r(9386)));n=r.O(n)})();
//# sourceMappingURL=main.24928457.js.map